import{l as D,o as a,c,d as u,b as t,t as m,r as h,m as E,e as f,w as b,f as y,T as V,a as U,F as _,k as v,p as W,n as w}from"./app-CEqZm7x2.js";import{L as S}from"./Logo-B2wTlgs-.js";import{A as Y}from"./Alert-C7rdlNs-.js";import{F as q}from"./FormMixin-C7gN2sKm.js";import{_ as x}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{R as Z}from"./RightSideAlerts-CHiN7udf.js";import{A as I}from"./AddButton-CnL565Hx.js";import{g as Q}from"./api-repository-BYhA_WkR.js";import{a as G}from"./auth-repository-Ba0ynhfu.js";import{S as N}from"./SpinningLoader-DgjJNHBi.js";import{S as J}from"./StatusDot-GX_PwuGs.js";import{P as K}from"./ProfilePhoto-CYDgSyg1.js";import{u as X}from"./form-store-CrrDqP0A.js";import"./UtilsMixin-CbFS-0FV.js";import"./PrimaryButton-DiavIMuW.js";import"./InputErrorMessage-BPFjWBUg.js";const ee={name:"SlideUpDown",props:{active:Boolean,duration:{type:Number,default:500},tag:{type:String,default:"div"},useHidden:{type:Boolean,default:!0}},data:()=>({style:{},initial:!1,hidden:!1}),watch:{active(){this.layout()}},render(){return D(this.tag,{...this.attrs,style:this.style,ref:"container",onTransitionend:this.onTransitionEnd},this.$slots.default())},mounted(){this.layout(),this.initial=!0},created(){this.hidden=!this.active},computed:{el(){return this.$refs.container},attrs(){const e={"aria-hidden":!this.active,"aria-expanded":this.active};return this.useHidden&&(e.hidden=this.hidden),e}},methods:{layout(){this.active?(this.hidden=!1,this.$emit("open-start"),this.initial&&this.setHeight("0px",()=>this.el.scrollHeight+"px")):(this.$emit("close-start"),this.setHeight(this.el.scrollHeight+"px",()=>"0px"))},asap(e){this.initial?this.$nextTick(e):e()},setHeight(e,s){this.style={height:e},this.asap(()=>{this.__=this.el.scrollHeight,this.style={height:s(),overflow:"hidden","transition-property":"height","transition-duration":this.duration+"ms"}})},onTransitionEnd(e){e.target===this.el&&(this.active?(this.style={},this.$emit("open-end")):(this.style={height:"0",overflow:"hidden"},this.hidden=!0,this.$emit("close-end")))}}},te={components:{Logo:S},data(){return{currentYear:new Date().getFullYear()}}},se={class:"flex justify-center items-center p-8 m-4 border-t"},oe={class:"block text-sm text-gray-500 sm:text-center dark:text-gray-400"};function re(e,s,i,n,o,r){const g=h("Logo");return a(),c("footer",se,[u(g,{height:"w-8",class:"mr-2"}),t("span",oe,"Â© 2018 - "+m(o.currentYear)+" Optimum Quality. All Rights Reserved",1)])}const ie=x(te,[["render",re]]),ae={components:{Logo:S,SpinningLoader:N},data(){return{loader:E()}},computed:{isVisible(){return this.loader.isVisible}}},ne={key:0,class:"absolute top-0 bottom-0 left-0 right-0 inset-0 bg-white bg-opacity-90 z-50"},le={class:"absolute w-full flex justify-center items-center h-screen"};function ce(e,s,i,n,o,r){const g=h("SpinningLoader");return a(),f(V,{name:"fade-loader"},{default:b(()=>[r.isVisible?(a(),c("div",ne,[t("div",le,[u(g,{size:"custom",customSize:"w-8 h-8 border-4"})])])):y("",!0)]),_:1})}const he=x(ae,[["render",ce]]),ue={mixins:[q],components:{SlideUpDown:ee,Alert:Y,RightSideAlerts:Z,AddButton:I,Logo:S,Footer:ie,StatusDot:J,SpinningLoader:N,PageLoader:he,ProfilePhoto:K},data(){return{isLoggingOut:!1,authState:U(),isLoadingStoresAsTeamMember:!1,notificationState:X(),storeLinks:[],links:[{label:"My Profile",name:"show-profile"},{label:"Stores",name:"show-stores"}]}},beforeRouteEnter(e,s,i){i(n=>{n.navigateToSuitablePage(n,e)})},beforeRouteUpdate(e,s){(e.query.hasOwnProperty("createdStore")||e.query.hasOwnProperty("deletedStore"))&&this.navigateToSuitablePage(this,e)},methods:{navigateToAddStore(){this.$router.push({name:"create-store"})},navigateToNavMenu(e){this.$router.push({name:e}).then(()=>{window.scrollTo(0,0)})},activeNavMenuClasses(e){return this.$route.name===e?"bg-gray-200":""},isActiveStoreNavMenu(e){let s=e.href;if(this.$route.params.store_href==s)for(let o=0;o<e.children.length;o++){var i=e.children[o].name,n=e.children[o].relatedLinks;if(this.$route.name==i)return!0;if(n!=null){for(let r=0;r<n.length;r++)if(i=n[r],this.$route.name==i)return!0}}return!1},storeNavMenuClasses(e){var s=["w-full px-4 py-2 text-sm cursor-pointer rounded-lg"];return this.isActiveStoreNavMenu(e)?s.push("bg-white shadow border"):s.push("hover:bg-gray-100 active:bg-gray-200"),s},navigateToStoreSubNavMenu(e,s){this.$router.push({name:s.name,params:{store_href:e.href}}).then(()=>{window.scrollTo(0,0)})},activeStoreSubNavMenuClasses(e,s){if(this.$route.params.store_href==e.href){const o="bg-gray-200";if(this.$route.name==s.name)return o;if(s.relatedLinks!=null){var i=s.relatedLinks;for(let r=0;r<i.length;r++){var n=i[r];if(this.$route.name==n)return o}}}return""},toggleStoreNavMenu(e,s){for(let i=0;i<this.storeLinks.length;i++)s==i?this.storeLinks[s].isOpen=!e.isOpen:this.storeLinks[i].isOpen=!1},navigateToSuitablePage(e,s){this.getStoresAsTeamMember().then(async i=>{s.name=="dashboard"&&e.storeLinks.length&&await e.$router.push({name:"show-store-home",params:{store_href:e.storeLinks[0].href}});for(let n=0;n<e.storeLinks.length;n++){const o=e.storeLinks[n];e.isActiveStoreNavMenu(o)&&e.toggleStoreNavMenu(o,n)}})},getStoresAsTeamMember(){this.isLoadingStoresAsTeamMember=!0;let e={_noFields:!0,_noRelationships:!0,filter:"team member joined",_includeAttributes:"nameWithEmoji",_includeLinks:"showStore,showStoreOrders,showStoreProducts"};return Q(this.authState.user._links.showStores,e).then(s=>(s.status==200&&(this.isLoadingStoresAsTeamMember=!1,this.storeLinks=s.data.data.map(i=>({name:"show-store-home",href:i._links.showStore,label:i._attributes.nameWithEmoji,children:[{label:"Home",name:"show-store-home"},{label:"Orders",name:"show-store-orders",relatedLinks:["show-store-order","create-store-order"]},{label:"Reviews",name:"show-store-reviews"},{label:"Products",name:"show-store-products",relatedLinks:["show-store-product","create-store-product"]},{label:"Coupons",name:"show-store-coupons",relatedLinks:["show-store-coupon","create-store-coupon"]},{label:"Customers",name:"show-store-customers",relatedLinks:["show-store-customer","create-store-customer"]},{label:"Transactions",name:"show-store-transactions",relatedLinks:["show-store-transaction","create-store-transaction"]},{label:"Team Members",name:"show-store-team-members",relatedLinks:["show-store-team-member","invite-store-team-member"]},{label:"Store Settings",name:"show-store-general-settings"}]}))),s)).catch(s=>(this.isLoadingStoresAsTeamMember=!1,this.showErrors(s,"getStoresAsTeamMember"),s))},attemptLogout(){this.isLoggingOut=!0,G().then(e=>{e.status==200&&(this.isLoggingOut=!1,this.$router.replace({name:"login"}))}).catch(e=>{this.isLoggingOut=!1,this.showErrors(e,"attemptLogout")})},showErrors(e,s){this.setServerFormErrors(e),s=="getStoresAsTeamMember"?this.showUnsuccessfulNotification("We couldn't show stores"):s=="attemptLogout"&&this.showUnsuccessfulNotification("We couldn't logout")}}},de=t("button",{"data-drawer-target":"main-sidebar","data-drawer-toggle":"main-sidebar","aria-controls":"main-sidebar",type:"button",class:"inline-flex items-center p-2 mt-2 ms-3 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600"},[t("span",{class:"sr-only"},"Open sidebar"),t("svg",{class:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"clip-rule":"evenodd","fill-rule":"evenodd",d:"M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"})])],-1),me={id:"main-sidebar",class:"fixed top-0 left-0 z-40 w-64 h-screen transition-transform -translate-x-full sm:translate-x-0 border-r","aria-label":"Sidebar"},ge={class:"h-full px-3 py-4 overflow-y-auto bg-gray-50 dark:bg-gray-800"},pe=t("div",{class:"flex justify-end"},[t("svg",{class:"w-4 h-4 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:"{1.5}",stroke:"currentColor"},[t("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"})])],-1),fe={class:"text-sm text-gray-500"},_e=t("div",{class:"mb-4 border-b"},null,-1),ve={class:"space-y-1 font-medium"},we={key:0},be={class:"flex justify-center my-4"},ye=["onClick"],Se=["onClick"],xe={key:0,class:"w-3 h-3 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ke=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1),Me=[ke],Le={key:1,class:"w-3 h-3 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ae=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"},null,-1),Ce=[Ae],Te={class:"flex justify-between items-center w-full"},Ne={class:"w-full"},$e=t("div",{class:"w-full border-b border-gray-400 border-dashed mt-3 mb-2"},null,-1),Pe={class:"space-y-1 font-normal"},Oe=["onClick"],Be={class:"flex items-center"},je={key:0,class:"w-3 h-3 mr-2 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},He=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9.594 3.94c.09-.542.56-.94 1.11-.94h2.593c.55 0 1.02.398 1.11.94l.213 1.281c.063.374.313.686.645.87.074.04.147.083.22.127.325.196.72.257 1.075.124l1.217-.456a1.125 1.125 0 0 1 1.37.49l1.296 2.247a1.125 1.125 0 0 1-.26 1.431l-1.003.827c-.293.241-.438.613-.43.992a7.723 7.723 0 0 1 0 .255c-.008.378.137.75.43.991l1.004.827c.424.35.534.955.26 1.43l-1.298 2.247a1.125 1.125 0 0 1-1.369.491l-1.217-.456c-.355-.133-.75-.072-1.076.124a6.47 6.47 0 0 1-.22.128c-.331.183-.581.495-.644.869l-.213 1.281c-.09.543-.56.94-1.11.94h-2.594c-.55 0-1.019-.398-1.11-.94l-.213-1.281c-.062-.374-.312-.686-.644-.87a6.52 6.52 0 0 1-.22-.127c-.325-.196-.72-.257-1.076-.124l-1.217.456a1.125 1.125 0 0 1-1.369-.49l-1.297-2.247a1.125 1.125 0 0 1 .26-1.431l1.004-.827c.292-.24.437-.613.43-.991a6.932 6.932 0 0 1 0-.255c.007-.38-.138-.751-.43-.992l-1.004-.827a1.125 1.125 0 0 1-.26-1.43l1.297-2.247a1.125 1.125 0 0 1 1.37-.491l1.216.456c.356.133.751.072 1.076-.124.072-.044.146-.086.22-.128.332-.183.582-.495.644-.869l.214-1.28Z"},null,-1),Fe=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Re=[He,Fe],ze=t("span",{class:"text-xs ml-1"},"Add Store",-1),De={class:"space-y-1 font-medium"},Ee=["onClick"],Ve=t("li",null,[t("div",{class:"border-t my-2"})],-1),Ue={key:1,class:"w-5 h-5",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},We=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"},null,-1),Ye=[We],qe=t("span",null,"Sign Out",-1),Ze={class:"sm:ml-64 bg-gray-50 relative"};function Ie(e,s,i,n,o,r){var M,L,A,C,T;const g=h("RightSideAlerts"),$=h("ProfilePhoto"),P=h("Logo"),k=h("SpinningLoader"),O=h("StatusDot"),B=h("SlideUpDown"),j=h("AddButton"),H=h("PageLoader"),F=h("router-view"),R=h("Footer");return a(),c("div",null,[u(g),de,t("aside",me,[t("div",ge,[pe,(M=o.authState.user)!=null&&M.profilePhoto?(a(),f($,{key:0,user:o.authState.user,class:"mx-auto"},null,8,["user"])):(a(),f(P,{key:1,class:"mx-auto"})),t("div",{onClick:s[0]||(s[0]=l=>r.navigateToNavMenu("profile")),class:"text-center px-4 py-4 cursor-pointer"},[t("p",null,m(((A=(L=o.authState.user)==null?void 0:L._attributes)==null?void 0:A.name)??"..."),1),t("p",fe,m(((T=(C=o.authState.user)==null?void 0:C.mobileNumber)==null?void 0:T.national)??"..."),1)]),_e,t("ul",ve,[o.isLoadingStoresAsTeamMember?(a(),c("li",we,[t("div",be,[u(k)])])):y("",!0),(a(!0),c(_,null,v(o.storeLinks,(l,p)=>(a(),c("li",{onClick:W(d=>r.toggleStoreNavMenu(l,p),["self"]),key:p,class:w(r.storeNavMenuClasses(l))},[t("div",{onClick:d=>r.toggleStoreNavMenu(l,p),class:"flex items-center space-x-2"},[l.isOpen?(a(),c("svg",xe,Me)):(a(),c("svg",Le,Ce)),t("div",Te,[t("div",Ne,m(l.label),1),u(O,{type:"success",animate:!0})])],8,Se),u(B,{active:l.isOpen,duration:1e3},{default:b(()=>[$e,t("ul",Pe,[(a(!0),c(_,null,v(l.children,(d,z)=>(a(),c("li",{onClick:Qe=>r.navigateToStoreSubNavMenu(l,d),key:z,class:w([r.activeStoreSubNavMenuClasses(l,d),"w-full px-4 py-2 text-xs hover:bg-blue-200 active:bg-blue-300 cursor-pointer rounded-lg"])},[t("div",Be,[d.label=="Store Settings"?(a(),c("svg",je,Re)):y("",!0),t("span",null,m(d.label),1)])],10,Oe))),128))])]),_:2},1032,["active"])],10,ye))),128)),t("li",null,[u(j,{action:r.navigateToAddStore,class:"my-4",size:"sm"},{default:b(()=>[ze]),_:1},8,["action"])])]),t("ul",De,[(a(!0),c(_,null,v(o.links,(l,p)=>(a(),c("li",{onClick:d=>r.navigateToNavMenu(l.name),key:p,class:w([r.activeNavMenuClasses(l.name),"w-full px-4 py-2 text-sm hover:bg-gray-200 active:bg-gray-300 cursor-pointer rounded-lg"])},[t("span",null,m(l.label),1)],10,Ee))),128)),Ve,t("li",{onClick:s[1]||(s[1]=(...l)=>r.attemptLogout&&r.attemptLogout(...l)),class:"flex items-center space-x-2 w-full px-4 py-2 text-sm hover:bg-gray-200 active:bg-gray-300 cursor-pointer rounded-lg"},[o.isLoggingOut?(a(),f(k,{key:0,class:"my-1"})):(a(),c("svg",Ue,Ye)),qe])])])]),t("div",Ze,[u(H),u(F),u(R,{class:"mt-80"})])])}const dt=x(ue,[["render",Ie]]);export{dt as default};
