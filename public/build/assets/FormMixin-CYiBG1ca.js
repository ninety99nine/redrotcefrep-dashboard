import{L as i}from"./app-Kf0mCOXy.js";import{U as a}from"./SpiningLoader-CsPmXxst.js";const e=i("notification",{state:()=>({notifications:[]}),actions:{addSuccessNotification(r){this.addNotification(r,"success-notification")},addWarningNotification(r){this.addNotification(r,"warning-notification")},addNotification(r,t){this.notifications.push({type:t,message:r,id:a.methods.generateUniqueId("notification")})}}}),n=i("form",{state:()=>({formErrors:{},formErrorsTimeout:null}),getters:{getFormErrors(r){return Object.values(r.formErrors)}},actions:{setServerFormErrors(r){if(this.hideFormErrors(),(r.response??{}).status===422){const t=((r.response??{}).data??{}).errors??{};this.formErrors=Object.keys(t).reduce((o,s)=>(o[s]=t[s][0],o),{})}else{const t=((r.response??{}).data??{}).message??r.message;this.setGeneralFormError(t),t!=null&&e().addWarningNotification(t)}this.setFormErrorsTimeout()},setGeneralFormError(r){this.setFormError("general",r)},setFormError(r,t){this.formErrors[r]=t,this.setFormErrorsTimeout()},getFormError(r){return this.formErrors[r]??null},hideFormErrors(){this.formErrors={}},setFormErrorsTimeout(){this.clearFormErrorsTimeout(),this.formErrorsTimeout=setTimeout(()=>this.hideFormErrors(),5e3)},clearFormErrorsTimeout(){clearTimeout(this.formErrorsTimeout)}}}),c={computed:{formState(){return n()},hasErrors(){return Object.keys(this.formState.formErrors).length>0},formErrors(){return this.formState.getFormErrors},hasGeneralError(){return this.formState.formErrors.hasOwnProperty("general")},generalErrorText(){return this.hasGeneralError?this.formState.formErrors.general:null}},methods:{showSuccessfulNotification(r){e().addSuccessNotification(r)},showUnsuccessfulNotification(r){e().addWarningNotification(r)},setServerFormErrors(r){this.formState.setServerFormErrors(r)},setGeneralFormError(r){this.formState.setGeneralFormError(r)},setFormError(r,t){this.formState.setFormError(r,t)},getFormError(r){return this.formState.getFormError(r)},hideFormErrors(){this.formState.hideFormErrors()}}};export{c as F,e as u};
