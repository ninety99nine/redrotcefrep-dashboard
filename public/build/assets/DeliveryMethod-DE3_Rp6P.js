import{c as Z,i as Y}from"./cloneDeep-Cj89CU0d.js";import{A as ie}from"./Alert-BHnqwbfj.js";import{F as I}from"./FormMixin-CYiBG1ca.js";import{L as me,r as n,o as r,c as l,d as t,q as V,F as O,l as B,t as T,g as v,i as S,f as k,e as d,w as p,K as ue,p as H,u as re}from"./app-Kf0mCOXy.js";import{u as W}from"./store-store-C2_eLuQh.js";import{T as he}from"./TextHeader-Cdgnrugi.js";import{B as fe}from"./BackButton-CDDlBeJF.js";import{U as Q}from"./UndoButton-BBUKxXJA.js";import{S as pe,L as _e}from"./LineSkeleton-Ckj2823e.js";import{P as K}from"./PrimaryButton-DULDYb5e.js";import{M as le}from"./MoreInfoPopover-gLIaCQca.js";import{N as L,B as ve}from"./BackdropLoader-BVS-Fv1Y.js";import{d as ye,g as ge,p as be,a as ke}from"./api-repository-C4cDgx_E.js";import{F as we}from"./FormErrorMessages-Bdf-el1D.js";import{U as xe,d as q}from"./SpiningLoader-CsPmXxst.js";import{D as Te}from"./Datepicker-D8JGdZ5k.js";import{B as R}from"./BadgeIndicator-BRfv_GU4.js";import{_ as C}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as Me,A as De}from"./AddressModal-BWFJ5nW9.js";import{C as U}from"./Checkbox-C6zZavZf.js";import{C as X}from"./ConfirmModal-DrJlS0Sa.js";import{S as $}from"./SelectInput-BklpiaOv.js";import{T as ee}from"./ToogleSwitch-CDDQu6G0.js";import{A as te}from"./AddButton-YPx_iiuG.js";import{M as J}from"./MoneyInput-Bzif-ERf.js";import{D as ne}from"./DeleteButton-qqIC3cPW.js";import{I as oe}from"./InputErrorMessage-B1NpEu7u.js";import{T as se}from"./TextInput-_gM6fl6u.js";import{I as Se}from"./InputTags-Se_SBSRe.js";import{V as Ce}from"./vue-draggable-next.esm-bundler-DinbD466.js";import{T as ae}from"./TextareaInput-Cp6x4S0k.js";import"./InputLabel-B11U1-WT.js";import"./StatusDot-B0b3cfnt.js";import"./BasicModal-CDGWEgr6.js";import"./CountrySelectInput-BE301A7u.js";import"./vue3-tags-input.esm-BEOsPq0u.js";const P=me("deliveryMethod",{state:()=>({deliveryMethod:null,isLoadingDeliveryMethod:!1}),actions:{reset(){this.deliveryMethod=null,this.isLoadingDeliveryMethod=!1}}}),Fe={mixins:[xe],components:{Datepicker:Te,BadgeIndicator:R},props:{form:{type:Object}},data(){return{testDate:null,testTime:null,showScheduleSummary:!0,days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},computed:{minDate(){const o=new Date;if(this.form.requireMinimumNoticeForOrders&&this.form.earliestDeliveryTimeValue>0){const s=q(o).add(this.form.earliestDeliveryTimeValue,this.form.scheduleType=="date"?"day":this.form.earliestDeliveryTimeUnit);if(s.isAfter(o))return this.formattedDate(s)}return this.formattedDate(q(o))},maxDate(){if(!this.form.restrictMaximumNoticeForOrders||this.form.latestDeliveryTimeValue==0)return null;const s=q(new Date).add(this.form.latestDeliveryTimeValue,"day");return this.formattedDate(s)},datesDisabled(){const o=new Date,s=o.getDay(),e=this.form.operationalHours[s];if(!(e!=null&&e.available))return[this.formattedDate(o)];const _=`${String(o.getHours()).padStart(2,"0")}:${String(o.getMinutes()).padStart(2,"0")}`;return e.hours.some(([i,c])=>_>=i&&_<=c)?[]:[this.formattedDate(o)]},daysOfWeekDisabled(){return this.form.operationalHours.map((o,s)=>o.available?null:s).filter(o=>o!==null)},availableTimeSlots(){if(!this.testDate)return[];const o=q(),s=q(this.testDate),e=s.day(),_=this.form.operationalHours[e];if(!_.available||_.hours.length===0)return[];const a=u=>{const[x,F]=u.split(":").map(Number);return x*60+F},i=u=>{const x=Math.floor(u/60).toString().padStart(2,"0"),F=(u%60).toString().padStart(2,"0");return`${x}:${F}`},c=new Set;return _.hours.forEach(u=>{const x=new Date,[F,D]=u,[b,y]=u.map(a);if(this.form.autoGenerateTimeSlots){const M=this.form.timeSlotIntervalUnit==="hour"?parseInt(this.form.timeSlotIntervalValue)*60:parseInt(this.form.timeSlotIntervalValue);for(let f=b;f+M<=y;f+=M){const g=f+M,E=i(f);let N;f+M>=y?N=i(g):N=i(g-1);const w=q(`${s.format("YYYY-MM-DD")} ${N}`,"YYYY-MM-DD HH:mm");if(!w.isBefore(o)){if(this.form.requireMinimumNoticeForOrders&&this.form.earliestDeliveryTimeValue>0){const h=q(x).add(this.form.earliestDeliveryTimeValue,this.form.scheduleType=="date"?"day":this.form.earliestDeliveryTimeUnit);if(w.isBefore(h))continue}c.add(`${E} - ${N}`)}}}else q(`${s.format("YYYY-MM-DD")} ${D}`,"YYYY-MM-DD HH:mm").isAfter(o)&&c.add(`${F} - ${D}`)}),[...c].sort((u,x)=>{const[F]=u.split(" - "),[D]=x.split(" - ");return a(F)-a(D)})},scheduleKeyPoints(){let o=[];const s=this.form.operationalHours.map((e,_)=>e.available?this.days[_]:null).filter(e=>e!==null);if(s.length==0)o.push("Orders are allowed on any day of the week");else if(s.length==7)o.push("Orders are allowed on all days of the week");else{const e=s.length>1?s.slice(0,-1).join(", ")+" and "+s.slice(-1):s[0];o.push(`Orders are allowed on ${s.length} ${s.length===1?"day":"days"} of the week: ${e}`)}return this.form.scheduleType=="date"?o.push("Customers must specify only date without the time for delivery"):o.push("Customers must specify both date and time for delivery"),this.form.scheduleType=="date and time"&&this.form.autoGenerateTimeSlots&&o.push("Auto generate additional time options between the specified timeslots for each day of the week"),this.form.requireMinimumNoticeForOrders&&this.form.earliestDeliveryTimeValue>0&&(this.form.scheduleType=="date"||this.form.scheduleType=="date and time"&&this.form.earliestDeliveryTimeUnit=="day"?o.push(`Orders must be placed at least ${this.form.earliestDeliveryTimeValue} ${this.form.earliestDeliveryTimeValue==1?"day":"days"} before the delivery date (${this.form.earliestDeliveryTimeValue} ${this.form.earliestDeliveryTimeValue==1?"day":"days"} notice)`):o.push(`Orders must be placed at least ${this.form.earliestDeliveryTimeValue} ${this.form.earliestDeliveryTimeValue==1?"hour":"hours"} before the delivery date (${this.form.earliestDeliveryTimeValue} ${this.form.earliestDeliveryTimeValue==1?"hour":"hours"} notice)`)),this.form.restrictMaximumNoticeForOrders&&this.form.latestDeliveryTimeValue>0&&o.push(`Orders cannot be scheduled for delivery more than ${this.form.latestDeliveryTimeValue} ${this.form.latestDeliveryTimeValue==1?"day":"days"} in advance`),o}}},Ve={class:"bg-white border rounded-lg space-y-4"},Ie=t("p",{class:"font-bold text-md"},"Schedule Summary",-1),Ae={class:"hover:text-gray-500 active:text-gray-400"},Oe=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1),Ze=[Oe],Ee=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1),Be=[Ee],Ue={class:"text-xs"},je={key:0,class:"space-y-4 px-4 pb-4"},Pe=t("p",{class:"font-bold text-md mb-2"},"Test Schedule",-1),Le={class:"text-sm text-gray-500"},Ne=t("p",{class:"text-sm text-gray-500"},"Go ahead and try it! ðŸ«£",-1),He={key:0,class:"text-sm text-green-500"},qe={class:"font-bold"},Ge={key:1,class:"border rounded-lg"},Re={class:"flex space-x-2 font-bold text-sm p-4"},We={class:"overflow-y-auto max-h-60 border-t"},$e={key:0,class:"text-sm text-gray-500 p-4"};function ze(o,s,e,_,a,i){const c=n("Datepicker"),m=n("BadgeIndicator");return r(),l("div",Ve,[t("div",{onClick:s[2]||(s[2]=u=>a.showScheduleSummary=!a.showScheduleSummary),class:V(["space-y-2 p-4 cursor-pointer rounded-lg hover:bg-gray-50",{"border-b border-dashed pb-4":a.showScheduleSummary}])},[t("div",{class:V(["flex justify-between",{"mb-4":a.showScheduleSummary}])},[Ie,t("div",Ae,[a.showScheduleSummary?(r(),l("svg",{key:0,class:"w-6 h-6 cursor-pointer",onClick:s[0]||(s[0]=u=>a.showScheduleSummary=!1),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ze)):(r(),l("svg",{key:1,onClick:s[1]||(s[1]=u=>a.showScheduleSummary=!0),class:"w-6 h-6 cursor-pointer",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Be))])],2),a.showScheduleSummary?(r(!0),l(O,{key:0},B(i.scheduleKeyPoints,(u,x)=>(r(),l("div",{key:x,class:"flex space-x-2 px-2 border-l-4 border-green-300"},[t("p",Ue,T(u),1)]))),128)):v("",!0)],2),a.showScheduleSummary?(r(),l("div",je,[Pe,t("div",null,[t("p",Le,[S("This is how the delivery days"),e.form.scheduleType=="date and time"?(r(),l(O,{key:0},[S(" and times")],64)):v("",!0),S(" will appear for customers shopping today.")]),Ne]),(r(),k(c,{minDate:i.minDate,maxDate:i.maxDate,modelValue:a.testDate,"onUpdate:modelValue":s[3]||(s[3]=u=>a.testDate=u),datesDisabled:i.datesDisabled,daysOfWeekDisabled:i.daysOfWeekDisabled,key:i.daysOfWeekDisabled.length+i.datesDisabled.length+i.minDate+i.maxDate},null,8,["minDate","maxDate","modelValue","datesDisabled","daysOfWeekDisabled"])),a.testDate?(r(),l("p",He,[S("Your order will be delivered on "),t("span",qe,T(a.testDate)+" ("+T(o.customFormattedDate(a.testDate,"ddd"))+")",1),S(", just "+T(o.formattedRelativeDate(a.testDate,!0))+" from now.",1)])):v("",!0),e.form.scheduleType=="date and time"?(r(),l("div",Ge,[t("div",Re,[t("span",null,[S("Available Delivery Time"),i.availableTimeSlots.length!=1?(r(),l(O,{key:0},[S("s")],64)):v("",!0)]),d(m,{type:"info",text:i.availableTimeSlots.length+" "+(i.availableTimeSlots.length==1?"option":"options"),showDot:!1},null,8,["text"])]),t("div",We,[(r(!0),l(O,null,B(i.availableTimeSlots,(u,x)=>(r(),l("p",{key:x,class:"text-sm text-gray-500 hover:bg-gray-100 p-4"},T(u),1))),128)),i.availableTimeSlots.length==0?(r(),l("p",$e,[a.testDate?(r(),l(O,{key:0},[S(" No delivery times available for "+T(a.testDate),1)],64)):(r(),l(O,{key:1},[S("Pick a date to see available delivery times")],64))])):v("",!0)])])):v("",!0)])):v("",!0)])}const Ye=C(Fe,[["render",ze]]),Qe={mixins:[I],components:{TimeInput:Me,Checkbox:U,ConfirmModal:X,PrimaryButton:K,MoreInfoPopover:le,BadgeIndicator:R},props:{form:{type:Object}},data(){return{hours:[],availableDays:[],defaultTimeslot:["08:00","16:00"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]}},watch:{"form.autoGenerateTimeSlots"(o,s){if(o){const e=this.timeslots.map(i=>i.length).reduce((i,c)=>i+c,0),_=this.form.operationalHours.map(i=>i.hours.length).reduce((i,c)=>i+c,0),a=e-_;this.showSuccessfulNotification(`Added ${a} ${a==1?"timeslot":"timeslots"}`)}}},computed:{totalSelectedDays(){return this.availableDays.filter(o=>o.selected).length},timeslots(){const o=[],s=_=>{const[a,i]=_.split(":").map(Number);return a*60+i},e=_=>{const a=Math.floor(_/60).toString().padStart(2,"0"),i=(_%60).toString().padStart(2,"0");return`${a}:${i}`};return this.form.operationalHours.forEach((_,a)=>{const i=new Set;_.available&&_.hours.forEach(m=>{const[u,x]=m,[F,D]=m.map(s);if(this.form.autoGenerateTimeSlots){const b=this.form.timeSlotIntervalUnit==="hour"?this.form.timeSlotIntervalValue*60:this.form.timeSlotIntervalValue;for(let y=F;y+b<=D;y+=b){const M=y+b,f=e(y);let g;y+b>=D?g=e(M):g=e(M-1),i.add(`${f} - ${g}`)}}else i.add(`${u} - ${x}`)});const c=[...i].sort((m,u)=>{const[x]=m.split(" - "),[F]=u.split(" - ");return s(x)-s(F)});o.push(c)}),o}},methods:{addHour(){this.hours.push(Z(this.defaultTimeslot))},removeHour(o){this.hours.splice(o,1)},addOperationalHour(o){this.form.operationalHours[o].hours.push(Z(this.defaultTimeslot))},removeOperationalHour(o,s){this.form.operationalHours[o].hours.splice(s,1)},showBulkAddTimeslotsModal(){this.hours.length==0&&this.addHour(),this.$nextTick(()=>{this.$refs.bulkAddTimeslotsButton.$el.click()})},showBulkResetTimeslotsModal(){this.$nextTick(()=>{this.$refs.bulkResetTimeslotsButton.$el.click()})},bulkAddTimeslots(o){const s=Array.from(new Set(this.hours.map(e=>JSON.stringify(e)))).map(e=>JSON.parse(e));this.form.operationalHours.forEach((e,_)=>{this.availableDays[_].selected&&(e.hours=Z(s)),this.availableDays[_].selected&&!e.available&&(e.available=!0)}),this.showSuccessfulNotification("Timeslots added"),o()},bulkResetTimeslots(o){this.form.operationalHours.forEach((s,e)=>{this.availableDays[e].selected&&(s.hours=[Z(this.defaultTimeslot)]),this.availableDays[e].selected&&!s.available&&(s.available=!0)}),this.showSuccessfulNotification("Timeslots reset"),o()}},created(){this.availableDays=this.form.operationalHours.map((o,s)=>({name:this.days[s],selected:!0}))}},Ke={class:"flex justify-end space-x-2 p-4 border rounded-lg bg-white"},Je={class:"col-span-1 flex items-center space-x-2"},Xe={key:0,class:"col-span-1 space-y-2"},et={class:"flex items-center space-x-2"},tt=t("span",null,"-",-1),ot=["onClick"],st=t("svg",{class:"w-4 h-4 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),rt=[st],it=["onClick"],lt=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})],-1),nt=[lt],at={class:"flex space-x-1 items-center mt-2"},dt={class:"space-y-2 border-t border-dashed pt-2 mt-2"},ct=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Bulk Add Timeslots",-1),mt=t("p",{class:"text-sm mb-4"},"Set the timeslots to be created",-1),ut={class:"space-y-2 mb-8"},ht={class:"flex items-center space-x-2 mb-4"},ft=t("span",null,"-",-1),pt=t("svg",{class:"w-4 h-4 text-blue-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"})],-1),_t=[pt],vt=["onClick"],yt=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M5 12h14"})],-1),gt=[yt],bt={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},kt={class:"ml-1"},wt=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Bulk Reset Timeslots",-1),xt={class:"flex items-center space-x-2 mb-4"},Tt=t("span",null,"-",-1),Mt=t("p",{class:"text-sm mb-4"},"Select days to reset timeslots",-1),Dt={class:"grid grid-cols-1 md:grid-cols-3 gap-2"},St={class:"ml-1"};function Ct(o,s,e,_,a,i){const c=n("BadgeIndicator"),m=n("Checkbox"),u=n("TimeInput"),x=n("MoreInfoPopover"),F=n("PrimaryButton"),D=n("ConfirmModal");return r(),l("div",null,[t("div",Ke,[d(c,{type:"primary",text:"+ Bulk Add Timeslots",showDot:!1,clickable:!0,action:i.showBulkAddTimeslotsModal},null,8,["action"]),d(c,{type:"primary",text:"Reset Timeslots",showDot:!1,clickable:!0,action:i.showBulkResetTimeslotsModal},null,8,["action"])]),(r(!0),l(O,null,B(e.form.operationalHours,(b,y)=>(r(),l("div",{key:y,class:V([{"border-t":y!=0},y==e.form.operationalHours.length-1?"border-b pb-4":"pb-4","border-blue-200 border-dashed hover:bg-blue-100 pt-4 grid grid-cols-2 gap-4 items-start"])},[t("div",Je,[d(m,{modelValue:b.available,"onUpdate:modelValue":M=>b.available=M,size:"xs",class:"mt-1"},null,8,["modelValue","onUpdate:modelValue"]),t("span",null,T(a.days[y]),1)]),b.available?(r(),l("div",Xe,[(r(!0),l(O,null,B(b.hours,(M,f)=>(r(),l("div",{key:f},[t("div",et,[d(u,{modelValue:e.form.operationalHours[y].hours[f][0],"onUpdate:modelValue":g=>e.form.operationalHours[y].hours[f][0]=g,errorText:o.getFormError("operationalHours"+y+"Hours"+f+"0"),class:"w-24"},null,8,["modelValue","onUpdate:modelValue","errorText"]),tt,d(u,{modelValue:e.form.operationalHours[y].hours[f][1],"onUpdate:modelValue":g=>e.form.operationalHours[y].hours[f][1]=g,errorText:o.getFormError("operationalHours"+y+"Hours"+f+"1"),class:"w-24"},null,8,["modelValue","onUpdate:modelValue","errorText"]),f==0?(r(),l("div",{key:0,onClick:()=>i.addOperationalHour(y),class:"flex-shrink-0 cursor-pointer rounded-md border border-blue-200 p-1 hover:bg-blue-100 transition-all"},rt,8,ot)):(r(),l("div",{key:1,onClick:()=>i.removeOperationalHour(y,f),class:"flex-shrink-0 cursor-pointer rounded-md border p-1 bg-red-50 hover:bg-red-100 transition-all"},nt,8,it))])]))),128)),t("div",at,[d(c,{type:"success",showDot:!1,class:"border border-green-200",text:i.timeslots[y].length+" "+(i.timeslots[y].length==1?"timeslot":"timeslots")},null,8,["text"]),d(x,{title:a.days[y]+" timeslots",placement:"top"},{description:p(()=>[t("div",dt,[(r(!0),l(O,null,B(i.timeslots[y],(M,f)=>(r(),l("p",{key:f,class:"flex space-x-2 px-2 border-l-4 border-green-300"},T(M),1))),128))])]),_:2},1032,["title"])])])):v("",!0)],2))),128)),d(D,{approveText:"Add Timeslots",approveAction:b=>i.bulkAddTimeslots(b),approveDisabled:a.hours.length==0,approveType:"primary"},{content:p(()=>[ct,mt,t("div",ut,[(r(!0),l(O,null,B(a.hours,(b,y)=>(r(),l("div",{key:y},[t("div",ht,[d(u,{modelValue:a.hours[y][0],"onUpdate:modelValue":M=>a.hours[y][0]=M,class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),ft,d(u,{modelValue:a.hours[y][1],"onUpdate:modelValue":M=>a.hours[y][1]=M,class:"w-24"},null,8,["modelValue","onUpdate:modelValue"]),y==0?(r(),l("div",{key:0,onClick:s[0]||(s[0]=()=>i.addHour()),class:"flex-shrink-0 cursor-pointer rounded-md border border-blue-200 p-1 hover:bg-blue-100 transition-all"},_t)):(r(),l("div",{key:1,onClick:()=>i.removeHour(y),class:"flex-shrink-0 cursor-pointer rounded-md border p-1 bg-red-50 hover:bg-red-100 transition-all"},gt,8,vt))])]))),128)),t("div",bt,[(r(!0),l(O,null,B(a.availableDays,(b,y)=>(r(),l("div",{key:y},[d(m,{size:"xs",modelValue:b.selected,"onUpdate:modelValue":M=>b.selected=M,disabled:b.selected&&i.totalSelectedDays===1},{default:p(()=>[t("span",kt,T(b.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128))])])]),trigger:p(b=>[d(F,{ref:"bulkAddTimeslotsButton",onClick:b.showModal,class:"hidden",type:"primary"},null,8,["onClick"])]),_:1},8,["approveAction","approveDisabled"]),d(D,{approveText:"Reset Timeslots",approveAction:b=>i.bulkResetTimeslots(b),approveType:"primary"},{content:p(()=>[wt,t("div",xt,[d(u,{modelValue:a.defaultTimeslot[0],"onUpdate:modelValue":s[1]||(s[1]=b=>a.defaultTimeslot[0]=b),class:"w-24"},null,8,["modelValue"]),Tt,d(u,{modelValue:a.defaultTimeslot[1],"onUpdate:modelValue":s[2]||(s[2]=b=>a.defaultTimeslot[1]=b),class:"w-24"},null,8,["modelValue"])]),Mt,t("div",Dt,[(r(!0),l(O,null,B(a.availableDays,(b,y)=>(r(),l("div",{key:y},[d(m,{size:"xs",modelValue:b.selected,"onUpdate:modelValue":M=>b.selected=M,disabled:b.selected&&i.totalSelectedDays===1},{default:p(()=>[t("span",St,T(b.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128))])]),trigger:p(b=>[d(F,{ref:"bulkResetTimeslotsButton",onClick:b.showModal,class:"hidden",type:"primary"},null,8,["onClick"])]),_:1},8,["approveAction"])])}const Ft=C(Qe,[["render",Ct]]),Vt={mixins:[I],components:{SelectInput:$},props:{form:{type:Object}}},It=t("option",{value:"date"},"Date",-1),At=t("option",{value:"date and time"},"Date And Time",-1);function Ot(o,s,e,_,a,i){const c=n("SelectInput");return r(),k(c,{label:"Customer selects",modelValue:e.form.scheduleType,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.scheduleType=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("scheduleType"),labelPopoverDescription:"Select the schedule type e.g Customers should specify a delivery date or both delivery date and time"},{default:p(()=>[It,At]),_:1},8,["modelValue","errorText"])}const Zt=C(Vt,[["render",Ot]]),Et={mixins:[I],components:{ToogleSwitch:ee},props:{form:{type:Object}}};function Bt(o,s,e,_,a,i){const c=n("ToogleSwitch");return r(),k(c,{size:"md",modelValue:e.form.setSchedule,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.setSchedule=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("setSchedule"),labelPopoverDescription:"Turn on so that customers specify delivery dates and times. Turn off so that customers do not specify delivery dates and times"},{default:p(()=>[S(" Set schedule ")]),_:1},8,["modelValue","errorText"])}const Ut=C(Et,[["render",Bt]]),jt={mixins:[I],components:{Checkbox:U,NumberInput:L},props:{form:{type:Object}}},Pt=t("p",{class:"text-sm mt-0.5 mx-2"},"Auto generate time slots",-1);function Lt(o,s,e,_,a,i){const c=n("Checkbox");return r(),k(c,{size:"xs",modelValue:e.form.autoGenerateTimeSlots,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.autoGenerateTimeSlots=m),errorText:o.getFormError("autoGenerateTimeSlots"),labelPopoverDescription:"Automatically generates time options for customers to choose from"},{default:p(()=>[Pt]),_:1},8,["modelValue","errorText"])}const Nt=C(jt,[["render",Lt]]),Ht={mixins:[I],components:{SelectInput:$},props:{form:{type:Object}}},qt={value:"minute"},Gt={value:"hour"};function Rt(o,s,e,_,a,i){const c=n("SelectInput");return e.form.autoGenerateTimeSlots?(r(),k(c,{key:0,labelPopoverTitle:"What Is This?",modelValue:e.form.timeSlotIntervalUnit,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.timeSlotIntervalUnit=m),errorText:o.getFormError("timeSlotIntervalUnit"),labelPopoverDescription:"Set the interval that should be used to auto generate the time slots"},{default:p(()=>[t("option",qt,T(e.form.timeSlotIntervalValue=="1"?"Minute":"Minutes"),1),t("option",Gt,T(e.form.timeSlotIntervalValue=="1"?"Hour":"Hours"),1)]),_:1},8,["modelValue","errorText"])):v("",!0)}const Wt=C(Ht,[["render",Rt]]),$t={mixins:[I],components:{NumberInput:L},props:{form:{type:Object}}};function zt(o,s,e,_,a,i){const c=n("NumberInput");return e.form.autoGenerateTimeSlots?(r(),k(c,{key:0,min:"1",placeholder:"1",modelValue:e.form.timeSlotIntervalValue,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.timeSlotIntervalValue=m),errorText:o.getFormError("timeSlotIntervalValue")},null,8,["modelValue","errorText"])):v("",!0)}const Yt=C($t,[["render",zt]]),Qt={mixins:[I],components:{Checkbox:U,NumberInput:L,SelectInput:$},props:{form:{type:Object}}},Kt={class:"mt-0.5 mx-2"},Jt=t("p",{class:"font-bold text-sm mb-1"},"Require minimum notice for orders",-1),Xt=t("p",{class:"text-sm text-gray-500 max-w-96"},"Customers must place orders at least a few hours or days before the delivery date to allow for order processing",-1),eo=t("span",{class:"text-sm"}," Accept orders at least ",-1),to={value:"hour"},oo={value:"day"},so={class:"text-sm"};function ro(o,s,e,_,a,i){const c=n("NumberInput"),m=n("SelectInput"),u=n("Checkbox");return r(),k(u,{size:"xs",modelValue:e.form.requireMinimumNoticeForOrders,"onUpdate:modelValue":s[2]||(s[2]=x=>e.form.requireMinimumNoticeForOrders=x),errorText:o.getFormError("requireMinimumNoticeForOrders")},{default:p(()=>[t("div",Kt,[Jt,Xt,t("div",{class:V([e.form.requireMinimumNoticeForOrders?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[eo,d(c,{min:"1",placeholder:"1",modelValue:e.form.earliestDeliveryTimeValue,"onUpdate:modelValue":s[0]||(s[0]=x=>e.form.earliestDeliveryTimeValue=x),class:V([e.form.scheduleType=="date"?"w-32":"w-20","inline-block"])},ue({_:2},[e.form.scheduleType=="date"?{name:"suffix",fn:p(()=>[S(T(e.form.earliestDeliveryTimeValue=="1"?"day":"days"),1)]),key:"0"}:void 0]),1032,["modelValue","class"]),e.form.scheduleType=="date and time"?(r(),k(m,{key:0,width:"w-24",class:"inline-block",modelValue:e.form.earliestDeliveryTimeUnit,"onUpdate:modelValue":s[1]||(s[1]=x=>e.form.earliestDeliveryTimeUnit=x)},{default:p(()=>[t("option",to,T(e.form.earliestDeliveryTimeValue=="1"?"Hour":"Hours"),1),t("option",oo,T(e.form.earliestDeliveryTimeValue=="1"?"Day":"Days"),1)]),_:1},8,["modelValue"])):v("",!0),t("span",so,[S(" before delivery date "),e.form.scheduleType=="date and time"&&e.form.earliestDeliveryTimeUnit=="hour"?(r(),l(O,{key:0},[S("("+T(e.form.earliestDeliveryTimeValue)+" "+T(e.form.earliestDeliveryTimeValue=="1"?"hour":"hours")+" notice)",1)],64)):(r(),l(O,{key:1},[S("("+T(e.form.earliestDeliveryTimeValue)+" "+T(e.form.earliestDeliveryTimeValue=="1"?"day":"days")+" notice)",1)],64))])],2)])]),_:1},8,["modelValue","errorText"])}const io=C(Qt,[["render",ro]]),lo={mixins:[I],components:{Checkbox:U,NumberInput:L},props:{form:{type:Object}}},no={class:"mt-0.5 mx-2"},ao=t("p",{class:"font-bold text-sm mb-1"},"Restrict maximum notice for orders",-1),co=t("p",{class:"text-sm text-gray-500 max-w-96"},"Customers can only place orders if the delivery date is within a reasonable timeframe",-1),mo=t("span",{class:"text-sm"}," Restrict orders more than ",-1),uo=t("span",{class:"text-sm"}," from the delivery date ",-1);function ho(o,s,e,_,a,i){const c=n("NumberInput"),m=n("Checkbox");return r(),k(m,{size:"xs",modelValue:e.form.restrictMaximumNoticeForOrders,"onUpdate:modelValue":s[1]||(s[1]=u=>e.form.restrictMaximumNoticeForOrders=u),errorText:o.getFormError("restrictMaximumNoticeForOrders")},{default:p(()=>[t("div",no,[ao,co,t("div",{class:V([e.form.restrictMaximumNoticeForOrders?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[mo,d(c,{min:"1",placeholder:"1",class:"w-32 inline-block",modelValue:e.form.latestDeliveryTimeValue,"onUpdate:modelValue":s[0]||(s[0]=u=>e.form.latestDeliveryTimeValue=u)},{suffix:p(()=>[S("Days")]),_:1},8,["modelValue"]),uo],2)])]),_:1},8,["modelValue","errorText"])}const fo=C(lo,[["render",ho]]),po={components:{ScheduleSummary:Ye,OperationalHours:Ft,ScheduleTypeSelect:Zt,SetScheduleToogleSwitch:Ut,AutoGenerateTimeSlotsCheckbox:Nt,AutoGenerateTimeSlotsUnitSelect:Wt,AutoGenerateTimeSlotsNumberInput:Yt,RequireMinimumNoticeForOrdersCheckbox:io,RestrictMinimumNoticeForOrdersCheckbox:fo},props:{form:{type:Object}}},_o={class:"space-y-4 mb-8"},vo={key:0,class:"flex space-x-8 items-end"},yo={class:"flex space-x-1 items-end"},go=t("p",{class:"text-sm text-gray-500"},"Set the days and times that customers can expect delivery",-1),bo={class:"space-y-4"};function ko(o,s,e,_,a,i){const c=n("SetScheduleToogleSwitch"),m=n("ScheduleTypeSelect"),u=n("AutoGenerateTimeSlotsCheckbox"),x=n("AutoGenerateTimeSlotsNumberInput"),F=n("AutoGenerateTimeSlotsUnitSelect"),D=n("OperationalHours"),b=n("RequireMinimumNoticeForOrdersCheckbox"),y=n("RestrictMinimumNoticeForOrdersCheckbox"),M=n("ScheduleSummary");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.setSchedule}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.setSchedule},"transition-all duration-500"])},[d(c,{form:e.form},null,8,["form"]),t("div",{class:V([e.form.setSchedule?"h-20 mt-4 mb-2 p-0.5":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[d(m,{form:e.form},null,8,["form"])],2),e.form.setSchedule?(r(),l(O,{key:0},[t("div",_o,[e.form.scheduleType=="date and time"?(r(),l("div",vo,[d(u,{form:e.form},null,8,["form"]),t("div",yo,[d(x,{form:e.form},null,8,["form"]),d(F,{form:e.form},null,8,["form"])])])):v("",!0),go,d(D,{form:e.form},null,8,["form"])]),t("div",bo,[d(b,{form:e.form},null,8,["form"]),d(y,{form:e.form},null,8,["form"]),d(M,{form:e.form},null,8,["form"])])],64)):v("",!0)],2)],2)}const wo=C(po,[["render",ko]]),xo={mixins:[I],components:{Alert:ie,Checkbox:U,BadgeIndicator:R},props:{form:{type:Object}},methods:{enableRequireLocationOnMap(){this.form.requireLocationOnMap=!0,this.form.showDistanceOnInvoice=!0}}},To=t("div",{class:"space-y-1 mt-0.5"},[t("p",{class:"font-bold text-sm mx-2"},"Show distance in invoice"),t("p",{class:"text-sm text-gray-500 mx-2"},"The calculated delivery distance will appear on the invoice")],-1),Mo={class:"text-xs text-gray-500 space-x-1"},Do=t("span",null,"ðŸ’¡",-1),So=t("span",null,"Turn on",-1),Co=t("span",null,"so that distances are calculated more accurately (optional)",-1);function Fo(o,s,e,_,a,i){const c=n("Checkbox"),m=n("BadgeIndicator"),u=n("Alert");return r(),l("div",null,[d(c,{size:"xs",modelValue:e.form.showDistanceOnInvoice,"onUpdate:modelValue":s[0]||(s[0]=x=>e.form.showDistanceOnInvoice=x),errorText:o.getFormError("showDistanceOnInvoice")},{default:p(()=>[To]),_:1},8,["modelValue","errorText"]),e.form.requireLocationOnMap?v("",!0):(r(),k(u,{key:0,type:"light",class:"border border-dashed border-gray-200 mt-4"},{default:p(()=>[t("span",Mo,[Do,So,d(m,{type:"primary",showDot:!1,clickable:!0,text:"Require location on map",action:()=>i.enableRequireLocationOnMap()},null,8,["action"]),Co])]),_:1}))])}const Vo=C(xo,[["render",Fo]]),Io={mixins:[I],components:{AddButton:te,MoneyInput:J,UndoButton:Q,NumberInput:L,DeleteButton:ne,AddressModal:De,BadgeIndicator:R,InputErrorMessage:oe,ShowDistanceInInvoiceCheckbox:Vo},props:{form:{type:Object}},data(){return{originalDistanceZones:[],storeState:W(),deliveryMethodState:P()}},computed:{store(){return this.storeState.store},deliveryMethod(){return this.deliveryMethodState.deliveryMethod},hasDeliveryMethod(){return this.deliveryMethod!=null},address(){return this.hasDeliveryMethod?this.deliveryMethod._relationships.address:null},hasAddress(){return this.address!=null},hasDistanceZones(){return this.form.distanceZones.length>0},hasOriginalDistanceZones(){return this.originalDistanceZones.length>0},distanceZonesHaveChanged(){var o=Z(this.form.distanceZones),s=Z(this.originalDistanceZones);return o.forEach(e=>delete e.isEditable),s.forEach(e=>delete e.isEditable),!Y(o,s)}},methods:{setAddress(o){P().deliveryMethod._relationships.address=o},setValidatedAddressForm(o){this.form.address=o},onDeletedAddress(){this.hasAddress?P().deliveryMethod._relationships.address=null:delete this.form.address},onAddDistanceZone(){var o=this.form.distanceZones.length,s=o>0?(this.form.distanceZones[o-1].fee*2).toString():"50.00",e=o>0?(this.form.distanceZones[o-1].distance*2).toString():"10";this.form.distanceZones.push({fee:s,isEditable:!0,distance:e})},onRemoveDistanceZone(o){this.form.distanceZones.splice(o,1)},onResetDistanceZones(){this.form.distanceZones=Z(this.originalDistanceZones)}}},Ao={class:"space-y-4"},Oo={class:"space-y-4 p-4 border rounded-lg shadow-lg bg-white"},Zo=t("h1",{class:"text-md font-bold m-2"},"Zones",-1),Eo={class:"absolute top-2 right-2 flex items-center space-x-2"},Bo=["onClick"],Uo={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},jo={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},Po={key:0,class:"space-y-4"},Lo={class:"flex items-center space-x-2 text-sm text-gray-500"},No=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),Ho={class:"flex space-x-4"},qo=["onClick"],Go={class:"flex items-center space-x-4 text-sm text-gray-500"},Ro={class:"flex items-center space-x-2"},Wo=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),$o={key:0},zo={class:"flex items-center space-x-4 px-4 py-4 border rounded-lg bg-gray-50"},Yo=t("svg",{class:"w-8 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),Qo={class:"text-sm space-y-2"},Ko={class:"flex justify-end space-x-2"},Jo=t("span",{class:"ml-1"},"Undo",-1),Xo={class:"flex justify-end"},es={class:"relative"},ts={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},os={key:0,class:"animate-bounce text-4xl"},ss=t("span",{class:"ml-2"},"Add Zone",-1);function rs(o,s,e,_,a,i){const c=n("ShowDistanceInInvoiceCheckbox"),m=n("AddressModal"),u=n("DeleteButton"),x=n("NumberInput"),F=n("MoneyInput"),D=n("BadgeIndicator"),b=n("InputErrorMessage"),y=n("UndoButton"),M=n("AddButton");return r(),l("div",Ao,[t("div",Oo,[d(c,{form:e.form},null,8,["form"])]),d(m,{address:i.address,title:"Base location",onOnCreated:i.setAddress,onOnUpdated:i.setAddress,onOnDeleted:i.onDeletedAddress,onOnValidated:i.setValidatedAddressForm,deliveryMethodId:i.hasDeliveryMethod?i.deliveryMethod.id:null,subtitle:"Set the starting point for calculating delivery distances"},null,8,["address","onOnCreated","onOnUpdated","onOnDeleted","onOnValidated","deliveryMethodId"]),Zo,(r(!0),l(O,null,B(e.form.distanceZones,(f,g)=>(r(),l("div",{key:g,class:"relative bg-gray-50 p-4 border rounded-lg"},[t("div",Eo,[(r(),l("svg",{class:"w-6 h-6 cursor-pointer hover:opacity-50",onClick:E=>e.form.distanceZones[g].isEditable=!e.form.distanceZones[g].isEditable,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.form.distanceZones[g].isEditable?(r(),l("path",Uo)):(r(),l("path",jo))],8,Bo)),d(u,{action:()=>i.onRemoveDistanceZone(g),size:"xs",type:"danger"},null,8,["action"])]),e.form.distanceZones[g].isEditable?(r(),l("div",Po,[t("div",Lo,[No,t("span",null,"Zone "+T(g+1),1)]),t("div",Ho,[d(x,{min:"1",placeholder:"10",label:"Delivery distance up to",labelPopoverTitle:"What Is This?",modelValue:e.form.distanceZones[g].distance,"onUpdate:modelValue":E=>e.form.distanceZones[g].distance=E,errorText:o.getFormError("distanceZones"+g+"distance"),labelPopoverDescription:"Set the maximum distance eligible for this delivery method"},{suffix:p(()=>[S(T(i.store.distanceUnit),1)]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"]),d(F,{label:"Delivery fee",labelPopoverTitle:"What Is This?",modelValue:e.form.distanceZones[g].fee,"onUpdate:modelValue":E=>e.form.distanceZones[g].fee=E,errorText:o.getFormError("distanceZones"+g+"fee"),labelPopoverDescription:"Specify the fee charged for deliveries within the set distance range"},null,8,["modelValue","onUpdate:modelValue","errorText"])])])):(r(),l("div",{key:1,class:"space-y-2 cursor-pointer",onClick:E=>e.form.distanceZones[g].isEditable=!0},[t("div",Go,[t("div",Ro,[Wo,t("span",null,"Zone "+T(g+1),1)]),e.form.distanceZones[g].distance?(r(),k(D,{key:0,type:"info",text:e.form.distanceZones[g].distance+" "+i.store.distanceUnit,showDot:!1},null,8,["text"])):(r(),k(b,{key:1,errorText:"No distance",margin:"mt-0"})),e.form.distanceZones[g].fee?(r(),k(D,{key:2,type:"primary",text:i.store.currency.symbol+e.form.distanceZones[g].fee,showDot:!1},null,8,["text"])):(r(),k(b,{key:3,errorText:"No fee",margin:"mt-0"}))]),o.getFormError("distanceZones"+g+"distance")?(r(),k(b,{key:0,errorText:o.getFormError("distanceZones"+g+"distance")},null,8,["errorText"])):v("",!0),o.getFormError("distanceZones"+g+"fee")?(r(),k(b,{key:1,errorText:o.getFormError("distanceZones"+g+"fee")},null,8,["errorText"])):v("",!0)],8,qo))]))),128)),i.hasDistanceZones?v("",!0):(r(),l("div",$o,[t("div",zo,[Yo,t("div",Qo,[d(D,{type:"primary",text:"+ Add Zone",showDot:!1,clickable:!0,action:i.onAddDistanceZone},null,8,["action"]),S(" to offer delivery within specific distances for a fee ")])])])),t("div",Ko,[i.distanceZonesHaveChanged&&i.hasOriginalDistanceZones?(r(),k(y,{key:0,action:i.onResetDistanceZones,size:"xs"},{default:p(()=>[Jo]),_:1},8,["action"])):v("",!0),t("div",Xo,[t("div",es,[t("div",ts,[i.hasDistanceZones?v("",!0):(r(),l("div",os,"ðŸ‘†"))]),d(M,{action:i.onAddDistanceZone,class:"w-40",size:"xs"},{default:p(()=>[ss]),_:1},8,["action"])])])])])}const is=C(Io,[["render",rs]]),ls={mixins:[I],components:{TextInput:se,InputTags:Se,AddButton:te,MoneyInput:J,UndoButton:Q,DeleteButton:ne,BadgeIndicator:R,InputErrorMessage:oe},props:{form:{type:Object}},data(){return{originalPostalCodeZones:[],storeState:W()}},computed:{store(){return this.storeState.store},hasPostalCodeZones(){return this.form.postalCodeZones.length>0},hasOriginalPostalCodeZones(){return this.originalPostalCodeZones.length>0},postalCodeZonesHaveChanged(){var o=Z(this.form.postalCodeZones),s=Z(this.originalPostalCodeZones);return o.forEach(e=>delete e.isEditable),s.forEach(e=>delete e.isEditable),!Y(o,s)}},methods:{onAddPostalCodeZone(){var o=this.form.postalCodeZones.length,s=o>0?(this.form.postalCodeZones[o-1].fee*2).toString():"50.00";this.form.postalCodeZones.push({fee:s,name:"",postalCodes:[],isEditable:!0})},onRemovePostalCodeZone(o){this.form.postalCodeZones.splice(o,1)},onResetPostalCodeZones(){this.form.postalCodeZones=Z(this.originalPostalCodeZones)}}},ns={class:"space-y-4"},as=t("h1",{class:"text-md font-bold m-2"},"Zones",-1),ds={class:"absolute top-2 right-2 flex items-center space-x-2"},cs=["onClick"],ms={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},us={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},hs={key:0,class:"space-y-4"},fs={class:"flex items-center space-x-2 text-sm text-gray-500"},ps=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),_s={class:"space-y-4"},vs={class:"flex space-x-4"},ys=["onClick"],gs={class:"flex items-center space-x-4 text-sm text-gray-500 mb-4"},bs={class:"flex items-center space-x-2"},ks=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),ws={key:0,class:"flex space-x-2"},xs={key:0},Ts={class:"flex items-center space-x-4 px-4 py-4 border rounded-lg bg-gray-50"},Ms=t("svg",{class:"w-8 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),Ds={class:"text-sm space-y-2"},Ss={class:"flex justify-end space-x-2"},Cs=t("span",{class:"ml-1"},"Undo",-1),Fs={class:"flex justify-end"},Vs={class:"relative"},Is={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},As={key:0,class:"animate-bounce text-4xl"},Os=t("span",{class:"ml-2"},"Add Zone",-1);function Zs(o,s,e,_,a,i){const c=n("DeleteButton"),m=n("TextInput"),u=n("MoneyInput"),x=n("InputTags"),F=n("BadgeIndicator"),D=n("InputErrorMessage"),b=n("UndoButton"),y=n("AddButton");return r(),l("div",ns,[as,(r(!0),l(O,null,B(e.form.postalCodeZones,(M,f)=>(r(),l("div",{key:f,class:"relative bg-gray-50 p-4 border rounded-lg"},[t("div",ds,[(r(),l("svg",{class:"w-6 h-6 cursor-pointer hover:opacity-50",onClick:g=>e.form.postalCodeZones[f].isEditable=!e.form.postalCodeZones[f].isEditable,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.form.postalCodeZones[f].isEditable?(r(),l("path",ms)):(r(),l("path",us))],8,cs)),d(c,{action:()=>i.onRemovePostalCodeZone(f),size:"xs",type:"danger"},null,8,["action"])]),e.form.postalCodeZones[f].isEditable?(r(),l("div",hs,[t("div",fs,[ps,t("span",null,"Zone "+T(f+1),1)]),t("div",_s,[t("div",vs,[d(m,{label:"Area Name",placeholder:"Nairobi",labelPopoverTitle:"What Is This?",modelValue:e.form.postalCodeZones[f].name,"onUpdate:modelValue":g=>e.form.postalCodeZones[f].name=g,errorText:o.getFormError("postalCodeZones"+f+"name"),labelPopoverDescription:"Set the area name for this delivery method"},null,8,["modelValue","onUpdate:modelValue","errorText"]),d(u,{label:"Delivery fee",labelPopoverTitle:"What Is This?",modelValue:e.form.postalCodeZones[f].fee,"onUpdate:modelValue":g=>e.form.postalCodeZones[f].fee=g,errorText:o.getFormError("postalCodeZones"+f+"fee"),labelPopoverDescription:"Specify the fee charged for deliveries within the area"},null,8,["modelValue","onUpdate:modelValue","errorText"])]),(r(),k(x,{label:"Postal Codes",labelPopoverTitle:"What Is This?",key:e.form.postalCodeZones[f].postalCodes,tags:e.form.postalCodeZones[f].postalCodes,errorText:o.getFormError("postalCodeZones"+f+"value"),onOnTagsChanged:g=>e.form.postalCodeZones[f].postalCodes=g,labelPopoverDescription:"The postal codes supported by this area e.g 10001, 00100 or SW1A 1AA"},null,8,["tags","errorText","onOnTagsChanged"]))])])):(r(),l("div",{key:1,class:"space-y-2 cursor-pointer",onClick:g=>e.form.postalCodeZones[f].isEditable=!0},[t("div",gs,[t("div",bs,[ks,t("span",null,"Zone "+T(f+1),1)]),e.form.postalCodeZones[f].name?(r(),k(F,{key:0,type:"info",text:e.form.postalCodeZones[f].name,showDot:!1},null,8,["text"])):(r(),k(D,{key:1,errorText:"No name",margin:"mt-0"})),e.form.postalCodeZones[f].fee?(r(),k(F,{key:2,type:"primary",text:i.store.currency.symbol+e.form.postalCodeZones[f].fee,showDot:!1},null,8,["text"])):(r(),k(D,{key:3,errorText:"No fee",margin:"mt-0"}))]),e.form.postalCodeZones[f].postalCodes.length?(r(),l("div",ws,[(r(!0),l(O,null,B(e.form.postalCodeZones[f].postalCodes,(g,E)=>(r(),l("span",{key:E,class:"py-0.5 px-2 bg-gray-100 border text-gray-500 text-xs rounded-lg"},T(g),1))),128))])):(r(),k(D,{key:1,errorText:"No postal codes",margin:"mt-0"})),o.getFormError("postalCodeZones"+f+"name")?(r(),k(D,{key:2,errorText:o.getFormError("postalCodeZones"+f+"name")},null,8,["errorText"])):v("",!0),o.getFormError("postalCodeZones"+f+"fee")?(r(),k(D,{key:3,errorText:o.getFormError("postalCodeZones"+f+"fee")},null,8,["errorText"])):v("",!0)],8,ys))]))),128)),i.hasPostalCodeZones?v("",!0):(r(),l("div",xs,[t("div",Ts,[Ms,t("div",Ds,[t("p",null,[d(F,{type:"primary",text:"+ Add Zone",showDot:!1,clickable:!0,action:i.onAddPostalCodeZone},null,8,["action"]),S(" to offer delivery to specific postal codes for a fee")])])])])),t("div",Ss,[i.postalCodeZonesHaveChanged&&i.hasOriginalPostalCodeZones?(r(),k(b,{key:0,action:i.onResetPostalCodeZones,size:"xs"},{default:p(()=>[Cs]),_:1},8,["action"])):v("",!0),t("div",Fs,[t("div",Vs,[t("div",Is,[i.hasPostalCodeZones?v("",!0):(r(),l("div",As,"ðŸ‘†"))]),d(y,{action:i.onAddPostalCodeZone,class:"w-40",size:"xs"},{default:p(()=>[Os]),_:1},8,["action"])])])])])}const Es=C(ls,[["render",Zs]]),Bs={mixins:[I],components:{MoneyInput:J},props:{form:{type:Object}}};function Us(o,s,e,_,a,i){const c=n("MoneyInput");return e.form.feeType=="flat fee"?(r(),k(c,{key:0,label:"Flat Fee",modelValue:e.form.flatFeeRate,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.flatFeeRate=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("flatFeeRate"),labelPopoverDescription:"Set the flat fee amount (This is the flat fee that will be applied as a charge)"},null,8,["modelValue","errorText"])):v("",!0)}const js=C(Bs,[["render",Us]]),Ps={mixins:[I],components:{SelectInput:$},props:{form:{type:Object}}},Ls=t("option",{value:"flat fee"},"Flat fee",-1),Ns=t("option",{value:"percentage fee"},"Percentage fee",-1),Hs=t("option",{value:"fee by distance"},"Fee by distance",-1),qs=t("option",{value:"fee by postal code"},"Fee by postal code",-1);function Gs(o,s,e,_,a,i){const c=n("SelectInput");return r(),k(c,{width:"w-full",label:"Fee Type",modelValue:e.form.feeType,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.feeType=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("feeType"),labelPopoverDescription:"Select the free type e.g Is this a flat fee or a free that is calculated based on a percetange of the total cart amount, location distance or postal code?"},{default:p(()=>[Ls,Ns,Hs,qs]),_:1},8,["modelValue","errorText"])}const Rs=C(Ps,[["render",Gs]]),Ws={mixins:[I],components:{ToogleSwitch:ee},props:{form:{type:Object}}};function $s(o,s,e,_,a,i){const c=n("ToogleSwitch");return r(),k(c,{size:"md",modelValue:e.form.chargeFee,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.chargeFee=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("chargeFee"),labelPopoverDescription:"Turn on so that your delivery method charges a fee. Turn off so that your delivery method is free of charge"},{default:p(()=>[S(" Charge fee ")]),_:1},8,["modelValue","errorText"])}const zs=C(Ws,[["render",$s]]),Ys={mixins:[I],components:{NumberInput:L},props:{form:{type:Object}}};function Qs(o,s,e,_,a,i){const c=n("NumberInput");return e.form.feeType=="percentage fee"?(r(),k(c,{key:0,min:"1",placeholder:"100",label:"Percentage Fee",modelValue:e.form.percentageFeeRate,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.percentageFeeRate=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("percentageFeeRate"),labelPopoverDescription:"Set the percentage fee amount (This is the percentage fee that will be applied as a charge)"},{suffix:p(()=>[S("%")]),_:1},8,["modelValue","errorText"])):v("",!0)}const Ks=C(Ys,[["render",Qs]]),Js={components:{FeeByDistance:is,FeeByPostalCode:Es,FlatFeeMoneyInput:js,FeeTypeSelectInput:Rs,ChargeFeeToogleSwitch:zs,PercentageFeeNumberInput:Ks},props:{form:{type:Object}}},Xs={class:"flex justify-between items-center space-x-8"};function er(o,s,e,_,a,i){const c=n("ChargeFeeToogleSwitch"),m=n("FeeTypeSelectInput"),u=n("FlatFeeMoneyInput"),x=n("PercentageFeeNumberInput"),F=n("FeeByDistance"),D=n("FeeByPostalCode");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.chargeFee}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.chargeFee},"transition-all duration-500"])},[d(c,{form:e.form},null,8,["form"]),t("div",{class:V([e.form.chargeFee?"h-24 mt-4 p-0.5":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[t("div",Xs,[d(m,{form:e.form},null,8,["form"]),d(u,{form:e.form},null,8,["form"]),d(x,{form:e.form},null,8,["form"])])],2),e.form.chargeFee&&e.form.feeType=="fee by distance"?(r(),k(F,{key:0,form:e.form},null,8,["form"])):v("",!0),e.form.chargeFee&&e.form.feeType=="fee by postal code"?(r(),k(D,{key:1,form:e.form},null,8,["form"])):v("",!0)],2)],2)}const tr=C(Js,[["render",er]]),or={mixins:[I],components:{TextInput:se},props:{form:{type:Object}}};function sr(o,s,e,_,a,i){const c=n("TextInput");return r(),k(c,{label:"Name",modelValue:e.form.name,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.name=m),placeholder:"In-house Delivery",errorText:o.getFormError("name"),labelPopoverTitle:"What Is This?",labelPopoverDescription:"The delivery method name e.g In-house delivery, Self pickup or Dine in"},null,8,["modelValue","errorText"])}const rr=C(or,[["render",sr]]),ir={mixins:[I],components:{Checkbox:U},props:{form:{type:Object}}},lr=t("div",{class:"space-y-1 mt-0.5"},[t("p",{class:"font-bold text-sm mx-2"},"Capture additional fields"),t("p",{class:"text-sm text-gray-500 mx-2"},"Collect extra information from customers before placing an order, such as short answers, selected dates and times, file uploads or map locations")],-1);function nr(o,s,e,_,a,i){const c=n("Checkbox");return r(),k(c,{size:"xs",modelValue:e.form.captureAdditionalFields,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.captureAdditionalFields=m),errorText:o.getFormError("captureAdditionalFields")},{default:p(()=>[lr]),_:1},8,["modelValue","errorText"])}const ar=C(ir,[["render",nr]]),dr={mixins:[I],components:{draggable:Ce,TextInput:se,AddButton:te,MoneyInput:J,Checkbox:U,UndoButton:Q,SelectInput:$,ConfirmModal:X,NumberInput:L,TextareaInput:ae,PrimaryButton:K,BadgeIndicator:R,InputErrorMessage:oe,CaptureAdditionalFieldsToogleSwitch:ar},props:{form:{type:Object}},data(){return{originalFields:[],deletableIndex:null,storeState:W(),deletableAdditionalField:null}},computed:{store(){return this.storeState.store},hasFields(){return this.form.additionalFields.length>0},hasOriginalFields(){return this.originalFields.length>0},hasCollapsedAll(){return this.form.additionalFields.every(o=>o.isEditable===!1)},hasExpandedAll(){return this.form.additionalFields.every(o=>o.isEditable===!0)},fieldsHaveChanged(){var o=Z(this.form.additionalFields),s=Z(this.originalFields);return o.forEach(e=>delete e.isEditable),s.forEach(e=>delete e.isEditable),!Y(o,s)}},methods:{onAddField(){this.form.additionalFields.push({validation:"not applicable",type:"short answer",isEditable:!0,required:!1,description:"",options:[],question:"",min:"1",max:"2"})},showDeleteConfirmationModal(o,s){this.deletableIndex=s,this.deletableAdditionalField=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},onRemoveField(o){this.form.additionalFields.splice(this.deletableIndex,1),o()},onResetFields(){this.form.additionalFields=Z(this.originalFields)},hasOptions(o){return this.form.additionalFields[o].options.length>0},supportsOptions(o){return o.type=="checkbox"||o.type=="select"},onAddOption(o){this.form.additionalFields[o].options.push({name:"",fee:"0.00"})},collapseAll(){this.form.additionalFields.forEach(o=>{o.isEditable=!1})},expandAll(){this.form.additionalFields.forEach(o=>{o.isEditable=!0})},onRemoveFieldOption(o,s){this.form.additionalFields[o].options.splice(s,1)}}},cr={key:0,class:"space-y-4 mt-4"},mr={class:"flex justify-end items-center space-x-2 px-2"},ur=["onClick"],hr={class:"absolute top-2 right-2 flex items-center space-x-2 opacity-20 group-hover:opacity-100"},fr=["onClick"],pr=["onClick"],_r={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 9V4.5M9 9H4.5M9 9 3.75 3.75M9 15v4.5M9 15H4.5M9 15l-5.25 5.25M15 9h4.5M15 9V4.5M15 9l5.25-5.25M15 15h4.5M15 15v4.5m0-4.5 5.25 5.25"},vr={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"},yr=["onClick"],gr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),br=[gr],kr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),wr=[kr],xr={key:0,class:"space-y-4"},Tr={class:"flex items-center space-x-2"},Mr={key:0,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Dr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"},null,-1),Sr=[Dr],Cr={key:1,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Fr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),Vr=[Fr],Ir={key:2,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ar=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"},null,-1),Or=[Ar],Zr={key:3,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Er=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),Br=[Er],Ur={key:4,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},jr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"},null,-1),Pr=[jr],Lr={key:5,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Nr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),Hr=[Nr],qr={key:6,class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Gr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Rr=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"},null,-1),Wr=[Gr,Rr],$r=t("option",{value:"short answer"},"Short answer",-1),zr=t("option",{value:"time"},"Time",-1),Yr=t("option",{value:"date"},"Date",-1),Qr=t("option",{value:"checkbox"},"Checkbox",-1),Kr=t("option",{value:"select"},"Select",-1),Jr=t("option",{value:"file upload"},"File upload",-1),Xr=t("option",{value:"location"},"Location",-1),ei=["onClick"],ti=["onClick"],oi={class:"w-full flex items-center space-x-4"},si={class:"flex items-center space-x-4"},ri=["onClick"],ii=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),li=[ii],ni=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),ai=[ni],di={class:"flex justify-end"},ci={class:"relative"},mi={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},ui={key:0,class:"animate-bounce text-4xl"},hi=t("span",{class:"ml-2"},"Add Option",-1),fi={key:0,class:"flex items-end space-x-2"},pi=t("option",{value:"not applicable"},"Not applicable",-1),_i=t("option",{value:"select at least"},"Select at least",-1),vi=t("option",{value:"select at most"},"Select at most",-1),yi=t("option",{value:"select between"},"Select between",-1),gi=t("p",{class:"text-sm mt-0.5 mx-2"},"Required",-1),bi=["onClick"],ki={class:"flex items-center space-x-2 text-sm text-gray-500"},wi={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},xi=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"},null,-1),Ti=[xi],Mi={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Di=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),Si=[Di],Ci={key:2,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Fi=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"},null,-1),Vi=[Fi],Ii={key:3,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ai=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),Oi=[Ai],Zi={key:4,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ei=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"},null,-1),Bi=[Ei],Ui={key:5,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ji=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),Pi=[ji],Li={key:6,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ni=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),Hi=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"},null,-1),qi=[Ni,Hi],Gi={key:7},Ri={key:0,class:"text-sm text-gray-500"},Wi={class:"flex justify-end space-x-2"},$i=t("span",{class:"ml-1"},"Undo",-1),zi={class:"flex justify-end"},Yi={class:"relative"},Qi={class:"absolute -bottom-12 left-1/2 transform -translate-x-1/2"},Ki={key:0,class:"animate-bounce text-4xl"},Ji=t("span",{class:"ml-2"},"Add Field",-1),Xi=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),el={key:0,class:"flex items-start space-x-2 border rounded-lg p-2 mb-4"},tl={key:0,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ol=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25H12"},null,-1),sl=[ol],rl={key:1,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},il=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),ll=[il],nl={key:2,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},al=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 3v2.25M17.25 3v2.25M3 18.75V7.5a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 7.5v11.25m-18 0A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75m-18 0v-7.5A2.25 2.25 0 0 1 5.25 9h13.5A2.25 2.25 0 0 1 21 11.25v7.5"},null,-1),dl=[al],cl={key:3,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ml=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1),ul=[ml],hl={key:4,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},fl=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 15 12 18.75 15.75 15m-7.5-6L12 5.25 15.75 9"},null,-1),pl=[fl],_l={key:5,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},vl=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5m-13.5-9L12 3m0 0 4.5 4.5M12 3v13.5"},null,-1),yl=[vl],gl={key:6,class:"w-4 h-4 flex-shrink-0 mt-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},bl=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"},null,-1),kl=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"},null,-1),wl=[bl,kl],xl={class:"mb-8"};function Tl(o,s,e,_,a,i){const c=n("CaptureAdditionalFieldsToogleSwitch"),m=n("SelectInput"),u=n("TextInput"),x=n("TextareaInput"),F=n("MoneyInput"),D=n("draggable"),b=n("AddButton"),y=n("NumberInput"),M=n("Checkbox"),f=n("InputErrorMessage"),g=n("BadgeIndicator"),E=n("UndoButton"),N=n("PrimaryButton"),z=n("ConfirmModal");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.captureAdditionalFields}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.captureAdditionalFields},"transition-all duration-500"])},[d(c,{form:e.form},null,8,["form"]),e.form.captureAdditionalFields?(r(),l("div",cr,[t("div",mr,[e.form.additionalFields.length>=2&&!i.hasCollapsedAll?(r(),l("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:s[0]||(s[0]=(...w)=>i.collapseAll&&i.collapseAll(...w))}," collapse all ")):v("",!0),e.form.additionalFields.length>=2&&!i.hasExpandedAll?(r(),l("span",{key:1,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:s[1]||(s[1]=H((...w)=>i.expandAll&&i.expandAll(...w),["stop"]))}," expand all ")):v("",!0)]),d(D,{class:"space-y-2",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:e.form.additionalFields,"onUpdate:modelValue":s[4]||(s[4]=w=>e.form.additionalFields=w)},{default:p(()=>[(r(!0),l(O,null,B(e.form.additionalFields,(w,h)=>(r(),l("div",{key:h,onClick:A=>e.form.additionalFields[h].isEditable?null:e.form.additionalFields[h].isEditable=!0,class:V(["w-full relative bg-gray-50 p-4 border rounded-lg hover:bg-gray-100 group",{"cursor-pointer":!e.form.additionalFields[h].isEditable}])},[t("div",hr,[e.form.additionalFields[h].isEditable?(r(),l("span",{key:0,class:"text-sm text-gray-500 underline hover:text-black cursor-pointer",onClick:H(A=>e.form.additionalFields[h].isEditable=!1,["stop"])}," close ",8,fr)):(r(),l("svg",{key:1,class:"w-4 h-4 cursor-pointer hover:opacity-50",onClick:H(A=>e.form.additionalFields[h].isEditable=!0,["stop"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e.form.additionalFields[h].isEditable?(r(),l("path",_r)):(r(),l("path",vr))],8,pr)),(r(),l("svg",{onClick:H(A=>i.showDeleteConfirmationModal(w,h),["stop"]),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},br,8,yr)),(r(),l("svg",{onClick:s[2]||(s[2]=H(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},wr))]),e.form.additionalFields[h].isEditable?(r(),l("div",xr,[t("div",Tr,[w.type=="short answer"?(r(),l("svg",Mr,Sr)):w.type=="time"?(r(),l("svg",Cr,Vr)):w.type=="date"?(r(),l("svg",Ir,Or)):w.type=="checkbox"?(r(),l("svg",Zr,Br)):w.type=="select"?(r(),l("svg",Ur,Pr)):w.type=="file upload"?(r(),l("svg",Lr,Hr)):w.type=="location"?(r(),l("svg",qr,Wr)):v("",!0),d(m,{width:"w-60",labelPopoverTitle:"What Is This?",modelValue:e.form.additionalFields[h].type,"onUpdate:modelValue":A=>e.form.additionalFields[h].type=A,errorText:o.getFormError("additionalFields"+h+"type"),labelPopoverDescription:"Select the field type"},{default:p(()=>[$r,zr,Yr,Qr,Kr,Jr,Xr]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"])]),d(u,{placeholder:"Question",labelPopoverTitle:"What Is This?",modelValue:e.form.additionalFields[h].question,"onUpdate:modelValue":A=>e.form.additionalFields[h].question=A,labelPopoverDescription:"The question to ask the customer",errorText:o.getFormError("additionalFields"+h+"question")},null,8,["modelValue","onUpdate:modelValue","errorText"]),e.form.additionalFields[h].addDescription?(r(),k(x,{key:0,rows:2,placeholder:"Description",labelPopoverTitle:"What Is This?",modelValue:e.form.additionalFields[h].description,"onUpdate:modelValue":A=>e.form.additionalFields[h].description=A,errorText:o.getFormError("additionalFields"+h+"description"),labelPopoverDescription:"Additional information related to the question"},null,8,["modelValue","onUpdate:modelValue","errorText"])):(r(),l("span",{key:1,onClick:H(A=>e.form.additionalFields[h].addDescription=!0,["stop"]),class:"inline-block text-sm text-gray-500 underline cursor-pointer px-2"}," Add description ",8,ei)),e.form.additionalFields[h].addDescription==!0&&e.form.additionalFields[h].description==""?(r(),l("span",{key:2,class:"inline-block text-sm text-gray-500 underline cursor-pointer px-2",onClick:H(A=>e.form.additionalFields[h].addDescription=!1,["stop"])}," Hide description ",8,ti)):v("",!0),i.supportsOptions(w)?(r(),l(O,{key:3},[d(D,{class:"space-y-2",handle:".draggable-handle-2","ghost-class":"bg-yellow-50",modelValue:e.form.additionalFields[h].options,"onUpdate:modelValue":A=>e.form.additionalFields[h].options=A},{default:p(()=>[(r(!0),l(O,null,B(e.form.additionalFields[h].options,(A,j)=>(r(),l("div",{key:j,class:"flex items-center justify-between space-x-4 rounded-lg py-2 px-2 hover:border-blue-200 hover:bg-gray-50 group"},[t("div",oi,[d(u,{class:"w-full",placeholder:"Option",modelValue:e.form.additionalFields[h].options[j].name,"onUpdate:modelValue":G=>e.form.additionalFields[h].options[j].name=G,errorText:o.getFormError("additionalFields"+h+"options"+j+"name")},null,8,["modelValue","onUpdate:modelValue","errorText"]),d(F,{modelValue:e.form.additionalFields[h].options[j].fee,"onUpdate:modelValue":G=>e.form.additionalFields[h].options[j].fee=G,errorText:o.getFormError("additionalFields"+h+"options"+j+"fee")},null,8,["modelValue","onUpdate:modelValue","errorText"])]),t("div",si,[(r(),l("svg",{onClick:G=>i.onRemoveFieldOption(h,j),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},li,8,ri)),(r(),l("svg",{onClick:s[3]||(s[3]=H(()=>{},["stop"])),class:"draggable-handle-2 w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ai))])]))),128))]),_:2},1032,["modelValue","onUpdate:modelValue"]),t("div",di,[t("div",ci,[t("div",mi,[i.hasOptions(h)?v("",!0):(r(),l("div",ui,"ðŸ‘†"))]),d(b,{action:()=>i.onAddOption(h),class:"w-40",size:"xs"},{default:p(()=>[hi]),_:2},1032,["action"])])])],64)):v("",!0),t("div",{class:V(["flex",w.type=="checkbox"?"justify-between":"justify-end","items-end"])},[w.type=="checkbox"?(r(),l("div",fi,[d(m,{width:"w-60",label:"Validation",labelPopoverTitle:"What Is This?",modelValue:e.form.additionalFields[h].validation,"onUpdate:modelValue":A=>e.form.additionalFields[h].validation=A,errorText:o.getFormError("additionalFields"+h+"validation"),labelPopoverDescription:"Select the type of validation to be applied"},{default:p(()=>[pi,_i,vi,yi]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"]),e.form.additionalFields[h].validation=="select at least"||e.form.additionalFields[h].validation=="select between"?(r(),k(y,{key:0,min:"0",class:"w-24",modelValue:e.form.additionalFields[h].min,"onUpdate:modelValue":A=>e.form.additionalFields[h].min=A,errorText:o.getFormError("additionalFields"+h+"min"),label:e.form.additionalFields[h].validation=="select at least"?"":"Min"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):v("",!0),e.form.additionalFields[h].validation=="select at most"||e.form.additionalFields[h].validation=="select between"?(r(),k(y,{key:1,min:"0",class:"w-24",modelValue:e.form.additionalFields[h].max,"onUpdate:modelValue":A=>e.form.additionalFields[h].max=A,errorText:o.getFormError("additionalFields"+h+"max"),label:e.form.additionalFields[h].validation=="select at most"?"":"Max"},null,8,["modelValue","onUpdate:modelValue","errorText","label"])):v("",!0)])):v("",!0),d(M,{size:"xs",modelValue:e.form.additionalFields[h].required,"onUpdate:modelValue":A=>e.form.additionalFields[h].required=A,errorText:o.getFormError("additionalFields"+h+"required"),labelPopoverDescription:"Whether this field is always required"},{default:p(()=>[gi]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"])],2)])):(r(),l("div",{key:1,class:"space-y-2",onClick:A=>e.form.additionalFields[h].isEditable=!0},[t("div",ki,[w.type=="short answer"?(r(),l("svg",wi,Ti)):w.type=="time"?(r(),l("svg",Mi,Si)):w.type=="date"?(r(),l("svg",Ci,Vi)):w.type=="checkbox"?(r(),l("svg",Ii,Oi)):w.type=="select"?(r(),l("svg",Zi,Bi)):w.type=="file upload"?(r(),l("svg",Ui,Pi)):w.type=="location"?(r(),l("svg",Li,qi)):v("",!0),w.question?(r(),l("span",Gi,T(w.question),1)):(r(),k(f,{key:8,errorText:"No question asked",margin:"mt-0"})),w.required?(r(),k(g,{key:9,type:"primary",text:"required",showDot:!1})):v("",!0)]),w.description?(r(),l("p",Ri,T(w.description),1)):v("",!0)],8,bi))],10,ur))),128))]),_:1},8,["modelValue"]),t("div",Wi,[i.fieldsHaveChanged&&i.hasOriginalFields?(r(),k(E,{key:0,action:i.onResetFields,size:"xs"},{default:p(()=>[$i]),_:1},8,["action"])):v("",!0),t("div",zi,[t("div",Yi,[t("div",Qi,[i.hasFields?v("",!0):(r(),l("div",Ki,"ðŸ‘†"))]),d(b,{action:i.onAddField,class:"w-40",size:"xs"},{default:p(()=>[Ji]),_:1},8,["action"])])])])])):v("",!0)],2),a.deletableAdditionalField?(r(),k(z,{key:0,approveText:"Delete",approveAction:w=>i.onRemoveField(w)},{content:p(()=>[Xi,a.deletableAdditionalField.question?(r(),l("div",el,[a.deletableAdditionalField.type=="short answer"?(r(),l("svg",tl,sl)):a.deletableAdditionalField.type=="time"?(r(),l("svg",rl,ll)):a.deletableAdditionalField.type=="date"?(r(),l("svg",nl,dl)):a.deletableAdditionalField.type=="checkbox"?(r(),l("svg",cl,ul)):a.deletableAdditionalField.type=="select"?(r(),l("svg",hl,pl)):a.deletableAdditionalField.type=="file upload"?(r(),l("svg",_l,yl)):a.deletableAdditionalField.type=="location"?(r(),l("svg",gl,wl)):v("",!0),t("span",null,T(a.deletableAdditionalField.question),1)])):v("",!0),t("p",xl,[S("Are you sure you want to delete this "),d(g,{type:"primary",text:a.deletableAdditionalField.type,showDot:!1},null,8,["text"]),S(" field?")])]),trigger:p(w=>[d(N,{ref:"confirmDeleteButton",onClick:w.showModal,class:"hidden",type:"danger"},null,8,["onClick"])]),_:1},8,["approveAction"])):v("",!0)],2)}const Ml=C(dr,[["render",Tl]]),Dl={mixins:[I],components:{ToogleSwitch:ee},props:{form:{type:Object}}};function Sl(o,s,e,_,a,i){const c=n("ToogleSwitch");return r(),k(c,{size:"md",modelValue:e.form.active,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.active=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("active"),labelPopoverDescription:"Turn on so that your delivery method is made available to customers. Turn off so that your delivery method not available to customers"},{default:p(()=>[S(" Active ")]),_:1},8,["modelValue","errorText"])}const Cl=C(Dl,[["render",Sl]]),Fl={mixins:[I],components:{TextareaInput:ae},props:{form:{type:Object}}};function Vl(o,s,e,_,a,i){const c=n("TextareaInput");return r(),k(c,{rows:2,label:"Description",modelValue:e.form.description,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.description=m),labelPopoverTitle:"What Is This?",errorText:o.getFormError("description"),placeholder:"Delivery using our in-house logistics service",labelPopoverDescription:"A short and sweet description of how delivery/pickup will be accomplished"},null,8,["modelValue","errorText"])}const Il=C(Fl,[["render",Vl]]),Al={mixins:[I],components:{ConfirmModal:X,PrimaryButton:K},props:{form:{type:Object}},data(){return{isDeleting:!1,storeState:W(),deliveryMethodState:P()}},computed:{store(){return this.storeState.store},deliveryMethod(){return this.deliveryMethodState.deliveryMethod},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod}},methods:{deleteDeliveryMethod(){this.isDeleting=!0,ye(this.deliveryMethod._links.deleteDeliveryMethod).then(o=>{o.status==200?o.data.deleted?(this.$router.push({name:"show-store-delivery-methods",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),this.showSuccessfulNotification("Delivery method deleted")):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)),this.isDeleting=!1}).catch(o=>{this.isDeleting=!1,this.setServerFormErrors(o)})}}},Ol={class:"font-bold text-black"},Zl={class:"flex justify-end"},El=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),Bl={class:"mb-8"},Ul={class:"font-bold text-black"};function jl(o,s,e,_,a,i){const c=n("PrimaryButton"),m=n("ConfirmModal");return i.deliveryMethod?(r(),l("div",{key:0,class:V(["space-y-4 shadow-lg rounded-lg border p-4",i.isLoadingDeliveryMethod?"bg-gray-50":"border-red-300 bg-red-50"])},[t("p",null,[S("Do you want to permanently delete "),t("span",Ol,T(e.form.name),1),S("? Once this delivery method is deleted you will not be able to recover it.")]),t("div",Zl,[d(m,{approveText:"Delete Delivery Method",approveAction:i.deleteDeliveryMethod,isLoading:a.isDeleting},{content:p(()=>[El,t("p",Bl,[S("Are you sure you want to permanently delete "),t("span",Ul,T(e.form.name),1),S("?")])]),trigger:p(u=>[d(c,{onClick:u.showModal,loading:a.isDeleting,class:"w-60",type:"danger"},{default:p(()=>[S(" Delete Delivery Method ")]),_:2},1032,["onClick","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):v("",!0)}const Pl=C(Al,[["render",jl]]),Ll={mixins:[I],components:{Checkbox:U,NumberInput:L},props:{form:{type:Object}}},Nl=t("div",{class:"space-y-1 mt-0.5"},[t("p",{class:"font-bold text-sm mx-2"},"Qualify on minimum grand total"),t("p",{class:"text-sm text-gray-500 mx-2"},"Customer carts must qualify with a minimum grand total before placing an order.")],-1);function Hl(o,s,e,_,a,i){const c=n("Checkbox"),m=n("NumberInput");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.qualifyOnMinimumGrandTotal}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.qualifyOnMinimumGrandTotal},"transition-all duration-500"])},[d(c,{size:"xs",modelValue:e.form.qualifyOnMinimumGrandTotal,"onUpdate:modelValue":s[0]||(s[0]=u=>e.form.qualifyOnMinimumGrandTotal=u),errorText:o.getFormError("qualifyOnMinimumGrandTotal")},{default:p(()=>[Nl]),_:1},8,["modelValue","errorText"]),t("div",{class:V([e.form.qualifyOnMinimumGrandTotal?"h-24 p-0.5":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[e.form.qualifyOnMinimumGrandTotal?(r(),k(m,{key:0,min:"1",placeholder:"100",class:"max-w-80 mt-4",label:"Minimum Grand Total",labelPopoverTitle:"What Is This?",modelValue:e.form.minimumGrandTotal,"onUpdate:modelValue":s[1]||(s[1]=u=>e.form.minimumGrandTotal=u),errorText:o.getFormError("minimumGrandTotal"),labelPopoverDescription:"Customer carts must qualify with a minimum grand total before placing an order"},null,8,["modelValue","errorText"])):v("",!0)],2)],2)],2)}const ql=C(Ll,[["render",Hl]]),Gl={mixins:[I],components:{Checkbox:U},props:{form:{type:Object}}},Rl=t("div",{class:"space-y-1 mt-0.5"},[t("p",{class:"font-bold text-sm mx-2"},"Require location on map"),t("p",{class:"text-sm text-gray-500 mx-2"},"Customers must pick a location on the map for accurate delivery")],-1);function Wl(o,s,e,_,a,i){const c=n("Checkbox");return r(),k(c,{size:"xs",modelValue:e.form.requireLocationOnMap,"onUpdate:modelValue":s[0]||(s[0]=m=>e.form.requireLocationOnMap=m),errorText:o.getFormError("requireLocationOnMap")},{default:p(()=>[Rl]),_:1},8,["modelValue","errorText"])}const $l=C(Gl,[["render",Wl]]),zl={mixins:[I],components:{Checkbox:U,NumberInput:L},props:{form:{type:Object}}},Yl=t("div",{class:"mt-0.5 mx-2"},[t("p",{class:"font-bold text-sm mb-1"},"Set daily order limit"),t("p",{class:"text-sm text-gray-500 max-w-96"},"Orders placed must not exceed the daily limit specified")],-1),Ql=t("span",{class:"text-sm"}," Accept no more than ",-1),Kl=t("span",{class:"text-sm"}," orders per day ",-1);function Jl(o,s,e,_,a,i){const c=n("Checkbox"),m=n("NumberInput");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.setDailyOrderLimit}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.setDailyOrderLimit},"transition-all duration-500"])},[d(c,{size:"xs",modelValue:e.form.setDailyOrderLimit,"onUpdate:modelValue":s[0]||(s[0]=u=>e.form.setDailyOrderLimit=u),errorText:o.getFormError("setDailyOrderLimit")},{default:p(()=>[Yl]),_:1},8,["modelValue","errorText"]),t("div",{class:V([e.form.setDailyOrderLimit?"h-10 mt-4 py-0.5":"h-0 mt-0 py-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[Ql,d(m,{min:"1",placeholder:"1",class:"w-24 inline-block",modelValue:e.form.dailyOrderLimit,"onUpdate:modelValue":s[1]||(s[1]=u=>e.form.dailyOrderLimit=u)},null,8,["modelValue"]),Kl],2)],2)],2)}const Xl=C(zl,[["render",Jl]]),en={mixins:[I],components:{Checkbox:U,NumberInput:L},props:{form:{type:Object}}},tn=t("div",{class:"space-y-1 mt-0.5"},[t("p",{class:"font-bold text-sm mx-2"},"Offer free delivery on minimum grand total"),t("p",{class:"text-sm text-gray-500 mx-2"},"Customer carts must qualify with a minimum grand total to claim free delivery.")],-1);function on(o,s,e,_,a,i){const c=n("Checkbox"),m=n("NumberInput");return r(),l("div",{class:V([{"border border-dashed rounded-lg":e.form.offerFreeDeliveryOnMinimumGrandTotal}])},[t("div",{class:V([{"bg-blue-50 p-4 rounded-lg":e.form.offerFreeDeliveryOnMinimumGrandTotal},"transition-all duration-500"])},[d(c,{size:"xs",modelValue:e.form.offerFreeDeliveryOnMinimumGrandTotal,"onUpdate:modelValue":s[0]||(s[0]=u=>e.form.offerFreeDeliveryOnMinimumGrandTotal=u),errorText:o.getFormError("offerFreeDeliveryOnMinimumGrandTotal")},{default:p(()=>[tn]),_:1},8,["modelValue","errorText"]),t("div",{class:V([e.form.offerFreeDeliveryOnMinimumGrandTotal?"h-24 p-0.5":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[e.form.offerFreeDeliveryOnMinimumGrandTotal?(r(),k(m,{key:0,min:"1",placeholder:"100",class:"max-w-80 mt-4",label:"Minimum Grand Total",labelPopoverTitle:"What Is This?",modelValue:e.form.freeDeliveryMinimumGrandTotal,"onUpdate:modelValue":s[1]||(s[1]=u=>e.form.freeDeliveryMinimumGrandTotal=u),errorText:o.getFormError("minimumGrandTotal"),labelPopoverDescription:"Customer carts must qualify with a minimum grand total to claim free delivery"},null,8,["modelValue","errorText"])):v("",!0)],2)],2)],2)}const sn=C(en,[["render",on]]),rn={mixins:[I],components:{Alert:ie,TextHeader:he,BackButton:fe,UndoButton:Q,ShineEffect:pe,PrimaryButton:K,LineSkeleton:_e,MoreInfoPopover:le,BackdropLoader:ve,FormErrorMessages:we,Schedule:wo,ChargeFee:tr,NameTextInput:rr,ActiveToggleSwitch:Cl,AdditionalFields:Ml,DescriptionTextarea:Il,DeleteDeliveryMethod:Pl,QualifyOnMinimumGrandTotal:ql,RequireLocationMapCheckbox:$l,SetDailyOrderLimitCheckbox:Xl,OfferFreeDeliveryOnMinimumGrandTotal:sn},data(){return{form:{name:"",active:!0,description:"",chargeFee:!1,distanceZones:[],setSchedule:!1,feeType:"flat fee",postalCodeZones:[],additionalFields:[],scheduleType:"date",flatFeeRate:"10.00",dailyOrderLimit:"1000",percentageFeeRate:"10",setDailyOrderLimit:!1,timeSlotIntervalValue:"1",minimumGrandTotal:"100.00",requireLocationOnMap:!1,latestDeliveryTimeValue:"7",timeSlotIntervalUnit:"hour",autoGenerateTimeSlots:!1,showDistanceOnInvoice:!1,earliestDeliveryTimeValue:"3",captureAdditionalFields:!1,earliestDeliveryTimeUnit:"day",qualifyOnMinimumGrandTotal:!1,requireMinimumNoticeForOrders:!1,restrictMaximumNoticeForOrders:!1,freeDeliveryMinimumGrandTotal:"200.00",offerFreeDeliveryOnMinimumGrandTotal:!1,operationalHours:this.generateOperationalHours()},originalForm:null,isSubmitting:!1,apiState:re(),storeState:W(),deliveryMethodState:P()}},computed:{store(){return this.storeState.store},isCreating(){return this.$route.name==="create-store-delivery-method"},isEditting(){return this.$route.name==="show-store-delivery-method"},isLoadingDeliveryMethod(){return this.deliveryMethodState.isLoadingDeliveryMethod},formHasChanged(){var o=Z(this.form),s=Z(this.originalForm);return!Y(o,s)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingDeliveryMethod&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingDeliveryMethod&&!this.isSubmitting}},methods:{goBack(){this.$router.push({name:"show-store-delivery-methods",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)})},setFormFields(){this.form={name:this.deliveryMethod.name,active:this.deliveryMethod.active,feeType:this.deliveryMethod.feeType,chargeFee:this.deliveryMethod.chargeFee,setSchedule:this.deliveryMethod.setSchedule,description:this.deliveryMethod.description,scheduleType:this.deliveryMethod.scheduleType,operationalHours:this.deliveryMethod.operationalHours,setDailyOrderLimit:this.deliveryMethod.setDailyOrderLimit,timeSlotIntervalUnit:this.deliveryMethod.timeSlotIntervalUnit,requireLocationOnMap:this.deliveryMethod.requireLocationOnMap,percentageFeeRate:this.deliveryMethod.percentageFeeRate.value,dailyOrderLimit:this.deliveryMethod.dailyOrderLimit.toString(),autoGenerateTimeSlots:this.deliveryMethod.autoGenerateTimeSlots,showDistanceOnInvoice:this.deliveryMethod.showDistanceOnInvoice,flatFeeRate:this.deliveryMethod.flatFeeRate.amountWithoutCurrency,captureAdditionalFields:this.deliveryMethod.captureAdditionalFields,earliestDeliveryTimeUnit:this.deliveryMethod.earliestDeliveryTimeUnit,qualifyOnMinimumGrandTotal:this.deliveryMethod.qualifyOnMinimumGrandTotal,timeSlotIntervalValue:this.deliveryMethod.timeSlotIntervalValue.toString(),minimumGrandTotal:this.deliveryMethod.minimumGrandTotal.amountWithoutCurrency,latestDeliveryTimeValue:this.deliveryMethod.latestDeliveryTimeValue.toString(),requireMinimumNoticeForOrders:this.deliveryMethod.requireMinimumNoticeForOrders,restrictMaximumNoticeForOrders:this.deliveryMethod.restrictMaximumNoticeForOrders,earliestDeliveryTimeValue:this.deliveryMethod.earliestDeliveryTimeValue.toString(),offerFreeDeliveryOnMinimumGrandTotal:this.deliveryMethod.offerFreeDeliveryOnMinimumGrandTotal,freeDeliveryMinimumGrandTotal:this.deliveryMethod.freeDeliveryMinimumGrandTotal.amountWithoutCurrency},this.form.operationalHours.length==0&&(this.form.operationalHours=this.generateOperationalHours()),this.form.distanceZones=this.deliveryMethod.distanceZones.map(o=>(o.isEditable=!1,o)),this.form.postalCodeZones=this.deliveryMethod.postalCodeZones.map(o=>(o.isEditable=!1,o)),this.form.additionalFields=this.deliveryMethod.additionalFields.map(o=>(o.addDescription=o.description!="",o.isEditable=!1,o)),this.originalDistanceZones=Z(this.form.distanceZones),this.originalPostalCodeZones=Z(this.form.postalCodeZones),this.originalForm=Z(this.form)},generateOperationalHours(){return Array(7).fill().map(()=>({available:!0,hours:[["08:00","16:00"]]}))},parseForm(){var o=Z(this.form);return this.isCreating&&(o.store_id=this.store.id),o},getDeliveryMethod(){P().isLoadingDeliveryMethod=!0;const o={_relationships:"address"};ge(this.$route.params.delivery_method_href,o).then(s=>{s.status==200&&s.data.exists&&(P().deliveryMethod=s.data.deliveryMethod,this.deliveryMethod=s.data.deliveryMethod,this.setFormFields()),P().isLoadingDeliveryMethod=!1}).catch(s=>{P().isLoadingDeliveryMethod=!1,this.setServerFormErrors(s)})},createStoreDeliveryMethod(){this.hideFormErrors(),this.form.name.trim()==""?this.setFormError("name","Enter delivery method name"):(this.isSubmitting=!0,be(re().apiHome._links.createDeliveryMethod,this.parseForm()).then(o=>{o.status==200&&(o.data.created?(this.$router.push({name:"show-store-delivery-methods",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),this.showSuccessfulNotification("Delivery method created")):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message))),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)}))},updateDeliveryMethod(){this.isSubmitting=!0,ke(this.deliveryMethod._links.updateDeliveryMethod,this.parseForm()).then(o=>{o.status==200&&(o.data.updated?(this.$router.push({name:"show-store-delivery-methods",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),this.showSuccessfulNotification("Delivery method updated")):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)),this.originalForm=Z(this.form)),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)})}},beforeUnmount(){P().reset()},created(){this.originalForm=Z(this.form),this.isEditting&&this.getDeliveryMethod()}},ln={class:"bg-white shadow-lg border p-8 rounded-lg relative"},nn={class:"space-y-4",action:"#",method:"POST"},an={class:"flex justify-start items-center border-dashed py-6"},dn={key:0,class:"flex items-center space-x-2"},cn={class:"flex items-center space-x-2"},mn=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),un={class:"flex items-center space-x-2"},hn=t("span",{class:"ml-1"},"Undo",-1);function fn(o,s,e,_,a,i){const c=n("BackdropLoader"),m=n("BackButton"),u=n("LineSkeleton"),x=n("ShineEffect"),F=n("TextHeader"),D=n("MoreInfoPopover"),b=n("UndoButton"),y=n("PrimaryButton"),M=n("Alert"),f=n("FormErrorMessages"),g=n("ActiveToggleSwitch"),E=n("NameTextInput"),N=n("DescriptionTextarea"),z=n("QualifyOnMinimumGrandTotal"),w=n("OfferFreeDeliveryOnMinimumGrandTotal"),h=n("SetDailyOrderLimitCheckbox"),A=n("AdditionalFields"),j=n("RequireLocationMapCheckbox"),G=n("ChargeFee"),de=n("Schedule"),ce=n("DeleteDeliveryMethod");return r(),l("div",ln,[i.isLoadingDeliveryMethod||a.isSubmitting?(r(),k(c,{key:0,class:"rounded-lg"})):v("",!0),t("form",nn,[t("div",an,[d(m,{class:"w-16 mr-4",action:i.goBack},null,8,["action"]),i.isLoadingDeliveryMethod?(r(),l("div",dn,[d(x,{class:"flex space-x-2"},{default:p(()=>[d(u,{width:"w-40 mt-2"}),d(u,{width:"w-4 mt-2"})]),_:1})])):(r(),l(O,{key:1},[d(F,null,{default:p(()=>[S(T(i.isCreating?"Add Delivery Method":a.form.name),1)]),_:1}),d(D,{class:"ml-2 mt-1",title:"What Is This?",description:"Delivery methods are the ways you get products to your customers, such as home delivery, in-store pickup, or courier services. Configure them to match your store's logistics and customer preferences.",placement:"top"})],64))]),t("div",{class:V([i.mustSaveChanges||i.mustCreate?"h-20 mb-8":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[d(M,{type:"warning",class:"flex justify-between items-center border border-dashed"},{default:p(()=>[t("div",cn,[mn,t("span",null,T(i.isEditting?"Please save your changes":"Create your delivery method"),1)]),t("div",un,[d(b,{action:i.setFormFields,type:"light",size:"xs"},{default:p(()=>[hn]),_:1},8,["action"]),d(y,{onClick:s[0]||(s[0]=()=>i.isEditting?i.updateDeliveryMethod():i.createStoreDeliveryMethod()),loading:a.isSubmitting,type:"dark"},{default:p(()=>[t("span",null,T(i.isEditting?"Save Changes":"Create"),1)]),_:1},8,["loading"])])]),_:1})],2),d(f),d(g,{form:a.form},null,8,["form"]),d(E,{form:a.form},null,8,["form"]),d(N,{form:a.form},null,8,["form"]),d(z,{form:a.form},null,8,["form"]),d(w,{form:a.form},null,8,["form"]),d(h,{form:a.form},null,8,["form"]),d(A,{form:a.form},null,8,["form"]),d(j,{form:a.form},null,8,["form"]),d(G,{form:a.form},null,8,["form"]),d(de,{form:a.form},null,8,["form"]),d(f),d(y,{onClick:s[1]||(s[1]=()=>i.isEditting?i.updateDeliveryMethod():i.createStoreDeliveryMethod()),disabled:!i.mustSaveChanges&&!i.mustCreate,loading:a.isSubmitting,type:"dark",class:"w-full"},{default:p(()=>[t("span",null,T(i.isEditting?"Save Changes":"Create"),1)]),_:1},8,["disabled","loading"]),t("div",null,[d(ce,{form:a.form,class:"mt-16"},null,8,["form"])])])])}const Kn=C(rn,[["render",fn]]);export{Kn as default};
