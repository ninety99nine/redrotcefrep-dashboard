import{F as M}from"./FormMixin-B4DJNxx6.js";import{U as N,S as F}from"./SpiningLoader-DbS6kSol.js";import{u as U,c as o,d as t,e as n,w as d,F as m,h as u,g as _,i as h,r as p,o as s,l as v,t as c,m as k,n as x}from"./app-Crpx-0aq.js";import{V as E}from"./vue-draggable-next.esm-bundler-CG1_zvOB.js";import{u as Q}from"./store-store-1qa60_39.js";import{T as R}from"./TextHeader-BF1J3pF0.js";import{A as H}from"./AddButton-AJSdtmPE.js";import{B as W}from"./BasicTable-1LwvuI-2.js";import{C as O}from"./Checkbox-BZG0arPE.js";import{C as z}from"./ConfirmModal-BUL6SGIl.js";import{P as j}from"./PrimaryButton-I0X0LQCN.js";import{M as K}from"./MoreInfoPopover-BeTt5w0j.js";import{T as q}from"./ToogleSwitch-DGGZx4WU.js";import{B as G}from"./BadgeIndicator-CRAP6mKM.js";import{g as J,d as X,p as Y}from"./api-repository-DaixBKlV.js";import{N as Z}from"./NoDataPlaceholder-D9AD1ulu.js";import{_ as $}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SearchInput-BAoGQh9O.js";import"./TextInput-Gr3dUA-D.js";import"./InputLabel-DfaakMiG.js";import"./InputErrorMessage-Dq6x8AzU.js";import"./StatusDot-C3JPO57K.js";const ee={mixins:[M,N],components:{draggable:E,TextHeader:R,AddButton:H,BasicTable:W,Checkbox:O,ConfirmModal:z,SpiningLoader:F,PrimaryButton:j,MoreInfoPopover:K,ToogleSwitch:q,BadgeIndicator:G,NoDataPlaceholder:Z},data(){return{products:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,deletableProduct:null,apiState:U(),isDeletingProductIds:[],isLoadingProducts:!1,storeState:Q(),isUpdatingProductArrangement:!1}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Name","Description","Visibility","Price","Stock","Variations","Quantity Per Order","Position","Created Date",""]:["","Name","Visibility","Price","Stock","Variations",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(a){this.$router.push({name:"show-store-product",params:{store_href:this.store._links.showStore,product_href:a._links.showProduct}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(a){this.deletableProduct=a,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(a){return this.isDeletingProductIds.findIndex(i=>i==a.id)!=-1},onAddProduct(){this.$router.push({name:"create-store-product",params:{store_href:this.store._links.showStore}})},paginate(a){this.url=a,this.getProducts()},search(a){this.url=this.store._links.showStoreProducts,this.searchTerm=a,this.getProducts()},getProducts(){this.isLoadingProducts=!0;const a={};this.hasSearchTerm&&(a.search=this.searchTerm),J(this.url,a).then(i=>{i.status==200&&(this.pagination=i.data,this.products=this.pagination.data,this.checkedRowIds=this.products.map(D=>!1)),this.isLoadingProducts=!1}).catch(i=>{this.isLoadingProducts=!1,this.setServerFormErrors(i)})},deleteProduct(){this.isDeletingProductIds.push(this.deletableProduct.id),X(this.deletableProduct._links.deleteProduct).then(a=>{this.isDeletingProductIds.splice(this.isDeletingProductIds.findIndex(i=>i==this.deletableProduct.id,1)),a.status==200&&(this.showSuccessfulNotification("Product deleted"),this.isDeletingProductIds.length==0&&this.getProducts())}).catch(a=>{this.isDeletingProductIds.splice(this.isDeletingProductIds.findIndex(i=>i==this.deletableProduct.id,1)),this.setServerFormErrors(a)})},updateProductArrangement(){this.isUpdatingProductArrangement=!0;const a={storeId:this.store.id,productIds:this.products.map(i=>i.id)};Y(this.apiState.apiHome._links.updateProductArrangement,a).then(i=>{i.status==200&&this.showSuccessfulNotification("Product arrangement updated"),this.isUpdatingProductArrangement=!1}).catch(i=>{this.isUpdatingProductArrangement=!1,this.setServerFormErrors(i)})}},mounted(){},created(){this.url=this.store._links.showStoreProducts,this.getProducts()}},te={class:"flex justify-between items-center border-dashed py-6"},se={class:"flex items-center"},oe=t("span",{class:"mr-2"},"ðŸ›ï¸",-1),ie=t("span",{class:"ml-2"},"Add Product",-1),ae=["onClick"],ne={class:"whitespace-nowrap px-4 py-4"},re={class:"flex space-x-1 items-center w-40"},le=t("hr",null,null,-1),ce=t("span",null,"SKU: ",-1),de={key:0,class:"text-black"},he=t("span",null,"Barcode: ",-1),pe={key:0,class:"text-black"},ue=t("hr",null,null,-1),me={key:0,class:"px-4 py-4"},_e={class:"flex space-x-1 items-center w-60"},ge={class:"whitespace-nowrap px-4 py-4"},ye={class:"flex space-x-1 items-center"},fe={class:"whitespace-nowrap px-4 py-4"},we={key:1,class:"flex space-x-1 items-center"},ke=t("hr",null,null,-1),xe={key:0},Pe=t("hr",null,null,-1),be=t("p",{class:"font-bold text-black"},[h("Price: "),t("span",{class:"text-green-500"},"Free")],-1),ve={key:2,class:"text-black"},De={class:"font-bold"},Se={class:"whitespace-nowrap px-4 py-4"},Ce={key:1,class:"flex space-x-1 items-center"},Ve={class:"whitespace-normal"},Te={key:0},Ae={key:1},Ie={class:"whitespace-nowrap px-4 py-4"},Be={class:"flex space-x-1 items-center"},Le={class:"whitespace-normal"},Me=t("hr",{class:"my-2"},null,-1),Ne={class:"whitespace-nowrap px-4 py-4"},Fe={class:"flex space-x-1 items-center"},Ue={class:"whitespace-normal"},Ee={class:"whitespace-nowrap px-4 py-4 text-center"},Qe={class:"whitespace-nowrap px-4 py-4"},Re={class:"flex space-x-1 items-center"},He={class:"px-4 py-4 flex items-center space-x-4"},We=["onClick"],Oe=t("span",{class:"text-xs ml-2"},"Deleting...",-1),ze=["onClick"],je={key:3,class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ke=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),qe=[Ke],Ge={key:1,class:"flex justify-between space-x-20 bg-white shadow-lg rounded-lg border p-20"},Je={class:"space-y-4"},Xe=t("h1",{class:"text-2xl font-bold"},"Add your products",-1),Ye=t("span",{class:"ml-2"},"Add Product",-1),Ze=t("div",null,[t("span",{class:"text-8xl"},"ðŸ›ï¸")],-1),$e=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),et={class:"mb-8"},tt={class:"font-bold text-black"};function st(a,i,D,ot,r,l){const S=p("TextHeader"),g=p("MoreInfoPopover"),C=p("ToogleSwitch"),b=p("AddButton"),V=p("Checkbox"),y=p("BadgeIndicator"),P=p("NoDataPlaceholder"),T=p("SpiningLoader"),A=p("draggable"),I=p("BasicTable"),B=p("PrimaryButton"),L=p("ConfirmModal");return s(),o("div",null,[t("div",te,[t("div",se,[n(S,null,{default:d(()=>[oe,h(" Products")]),_:1}),n(g,{class:"ml-2 mt-1",title:"What Is This?",description:"Products are physical or non physical items that customers can place orders and pay for using your preferred payment methods",placement:"top"})]),(r.pagination??{}).total>0?(s(),o(m,{key:0},[n(C,{modelValue:r.showEverything,"onUpdate:modelValue":i[0]||(i[0]=e=>r.showEverything=e),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your products"},{default:d(()=>[h(" Show Everything ")]),_:1},8,["modelValue"]),n(b,{action:l.onAddProduct,class:"w-40"},{default:d(()=>[ie]),_:1},8,["action"])],64)):u("",!0)]),r.isLoadingProducts||(r.pagination??{}).total>0||l.hasSearchTerm?(s(),_(I,{key:0,pagination:r.pagination,isLoading:r.isLoadingProducts,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getProducts,totalHeaders:l.tableHeaders.length},{head:d(()=>[t("tr",null,[(s(!0),o(m,null,v(l.tableHeaders,(e,f)=>(s(),o("th",{key:f,scope:"col",class:"whitespace-nowrap px-4 py-3"},c(e),1))),128))])]),tbody:d(()=>[n(A,{tag:"tbody",modelValue:r.products,"onUpdate:modelValue":i[2]||(i[2]=e=>r.products=e),handle:".draggable-handle","ghost-class":"bg-yellow-50",onChange:l.updateProductArrangement},{default:d(()=>[(s(!0),o(m,null,v(r.products,(e,f)=>(s(),o("tr",{onClick:k(w=>l.onView(e),["stop"]),key:e.id,class:x(["group cursor-pointer border-b",r.checkedRowIds[f]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[t("td",{onClick:i[1]||(i[1]=k(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[n(V,{size:"xs",modelValue:r.checkedRowIds[f],"onUpdate:modelValue":w=>r.checkedRowIds[f]=w},null,8,["modelValue","onUpdate:modelValue"])]),t("td",ne,[t("div",re,[t("span",null,c(e.name),1),n(g,{class:"opacity-0 group-hover:opacity-100",title:e.name,placement:"top"},{description:d(()=>[le,t("p",null,[ce,e.sku?(s(),o("span",de)):(s(),_(y,{key:1,type:"info",text:"None",showDot:!1}))]),t("p",null,[he,e.barcode?(s(),o("span",pe)):(s(),_(y,{key:1,type:"info",text:"None",showDot:!1}))]),e.showDescription.status&&e.description!=null?(s(),o(m,{key:0},[ue,t("p",null,c(e.description),1)],64)):u("",!0)]),_:2},1032,["title"])])]),r.showEverything?(s(),o("td",me,[t("div",_e,[e.description==null?(s(),_(P,{key:0})):(s(),o(m,{key:1},[t("span",{class:x({"line-through":e.showDescription.status==!1})},c(e.description),3),n(g,{class:"opacity-0 group-hover:opacity-100",description:e.showDescription.description,placement:"top"},null,8,["description"])],64))])])):u("",!0),t("td",ge,[t("div",ye,[n(y,{type:e.visible.status?"success":"warning",text:e.visible.name,showDot:!1},null,8,["type","text"]),n(g,{class:"opacity-0 group-hover:opacity-100",title:e.visible.name,description:e.visible.description,placement:"top"},null,8,["title","description"])])]),t("td",fe,[e.allowVariations.status?(s(),_(P,{key:0})):(s(),o("div",we,[e.isFree.status?(s(),_(y,{key:0,type:"info",text:"Free",showDot:!1})):(s(),o(m,{key:1},[t("span",null,c(e.unitPrice.amountWithCurrency),1),e.onSale.status?(s(),_(y,{key:0,type:"success",text:"on sale",showDot:!1})):u("",!0)],64)),n(g,{class:"opacity-0 group-hover:opacity-100",title:"Pricing",placement:"top"},{description:d(()=>[e.hasPrice.status?(s(),o(m,{key:0},[ke,t("p",null,[h("Regular Price: "),t("span",{class:x(["text-black",{"line-through":e.onSale.status||e.isFree.status}])},c(e.unitRegularPrice.amountWithCurrency),3)]),e.onSale.status?(s(),o("p",xe,[h("Sale Price: "),t("span",{class:x(["text-black",{"line-through":e.isFree.status}])},c(e.unitSalePrice.amountWithCurrency),3)])):u("",!0)],64)):u("",!0),Pe,e.isFree.status?(s(),o(m,{key:1},[t("p",null,c(e.isFree.description),1),be],64)):(s(),o("p",ve,[h("Price: "),t("span",De,c(e.unitPrice.amountWithCurrency),1)]))]),_:2},1024)]))]),t("td",Se,[e.allowVariations.status?(s(),_(P,{key:0})):(s(),o("div",Ce,[n(y,{type:e.hasStock.status?"info":"danger",text:e.hasStock.status?e.stockQuantityType.value.toLowerCase()=="unlimited"?"Unlimited":e.stockQuantity.description:e.hasStock.name,showDot:!1},null,8,["type","text"]),n(g,{class:"opacity-0 group-hover:opacity-100",title:"Stock",placement:"top"},{description:d(()=>[t("div",Ve,[e.stockQuantityType.value.toLowerCase()=="unlimited"?(s(),o("p",Te,c(e.stockQuantityType.description),1)):(s(),o("p",Ae,c(e.stockQuantity.description),1))])]),_:2},1024)]))]),t("td",Ie,[t("div",Be,[n(y,{type:"info",text:e.allowVariations.name.toLowerCase()=="yes"?e.totalVisibleVariations:"None",showDot:!1},null,8,["text"]),n(g,{class:"opacity-0 group-hover:opacity-100",title:"Allow Variations",placement:"top"},{description:d(()=>[t("div",Le,[t("p",null,c(e.allowVariations.description),1),e.allowVariations.status?(s(),o(m,{key:0},[Me,t("p",null,[h("Total Variations: "),t("span",null,c(e.totalVariations??"..."),1)]),t("p",null,[h("Total Visible Variations: "),t("span",null,c(e.totalVisibleVariations??"..."),1)])],64)):u("",!0)])]),_:2},1024)])]),r.showEverything?(s(),o(m,{key:1},[t("td",Ne,[t("div",Fe,[n(y,{type:"info",text:e.allowedQuantityPerOrder.value.toLowerCase()=="unlimited"?"Unlimited":e.maximumAllowedQuantityPerOrder.value,showDot:!1},null,8,["text"]),n(g,{class:"opacity-0 group-hover:opacity-100",title:"Quantity Per Order",placement:"top"},{description:d(()=>[t("div",Ue,[t("p",null,c(e.allowedQuantityPerOrder.description),1)])]),_:2},1024)])]),t("td",Ee,"#"+c(e.position),1),t("td",Qe,[t("div",Re,[t("span",null,c(a.formattedDatetime(e.createdAt)),1),n(g,{class:"opacity-0 group-hover:opacity-100",title:a.formattedRelativeDate(e.createdAt),placement:"top"},null,8,["title"])])])],64)):u("",!0),t("td",He,[l.isDeleting(e)?u("",!0):(s(),o("a",{key:0,href:"#",onClick:k(w=>l.onView(e),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,We)),l.isDeleting(e)?(s(),_(T,{key:1,type:"danger"},{default:d(()=>[Oe]),_:1})):(s(),o("a",{key:2,href:"#",onClick:k(w=>l.showDeleteConfirmationModal(e),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,ze)),l.isDeleting(e)?u("",!0):(s(),o("svg",je,qe))])],10,ae))),128))]),_:1},8,["modelValue","onChange"])]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(s(),o("div",Ge,[t("div",Je,[Xe,t("p",null,[h("Start by stocking your store with "),n(y,{type:"primary",text:"products",showDot:!1,onClick:l.onAddProduct,class:"cursor-pointer hover:opacity-80"},null,8,["onClick"]),h(" your customers will love")]),n(b,{action:l.onAddProduct,class:"w-40",size:"sm"},{default:d(()=>[Ye]),_:1},8,["action"])]),Ze])),r.deletableProduct?(s(),_(L,{key:2,approveText:"Delete Product",approveAction:l.deleteProduct,isLoading:l.isDeleting(r.deletableProduct)},{content:d(()=>[$e,t("p",et,[h("Are you sure you want to permanently delete "),t("span",tt,c(r.deletableProduct.name),1),h("?")])]),trigger:d(e=>[n(B,{ref:"confirmDeleteButton",onClick:e.showModal,class:"hidden",type:"danger"},{default:d(()=>[h(" Delete Product ")]),_:2},1032,["onClick"])]),_:1},8,["approveAction","isLoading"])):u("",!0)])}const St=$(ee,[["render",st]]);export{St as default};
