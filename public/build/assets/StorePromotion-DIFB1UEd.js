import{U as L,d as v}from"./form-store-B_ZbhArT.js";import{c,i as N}from"./cloneDeep-BGE7Bmb-.js";import{P as B}from"./Pill-CD_3pjy5.js";import{A as H}from"./Alert-DEJps0rh.js";import{F as Q}from"./FormMixin-D44Bj-el.js";import{u as R,c as h,b as i,d as s,F as V,w as n,e as m,f as l,n as D,k as z,h as f,t as g,r as u,o as a}from"./app-DEkFCb1u.js";import{u as G}from"./store-store-CxinBL3L.js";import{T as j}from"./TextInput-CwB-G_mS.js";import{I as q}from"./InputTags-Cvrz7IG0.js";import{T as J}from"./TextHeader-DRGBY_Ui.js";import{M as Z}from"./MoneyInput-C1qj8tqg.js";import{B as K}from"./BackButton-DMqpm81M.js";import{N as X}from"./NumberInput-DlCNpvmN.js";import{S as _}from"./SelectInput-DXfLro8i.js";import{D as $}from"./Datepicker-HHxVzfmA.js";import{C as ee}from"./ConfirmModal-CKYpWGJT.js";import{T as te}from"./TextareaInput-CtY-WADI.js";import{P as oe}from"./PrimaryButton-Cwf__Lsv.js";import{S as re}from"./SpinningLoader-BnJGVf_7.js";import{B as ie}from"./BackdropLoader-jo1Que9S.js";import{S as se}from"./SelectInputTags-DgViRfHa.js";import{M as ae}from"./MoreInfoPopover-CrxGv8yo.js";import{T as ne}from"./ToogleSwitch-CtY-gb5u.js";import{F as le}from"./FormErrorMessages-T64AgTW8.js";import{g as me,p as ue,a as de,d as fe}from"./api-repository-CIJPUswr.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./vue3-tags-input.esm-DL6THQw8.js";import"./Button-CTlUNYLQ.js";import"./ShineEffect-CWpUJr6E.js";/* empty css                                                                      */const he={mixins:[L,Q],components:{Pill:B,Alert:H,TextInput:j,TextHeader:J,MoneyInput:Z,InputTags:q,BackButton:K,NumberInput:X,SelectInput:_,Datepicker:$,ConfirmModal:ee,TextareaInput:te,PrimaryButton:oe,SpinningLoader:re,LineSkeleton,SelectInputTags:se,MoreInfoPopover:ae,BackdropLoader:ie,ToogleSwitch:ne,FormErrorMessages:le},data(){return{form:{name:"",active:!0,description:"",offerDiscount:!1,discountType:"Percentage",discountPercentageRate:"50",discountFixedRate:"50.00",offerFreeDelivery:!1,activateUsingCode:!1,code:this.generateRandomNumber(4),activateUsingMinimumGrandTotal:!1,minimumGrandTotal:"50.00",activateUsingMinimumTotalProducts:!1,minimumTotalProducts:"2",activateUsingMinimumTotalProductQuantities:!1,minimumTotalProductQuantities:"2",activateUsingStartDatetime:!1,startDatetime:v().format("DD MMM YYYY"),activateUsingEndDatetime:!1,endDatetime:v().add(14,"day").format("DD MMM YYYY"),activateUsingHoursOfDay:!1,hoursOfDay:[],activateUsingDaysOfTheWeek:!1,daysOfTheWeek:[],activateUsingDaysOfTheMonth:!1,daysOfTheMonth:[],activateUsingMonthsOfTheYear:!1,monthsOfTheYear:[],activateUsingUsageLimit:!1,remainingQuantity:"100",activateForExistingCustomer:!1,activateForNewCustomer:!1},promotion:null,isDeleting:!1,originalForm:null,isSubmitting:!1,isLoadingPromotion:!1,apiState:R(),storeState:G(),hoursOfDay:[],daysOfTheMonth:[],daysOfTheWeek:[{text:"Monday"},{text:"Tuesday"},{text:"Wednesday"},{text:"Thursday"},{text:"Friday"},{text:"Saturday"},{text:"Sunday"}],monthsOfTheYear:[{text:"January"},{text:"February"},{text:"March"},{text:"April"},{text:"May"},{text:"June"},{text:"July"},{text:"August"},{text:"September"},{text:"October"},{text:"November"},{text:"December"}]}},watch:{"$route.params.promotion_href"(o,e){window.scrollTo(0,0),this.getPromotion()}},computed:{store(){return this.storeState.store},isCreating(){return this.$route.name==="create-store-promotion"},isEditting(){return this.$route.name==="show-store-promotion"},instructions(){return((this.promotion||{})._attributes||{}).instructions||[]},hasInstructions(){return this.totalInstructions>0},totalInstructions(){return this.instructions.length},formHasChanged(){var o=c(this.form),e=c(this.originalForm);return!N(o,e)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingPromotion&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingPromotion&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-promotions",params:{store_href:this.store._links.showStore}})},populateHoursOfTheDay(){for(let o=0;o<24;o++)this.hoursOfDay.push({text:`${o<10?"0":""}${o}:00`})},populateDaysOfTheMonth(){for(let o=1;o<=31;o++)this.daysOfTheMonth.push({text:`${o<10?"0":""}${o}`})},setPromotionFields(){this.form.name=this.promotion.name,this.form.active=this.promotion.active.status,this.form.description=this.promotion.description,this.form.offerDiscount=this.promotion.offerDiscount.status,this.form.discountType=this.promotion.discountType,this.form.discountPercentageRate=this.promotion.discountPercentageRate.value.toString(),this.form.discountFixedRate=this.convertToValidMoney(this.promotion.discountFixedRate.amountWithoutCurrency),this.form.offerFreeDelivery=this.promotion.offerFreeDelivery.status,this.form.activateUsingCode=this.promotion.activateUsingCode.status,this.form.code=this.promotion.code,this.form.activateUsingMinimumGrandTotal=this.promotion.activateUsingMinimumGrandTotal.status,this.form.minimumGrandTotal=this.convertToValidMoney(this.promotion.minimumGrandTotal.amountWithoutCurrency),this.form.activateUsingMinimumTotalProducts=this.promotion.activateUsingMinimumTotalProducts.status,this.form.minimumTotalProducts=this.promotion.minimumTotalProducts.toString(),this.form.activateUsingMinimumTotalProductQuantities=this.promotion.activateUsingMinimumTotalProductQuantities.status,this.form.minimumTotalProductQuantities=this.promotion.minimumTotalProductQuantities.toString(),this.form.activateUsingStartDatetime=this.promotion.activateUsingStartDatetime.status,this.form.startDatetime=v(this.promotion.startDatetime).format("DD MMM YYYY"),this.form.activateUsingEndDatetime=this.promotion.activateUsingEndDatetime.status,this.form.endDatetime=v(this.promotion.endDatetime).format("DD MMM YYYY"),this.form.activateUsingHoursOfDay=this.promotion.activateUsingHoursOfDay.status,this.form.hoursOfDay=this.promotion.hoursOfDay.map(o=>({text:o})),this.form.activateUsingDaysOfTheWeek=this.promotion.activateUsingDaysOfTheWeek.status,this.form.daysOfTheWeek=this.promotion.daysOfTheWeek.map(o=>({text:o})),this.form.activateUsingDaysOfTheMonth=this.promotion.activateUsingDaysOfTheMonth.status,this.form.daysOfTheMonth=this.promotion.daysOfTheMonth.map(o=>({text:o})),this.form.activateUsingMonthsOfTheYear=this.promotion.activateUsingMonthsOfTheYear.status,this.form.monthsOfTheYear=this.promotion.monthsOfTheYear.map(o=>({text:o})),this.form.activateUsingUsageLimit=this.promotion.activateUsingUsageLimit.status,this.form.remainingQuantity=this.promotion.remainingQuantity.toString(),this.form.activateForExistingCustomer=this.promotion.activateForExistingCustomer.status,this.form.activateForNewCustomer=this.promotion.activateForNewCustomer.status,this.originalForm=c(this.form)},getPromotion(){this.isLoadingPromotion=!0,me(this.$route.params.promotion_href).then(o=>{o.status==200&&o.data.exists&&(this.promotion=o.data.promotion,this.setPromotionFields()),this.isLoadingPromotion=!1}).catch(o=>{this.isLoadingPromotion=!1,this.formState.setServerFormErrors(o)})},parseForm(){var o=c(this.form);return o.hoursOfDay=o.hoursOfDay.map(e=>e.text),o.daysOfTheWeek=o.daysOfTheWeek.map(e=>e.text),o.daysOfTheMonth=o.daysOfTheMonth.map(e=>e.text),o.monthsOfTheYear=o.monthsOfTheYear.map(e=>e.text),o},createPromotion(){if(this.form.offerDiscount==!1&&this.form.offerFreeDelivery==!1){this.formState.setFormError("offerFreeDelivery","Specify an offer e.g discount or free delivery"),this.notificationState.showWarningNotification("Specify an offer e.g discount or free delivery");return}this.isSubmitting=!0,ue(this.apiState.apiHome._links.createPromotion,this.parseForm()).then(o=>{o.status==200&&(this.notificationState.showSuccessNotification("Promotion created"),this.$router.push({name:"show-store-promotions",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.formState.setServerFormErrors(o)})},updatePromotion(){this.isSubmitting=!0,this.form.return=!0,de(this.promotion._links.updatePromotion,this.parseForm()).then(o=>{o.status==200&&(o.data.updated?(this.originalForm=c(this.form),this.notificationState.showSuccessNotification("Promotion updated"),this.editMode=!1):(this.form=c(this.originalForm),this.formState.setFormError("general",o.data.message),this.notificationState.showWarningNotification(o.data.message))),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.formState.setServerFormErrors(o)})},deletePromotion(){this.isDeleting=!0,fe(this.promotion._links.deletePromotion).then(o=>{o.status==200?o.data.deleted?(this.notificationState.showSuccessNotification("Promotion deleted"),this.$router.push({name:"show-store-promotions",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):(this.formState.setFormError("general",o.data.message),this.notificationState.showWarningNotification(o.data.message)):(this.formState.setFormError("general",o.data.message),this.notificationState.showWarningNotification(o.data.message)),this.isDeleting=!1}).catch(o=>{this.isDeleting=!1,this.formState.setServerFormErrors(o)})}},mounted(){this.populateHoursOfTheDay(),this.populateDaysOfTheMonth()},created(){this.form.storeId=this.store.id,this.originalForm=c(this.form),this.isEditting&&this.getPromotion()}},ce={class:"flex justify-start items-center border-dashed py-6"},ge={key:0,class:"flex items-center space-x-2"},Te={class:"relative",action:"#",method:"POST"},ve={class:"flex items-center space-x-2"},ye={class:"grid grid-cols-12 gap-4 mb-8"},be={class:"col-span-8 relative"},xe={class:"space-y-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},Pe={class:"bg-white shadow-lg rounded-lg border p-4 mb-4"},De={key:0,class:"flex items-center space-x-8"},we={class:"bg-white shadow-lg rounded-lg border p-4"},Ue={class:"flex items-end space-x-8"},Me={class:"flex items-end space-x-8"},Fe={class:"flex items-end space-x-8"},Ve={class:"flex items-end space-x-8"},Oe={class:"flex items-end space-x-8"},Se={class:"flex items-end space-x-8"},ke={class:"flex items-end space-x-8"},Ie={class:"flex items-end space-x-8"},Ee={class:"flex items-end space-x-8"},Ce={class:"flex items-end space-x-8"},We={class:"flex items-end space-x-8"},Ye={class:"col-span-4"},Ae={class:"flex flex-col justify-between bg-white shadow-lg rounded-lg border p-4 mb-4 relative"},Le={class:"space-y-4"},Ne={key:0,class:"flex flex-col justify-between bg-white shadow-lg rounded-lg border p-4 relative"},Be={class:"flex items-center space-x-4 mb-2"},He={key:2,class:"space-y-2"},Qe={class:"text-xs"},Re={class:"font-bold text-black"},ze={class:"flex justify-end"},Ge={class:"mb-8"},je={class:"font-bold text-black"};function qe(o,e,Je,Ze,t,p){const O=u("BackButton"),w=u("LineSkeleton"),S=u("TextHeader"),k=u("MoreInfoPopover"),U=u("PrimaryButton"),y=u("Alert"),b=u("BackdropLoader"),I=u("FormErrorMessages"),x=u("TextInput"),E=u("TextareaInput"),d=u("ToogleSwitch"),C=u("SelectInput"),M=u("MoneyInput"),P=u("NumberInput"),F=u("Datepicker"),T=u("SelectInputTags"),W=u("Pill"),Y=u("ConfirmModal");return a(),h("div",null,[i("div",ce,[s(O,{class:"w-16 mr-4",action:p.goBack},null,8,["action"]),t.isLoadingPromotion?(a(),h("div",ge,[s(w,{width:"w-40",shine:!0}),s(w,{width:"w-4",shine:!0})])):(a(),h(V,{key:1},[s(S,null,{default:n(()=>[f(g(p.isCreating?"Add Promotion":t.form.name),1)]),_:1}),s(k,{class:"ml-2 mt-1",title:"What Is This?",description:"Promotions are promotional incentives that customers can claim while placing orders, such as discounts or free delivery. This encourages purchases and enhances the customer shopping experience.",placement:"top"})],64))]),i("form",Te,[p.mustCreate||p.mustSaveChanges?(a(),m(y,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:n(()=>[i("div",ve,[e[32]||(e[32]=i("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),i("span",null,g(p.isCreating?"Create your promotion":"Please save your changes"),1)]),s(U,{action:p.isCreating?p.createPromotion:p.updatePromotion,loading:t.isSubmitting,class:"w-40"},{default:n(()=>[f(g(p.isCreating?"Create Promotion":"Save Changes"),1)]),_:1},8,["action","loading"])]),_:1})):l("",!0),i("div",ye,[i("div",be,[t.isLoadingPromotion||t.isSubmitting?(a(),m(b,{key:0,class:"rounded-lg"})):l("",!0),i("div",xe,[s(I),s(x,{modelValue:t.form.name,"onUpdate:modelValue":e[0]||(e[0]=r=>t.form.name=r),errorText:o.getFormError("name"),labelPopoverTitle:"What Is This?",label:"Name",placeholder:"10% off",labelPopoverDescription:"The name of your promotion e.g 10% off"},null,8,["modelValue","errorText"]),s(E,{rows:2,modelValue:t.form.description,"onUpdate:modelValue":e[1]||(e[1]=r=>t.form.description=r),labelPopoverTitle:"What Is This?",errorText:o.getFormError("description"),label:"Description",placeholder:"Offer 10% discount",labelPopoverDescription:"Sweet and short description of your promotion (for internal use) e.g Offer 10% discount"},null,8,["modelValue","errorText"])]),i("div",Pe,[i("div",{class:D(["space-y-4",t.form.offerDiscount?"mb-8":"mb-4"])},[e[35]||(e[35]=i("p",{class:"font-bold text-sm"},"Offers",-1)),e[36]||(e[36]=i("p",{class:"text-sm text-gray-400"},"Set the offers that this promotion will apply",-1)),s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.offerDiscount,"onUpdate:modelValue":e[2]||(e[2]=r=>t.form.offerDiscount=r),size:"md",errorText:o.getFormError("offerDiscount"),labelPopoverDescription:"Turn on to offer a discount using this promotion"},{default:n(()=>e[33]||(e[33]=[f(" Offer Discount ")])),_:1},8,["modelValue","errorText"]),t.form.offerDiscount?(a(),h("div",De,[s(C,{label:"Discount Type",modelValue:t.form.discountType,"onUpdate:modelValue":e[3]||(e[3]=r=>t.form.discountType=r),labelPopoverTitle:"What Is This?",errorText:o.getFormError("discountType"),labelPopoverDescription:"Select the discount type e.g Is this a fixed amount or an amount that is calculated based on a percetange of the total cart amount?"},{default:n(()=>e[34]||(e[34]=[i("option",{value:"Percentage"},"Percentage",-1),i("option",{value:"Fixed"},"Fixed",-1)])),_:1},8,["modelValue","errorText"]),t.form.discountType=="Percentage"?(a(),m(x,{key:0,placeholder:"100",label:"Percentage Rate",labelPopoverTitle:"What Is This?",modelValue:t.form.discountPercentageRate,"onUpdate:modelValue":e[4]||(e[4]=r=>t.form.discountPercentageRate=r),errorText:o.getFormError("discountPercentageRate"),labelPopoverDescription:"Set the percentage discount amount (This is the percentage amount of the entire order that will be applied as a discount e.g 50%)"},null,8,["modelValue","errorText"])):l("",!0),t.form.discountType=="Fixed"?(a(),m(M,{key:1,label:"Flat Rate",modelValue:t.form.discountFixedRate,"onUpdate:modelValue":e[5]||(e[5]=r=>t.form.discountFixedRate=r),labelPopoverTitle:"What Is This?",errorText:o.getFormError("discountFixedRate"),labelPopoverDescription:"Set the fixed discount amount (This is the fixed amount that will be applied as a discount e.g P50.00)"},null,8,["modelValue","errorText"])):l("",!0)])):l("",!0)],2),s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.offerFreeDelivery,"onUpdate:modelValue":e[6]||(e[6]=r=>t.form.offerFreeDelivery=r),size:"md",errorText:o.getFormError("offerFreeDelivery"),labelPopoverDescription:"Turn on to offer free delivery using this promotion"},{default:n(()=>e[37]||(e[37]=[f(" Offer Free Delivery ")])),_:1},8,["modelValue","errorText"])]),i("div",we,[i("div",{class:D(["space-y-4",t.form.offerDiscount?"mb-8":"mb-4"])},[e[52]||(e[52]=i("p",{class:"font-bold text-sm"},"Activation Rules",-1)),e[53]||(e[53]=i("p",{class:"text-sm text-gray-400"},"Set how this promotion will be activated",-1)),i("div",Ue,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingCode,"onUpdate:modelValue":e[7]||(e[7]=r=>t.form.activateUsingCode=r),size:"md",errorText:o.getFormError("activateUsingCode"),labelPopoverDescription:"Turn on if you want customers to provide a code to claim this promotion"},{default:n(()=>e[38]||(e[38]=[f(" Activate on code ")])),_:1},8,["modelValue","errorText"]),t.form.activateUsingCode?(a(),m(x,{key:0,modelValue:t.form.code,"onUpdate:modelValue":e[8]||(e[8]=r=>t.form.code=r),errorText:o.getFormError("code"),labelPopoverTitle:"What Is This?",label:"Activation Code",placeholder:"1234",labelPopoverDescription:"The activation code of your promotion e.g 1234"},null,8,["modelValue","errorText"])):l("",!0)]),s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateForNewCustomer,"onUpdate:modelValue":e[9]||(e[9]=r=>t.form.activateForNewCustomer=r),size:"md",errorText:o.getFormError("activateForNewCustomer"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only if they are a new customer (have never placed orders in the past)"},{default:n(()=>e[39]||(e[39]=[i("span",{class:"whitespace-nowrap"},"Activate for new customer",-1)])),_:1},8,["modelValue","errorText"]),s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateForExistingCustomer,"onUpdate:modelValue":e[10]||(e[10]=r=>t.form.activateForExistingCustomer=r),size:"md",errorText:o.getFormError("activateForExistingCustomer"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only if they are an existing customer (have placed orders in the past)"},{default:n(()=>e[40]||(e[40]=[i("span",{class:"whitespace-nowrap"},"Activate for existing customer",-1)])),_:1},8,["modelValue","errorText"]),i("div",Me,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingMinimumGrandTotal,"onUpdate:modelValue":e[11]||(e[11]=r=>t.form.activateUsingMinimumGrandTotal=r),size:"md",errorText:o.getFormError("activateUsingMinimumGrandTotal"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only after reaching the specified grand total or more"},{default:n(()=>e[41]||(e[41]=[i("span",{class:"whitespace-nowrap"},"Activate on minimum grand total",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingMinimumGrandTotal?(a(),m(M,{key:0,label:"Grand Total",modelValue:t.form.minimumGrandTotal,"onUpdate:modelValue":e[12]||(e[12]=r=>t.form.minimumGrandTotal=r),labelPopoverTitle:"What Is This?",errorText:o.getFormError("minimumGrandTotal"),labelPopoverDescription:"Set the minimum grand total amount e.g Must have selected items amounting to P50.00 or more"},null,8,["modelValue","errorText"])):l("",!0)]),i("div",Fe,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingMinimumTotalProducts,"onUpdate:modelValue":e[13]||(e[13]=r=>t.form.activateUsingMinimumTotalProducts=r),size:"md",errorText:o.getFormError("activateUsingMinimumTotalProducts"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only after selecting the specified number of different products or more e.g Must have selected 2 different products or more"},{default:n(()=>e[42]||(e[42]=[i("span",{class:"whitespace-nowrap"},"Activate on minimum total products",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingMinimumTotalProducts?(a(),m(P,{key:0,min:"1",placeholder:"100",label:"Minimum Products",labelPopoverTitle:"What Is This?",modelValue:t.form.minimumTotalProducts,"onUpdate:modelValue":e[14]||(e[14]=r=>t.form.minimumTotalProducts=r),errorText:o.getFormError("minimumTotalProducts"),labelPopoverDescription:"Set the minimum total products e.g Must have selected 2 different products or more"},null,8,["modelValue","errorText"])):l("",!0)]),i("div",Ve,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingMinimumTotalProductQuantities,"onUpdate:modelValue":e[15]||(e[15]=r=>t.form.activateUsingMinimumTotalProductQuantities=r),size:"md",errorText:o.getFormError("activateUsingMinimumTotalProductQuantities"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only after selecting the specified number of product quantities or more e.g Must have selected 10 quantities of all items combined or more"},{default:n(()=>e[43]||(e[43]=[i("span",{class:"whitespace-nowrap"},"Activate on minimum total product quantities",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingMinimumTotalProductQuantities?(a(),m(P,{key:0,min:"1",placeholder:"100",label:"Minimum Products",labelPopoverTitle:"What Is This?",modelValue:t.form.minimumTotalProductQuantities,"onUpdate:modelValue":e[16]||(e[16]=r=>t.form.minimumTotalProductQuantities=r),errorText:o.getFormError("minimumTotalProducts"),labelPopoverDescription:"Set the minimum total product quantities e.g Must have selected 10 quantities of all items combined or more"},{suffix:n(()=>e[44]||(e[44]=[f("%")])),_:1},8,["modelValue","errorText"])):l("",!0)]),i("div",Oe,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingStartDatetime,"onUpdate:modelValue":e[17]||(e[17]=r=>t.form.activateUsingStartDatetime=r),size:"md",errorText:o.getFormError("activateUsingStartDatetime"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only after the specified date has been reached e.g Must have reached 01 Jan 2024"},{default:n(()=>e[45]||(e[45]=[i("span",{class:"whitespace-nowrap"},"Activate from start datetime",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingStartDatetime?(a(),m(F,{modelValue:t.form.startDatetime,"onUpdate:modelValue":e[18]||(e[18]=r=>t.form.startDatetime=r),key:t.form.startDatetime},null,8,["modelValue"])):l("",!0)]),i("div",Se,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingEndDatetime,"onUpdate:modelValue":e[19]||(e[19]=r=>t.form.activateUsingEndDatetime=r),size:"md",errorText:o.getFormError("activateUsingEndDatetime"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only before the specified date has been reached e.g Must not have reached 01 Feb 2024"},{default:n(()=>e[46]||(e[46]=[i("span",{class:"whitespace-nowrap"},"Activate from end datetime",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingEndDatetime?(a(),m(F,{modelValue:t.form.endDatetime,"onUpdate:modelValue":e[20]||(e[20]=r=>t.form.endDatetime=r),key:t.form.endDatetime},null,8,["modelValue"])):l("",!0)]),i("div",ke,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingHoursOfDay,"onUpdate:modelValue":e[21]||(e[21]=r=>t.form.activateUsingHoursOfDay=r),size:"md",errorText:o.getFormError("activateUsingHoursOfDay"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only on the specified hours of the day e.g 08:00, 09:00, 10:00, etc"},{default:n(()=>e[47]||(e[47]=[i("span",{class:"whitespace-nowrap"},"Activate on hours of the day",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingHoursOfDay?(a(),m(T,{key:0,tags:t.form.hoursOfDay,selectableTags:t.hoursOfDay,onOnTagsChanged:e[22]||(e[22]=r=>t.form.hoursOfDay=r),label:"Hours Of Day",labelPopoverTitle:"What Is This?",errorText:o.getFormError("hoursOfDay"),labelPopoverDescription:"Set the hours of the day e.g 08:00, 09:00, 10:00, etc",class:"w-full"},null,8,["tags","selectableTags","errorText"])):l("",!0)]),i("div",Ie,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingDaysOfTheWeek,"onUpdate:modelValue":e[23]||(e[23]=r=>t.form.activateUsingDaysOfTheWeek=r),size:"md",errorText:o.getFormError("activateUsingDaysOfTheWeek"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only on the specified days of the week e.g Monday, Tuesday, Wednesday, etc"},{default:n(()=>e[48]||(e[48]=[i("span",{class:"whitespace-nowrap"},"Activate on days of the week",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingDaysOfTheWeek?(a(),m(T,{key:0,tags:t.form.daysOfTheWeek,selectableTags:t.daysOfTheWeek,onOnTagsChanged:e[24]||(e[24]=r=>t.form.daysOfTheWeek=r),label:"Days Of The Week",labelPopoverTitle:"What Is This?",errorText:o.getFormError("daysOfTheWeek"),labelPopoverDescription:"Set the days of the week e.g Monday, Tuesday, Wednesday, etc",class:"w-full"},null,8,["tags","selectableTags","errorText"])):l("",!0)]),i("div",Ee,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingDaysOfTheMonth,"onUpdate:modelValue":e[25]||(e[25]=r=>t.form.activateUsingDaysOfTheMonth=r),size:"md",errorText:o.getFormError("activateUsingDaysOfTheMonth"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only on the specified days of the month e.g 01, 02, 03, etc"},{default:n(()=>e[49]||(e[49]=[i("span",{class:"whitespace-nowrap"},"Activate on days of the month",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingDaysOfTheMonth?(a(),m(T,{key:0,tags:t.form.daysOfTheMonth,selectableTags:t.daysOfTheMonth,onOnTagsChanged:e[26]||(e[26]=r=>t.form.daysOfTheMonth=r),label:"Days Of The Month",labelPopoverTitle:"What Is This?",errorText:o.getFormError("daysOfTheMonth"),labelPopoverDescription:"Set the days of the month e.g 01, 02, 03, etc",class:"w-full"},null,8,["tags","selectableTags","errorText"])):l("",!0)]),i("div",Ce,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingMonthsOfTheYear,"onUpdate:modelValue":e[27]||(e[27]=r=>t.form.activateUsingMonthsOfTheYear=r),size:"md",errorText:o.getFormError("activateUsingMonthsOfTheYear"),labelPopoverDescription:"Turn on if you want customers to claim this promotion only on the specified months of the year e.g January, February, March, etc"},{default:n(()=>e[50]||(e[50]=[i("span",{class:"whitespace-nowrap"},"Activate on months of the year",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingMonthsOfTheYear?(a(),m(T,{key:0,tags:t.form.monthsOfTheYear,selectableTags:t.monthsOfTheYear,onOnTagsChanged:e[28]||(e[28]=r=>t.form.monthsOfTheYear=r),label:"Months Of The Year",labelPopoverTitle:"What Is This?",errorText:o.getFormError("monthsOfTheYear"),labelPopoverDescription:"Set the months of the year e.g January, February, March, etc",class:"w-full"},null,8,["tags","selectableTags","errorText"])):l("",!0)]),i("div",We,[s(d,{labelPopoverTitle:"What Is This?",modelValue:t.form.activateUsingUsageLimit,"onUpdate:modelValue":e[29]||(e[29]=r=>t.form.activateUsingUsageLimit=r),size:"md",errorText:o.getFormError("activateUsingUsageLimit"),labelPopoverDescription:"Turn on if you want to set a usage limit for how many times this promotion can be claimed e.g Must be claimed no more than 10 times"},{default:n(()=>e[51]||(e[51]=[i("span",{class:"whitespace-nowrap"},"Activate on usage limit",-1)])),_:1},8,["modelValue","errorText"]),t.form.activateUsingUsageLimit?(a(),m(P,{key:0,min:"1",placeholder:"100",label:"Remaining Quantity",labelPopoverTitle:"What Is This?",modelValue:t.form.remainingQuantity,"onUpdate:modelValue":e[30]||(e[30]=r=>t.form.remainingQuantity=r),errorText:o.getFormError("remainingQuantity"),labelPopoverDescription:"Set the remaining quantity e.g 10 means that this promotion can only be claimed 10 times"},null,8,["modelValue","errorText"])):l("",!0)])],2)])]),i("div",Ye,[i("div",Ae,[t.isLoadingPromotion||t.isSubmitting?(a(),m(b,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):l("",!0),i("div",Le,[s(d,{modelValue:t.form.active,"onUpdate:modelValue":e[31]||(e[31]=r=>t.form.active=r),size:"md",labelPopoverTitle:"What Is This?",errorText:o.getFormError("active"),labelPopoverDescription:"Turn on if you want your promotion to be active (Made available to customers)"},{default:n(()=>e[54]||(e[54]=[f(" Activate Promotion ")])),_:1},8,["modelValue","errorText"]),t.form.active?l("",!0):(a(),m(y,{key:0,type:"warning"},{default:n(()=>e[55]||(e[55]=[f(" This promotion has been "),i("span",{class:"font-bold"},"hidden",-1),f(" from customers visiting your store. "),i("hr",{class:"my-4"},null,-1),f("This means that customers will not be able to claim this promotion. ")])),_:1}))])]),t.promotion&&p.hasInstructions?(a(),h("div",Ne,[t.isLoadingPromotion||t.isSubmitting?(a(),m(b,{key:0,showSpinningLoader:!1,class:"rounded-lg"})):l("",!0),i("div",Be,[e[56]||(e[56]=i("div",{class:"flex items-center space-x-2"},[i("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 10.5V6.75a4.5 4.5 0 1 1 9 0v3.75M3.75 21.75h10.5a2.25 2.25 0 0 0 2.25-2.25v-6.75a2.25 2.25 0 0 0-2.25-2.25H3.75a2.25 2.25 0 0 0-2.25 2.25v6.75a2.25 2.25 0 0 0 2.25 2.25Z"})]),i("p",{class:"font-bold text-lg"},"Activation Rules")],-1)),s(W,{type:"primary",text:p.totalInstructions,showDot:!1},null,8,["text"])]),e[58]||(e[58]=i("p",{class:"text-sm text-gray-400 border-b border-dashed pb-2 mb-4"},"Learn how this promotion will be activated",-1)),p.mustSaveChanges?(a(),m(y,{key:1,type:"info"},{default:n(()=>e[57]||(e[57]=[f(" Save changes to apply activation rules ")])),_:1})):(a(),h("div",He,[(a(!0),h(V,null,z(p.instructions,(r,A)=>(a(),h("div",{key:A,class:"flex space-x-2 px-2 border-l-4 border-green-300"},[i("p",Qe,g(r),1)]))),128))]))])):l("",!0)])]),t.promotion?(a(),h("div",{key:1,class:D(["space-y-4 shadow-lg rounded-lg border p-4",t.isLoadingPromotion?"bg-gray-50":"border-red-300 bg-red-50"])},[i("p",null,[e[59]||(e[59]=f("Do you want to permanently delete ")),i("span",Re,g(t.form.name),1),e[60]||(e[60]=f("? Once this promotion is deleted you will not be able to recover it."))]),i("div",ze,[s(Y,{approveText:"Delete Promotion",approveAction:p.deletePromotion,isLoading:t.isDeleting},{content:n(()=>[e[63]||(e[63]=i("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),i("p",Ge,[e[61]||(e[61]=f("Are you sure you want to permanently delete ")),i("span",je,g(t.form.name),1),e[62]||(e[62]=f("?"))])]),trigger:n(r=>[s(U,{action:r.showModal,loading:t.isDeleting,class:"w-40",type:"danger"},{default:n(()=>e[64]||(e[64]=[f(" Delete Promotion ")])),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):l("",!0)])])}const Ft=pe(he,[["render",qe]]);export{Ft as default};
