import{z as n}from"./app-Bi98IZzu.js";import{U as a}from"./UtilsMixin-CBwmyCNB.js";const m=n("notification",{state:()=>({notifications:[]}),actions:{addSuccessNotification(r){this.addNotification(r,"success-notification")},addWarningNotification(r){this.addNotification(r,"warning-notification")},addNotification(r,o){this.notifications.push({type:o,message:r,id:a.methods.generateUniqueId("notification")})}}}),l=n("form",{state:()=>({formErrors:{},formErrorsTimeout:null}),getters:{getFormErrors(r){return Object.values(r.formErrors)}},actions:{setServerFormErrors(r,o){if(this.hideFormErrors(),(r.response??{}).status===422){const t=((r.response??{}).data??{}).errors??{},s=Object.keys(t).reduce((i,e)=>(i[e]=t[e][0],i),{});o!=null?this.formErrors[o]=s:this.formErrors=s}else{const t=((r.response??{}).data??{}).message??r.message;this.setGeneralFormError(t),t!=null&&m().addWarningNotification(t)}this.setFormErrorsTimeout()},setGeneralFormError(r,o=null){this.setFormError("general",r,o)},setFormError(r,o,t=null){t!=null?(this.formErrors[t]={},this.formErrors[t][r]=o):this.formErrors[r]=o,this.setFormErrorsTimeout()},getFormError(r,o=null){return o!=null?this.formErrors[o]?this.formErrors[o][r]??null:null:this.formErrors[r]??null},hideFormErrors(){this.formErrors={}},setFormErrorsTimeout(){this.clearFormErrorsTimeout(),this.formErrorsTimeout=setTimeout(()=>this.hideFormErrors(),5e3)},clearFormErrorsTimeout(){clearTimeout(this.formErrorsTimeout)}}});export{l as a,m as u};
