import{U as A,d as se}from"./UtilsMixin-CBwmyCNB.js";import{c as S,i as oe}from"./cloneDeep-BSUglKOW.js";import{A as re}from"./Alert-RliuoECx.js";import{F}from"./FormMixin-DjetEzI6.js";import{r as c,o as r,c as n,b as t,d as a,w as d,h as g,y as E,f as u,e as h,F as x,k as M,t as m,m as C,n as H,p as K,s as ie,u as ne}from"./app-BLw6N2N-.js";import{u as j}from"./store-store-BVdLpB3d.js";import{T as ae}from"./TextInput-DDx3bJaO.js";import{I as le}from"./InputTags-CuxlQ6Gj.js";import{T as U}from"./TextHeader-OjVLqHHa.js";import{M as de}from"./MoneyInput-BnfFDrDy.js";import{B as me}from"./BackButton-CwxqzEYx.js";import{N as ce}from"./NumberInput-COrXIY2V.js";import{S as ue}from"./SelectInput-irYabwnm.js";import{D as he}from"./Datepicker-DmSOLqj2.js";import{C as Z}from"./ConfirmModal-Bb006nsT.js";import{S as pe}from"./ShineEffect-DK25YM-U.js";import{T as ge}from"./TextareaInput-Cn_0GY0T.js";import{L as fe}from"./LineSkeleton-DGE40fyy.js";import{P as W}from"./PrimaryButton-D5bAGBbb.js";import{S as R}from"./SpinningLoader-tCIeisvg.js";import{S as ye}from"./SelectInputTags-DXhSRzvO.js";import{M as q}from"./MoreInfoPopover-BMtshnfg.js";import{B as we}from"./BackdropLoader-DgRMjCYw.js";import{T as Y}from"./ToogleSwitch-4RJmzzSZ.js";import{M as ve}from"./MobileNumberInput-DXqQIrRD.js";import{B as Q}from"./BadgeIndicator-Xeze-fzj.js";import{A as X}from"./AddButton-CpCoc2va.js";import{B as $}from"./BasicTable-DCt0DyAa.js";import{C as ee}from"./Checkbox-DK7vQ2Yi.js";import{O as _e,a as xe}from"./OrderPaymentStatus-BgwD2szV.js";import{g as z,d as G,p as be,a as ke}from"./api-repository-Dpcq158Q.js";import{N as Ce}from"./NoDataPlaceholder-Dimc01p-.js";import{O as Te}from"./OrderCollectionStatus-CGXk3jJa.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Se}from"./Countdown-C9JdFgeQ.js";import{E as De}from"./ExternalLink-C-ie89H8.js";import{T as Le}from"./TransactionPaymentStatus-C_bkuCL5.js";import"./form-store-Yx_7yNdu.js";import"./InputErrorMessage-Bkre_tes.js";import"./vue3-tags-input.esm-CvS7ehs6.js";import"./SearchInput-U98QlO4-.js";import"./index-D19FfSVG.js";const Ie={mixins:[F,A],components:{TextHeader:U,AddButton:X,BasicTable:$,Checkbox:ee,OrderStatus:_e,ConfirmModal:Z,SpinningLoader:R,PrimaryButton:W,MoreInfoPopover:q,ToogleSwitch:Y,OrderPaymentStatus:xe,NoDataPlaceholder:Ce,OrderCollectionStatus:Te},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{orders:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,deletableOrder:null,isDeletingOrderIds:[],isLoadingOrders:!1,storeState:j()}},watch:{isLoadingCustomer(o,e){o==!1&&this.getOrders()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Name","Customer","Summary","status","Payment Status","Collection Status","Grand Total","Paid","Pending","Outstanding","Special Note","Created Date",""]:["","Name","Customer","Summary","status","Grand Total","Created Date",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(o){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:o._links.showOrder}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(o){this.deletableOrder=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingOrderIds.findIndex(e=>e==o.id)!=-1},onAddOrder(){this.$router.push({name:"create-store-order",params:{store_href:this.store._links.showStore}})},paginate(o){this.getOrders(o)},search(o){this.searchTerm=o,this.getOrders()},getOrders(o=null){this.isLoadingOrders=!0;const e={association:"teamMember",_relationships:"cart"};this.hasSearchTerm&&(e.search=this.searchTerm),o=o??this.customer._links.showCustomerOrders,z(o,e).then(f=>{f.status==200&&(this.pagination=f.data,this.orders=this.pagination.data,this.checkedRowIds=this.orders.map(N=>!1)),this.isLoadingOrders=!1}).catch(f=>{this.isLoadingOrders=!1,this.setServerFormErrors(f)})},deleteOrder(){this.isDeletingOrderIds.push(this.deletableOrder.id),G(this.deletableOrder._links.deleteOrder).then(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(e=>e==this.deletableOrder.id,1)),o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Order deleted"),this.isDeletingOrderIds.length==0&&this.getOrders(),this.refreshCustomer()):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)))}).catch(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(e=>e==this.deletableOrder.id,1)),this.setServerFormErrors(o)})}}},Pe={key:0,class:"flex justify-between items-center border-dashed pb-6"},Oe={class:"flex items-center"},Ve=["onClick"],Be={class:"whitespace-nowrap px-4 py-4"},Me={class:"flex space-x-1 items-center"},Ne={class:"px-4 py-4"},Ee={class:"w-40"},Ae={class:"px-4 py-4"},Fe={class:"w-60"},He={class:"whitespace-nowrap px-4 py-4"},je={key:0,class:"whitespace-nowrap px-4 py-4"},Ue={key:1,class:"whitespace-nowrap px-4 py-4"},Ze={class:"whitespace-nowrap px-4 py-4"},We={class:"flex space-x-1 items-center"},Re={class:"font-bold"},qe={class:"text-black"},Ye={class:"text-black"},ze={class:"text-black"},Ge={class:"text-black"},Je={class:"font-bold"},Ke={key:2,class:"whitespace-nowrap px-4 py-4"},Qe={class:"flex space-x-1 items-center"},Xe={key:3,class:"whitespace-nowrap px-4 py-4"},$e={class:"flex space-x-1 items-center"},et={key:4,class:"whitespace-nowrap px-4 py-4"},tt={class:"flex space-x-1 items-center"},st={key:5,class:"whitespace-nowrap px-4 py-4"},ot={class:"flex space-x-1 items-center"},rt={key:1},it={class:"whitespace-nowrap px-4 py-4"},nt={class:"flex space-x-1 items-center"},at={class:"px-4 py-4 flex items-center space-x-4"},lt=["onClick"],dt=["onClick"],mt={key:2,class:"p-8 border rounded-lg bg-gray-50"},ct={class:"flex justify-end"},ut={class:"mb-8"},ht={class:"font-bold text-black"};function pt(o,e,f,N,s,l){const L=c("TextHeader"),p=c("MoreInfoPopover"),y=c("ToogleSwitch"),I=c("Checkbox"),b=c("OrderStatus"),D=c("OrderPaymentStatus"),P=c("OrderCollectionStatus"),T=c("NoDataPlaceholder"),O=c("SpinningLoader"),V=c("BasicTable"),B=c("PrimaryButton"),k=c("ConfirmModal");return r(),n("div",null,[!(s.isLoadingOrders||f.isLoadingCustomer)&&(s.pagination??{}).total>0?(r(),n("div",Pe,[t("div",Oe,[a(L,null,{default:d(()=>e[2]||(e[2]=[t("span",{class:"mr-2"},"🎁",-1),g(" Orders")])),_:1}),a(p,{class:"ml-2 mt-1",title:"What Is This?",description:"Orders are requests placed by customers to purchase products or services from your store.",placement:"top"})]),(s.pagination??{}).total>0?E(o.$slots,"actionButtons",{key:0}):u("",!0)])):u("",!0),s.isLoadingOrders||f.isLoadingCustomer||(s.pagination??{}).total>0||l.hasSearchTerm?(r(),h(V,{key:1,pagination:s.pagination,isLoading:s.isLoadingOrders||f.isLoadingCustomer,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getOrders,totalHeaders:l.tableHeaders.length},{primaryFilters:d(()=>[a(y,{modelValue:s.showEverything,"onUpdate:modelValue":e[0]||(e[0]=i=>s.showEverything=i),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your orders"},{default:d(()=>e[3]||(e[3]=[g(" Show Everything ")])),_:1},8,["modelValue"])]),head:d(()=>[t("tr",null,[(r(!0),n(x,null,M(l.tableHeaders,(i,v)=>(r(),n("th",{key:v,scope:"col",class:"whitespace-nowrap px-4 py-3"},m(i),1))),128))])]),body:d(()=>[(r(!0),n(x,null,M(s.orders,(i,v)=>(r(),n("tr",{onClick:C(_=>l.onView(i),["stop"]),key:i.id,class:H(["group cursor-pointer border-b",s.checkedRowIds[v]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[t("td",{onClick:e[1]||(e[1]=C(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[a(I,{size:"xs",modelValue:s.checkedRowIds[v],"onUpdate:modelValue":_=>s.checkedRowIds[v]=_},null,8,["modelValue","onUpdate:modelValue"])]),t("td",Be,[t("div",Me,[t("span",null,"#"+m(i._attributes.number),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"#"+i._attributes.number,description:i.summary,placement:"top"},null,8,["title","description"])])]),t("td",Ne,[t("div",Ee,[t("span",null,m(i._attributes.customerDisplayName),1)])]),t("td",Ae,[t("div",Fe,[t("span",null,m(i.summary),1)])]),t("td",He,[a(b,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])]),s.showEverything?(r(),n("td",je,[a(D,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):u("",!0),s.showEverything?(r(),n("td",Ue,[a(P,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):u("",!0),t("td",Ze,[t("div",We,[t("span",Re,m(i.grandTotal.amountWithCurrency),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"Cost Breakdown",placement:"top"},{description:d(()=>[e[8]||(e[8]=t("hr",null,null,-1)),t("p",null,[e[4]||(e[4]=g("Subtotal: ")),t("span",qe,m(i._relationships.cart.subTotal.amountWithCurrency),1)]),t("p",null,[e[5]||(e[5]=g("Sale Discount: ")),t("span",Ye,m(i._relationships.cart.saleDiscountTotal.amountWithCurrency),1)]),t("p",null,[e[6]||(e[6]=g("Coupon Discount: ")),t("span",ze,m(i._relationships.cart.couponDiscountTotal.amountWithCurrency),1)]),e[9]||(e[9]=t("hr",null,null,-1)),t("p",Ge,[e[7]||(e[7]=g("Grand Total: ")),t("span",Je,m(i.grandTotal.amountWithCurrency),1)])]),_:2},1024)])]),s.showEverything?(r(),n("td",Ke,[t("div",Qe,[t("span",null,m(i.paidTotal.amountWithCurrency),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"Paid: "+i.paidPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):u("",!0),s.showEverything?(r(),n("td",Xe,[t("div",$e,[t("span",null,m(i.pendingTotal.amountWithCurrency),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"Pending: "+i.pendingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):u("",!0),s.showEverything?(r(),n("td",et,[t("div",tt,[t("span",null,m(i.outstandingTotal.amountWithCurrency),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"Outstanding: "+i.outstandingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):u("",!0),s.showEverything?(r(),n("td",st,[t("div",ot,[i.specialNote?(r(),h(T,{key:0})):(r(),n("span",rt,m(i.specialNote),1))])])):u("",!0),t("td",it,[t("div",nt,[t("span",null,m(o.formattedDatetime(i.createdAt)),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(i.createdAt),placement:"top"},null,8,["title"])])]),t("td",at,[l.isDeleting(i)?u("",!0):(r(),n("a",{key:0,href:"#",onClick:C(_=>l.onView(i),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,lt)),l.isDeleting(i)?(r(),h(O,{key:1,type:"danger"},{default:d(()=>e[10]||(e[10]=[t("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(r(),n("a",{key:2,href:"#",onClick:C(_=>l.showDeleteConfirmationModal(i),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,dt))])],10,Ve))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(r(),n("div",mt,[e[11]||(e[11]=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">🎁</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Orders Yet</h1><p class="text-gray-500 text-sm">Orders will appear here once your customer starts shopping.</p></div></div>',1)),t("div",ct,[E(o.$slots,"actionButtons")])])),s.deletableOrder?(r(),h(k,{key:3,approveText:"Delete Order",approveAction:l.deleteOrder,isLoading:l.isDeleting(s.deletableOrder)},{content:d(()=>[e[14]||(e[14]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",ut,[e[12]||(e[12]=g("Are you sure you want to permanently delete ")),t("span",ht,m(s.deletableOrder.name),1),e[13]||(e[13]=g("?"))])]),trigger:d(i=>[a(B,{ref:"confirmDeleteButton",action:i.showModal,class:"hidden",type:"danger"},{default:d(()=>e[15]||(e[15]=[g(" Delete Order ")])),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):u("",!0)])}const gt=J(Ie,[["render",pt]]),ft={mixins:[F,A],components:{AddButton:X,TextHeader:U,BasicTable:$,Checkbox:ee,Countdown:Se,ExternalLink:De,ConfirmModal:Z,SpinningLoader:R,PrimaryButton:W,MoreInfoPopover:q,ToogleSwitch:Y,BadgeIndicator:Q,TransactionPaymentStatus:Le},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{transactions:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,appName:ie.appName,deletableTransaction:null,isDeletingTransactionIds:[],isLoadingTransactions:!1,storeState:j()}},watch:{isLoadingCustomer(o,e){o==!1&&this.getTransactions()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Trans #","Description","Payment Status","Amount","Percentage","Payment Method","Requester","Verifyer","Payment Link","Created Date",""]:["","Trans #","Payment Status","Amount","Payment Method","Requester","Verifyer","Payment Link",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(o){this.$router.push({name:"show-store-transaction",params:{store_href:this.store._links.showStore,transaction_href:o._links.showTransaction}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(o){this.deletableTransaction=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingTransactionIds.findIndex(e=>e==o.id)!=-1},onAddTransaction(){this.$router.push({name:"create-store-transaction",params:{store_href:this.store._links.showStore}})},paginate(o){this.getTransactions(o)},search(o){this.searchTerm=o,this.getTransactions()},getTransactions(o=null){this.isLoadingTransactions=!0;const e={_relationships:"customer,requestedByUser,manuallyVerifiedByUser,paymentMethod"};this.hasSearchTerm&&(e.search=this.searchTerm),o=o??this.customer._links.showCustomerTransactions,z(o,e).then(f=>{f.status==200&&(this.pagination=f.data,this.transactions=this.pagination.data,this.checkedRowIds=this.transactions.map(N=>!1)),this.isLoadingTransactions=!1}).catch(f=>{this.isLoadingTransactions=!1})},deleteTransaction(){this.isDeletingTransactionIds.push(this.deletableTransaction.id),G(this.deletableTransaction._links.deleteTransaction).then(o=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(e=>e==this.deletableTransaction.id,1)),o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Transaction deleted"),this.isDeletingTransactionIds.length==0&&this.getTransactions()):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)))}).catch(o=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(e=>e==this.deletableTransaction.id,1)),this.setServerFormErrors(o)})}}},yt={key:0,class:"flex justify-between items-center border-dashed py-6"},wt={class:"flex items-center"},vt=["onClick"],_t={class:"whitespace-nowrap px-4 py-4"},xt={class:"flex space-x-1 items-center"},bt={key:0,class:"px-4 py-4"},kt={class:"min-w-80"},Ct={class:"whitespace-nowrap px-4 py-4"},Tt={class:"whitespace-nowrap px-4 py-4 text-center"},St={key:1,class:"whitespace-nowrap px-4 py-4 text-center"},Dt={class:"whitespace-nowrap px-4 py-4 text-center"},Lt={class:"whitespace-nowrap px-4 py-4"},It={key:0},Pt={key:1,class:"text-xs text-center text-gray-300"},Ot={class:"text-xs text-center text-gray-300"},Vt={key:0,class:"whitespace-nowrap px-4 py-4"},Bt={key:0,class:"flex items-start space-x-2"},Mt={key:0,class:"max-w-80"},Nt={key:2,class:"text-xs text-center text-gray-300"},Et={key:1,class:"text-xs text-center text-gray-300"},At={key:2,class:"whitespace-nowrap px-4 py-4"},Ft={class:"flex space-x-1 items-center"},Ht={class:"px-4 py-4 flex items-center space-x-4"},jt=["onClick"],Ut=["onClick"],Zt={key:2,class:"p-8 border rounded-lg bg-gray-50"},Wt={class:"flex justify-end"},Rt={class:"mb-8"},qt={class:"font-bold text-black"};function Yt(o,e,f,N,s,l){const L=c("TextHeader"),p=c("MoreInfoPopover"),y=c("ToogleSwitch"),I=c("Checkbox"),b=c("TransactionPaymentStatus"),D=c("BadgeIndicator"),P=c("ExternalLink"),T=c("Countdown"),O=c("SpinningLoader"),V=c("BasicTable"),B=c("PrimaryButton"),k=c("ConfirmModal");return r(),n("div",null,[!(s.isLoadingTransactions||f.isLoadingCustomer)&&(s.pagination??{}).total>0?(r(),n("div",yt,[t("div",wt,[a(L,null,{default:d(()=>e[3]||(e[3]=[t("span",{class:"mr-2"},"💵",-1),g(" Transactions")])),_:1}),a(p,{class:"ml-2 mt-1",title:"What Is This?",description:"Transactions are detailed records of payments made by customers for purchasing products or services from your store.",placement:"top"})]),(s.pagination??{}).total>0?E(o.$slots,"actionButtons",{key:0}):u("",!0)])):u("",!0),s.isLoadingTransactions||f.isLoadingCustomer||(s.pagination??{}).total>0||l.hasSearchTerm?(r(),h(V,{key:1,pagination:s.pagination,isLoading:s.isLoadingTransactions||f.isLoadingCustomer,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getTransactions,totalHeaders:l.tableHeaders.length},{primaryFilters:d(()=>[a(y,{modelValue:s.showEverything,"onUpdate:modelValue":e[0]||(e[0]=i=>s.showEverything=i),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your transactions"},{default:d(()=>e[4]||(e[4]=[g(" Show Everything ")])),_:1},8,["modelValue"])]),head:d(()=>[t("tr",null,[(r(!0),n(x,null,M(l.tableHeaders,(i,v)=>(r(),n("th",{key:v,scope:"col",class:"whitespace-nowrap px-4 py-3"},m(i),1))),128))])]),body:d(()=>[(r(!0),n(x,null,M(s.transactions,(i,v)=>(r(),n("tr",{onClick:C(_=>l.onView(i),["stop"]),key:i.id,class:H(["group cursor-pointer border-b",s.checkedRowIds[v]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[t("td",{onClick:e[1]||(e[1]=C(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[a(I,{size:"xs",modelValue:s.checkedRowIds[v],"onUpdate:modelValue":_=>s.checkedRowIds[v]=_},null,8,["modelValue","onUpdate:modelValue"])]),t("td",_t,[t("div",xt,[t("span",null,"#"+m(i._attributes.number),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:"#"+i._attributes.number,description:i.description,placement:"top"},null,8,["title","description"])])]),s.showEverything?(r(),n("td",bt,[t("div",kt,m(i.description),1)])):u("",!0),t("td",Ct,[a(b,{transaction:i},null,8,["transaction"])]),t("td",Tt,m(i.amount.amountWithCurrency),1),s.showEverything?(r(),n("td",St,m(i.percentage.valueSymbol),1)):u("",!0),t("td",Dt,m(i._relationships.paymentMethod.name),1),t("td",Lt,[i._relationships.requestedByUser?(r(),n("span",It,m(i._relationships.requestedByUser._attributes.name),1)):(r(),n("span",Pt,"---"))]),t("td",Ot,[i._relationships.verifiedByUser?(r(),n("span",Vt,m(i._relationships.verifiedByUser._attributes.name),1)):(r(),h(D,{key:1,type:"info",text:s.appName,showDot:!1},null,8,["text"]))]),t("td",{class:"px-4 py-4",onClick:e[2]||(e[2]=C(()=>{},["stop"]))},[i.metadata?(r(),n("div",Bt,[i.metadata.canPayUsingDpo?(r(),n("div",Mt,[a(P,{url:i.metadata.dpoPaymentUrl,class:"text-xs"},{default:d(()=>[g(m(i.metadata.dpoPaymentUrl),1)]),_:2},1032,["url"])])):i.metadata.dpoPaymentLinkHasExpired==!0?(r(),h(D,{key:1,type:"warning",text:"Expired",showDot:!1})):(r(),n("span",Nt,"---")),i.metadata.canPayUsingDpo?(r(),h(p,{key:3,title:"Expires In",placement:"top",class:"opacity-0 group-hover:opacity-100 mt-1"},{description:d(()=>[e[5]||(e[5]=t("div",{class:"border-t border-dashed my-2"},null,-1)),a(T,{showMoreInfoPopover:!1,time:i.metadata.dpoPaymentUrlExpiresAt},null,8,["time"])]),_:2},1024)):u("",!0)])):(r(),n("span",Et,"---"))]),s.showEverything?(r(),n("td",At,[t("div",Ft,[t("span",null,m(o.formattedDatetime(i.createdAt)),1),a(p,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(i.createdAt),placement:"top"},null,8,["title"])])])):u("",!0),t("td",Ht,[l.isDeleting(i)?u("",!0):(r(),n("a",{key:0,href:"#",onClick:C(_=>l.onView(i),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,jt)),l.isDeleting(i)?(r(),h(O,{key:1,type:"danger"},{default:d(()=>e[6]||(e[6]=[t("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(r(),n("a",{key:2,href:"#",onClick:C(_=>l.showDeleteConfirmationModal(i),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,Ut))])],10,vt))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(r(),n("div",Zt,[e[7]||(e[7]=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">💵</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Transactions Yet</h1><p class="text-gray-500 text-sm">Transactions will appear here once your customer start paying.</p></div></div>',1)),t("div",Wt,[E(o.$slots,"actionButtons")])])),s.deletableTransaction?(r(),h(k,{key:3,approveText:"Delete Transaction",approveAction:l.deleteTransaction,isLoading:l.isDeleting(s.deletableTransaction)},{content:d(()=>[e[10]||(e[10]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",Rt,[e[8]||(e[8]=g("Are you sure you want to permanently delete ")),t("span",qt,"transaction #"+m(s.deletableTransaction._attributes.number),1),e[9]||(e[9]=g("?"))])]),trigger:d(i=>[a(B,{ref:"confirmDeleteButton",action:i.showModal,class:"hidden",type:"danger"},{default:d(()=>e[11]||(e[11]=[g(" Delete Transaction ")])),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):u("",!0)])}const zt=J(ft,[["render",Yt]]),Gt={mixins:[A,F],components:{Alert:re,TextInput:ae,TextHeader:U,MoneyInput:de,InputTags:le,BackButton:me,NumberInput:ce,SelectInput:ue,Datepicker:he,ConfirmModal:Z,ShineEffect:pe,TextareaInput:ge,LineSkeleton:fe,PrimaryButton:W,SpinningLoader:R,SelectInputTags:ye,MoreInfoPopover:q,BackdropLoader:we,ToogleSwitch:Y,MobileNumberInput:ve,BadgeIndicator:Q,CustomerOrders:gt,CustomerTransactions:zt},data(){return{form:{notes:"",email:"",birthday:"",lastName:"",firstName:"",mobileNumber:""},customer:null,showForm:!1,isDeleting:!1,originalForm:null,isSubmitting:!1,isLoadingCustomer:!1,apiState:ne(),storeState:j()}},watch:{"$route.params.customer_href"(o,e){window.scrollTo(0,0),this.getCustomer()}},computed:{store(){return this.storeState.store},isCreating(){return this.$route.name==="create-store-customer"},isEditting(){return this.$route.name==="show-store-customer"},addresses(){return((this.customer||{})._relationships||{}).addresses||[]},hasAddresses(){return this.addresses.length>0},formHasChanged(){var o=S(this.form),e=S(this.originalForm);return!oe(o,e)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-customers",params:{store_href:this.store._links.showStore}})},stopShowingForm(){this.form=S(this.originalForm),this.showForm=!1},setCustomerFields(){this.form.email=this.customer.email,this.form.notes=this.customer.notes,this.form.lastName=this.customer.lastName,this.form.firstName=this.customer.firstName,this.form.mobileNumber=(this.customer.mobileNumber||{}).international||"",this.customer.birthday&&(this.form.birthday=se(this.customer.birthday).format("DD MMM YYYY")),this.originalForm=S(this.form)},getCustomer(){this.isLoadingCustomer=!0;const o={_relationships:"addresses"};z(this.$route.params.customer_href,o).then(e=>{e.status==200&&e.data.exists&&(this.customer=e.data.customer,this.setCustomerFields()),this.isLoadingCustomer=!1}).catch(e=>{this.isLoadingCustomer=!1,this.setServerFormErrors(e)})},createCustomer(){this.isSubmitting=!0,be(this.apiState.apiHome._links.createCustomer,this.parseForm()).then(o=>{o.status==200&&(this.showSuccessfulNotification("Customer created"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)})},updateCustomer(){this.isSubmitting=!0,this.form.return=!0,ke(this.customer._links.showCustomer,this.parseForm()).then(o=>{o.status==200&&(o.data.updated?(this.showSuccessfulNotification("Customer updated"),this.showForm=!1,this.getCustomer()):(this.form=S(this.originalForm),this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message))),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)})},deleteCustomer(){this.isDeleting=!0,G(this.customer._links.deleteCustomer).then(o=>{o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Customer deleted"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message))),this.isDeleting=!1}).catch(o=>{this.isDeleting=!1,this.setServerFormErrors(o)})},parseForm(){var o=S(this.form);return this.form.birthday==""&&delete o.birthday,o}},created(){this.showForm=this.isCreating,this.form.storeId=this.store.id,this.originalForm=S(this.form),this.isEditting&&this.getCustomer()}},Jt={class:"grid grid-cols-2 py-6"},Kt={class:"flex items-center border-dashed"},Qt={key:0,class:"flex items-center space-x-2"},Xt={key:0,class:"flex justify-end items-center"},$t={key:0,class:"relative",action:"#",method:"POST"},es={class:"flex items-center space-x-2"},ts={class:"flex justify-end items-center space-x-4"},ss={class:"grid grid-cols-12 gap-4 mb-8"},os={class:"col-span-8 col-start-3 relative"},rs={class:"space-y-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},is={key:1,class:"grid grid-cols-12 gap-4 mb-8"},ns={class:"col-span-8 relative"},as={class:"grid grid-cols-3 gap-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},ls={class:"flex flex-col items-center space-y-2"},ds={class:"flex space-x-1 items-center"},ms={key:1,class:"font-bold text-2xl"},cs={class:"flex flex-col items-center space-y-2"},us={class:"flex space-x-1 items-center"},hs={key:1,class:"font-bold text-2xl"},ps={class:"flex flex-col items-center space-y-2"},gs={class:"flex space-x-1 items-center"},fs={key:1,class:"font-bold text-2xl"},ys={key:0,class:"col-span-3 px-4 border-t border-dashed"},ws={key:1,class:"col-span-3 flex space-x-2 items-center px-4"},vs={class:"whitespace-nowrap text-sm font-bold"},_s={class:"col-span-3 flex space-x-2 items-center px-4"},xs={class:"text-gray-500 text-sm"},bs={class:"col-span-4"},ks={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4 mb-4"},Cs={class:"flex items-center space-x-2"},Ts={key:1,class:"font-bold"},Ss={class:"space-y-2"},Ds={key:0,class:"flex items-center space-x-2 text-sm"},Ls={key:1,class:"font-bold"},Is={key:1,class:"flex items-center space-x-2 text-sm"},Ps={key:1,class:"font-bold"},Os={key:2,class:"flex items-center space-x-2 text-sm"},Vs={class:"font-bold"},Bs={key:3,class:"border-t border-dashed pt-2"},Ms={key:0,class:"flex items-center space-x-2 text-sm"},Ns={class:"col-span-12"},Es={class:"bg-white shadow-lg rounded-lg border p-4"},As={class:"col-span-12"},Fs={class:"bg-white shadow-lg rounded-lg border p-4"},Hs={class:"font-bold text-black"},js={class:"flex justify-end"},Us={class:"mb-8"},Zs={class:"font-bold text-black"};function Ws(o,e,f,N,s,l){const L=c("BackButton"),p=c("LineSkeleton"),y=c("ShineEffect"),I=c("TextHeader"),b=c("PrimaryButton"),D=c("Alert"),P=c("BackdropLoader"),T=c("TextInput"),O=c("MobileNumberInput"),V=c("TextareaInput"),B=c("Datepicker"),k=c("MoreInfoPopover"),i=c("CustomerOrders"),v=c("CustomerTransactions"),_=c("ConfirmModal");return r(),n("div",null,[t("div",Jt,[t("div",Kt,[a(L,{class:"w-16 mr-4",action:l.goBack},null,8,["action"]),s.isLoadingCustomer?(r(),n("div",Qt,[a(y,{class:"flex space-x-2"},{default:d(()=>[a(p,{width:"w-40 mt-2"})]),_:1})])):(r(),h(I,{key:1},{default:d(()=>[g(m(l.isCreating?"Add Customer":s.customer._attributes.name),1)]),_:1}))]),!l.isCreating&&!s.isLoadingCustomer&&!(l.mustCreate||l.mustSaveChanges)?(r(),n("div",Xt,[s.showForm?(r(),h(b,{key:0,action:l.stopShowingForm,class:"w-40",type:"light"},{default:d(()=>e[6]||(e[6]=[t("span",null,"Cancel",-1)])),_:1},8,["action"])):(r(),h(b,{key:1,action:()=>s.showForm=!0,class:"w-40",type:"light"},{default:d(()=>e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),t("span",null,"Edit",-1)])),_:1},8,["action"]))])):u("",!0)]),s.showForm?(r(),n("form",$t,[l.mustCreate||l.mustSaveChanges?(r(),h(D,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:d(()=>[t("div",es,[e[8]||(e[8]=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),t("span",null,m(l.isCreating?"Create your customer":"Please save your changes"),1)]),t("div",ts,[l.isCreating?u("",!0):(r(),h(b,{key:0,action:l.stopShowingForm,class:"w-40",type:"light"},{default:d(()=>e[9]||(e[9]=[t("span",null,"Cancel",-1)])),_:1},8,["action"])),a(b,{action:l.isCreating?l.createCustomer:l.updateCustomer,loading:s.isSubmitting,class:"w-40"},{default:d(()=>[g(m(l.isCreating?"Create Customer":"Save Changes"),1)]),_:1},8,["action","loading"])])]),_:1})):u("",!0),t("div",ss,[t("div",os,[s.isLoadingCustomer||s.isSubmitting?(r(),h(P,{key:0,class:"rounded-lg"})):u("",!0),t("div",rs,[a(T,{label:"First Name",placeholder:"John",modelValue:s.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=w=>s.form.firstName=w),labelPopoverTitle:"What Is This?",errorText:o.getFormError("firstName"),labelPopoverDescription:"Customer's first name e.g John"},null,8,["modelValue","errorText"]),a(T,{label:"Last Name",placeholder:"Doe",modelValue:s.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=w=>s.form.lastName=w),labelPopoverTitle:"What Is This?",errorText:o.getFormError("lastName"),labelPopoverDescription:"Customer's last name e.g Doe"},null,8,["modelValue","errorText"]),a(T,{label:"Email",modelValue:s.form.email,"onUpdate:modelValue":e[2]||(e[2]=w=>s.form.email=w),placeholder:"johndoe@gmail.com",errorText:o.getFormError("email"),labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's email e.g johndoe@gmail.com"},null,8,["modelValue","errorText"]),a(O,{modelValue:s.form.mobileNumber,"onUpdate:modelValue":e[3]||(e[3]=w=>s.form.mobileNumber=w),labelPopoverTitle:"What Is This?",errorText:o.getFormError("mobileNumber"),labelPopoverDescription:"Customer's mobile number e.g +26772000001"},null,8,["modelValue","errorText"]),a(V,{rows:2,label:"Notes",modelValue:s.form.notes,"onUpdate:modelValue":e[4]||(e[4]=w=>s.form.notes=w),labelPopoverTitle:"What Is This?",errorText:o.getFormError("notes"),placeholder:"Very loyal customer",labelPopoverDescription:"Short notes about customer e.g Very loyal customer"},null,8,["modelValue","errorText"]),(r(),h(B,{key:s.form.birthday,modelValue:s.form.birthday,"onUpdate:modelValue":e[5]||(e[5]=w=>s.form.birthday=w),errorText:o.getFormError("birthday"),label:"Birthday",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's birthday 🥳"},null,8,["modelValue","errorText"]))])])])])):(r(),n("div",is,[t("div",ns,[t("div",as,[t("div",ls,[e[11]||(e[11]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})],-1)),t("div",ds,[e[10]||(e[10]=t("p",{class:"text-gray-500 text-sm"},"Orders",-1)),a(k,{title:"What Is This?",description:"This is the number of orders placed by the customer",placement:"top"})]),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-24"})]),_:1})):(r(),n("p",ms,m(s.customer.totalOrders),1))]),t("div",cs,[e[13]||(e[13]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})],-1)),t("div",us,[e[12]||(e[12]=t("p",{class:"text-gray-500 text-sm"},"Total Spend",-1)),a(k,{title:"What Is This?",description:"This is the total amount spent by the customer on their orders",placement:"top"})]),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-24"})]),_:1})):(r(),n("p",hs,m(s.customer.totalSpend.amountWithCurrency),1))]),t("div",ps,[e[15]||(e[15]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})],-1)),t("div",gs,[e[14]||(e[14]=t("p",{class:"text-gray-500 text-sm"},"Average Order Spend",-1)),a(k,{title:"What Is This?",description:"This is the average amount spent by the customer per order",placement:"top"})]),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-24"})]),_:1})):(r(),n("p",fs,m(s.customer.totalAverageSpend.amountWithCurrency),1))]),s.isLoadingCustomer||s.customer.lastOrderAt||s.customer.notes?(r(),n("div",ys)):u("",!0),s.isLoadingCustomer||s.customer.lastOrderAt?(r(),n("div",ws,[e[16]||(e[16]=t("svg",{class:"w-6 h-6 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),e[17]||(e[17]=t("span",{class:"whitespace-nowrap text-gray-500 text-sm"},"Last order:",-1)),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-24"})]),_:1})):(r(),n(x,{key:1},[t("span",vs,m(o.formattedDatetime(s.customer.lastOrderAt)),1),a(k,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(s.customer.lastOrderAt),placement:"top"},null,8,["title"])],64))])):u("",!0),t("div",_s,[s.isLoadingCustomer?(r(),n(x,{key:0},[e[18]||(e[18]=t("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1)),a(y,null,{default:d(()=>[a(p,{width:"w-24"})]),_:1})],64)):s.customer.notes?(r(),n(x,{key:1},[e[19]||(e[19]=t("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1)),t("div",null,[t("span",xs,m(s.customer.notes),1)])],64)):u("",!0)])])]),t("div",bs,[t("div",ks,[t("div",Cs,[e[20]||(e[20]=t("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1)),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-32"})]),_:1})):(r(),n("span",Ts,m(s.customer._attributes.name),1))]),t("div",Ss,[s.isLoadingCustomer||s.customer.mobileNumber?(r(),n("div",Ds,[e[21]||(e[21]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1)),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-32"})]),_:1})):(r(),n("span",Ls,m(s.customer.mobileNumber.national),1))])):u("",!0),s.isLoadingCustomer||s.customer.email?(r(),n("div",Is,[e[22]||(e[22]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1)),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-32"})]),_:1})):(r(),n("span",Ps,m(s.customer.email),1))])):u("",!0),s.isLoadingCustomer||s.customer.birthday?(r(),n("div",Os,[e[23]||(e[23]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 2.994v2.25m10.5-2.25v2.25m-14.252 13.5V7.491a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.251m-18 0a2.25 2.25 0 0 0 2.25 2.25h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5m-6.75-6h2.25m-9 2.25h4.5m.002-2.25h.005v.006H12v-.006Zm-.001 4.5h.006v.006h-.006v-.005Zm-2.25.001h.005v.006H9.75v-.006Zm-2.25 0h.005v.005h-.006v-.005Zm6.75-2.247h.005v.005h-.005v-.005Zm0 2.247h.006v.006h-.006v-.006Zm2.25-2.248h.006V15H16.5v-.005Z"})],-1)),s.isLoadingCustomer?(r(),h(y,{key:0},{default:d(()=>[a(p,{width:"w-32"})]),_:1})):(r(),n(x,{key:1},[t("span",Vs,m(o.formattedDate(s.customer.birthday)),1),a(k,{title:"What Is This?",description:"This is the customers birthday 🥳",placement:"top"})],64))])):u("",!0),!s.isLoadingCustomer&&l.hasAddresses?(r(),n("div",Bs)):u("",!0),s.isLoadingCustomer||l.hasAddresses?(r(),n(x,{key:4},[s.isLoadingCustomer?(r(),n("div",Ms,[e[24]||(e[24]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1)),a(y,null,{default:d(()=>[a(p,{width:"w-32"})]),_:1})])):(r(!0),n(x,{key:1},M(l.addresses,(w,te)=>(r(),n("div",{key:te,class:"flex items-center space-x-2 text-sm"},[e[25]||(e[25]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1)),t("span",null,m(w._attributes.completeAddress),1)]))),128))],64)):u("",!0)])])]),t("div",Ns,[t("div",Es,[a(i,{customer:s.customer,isLoadingCustomer:s.isLoadingCustomer,refreshCustomer:l.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])]),t("div",As,[t("div",Fs,[a(v,{customer:s.customer,isLoadingCustomer:s.isLoadingCustomer,refreshCustomer:l.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])])])),s.customer?(r(),n("div",{key:2,class:H(["space-y-4 shadow-lg rounded-lg border p-4",s.isLoadingCustomer?"bg-gray-50":"border-red-300 bg-red-50"])},[t("p",null,[e[26]||(e[26]=g("Do you want to permanently delete ")),t("span",Hs,m(s.form.name),1),e[27]||(e[27]=g("? Once this customer is deleted you will not be able to recover it."))]),t("div",js,[a(_,{approveText:"Delete Customer",approveAction:l.deleteCustomer,isLoading:s.isDeleting},{content:d(()=>[e[30]||(e[30]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",Us,[e[28]||(e[28]=g("Are you sure you want to permanently delete ")),t("span",Zs,m(s.form.name),1),e[29]||(e[29]=g("?"))])]),trigger:d(w=>[a(b,{action:w.showModal,loading:s.isDeleting,class:"w-40",type:"danger"},{default:d(()=>e[31]||(e[31]=[g(" Delete Customer ")])),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):u("",!0)])}const Bo=J(Gt,[["render",Ws]]);export{Bo as default};
