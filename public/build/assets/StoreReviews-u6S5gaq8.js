import{F as T}from"./FormMixin-CYiBG1ca.js";import{U as S}from"./SpiningLoader-CsPmXxst.js";import{u as k}from"./store-store-C2_eLuQh.js";import{T as B}from"./TextHeader-Cdgnrugi.js";import{g as P}from"./api-repository-C4cDgx_E.js";import{B as D}from"./BasicTable-BSovyWYs.js";import{M as L}from"./MoreInfoPopover-gLIaCQca.js";import{B as H}from"./BadgeIndicator-BRfv_GU4.js";import{N as C}from"./NoDataPlaceholder-C-ZzFZvH.js";import{c as a,d as e,e as c,w as m,f as y,i as h,r as l,o,F as u,l as _,t as d,q as I}from"./app-Kf0mCOXy.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./SearchInput-Csxtp266.js";import"./TextInput-_gM6fl6u.js";import"./InputLabel-B11U1-WT.js";import"./InputErrorMessage-B1NpEu7u.js";import"./StatusDot-B0b3cfnt.js";const N={mixins:[T,S],components:{TextHeader:B,BasicTable:D,MoreInfoPopover:L,BadgeIndicator:H,NoDataPlaceholder:C},data(){return{reviews:[],pagination:null,searchTerm:null,isLoadingReviews:!1,storeState:k(),tableHeaders:["Customer","Subject","Rating","Comment","Review Date"]}},computed:{store(){return this.storeState.store},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{navigateToShowProducts(){this.$router.push({name:"show-store-products",params:{store_href:this.store._links.showStore}})},paginate(t){this.getReviews(t)},search(t){this.searchTerm=t,this.getReviews()},getReviews(t=null){this.isLoadingReviews=!0;const p={_relationships:"user"};this.hasSearchTerm&&(p.search=this.searchTerm),t=t??this.store._links.showStoreReviews,P(t,p).then(n=>{n.status==200&&(this.pagination=n.data,this.reviews=this.pagination.data),this.isLoadingReviews=!1}).catch(n=>{this.isLoadingReviews=!1,this.setServerFormErrors(n)})}},created(){this.getReviews()}},F={class:"flex justify-between items-center border-dashed py-6"},j={class:"flex items-center"},A=e("span",{class:"mr-2"},"ðŸ’¬",-1),V={class:"whitespace-nowrap px-4 py-4"},E={class:"items-center"},U={class:"whitespace-nowrap px-4 py-4"},q={class:"items-center"},z={class:"whitespace-nowrap px-4 py-4"},W={class:"flex items-center"},Z=e("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule":"evenodd"},null,-1),G=[Z],J={class:"px-4 py-4"},K={class:"flex space-x-1 items-center w-60"},O={key:1},Q={class:"whitespace-nowrap px-4 py-4"},X={class:"flex space-x-1 items-center"},Y={key:1,class:"flex justify-between space-x-20 bg-white shadow-lg rounded-lg border p-20"},$={class:"space-y-4"},ee=e("h1",{class:"text-2xl font-bold"},"Discover Customer Feedback",-1),te=e("p",null,"Reviews will appear here once customers provide feedback.",-1),se=e("div",null,[e("span",{class:"text-8xl"},"ðŸ’¬")],-1);function oe(t,p,n,ae,r,i){const x=l("TextHeader"),g=l("MoreInfoPopover"),b=l("NoDataPlaceholder"),R=l("BasicTable"),f=l("BadgeIndicator");return o(),a("div",null,[e("div",F,[e("div",j,[c(x,null,{default:m(()=>[A,h(" Reviews")]),_:1}),c(g,{class:"ml-2 mt-1",title:"What Is This?",description:"Reviews are customer feedback on products and services that you offer. This helps you and your customers make informed decisions",placement:"top"})])]),r.isLoadingReviews||(r.pagination??{}).total>0||i.hasSearchTerm?(o(),y(R,{key:0,pagination:r.pagination,isLoading:r.isLoadingReviews,onPaginate:i.paginate,onSearch:i.search,onRefresh:i.getReviews,totalHeaders:r.tableHeaders.length},{head:m(()=>[e("tr",null,[(o(!0),a(u,null,_(r.tableHeaders,(s,w)=>(o(),a("th",{key:w,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(s),1))),128))])]),body:m(()=>[(o(!0),a(u,null,_(r.reviews,s=>(o(),a("tr",{key:s.id,class:"group bg-white hover:bg-gray-50 border-b"},[e("td",V,[e("div",E,[e("span",null,d(s._relationships.user._attributes.name),1)])]),e("td",U,[e("div",q,[e("span",null,d(s.subject),1)])]),e("td",z,[e("div",W,[(o(),a(u,null,_(5,(w,v)=>e("svg",{key:v,class:I([s.rating>v?"text-yellow-300":"text-gray-300","w-4 h-4"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},G,2)),64))])]),e("td",J,[e("div",K,[s.comment==null?(o(),y(b,{key:0})):(o(),a("span",O,d(s.comment),1))])]),e("td",Q,[e("div",X,[e("span",null,d(t.formattedDatetime(s.createdAt)),1),c(g,{class:"opacity-0 group-hover:opacity-100",title:t.formattedRelativeDate(s.createdAt),placement:"top"},null,8,["title"])])])]))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(o(),a("div",Y,[e("div",$,[ee,e("div",null,[e("p",null,[h("See what your customers are saying about your "),c(f,{type:"primary",text:"products",showDot:!1,clickable:!0,action:i.navigateToShowProducts},null,8,["action"]),h(" and "),c(f,{type:"primary",text:"services",showDot:!1,clickable:!0,action:i.navigateToShowProducts},null,8,["action"]),h(".")]),te])]),se]))])}const xe=M(N,[["render",oe]]);export{xe as default};
