import{d as x}from"./UtilsMixin-CbFS-0FV.js";import{E as V,l as B,o as l,e as S,w as g,A as E,c as r,F as _,b as s,t,f as p,n as I,r as v,h as A}from"./app-C6V_Xgnk.js";import{M as H}from"./MoreInfoPopover-Bn5CO2vD.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const f=1e3,M=60*f,y=60*M,C=24*y,b="abort",L="end",N="progress",T="start",w="visibilitychange";var P=V({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:e=>e>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:e=>e>=0},transform:{type:Function,default:e=>e}},emits:[b,L,N,T],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/C)},hours(){return Math.floor(this.totalMilliseconds%C/y)},minutes(){return Math.floor(this.totalMilliseconds%y/M)},seconds(){return Math.floor(this.totalMilliseconds%M/f)},milliseconds(){return Math.floor(this.totalMilliseconds%f)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/y)},totalMinutes(){return Math.floor(this.totalMilliseconds/M)},totalSeconds(){return Math.floor(this.totalMilliseconds/f)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(w,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(w,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(T),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const e=Math.min(this.totalMilliseconds,this.interval);if(e>0){let d,i;const u=c=>{d||(d=c),i||(i=c);const m=c-d;m>=e||m+(c-i)/2>=e?this.progress():this.requestId=requestAnimationFrame(u),i=c};this.requestId=requestAnimationFrame(u)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(N,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(b))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(L))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return B(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const q={components:{VueCountdown:P,MoreInfoPopover:H},props:{time:{type:[String,null],required:!0},textClass:{type:String,default:""},showMoreInfoPopover:{type:Boolean,default:!0},moreInfoPopoverClass:{type:String,default:""}},data(){return{timeLeftInMilliSeconds:0}},watch:{time:{immediate:!0,handler(e){this.calculateTimeLeft(e)}}},computed:{hasExpired(){return this.timeLeftInMilliSeconds==0}},methods:{calculateTimeLeft(e){if(!e){this.timeLeftInMilliSeconds=0;return}const d=x(e),i=x(),u=d.diff(i);u>0?this.timeLeftInMilliSeconds=u:this.timeLeftInMilliSeconds=0}}},F={key:0},$={key:0},R={key:0},U={key:3},G={class:"w-full text-sm text-left rtl:text-right text-gray-500"},Y=s("thead",{class:"font-bold text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("td",{class:"px-2 py-1 text-center"},"Days"),s("td",{class:"px-2 py-1 text-center"},"Hrs"),s("td",{class:"px-2 py-1 text-center"},"Mins"),s("td",{class:"px-2 py-1 text-center"},"Secs")])],-1),j={class:"px-2 py-1 text-center"},z={class:"px-2 py-1 text-center"},J={class:"px-2 py-1 text-center"},K={class:"px-2 py-1 text-center"};function Q(e,d,i,u,c,m){const D=v("MoreInfoPopover"),k=v("vue-countdown");return l(),S(k,{time:c.timeLeftInMilliSeconds,class:"flex items-center space-x-1"},{default:g(({days:h,hours:o,minutes:n,seconds:a})=>[E(e.$slots,"suffix",{hasExpired:m.hasExpired}),h>0||o>0||n>0||a>0?(l(),r("span",{key:0,class:I(i.textClass)},[h>0?(l(),r(_,{key:0},[s("span",null,t(h)+" "+t(h==1?"day ":"days "),1),o>0?(l(),r("span",F,t(o)+" "+t(o==1?"hr ":"hrs "),1)):p("",!0)],64)):o>0?(l(),r(_,{key:1},[s("span",null,t(o)+" "+t(o==1?"hr ":"hrs "),1),n>0?(l(),r("span",$,t(n)+" "+t(n==1?"min ":"mins "),1)):p("",!0)],64)):n>0?(l(),r(_,{key:2},[s("span",null,t(n)+" "+t(n==1?"min ":"mins "),1),a>0?(l(),r("span",R,t(a)+" "+t(a==1?"sec ":"secs "),1)):p("",!0)],64)):a>0?(l(),r("span",U,t(a)+" "+t(a==1?"sec ":"secs "),1)):p("",!0)],2)):E(e.$slots,"default",{key:1},()=>[A("Expired")]),i.showMoreInfoPopover&&!m.hasExpired?(l(),S(D,{key:2,placement:"top",class:I(i.moreInfoPopoverClass)},{description:g(()=>[s("table",G,[Y,s("tbody",null,[s("tr",null,[s("td",j,t(h<10?"0"+h:h),1),s("td",z,t(o<10?"0"+o:o),1),s("td",J,t(n<10?"0"+n:n),1),s("td",K,t(a<10?"0"+a:a),1)])])])]),_:2},1032,["class"])):p("",!0)]),_:3},8,["time"])}const et=O(q,[["render",Q]]);export{et as C};
