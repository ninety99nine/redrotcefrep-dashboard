import"./index-D14zHmA0.js";import{u as F}from"./store-store-CxinBL3L.js";import{F as D}from"./FormMixin-D44Bj-el.js";import{M as z}from"./MoneyInput-C1qj8tqg.js";import{P as A}from"./Pill-CD_3pjy5.js";import{u as x,T as O,j as G,C as K,a as X,k as E,P as Y,N as J,b as tt,S as et,c as rt,G as ot,d as st,e as nt,f as at,g as it,h as dt,i as pt}from"./Index-SZuhyiGz.js";import{r as a,o,c as n,b as s,F as f,k as b,e as S,d,f as m,i as y,w,n as V,m as P,t as _,T as N,q as lt,y as ct,h as L,z as mt}from"./app-DEkFCb1u.js";import{_ as u}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{A as ut}from"./AddButton-CqVfIWO7.js";import{B as ht}from"./BasicModal-DyuUDblK.js";import{L as B}from"./LineSkeleton-DFWRI7XC.js";import{P as R}from"./PrimaryButton-Cwf__Lsv.js";import{B as Ct}from"./BackdropLoader-jo1Que9S.js";import{E as gt}from"./EmailInput-CYL8CYZj.js";import{T as H}from"./TextInput-CwB-G_mS.js";import{M as yt}from"./MobileNumberInput-DB74IXOZ.js";import{b as St}from"./InputErrorMessage-lzTzq-uZ.js";import{G as _t}from"./GoogleMaps-BO2i0bSd.js";import{A as vt}from"./AddressInput-DySv_o9F.js";import{U as xt}from"./form-store-B_ZbhArT.js";import{D as ft,a as Ft}from"./DeliveryTimePicker-CqDE6cue.js";import"./cloneDeep-BGE7Bmb-.js";import"./api-repository-CIJPUswr.js";import"./MoreInfoPopover-CrxGv8yo.js";import"./Logo-BZxlr7up.js";import"./Drawer-DoikbwU2.js";import"./FormErrorMessages-T64AgTW8.js";import"./OfflineMessageTextarea-Ya3dm0h7.js";import"./ToogleSwitch-CtY-gb5u.js";import"./TextareaInput-CtY-WADI.js";import"./ShineEffect-CWpUJr6E.js";import"./Colorpicker-DLnFecE-.js";import"./SaveChangesAlert-B_UsUk9a.js";import"./SaveChanges-CYkT3WGE.js";import"./Alert-DEJps0rh.js";import"./UndoButton-6P096GJ8.js";import"./debounce-ZPArp6d8.js";import"./SpinningLoader-BnJGVf_7.js";/* empty css                                                                      */import"./BackButton-DMqpm81M.js";import"./DeleteButton-BPGn2bRk.js";import"./CountrySelectInput-hJ8dcCxk.js";import"./SelectInput-DXfLro8i.js";import"./Datepicker-HHxVzfmA.js";const wt={mixins:[D],components:{MoneyInput:z,Pill:A},data(){return{storeState:F(),shoppingCartState:x()}},watch:{"shoppingCartForm.tipFlatRate"(){this.shoppingCartState.inspectStoreShoppingCartWithDelay()}},computed:{store(){return this.storeState.store},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm},tips(){return["none",...this.store.tips,"specify"].map(this.formatTip)},hasTips(){return this.store.tips.length>0},isFixedTip(){var e;return((e=this.selectedTip)==null?void 0:e.type)==="fixed"},selectedTip(){return this.shoppingCartState.tip}},methods:{setTip(e){this.shoppingCartState.setTip(e)},isSelectedTip(e){return this.shoppingCartState.isSelectedTip(e)},formatTipText(e){return e.value+(e.type==="percentage"?"%":"")},formatTip(e){return e==="none"?O.NONE:e==="specify"?O.FIXED:O.PERCENTAGE(e)}}},kt={key:0,class:"space-y-4 px-4 pb-4"},bt={class:"flex flex-wrap gap-2"},Tt={key:0,class:"mt-4"};function Mt(e,r,h,C,c,t){const p=a("Pill"),i=a("MoneyInput");return t.hasTips?(o(),n("div",kt,[s("div",bt,[(o(!0),n(f,null,b(t.tips,(l,v)=>(o(),S(p,{key:v,size:"px-4 py-1",showDot:!1,clickable:!0,text:t.formatTipText(l),action:()=>t.setTip(l),type:t.isSelectedTip(l)?"primary":"info"},null,8,["text","action","type"]))),128))]),t.isFixedTip?(o(),n("div",Tt,[d(i,{modelValue:t.shoppingCartForm.tipFlatRate,"onUpdate:modelValue":r[0]||(r[0]=l=>t.shoppingCartForm.tipFlatRate=l),errorText:e.getFormError("discountFixedRate")},null,8,["modelValue","errorText"])])):m("",!0)])):m("",!0)}const Pt=u(wt,[["render",Mt]]),Dt={components:{Tips:Pt}};function It(e,r,h,C,c,t){const p=a("Tips");return o(),n("div",null,[d(p)])}const Nt=u(Dt,[["render",It]]),Lt={},Bt={class:"font-bold px-4"};function $t(e,r,h,C,c,t){return o(),n("p",Bt,"Tips")}const Ot=u(Lt,[["render",$t]]),Vt={components:{TipsCardBody:Nt,TipsCardHeading:Ot},data(){return{storeState:F()}},computed:{storeForm(){return this.storeState.storeForm}}};function Ht(e,r,h,C,c,t){const p=a("TipsCardHeading"),i=a("TipsCardBody");return o(),n("div",{style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg space-y-4 pt-4 overflow-hidden"},[d(p),d(i)],4)}const At=u(Vt,[["render",Ht]]),Et={mixins:[G],components:{Pill:A,AddButton:ut,BasicModal:ht,LineSkeleton:B,PrimaryButton:R,BackdropLoader:Ct,CategoryHeading:K,CategoryOptions:X},data(){return{mappedCartProducts:{},storeState:F(),shoppingCartState:x()}},computed:{store(){return this.storeState.store},storeForm(){return this.storeState.storeForm},nonSelectedProducts(){return this.shoppingCartState.nonSelectedProducts},hasCartProducts(){return this.shoppingCartState.hasCartProducts(this.mappedCartProducts)},hasNonSelectedProducts(){return this.shoppingCartState.hasNonSelectedProducts},hasSearchTerm(){return this.shoppingCartState.hasSearchTerm},shoppingCart(){return this.shoppingCartState.shoppingCart},isLoadingNonSelectedProducts(){return this.shoppingCartState.isLoadingNonSelectedProducts},isSearchingNonSelectedProducts(){return this.shoppingCartState.isSearchingNonSelectedProducts}},methods:{hasQuantity(e){return this.shoppingCartState.hasQuantity(e,this.mappedCartProducts)},isAddedToCart(e){return this.shoppingCartState.isAddedToCart(e,this.mappedCartProducts)},addToCart(e){this.shoppingCartState.addToCart(e,"1",this.mappedCartProducts)},addSelectedToCart(e){Object.values(this.mappedCartProducts).forEach(r=>{this.shoppingCartState.removeFromCart(r.id,this.mappedCartProducts),this.shoppingCartState.addToCart(r,r.quantity)}),e()},increaseQuantity(e){this.shoppingCartState.increaseQuantity(e,"1",this.mappedCartProducts)},decreaseQuantity(e){this.shoppingCartState.decreaseQuantity(e,"1",this.mappedCartProducts)},removeFromCart(e){this.shoppingCartState.removeFromCart(e,this.mappedCartProducts)},clearSearch(){this.shoppingCartState.clearSearch()},showNonSelectedShoppingProducts(){this.shoppingCartState.showNonSelectedShoppingProducts()}}},Rt={class:"relative"},jt={class:"divide-y"},Ut={key:0},Wt={class:"w-full flex items-center justify-between"},Zt=["onClick"],Qt={class:"w-full"},qt={class:"space-x-1"},zt={key:0,class:"flex items-center space-x-4"},Gt={class:"flex items-center space-x-2"},Kt=["onClick"],Xt=["onUpdate:modelValue"],Yt=["onClick"],Jt=["onClick"],te={class:"whitespace-nowrap"},ee={key:1};function re(e,r,h,C,c,t){const p=a("BackdropLoader"),i=a("LineSkeleton"),l=a("Pill"),v=a("PrimaryButton"),I=a("AddButton"),$=a("BasicModal");return o(),S($,{onShow:t.showNonSelectedShoppingProducts},{content:w(T=>[r[7]||(r[7]=s("h1",{class:"font-lg font-bold mb-2"},"Add Product",-1)),r[8]||(r[8]=s("p",{class:"text-sm text-gray-500 mb-4"},"Select items to add to your cart",-1)),s("div",Rt,[t.isLoadingNonSelectedProducts||t.isSearchingNonSelectedProducts?(o(),S(p,{key:0,showBorder:!1})):m("",!0),s("div",jt,[t.isLoadingNonSelectedProducts||t.isSearchingNonSelectedProducts?(o(),n("div",Ut,[(o(),n(f,null,b([1,2,3],(g,k)=>s("div",{key:k,class:V([{"border-t":k==0},"border-b border-l border-r shadow-sm py-6 px-4 bg-gray-50"])},[s("div",Wt,[e.isLoadingTransaction?(o(),S(i,{key:0,width:"w-32",shine:!0})):m("",!0),e.isLoadingTransaction?(o(),S(i,{key:1,width:"w-16",shine:!0})):m("",!0)])],2)),64))])):(o(),n(f,{key:1},[t.hasNonSelectedProducts?(o(!0),n(f,{key:0},b(t.nonSelectedProducts,(g,k)=>(o(),n("div",{key:k,onClick:P(M=>t.isAddedToCart(g.id)?t.increaseQuantity(g.id):t.addToCart(g),["stop"]),style:y({"--product-background":t.storeForm.productBgColor,"--product-background-hover":t.storeForm.productHoverBgColor}),class:V(["flex justify-between items-center px-6 cursor-pointer bg-[var(--product-background)] hover:bg-[var(--product-background-hover)] transition-colors group",k===0?"pt-4 pb-2":"py-2"])},[s("div",Qt,[s("span",{class:"text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})},_(g.name),5),s("div",qt,[g.allowVariations.name.toLowerCase()=="yes"?(o(),S(l,{key:0,type:"success",text:g.totalVisibleVariations+(g.totalVisibleVariations==1?" option":" options"),showDot:!1},null,8,["text"])):(o(),n(f,{key:1},[g.isFree.status?(o(),S(l,{key:0,type:"success",text:"free",showDot:!1})):m("",!0),g.onSale.status?(o(),S(l,{key:1,type:"success",text:"on sale",showDot:!1})):m("",!0),g.isFree.status?m("",!0):(o(),n("span",{key:2,class:"text-sm text-[var(--product-price-color)] group-hover:text-[var(--product-price-color-hover)] transition-colors",style:y({"--product-price-color":t.storeForm.productPriceColor,"--product-price-color-hover":t.storeForm.productHoverPriceColor})},_(g.unitPrice.amountWithCurrency),5))],64))])]),s("div",null,[d(N,{name:"fade-1",mode:"out-in"},{default:w(()=>[t.isAddedToCart(g.id)?(o(),n("div",zt,[s("div",Gt,[t.hasQuantity(g.id)?(o(),n("svg",{key:0,onClick:P(()=>t.decreaseQuantity(g.id),["stop"]),class:"w-5 h-5 flex-shrink-0 text-red-500 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},r[2]||(r[2]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]),8,Kt)):m("",!0),s("div",null,[lt(s("input",{min:"0",onClick:r[0]||(r[0]=P(()=>{},["stop"])),type:"number",placeholder:"...",onInput:r[1]||(r[1]=M=>e.validateQuantityInput(M)),"onUpdate:modelValue":M=>c.mappedCartProducts[g.id].quantity=M,style:y({"--product-quantity-color":t.storeForm.productQuantityColor,"--product-quantity-color-hover":t.storeForm.productHoverQuantityColor}),class:"w-10 border-0 rounded-full !ring-gray-300 remove-arrow p-0 bg-transparent text-center text-sm text-[var(--product-quantity-color)] group-hover:text-[var(--product-quantity-color-hover)] transition-colors"},null,44,Xt),[[ct,c.mappedCartProducts[g.id].quantity]])]),(o(),n("svg",{onClick:P(()=>t.increaseQuantity(g.id),["stop"]),class:"w-5 h-5 flex-shrink-0 text-green-500 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},r[3]||(r[3]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]),8,Yt))]),(o(),n("svg",{onClick:P(()=>t.removeFromCart(g.id),["stop"]),class:"w-5 h-5 flex-shrink-0 text-gray-300 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},r[4]||(r[4]=[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)]),8,Jt))])):(o(),S(v,{key:1,size:"xs",type:"custom",action:()=>t.addToCart(g),bgColor:t.storeForm.secondaryButtonColor,textColor:t.storeForm.secondaryButtonTextColor},{default:w(()=>[s("span",te,_(g.allowVariations.name.toLowerCase()=="yes"?"Select option":"Add to cart"),1)]),_:2},1032,["action","bgColor","textColor"]))]),_:2},1024)])],14,Zt))),128)):(o(),n("div",ee,[s("div",{class:"w-full flex justify-between items-center p-4 rounded-lg",style:y("color:"+t.storeForm.textColor+";background:"+t.storeForm.bgColor+";")},[d(N,{name:"fade-1",mode:"out-in"},{default:w(()=>[t.isSearchingNonSelectedProducts?(o(),n("span",{key:0,class:"text-xs inline-block",style:y("color:"+t.storeForm.textColor+";")},"Searching...",4)):(o(),n("span",{key:1,class:"text-xs inline-block",style:y("color:"+t.storeForm.textColor+";")},_(t.hasCartProducts?"selected every product":"No products found"),5))]),_:1}),!t.isSearchingNonSelectedProducts&&t.hasSearchTerm?(o(),S(v,{key:0,size:"xs",type:"custom",action:t.clearSearch,bgColor:t.storeForm.secondaryButtonColor,textColor:t.storeForm.secondaryButtonTextColor},{default:w(()=>[s("div",{class:"flex items-center space-x-1",style:y("color:"+t.storeForm.textColor+";")},r[5]||(r[5]=[s("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25Zm-1.72 6.97a.75.75 0 1 0-1.06 1.06L10.94 12l-1.72 1.72a.75.75 0 1 0 1.06 1.06L12 13.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L13.06 12l1.72-1.72a.75.75 0 1 0-1.06-1.06L12 10.94l-1.72-1.72Z","clip-rule":"evenodd"})],-1),s("span",{class:"text-xs whitespace-nowrap"},"clear search",-1)]),4)]),_:1},8,["action","bgColor","textColor"])):m("",!0)],4)]))],64))])]),t.hasNonSelectedProducts?(o(),S(v,{key:0,size:"sm",class:"mt-4",type:"custom",disabled:!t.hasCartProducts,bgColor:t.storeForm.primaryButtonColor,textColor:t.storeForm.primaryButtonTextColor,action:()=>t.addSelectedToCart(T.hideModal)},{default:w(()=>r[6]||(r[6]=[L(" Add ")])),_:2},1032,["disabled","bgColor","textColor","action"])):m("",!0)]),trigger:w(T=>[mt(e.$slots,"trigger",{showModal:T.showModal},()=>[d(I,{size:"sm",class:"m-4",type:"custom",action:T.showModal,bgColor:t.storeForm.primaryButtonColor,textColor:t.storeForm.primaryButtonTextColor},{default:w(()=>r[9]||(r[9]=[s("span",{class:"ml-2"},"Add",-1)])),_:2},1032,["action","bgColor","textColor"])])]),_:3},8,["onShow"])}const oe=u(Et,[["render",re]]),se={components:{CartTotals:E,ProductLines:Y,NoProductLines:J,AddProductModal:oe},data(){return{storeState:F(),shoppingCartState:x()}},computed:{storeForm(){return this.storeState.storeForm},hasCartProducts(){return this.shoppingCartState.hasCartProducts()},hasShoppingCartProducts(){return this.shoppingCartState.hasShoppingCartProducts},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart}}};function ne(e,r,h,C,c,t){const p=a("ProductLines"),i=a("NoProductLines"),l=a("AddProductModal");return o(),n("div",{style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg space-y-4 p-4 overflow-hidden"},[r[0]||(r[0]=s("p",{class:"font-bold p-4"},"Items",-1)),t.hasCartProducts&&(t.isInspectingShoppingCart||t.hasShoppingCartProducts)?(o(),S(p,{key:0})):(o(),S(i,{key:1,class:"border-t"})),d(l)],4)}const ae=u(se,[["render",ne]]),ie={methods:{navigateToStorefront(){this.$router.push({name:"storefront"})}}};function de(e,r,h,C,c,t){return o(),n("div",{onClick:r[0]||(r[0]=()=>t.navigateToStorefront()),class:"flex justify-center items-center space-x-2 bg-white/75 border border-white px-4 py-2 rounded-full cursor-pointer hover:opacity-90 hover:px-6 active:opacity-80 active:scale-90 transition-all duration-300"},r[1]||(r[1]=[s("svg",{class:"text-black w-4 h-4 sm:w-6 sm:h-6",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[s("path",{"fill-rule":"evenodd",d:"M9.53 2.47a.75.75 0 0 1 0 1.06L4.81 8.25H15a6.75 6.75 0 0 1 0 13.5h-3a.75.75 0 0 1 0-1.5h3a5.25 5.25 0 1 0 0-10.5H4.81l4.72 4.72a.75.75 0 1 1-1.06 1.06l-6-6a.75.75 0 0 1 0-1.06l6-6a.75.75 0 0 1 1.06 0Z","clip-rule":"evenodd"})],-1),s("span",{class:"font-bold text-xs whitespace-nowrap"},"Shop",-1)]))}const pe=u(ie,[["render",de]]),le={mixins:[D],components:{EmailInput:gt},data(){return{shoppingCartState:x()}},computed:{shoppingCartForm(){return this.shoppingCartState.shoppingCartForm}}};function ce(e,r,h,C,c,t){const p=a("EmailInput");return o(),S(p,{label:"Email",modelValue:t.shoppingCartForm.customer.email,"onUpdate:modelValue":r[0]||(r[0]=i=>t.shoppingCartForm.customer.email=i),errorText:e.getFormError("email")},null,8,["modelValue","errorText"])}const me=u(le,[["render",ce]]),ue={mixins:[D],components:{TextInput:H},data(){return{shoppingCartState:x()}},computed:{shoppingCartForm(){return this.shoppingCartState.shoppingCartForm}}};function he(e,r,h,C,c,t){const p=a("TextInput");return o(),S(p,{label:"Last Name",errorText:e.getFormError("lastName"),modelValue:t.shoppingCartForm.customer.lastName,"onUpdate:modelValue":r[0]||(r[0]=i=>t.shoppingCartForm.customer.lastName=i)},null,8,["errorText","modelValue"])}const Ce=u(ue,[["render",he]]),ge={mixins:[D],components:{TextInput:H},data(){return{shoppingCartState:x()}},computed:{shoppingCartForm(){return this.shoppingCartState.shoppingCartForm}}};function ye(e,r,h,C,c,t){const p=a("TextInput");return o(),S(p,{label:"First Name",errorText:e.getFormError("firstName"),modelValue:t.shoppingCartForm.customer.firstName,"onUpdate:modelValue":r[0]||(r[0]=i=>t.shoppingCartForm.customer.firstName=i)},null,8,["errorText","modelValue"])}const Se=u(ge,[["render",ye]]),_e={mixins:[D],components:{MobileNumberInput:yt},data(){return{shoppingCartState:x()}},computed:{shoppingCartForm(){return this.shoppingCartState.shoppingCartForm}}};function ve(e,r,h,C,c,t){const p=a("MobileNumberInput");return o(),S(p,{label:"Mobile Number",modelValue:t.shoppingCartForm.customer.mobileNumber,"onUpdate:modelValue":r[0]||(r[0]=i=>t.shoppingCartForm.customer.mobileNumber=i),errorText:e.getFormError("ussdMobileNumber")},null,8,["modelValue","errorText"])}const xe=u(_e,[["render",ve]]),fe={components:{CustomerEmailTextInput:me,CustomerLastNameTextInput:Ce,CustomerFirstNameTextInput:Se,CustomerMobileNumberTextInput:xe},data(){return{storeState:F()}},computed:{storeForm(){return this.storeState.storeForm}}},Fe={class:"grid grid-cols-2 gap-4"};function we(e,r,h,C,c,t){const p=a("CustomerFirstNameTextInput"),i=a("CustomerLastNameTextInput"),l=a("CustomerMobileNumberTextInput"),v=a("CustomerEmailTextInput");return o(),n("div",{style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg space-y-4 p-4"},[r[0]||(r[0]=s("p",{class:"font-bold"},"Customer",-1)),s("div",Fe,[d(p),d(i)]),d(l),d(v)],4)}const ke=u(fe,[["render",we]]),be={data(){return{storeState:F()}},computed:{storeForm(){return this.storeState.storeForm}}};function Te(e,r,h,C,c,t){return o(),n("h2",{class:"text-2xl md:text-3xl font-bold text-center mb-4",style:y("color:"+t.storeForm.textColor+";")}," Checkout ",4)}const Me=u(be,[["render",Te]]),Pe={mixins:[D],components:{TextInput:H,LineSkeleton:B},data(){return{storeState:F(),shoppingCartState:x()}},watch:{"shoppingCartForm.promotionCode"(){this.shoppingCartState.inspectStoreShoppingCartWithDelay()}},computed:{storeForm(){return this.storeState.storeForm},shoppingCart(){return this.shoppingCartState.shoppingCart},hasShoppingCart(){return this.shoppingCartState.hasShoppingCart},promotionCode(){return this.shoppingCart.promotionCode},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart}}},De={class:"space-y-4 px-4 pb-4"},Ie={class:"flex items-center space-x-4"};const Ne={key:1,class:"p-2 border-l-4 border-green-300 bg-green-50"},Le={class:"text-sm"};function Be(e,r,h,C,c,t){const p=a("TextInput"),i=a("LineSkeleton");return o(),n("div",De,[s("div",Ie,[d(p,{class:"w-full",placeholder:"Enter promotion code",modelValue:t.shoppingCartForm.promotionCode,"onUpdate:modelValue":r[0]||(r[0]=l=>t.shoppingCartForm.promotionCode=l),errorText:e.getFormError("promotionCode")},null,8,["modelValue","errorText"]),d(N,{name:"fade-1",mode:"out-in"},{default:w(()=>[m("",!0)]),_:1})]),t.isInspectingShoppingCart&&t.shoppingCartForm.promotionCode?(o(),S(i,{key:0,width:"w-1/3",shine:!0})):t.hasShoppingCart&&t.promotionCode.applied?(o(),n("div",Ne,[s("p",Le,_(t.promotionCode.message),1)])):m("",!0)])}const $e=u(Pe,[["render",Be]]),Oe={components:{PromotionCode:$e}};function Ve(e,r,h,C,c,t){const p=a("PromotionCode");return o(),n("div",null,[d(p)])}const He=u(Oe,[["render",Ve]]),Ae={},Ee={class:"font-bold px-4"};function Re(e,r,h,C,c,t){return o(),n("p",Ee,"Promotion Code")}const je=u(Ae,[["render",Re]]),Ue={components:{PromotionCodeCardBody:He,PromotionCodeCardHeading:je},data(){return{storeState:F(),shoppingCartState:x()}},computed:{storeForm(){return this.storeState.storeForm},shoppingCart(){return this.shoppingCartState.shoppingCart},hasShoppingCart(){return this.shoppingCartState.hasShoppingCart}}};function We(e,r,h,C,c,t){const p=a("PromotionCodeCardHeading"),i=a("PromotionCodeCardBody");return t.hasShoppingCart&&t.shoppingCart.canApplyPromotionCode?(o(),n("div",{key:0,style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg space-y-4 pt-4 overflow-hidden"},[d(p),d(i)],4)):m("",!0)}const Ze=u(Ue,[["render",We]]),Qe={components:{PrimaryButton:R,CartTotals:E},data(){return{storeState:F(),shoppingCartState:x()}},computed:{storeForm(){return this.storeState.storeForm},hasCartProducts(){return this.shoppingCartState.hasCartProducts()},isCreatingOrder(){return this.shoppingCartState.isCreatingOrder},hasShoppingCartProducts(){return this.shoppingCartState.hasShoppingCartProducts},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart}},methods:{createStoreOrder(){this.shoppingCartState.createStoreOrder()}}},qe={class:"pb-6 px-6 mt-8"};function ze(e,r,h,C,c,t){const p=a("CartTotals"),i=a("PrimaryButton");return t.hasCartProducts&&(t.isInspectingShoppingCart||t.hasShoppingCartProducts)?(o(),n("div",{key:0,style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg"},[r[0]||(r[0]=s("p",{class:"font-bold p-4"},"Order Summary",-1)),d(p),s("div",qe,[d(i,{type:"custom",loading:t.isCreatingOrder,action:t.createStoreOrder,disabled:!t.hasShoppingCartProducts,bgColor:t.storeForm.primaryButtonColor,textColor:t.storeForm.primaryButtonTextColor},{default:w(()=>[L(_(t.isInspectingShoppingCart?"...":"Place Order"),1)]),_:1},8,["loading","action","disabled","bgColor","textColor"])])],4)):m("",!0)}const Ge=u(Qe,[["render",ze]]),Ke={components:{LineSkeleton:B,InputErrorMessage:St},data(){return{storeState:F(),shoppingCartState:x()}},computed:{storeForm(){return this.storeState.storeForm},shoppingCart(){return this.shoppingCartState.shoppingCart},hasShoppingCart(){return this.shoppingCartState.hasShoppingCart},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm},deliveryMethods(){return this.shoppingCartState.deliveryMethods},totalDeliveryMethods(){return this.shoppingCartState.totalDeliveryMethods},hasDeliveryMethods(){return this.shoppingCartState.hasDeliveryMethods},deliveryMethodTips(){return(((this.shoppingCart||{}).delivery||{}).method||{}).tips||[]},hasDeliveryMethodUnavailabilityReasons(){return this.deliveryMethodUnavailabilityReasons.length>0},deliveryMethodUnavailabilityReasons(){return(((this.shoppingCart||{}).delivery||{}).method||{}).unavailabilityReasons||[]},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart},selectedDeliveryMethod(){return this.deliveryMethods.find(e=>e.id==this.shoppingCartForm.deliveryMethodId)}},methods:{showShoppingDeliveryMethods(){this.shoppingCartState.showShoppingDeliveryMethods()},itemClasses(e){return this.isFirstItem(e)?"pt-4 pb-2":this.isLastItem(e)?"pt-2 pb-4":"py-2"},isFirstItem(e){return e==0},isLastItem(e){return e==this.totalDeliveryMethods-1},usesFlatFee(e){return e.feeType.toLowerCase()=="flat fee"},usesPercentageFee(e){return e.feeType.toLowerCase()=="percentage fee"},usesFeeByDistance(e){return e.feeType.toLowerCase()=="fee by distance"},setDeliveryMethod(e){this.shoppingCartState.setDeliveryMethod(e)},isSelectedDeliveryMethod(e){return this.shoppingCartState.isSelectedDeliveryMethod(e)}},created(){this.showShoppingDeliveryMethods()}},Xe={key:0,class:"divide-y border-t"},Ye=["onClick"],Je={class:"flex items-center space-x-2"},tr={key:0,class:"w-6 h-6 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},er={key:1,class:"w-6 h-6 flex justify-center items-center"},rr={key:1,class:"flex items-center space-x-1 md:space-x-2"},or={class:"font-medium text-red-500 text-sm"},sr={key:1,class:"flex items-center space-x-1 md:space-x-2"},nr={class:"font-medium text-green-500 text-sm"};function ar(e,r,h,C,c,t){const p=a("LineSkeleton");return t.hasDeliveryMethods?(o(),n("div",Xe,[(o(!0),n(f,null,b(t.deliveryMethods,(i,l)=>(o(),n("div",{key:l,onClick:P(v=>t.setDeliveryMethod(i),["stop"]),style:y({"--product-background":t.storeForm.productBgColor,"--product-background-hover":t.storeForm.productHoverBgColor}),class:V([t.itemClasses(l),"flex justify-between items-center pl-4 pr-2 cursor-pointer bg-[var(--product-background)] hover:bg-[var(--product-background-hover)] transition-colors group"])},[s("div",Je,[d(N,{name:"fade-1",mode:"out-in"},{default:w(()=>[t.isSelectedDeliveryMethod(i)?(o(),n("svg",tr,r[0]||(r[0]=[s("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"},null,-1)]))):(o(),n("div",er,r[1]||(r[1]=[s("div",{class:"w-4 h-4 bg-gray-100 border rounded-full"},null,-1)])))]),_:2},1024),s("div",null,[s("p",{class:"font-bold text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})},_(i.name),5),i.chargeFee?(o(),n(f,{key:0},[t.usesFlatFee(i)?(o(),n("p",{key:0,class:"text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})}," Flat fee of "+_(i.flatFeeRate.amountWithCurrency),5)):t.usesPercentageFee(i)?(o(),n("p",{key:1,class:"text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})}," Percentage fee of "+_(i.percentageFeeRate.valueSymbol),5)):m("",!0)],64)):m("",!0),i.qualifyOnMinimumGrandTotal?(o(),n("p",{key:1,class:"text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})}," Minimum order amount is "+_(i.minimumGrandTotal.amountWithCurrency),5)):m("",!0),s("p",{class:"text-sm text-[var(--product-name-color)] group-hover:text-[var(--product-name-color-hover)] transition-colors",style:y({"--product-name-color":t.storeForm.productNameColor,"--product-name-color-hover":t.storeForm.productHoverNameColor})},_(i.description),5)])])],14,Ye))),128)),(o(!0),n(f,null,b(t.deliveryMethodUnavailabilityReasons,(i,l)=>(o(),n("div",{key:l,class:"py-2 px-4"},[t.isInspectingShoppingCart?(o(),S(p,{key:0,width:"w-1/3",shine:!0})):(o(),n("div",rr,[r[2]||(r[2]=s("svg",{class:"w-4 h-4 md:w-6 md:h-6 flex-shrink-0 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),s("span",or,_(i),1)]))]))),128)),t.hasDeliveryMethodUnavailabilityReasons?m("",!0):(o(!0),n(f,{key:0},b(t.deliveryMethodTips,(i,l)=>(o(),n("div",{key:l,class:"py-2 px-4"},[t.isInspectingShoppingCart?(o(),S(p,{key:0,width:"w-1/3",shine:!0})):(o(),n("div",sr,[r[3]||(r[3]=s("svg",{class:"w-4 h-4 md:w-6 md:h-6 flex-shrink-0 text-green-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),s("span",nr,_(i),1)]))]))),128))])):m("",!0)}const ir=u(Ke,[["render",ar]]),dr={components:{GoogleMaps:_t,AddressInput:vt},data(){return{shoppingCartState:x()}},computed:{deliveryMethod(){return this.shoppingCartState.deliveryMethod},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm},deliveryMethodRequiresSchedule(){return this.deliveryMethod&&this.deliveryMethod.setSchedule},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm}},methods:{setAddress(e){this.shoppingCartState.setDeliveryAddress(e),this.inspectStoreShoppingCartWithDelay()},unsetAddress(){this.shoppingCartState.setDeliveryAddress(null),this.inspectStoreShoppingCartWithDelay()},inspectStoreShoppingCartWithDelay(){return this.shoppingCartState.inspectStoreShoppingCartWithDelay()}}};function pr(e,r,h,C,c,t){const p=a("AddressInput");return o(),n("div",null,[d(p,{title:"Destination",pinLocationOnMap:!0,onOnDeleted:t.unsetAddress,onOnValidated:t.setAddress,subtitle:"Add the address to deliver your order"},null,8,["onOnDeleted","onOnValidated"])])}const lr=u(dr,[["render",pr]]),cr={mixins:[xt],components:{LineSkeleton:B,DeliveryDatePicker:ft,DeliveryTimePicker:Ft},data(){return{scheduleOptions:{},showScheduleSummary:!0,isLoadingDateOptions:!1,isLoadingTimeOptions:!1,shoppingCartState:x()}},watch:{"shoppingCartForm.deliveryDate"(){this.inspectStoreShoppingCartWithDelay()},"shoppingCartForm.deliveryTimeslot"(){this.inspectStoreShoppingCartWithDelay()}},computed:{shoppingCart(){return this.shoppingCartState.shoppingCart},deliveryMethod(){return this.shoppingCartState.deliveryMethod},shoppingCartForm(){return this.shoppingCartState.shoppingCartForm},isInspectingShoppingCart(){return this.shoppingCartState.isInspectingShoppingCart},scheduleKeyPoints(){return this.scheduleOptions.scheduleKeyPoints||[]},deliveryMethodRequiresSchedule(){return this.deliveryMethod&&this.deliveryMethod.setSchedule},deliveryMethodScheduleIncompleteReasons(){return((this.shoppingCart||{}).schedule||{}).incompleteReasons||[]}},methods:{inspectStoreShoppingCartWithDelay(){return this.shoppingCartState.inspectStoreShoppingCartWithDelay()},setScheduleOptions(e){this.scheduleOptions=e},onIsLoadingDateOptions(e){this.shoppingCartForm.deliveryDate=null,this.shoppingCartForm.deliveryTimeslot=null,this.isLoadingDateOptions=e},onIsLoadingTimeOptions(e){this.shoppingCartForm.deliveryTimeslot=null,this.isLoadingTimeOptions=e},toggleScheduleSummary(){this.showScheduleSummary=!this.showScheduleSummary,this.shoppingCartForm.deliveryDate=null,this.shoppingCartForm.deliveryTimeslot=null}}},mr={key:0,class:"border-t-2 bg-gray-50 space-y-4 p-4"},ur={class:"space-y-2"},hr={class:"text-sm text-gray-500"},Cr={key:0},gr={key:1,class:"space-y-2 border-t border-dashed pt-4"},yr={key:0,class:"text-sm"},Sr={class:"font-bold"},_r={key:1,class:"text-sm"},vr={class:"font-bold"},xr={key:1,class:"flex items-center space-x-1 md:space-x-2"},fr={class:"font-medium text-red-500 text-xs md:text-sm"};function Fr(e,r,h,C,c,t){const p=a("DeliveryDatePicker"),i=a("DeliveryTimePicker"),l=a("LineSkeleton");return t.deliveryMethodRequiresSchedule?(o(),n("div",mr,[s("div",ur,[r[2]||(r[2]=s("p",{class:"font-bold text-md"},"Schedule",-1)),s("div",null,[s("p",hr,[t.deliveryMethod.scheduleType=="date"?(o(),n(f,{key:0},[L("Specify the delivery date for your order")],64)):t.deliveryMethod.scheduleType=="date and time"?(o(),n(f,{key:1},[L("Specify the delivery date and time for your order")],64)):m("",!0)])])]),s("div",null,[d(p,{deliveryMethod:t.deliveryMethod,onIsLoading:t.onIsLoadingDateOptions,onScheduleOptions:t.setScheduleOptions,modelValue:t.shoppingCartForm.deliveryDate,"onUpdate:modelValue":r[0]||(r[0]=v=>t.shoppingCartForm.deliveryDate=v)},null,8,["deliveryMethod","onIsLoading","onScheduleOptions","modelValue"])]),t.shoppingCartForm.deliveryDate&&!c.isLoadingDateOptions&&t.deliveryMethod.scheduleType=="date and time"?(o(),n("div",Cr,[d(i,{class:"w-full",deliveryMethod:t.deliveryMethod,onIsLoading:t.onIsLoadingTimeOptions,onScheduleOptions:t.setScheduleOptions,modelValue:t.shoppingCartForm.deliveryTimeslot,"onUpdate:modelValue":r[1]||(r[1]=v=>t.shoppingCartForm.deliveryTimeslot=v),deliveryDate:t.shoppingCartForm.deliveryDate},null,8,["deliveryMethod","onIsLoading","onScheduleOptions","modelValue","deliveryDate"])])):m("",!0),t.shoppingCartForm.deliveryDate||t.shoppingCartForm.deliveryTimeslot?(o(),n("div",gr,[t.shoppingCartForm.deliveryDate?(o(),n("div",yr,[r[3]||(r[3]=s("span",null,"Delivery date: ",-1)),s("span",Sr,_(t.shoppingCartForm.deliveryDate)+" ("+_(e.customFormattedDate(t.shoppingCartForm.deliveryDate,"ddd"))+") ",1)])):m("",!0),t.shoppingCartForm.deliveryTimeslot?(o(),n("div",_r,[r[4]||(r[4]=s("span",null,"Delivery time: ",-1)),s("span",vr,_(t.shoppingCartForm.deliveryTimeslot),1)])):m("",!0)])):m("",!0),(o(!0),n(f,null,b(t.deliveryMethodScheduleIncompleteReasons,(v,I)=>(o(),n("div",{key:I},[t.isInspectingShoppingCart?(o(),S(l,{key:0,width:"w-1/3",shine:!0})):(o(),n("div",xr,[r[5]||(r[5]=s("svg",{class:"w-4 h-4 md:w-6 md:h-6 flex-shrink-0 text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),s("span",fr,_(v),1)]))]))),128))])):m("",!0)}const wr=u(cr,[["render",Fr]]),kr={components:{DeliveryMethods:ir,DeliveryMethodMap:lr,DeliveryMethodScedule:wr}};function br(e,r,h,C,c,t){const p=a("DeliveryMethods"),i=a("DeliveryMethodScedule"),l=a("DeliveryMethodMap");return o(),n("div",null,[d(p),d(i),d(l)])}const Tr=u(kr,[["render",br]]),Mr={},Pr={class:"font-bold px-4"};function Dr(e,r,h,C,c,t){return o(),n("p",Pr,"Delivery")}const Ir=u(Mr,[["render",Dr]]),Nr={components:{CheckoutCardBody:tt,DeliveryMethodsCardBody:Tr,DeliveryMethodsCardHeading:Ir},data(){return{storeState:F()}},computed:{storeForm(){return this.storeState.storeForm}}};function Lr(e,r,h,C,c,t){const p=a("DeliveryMethodsCardHeading"),i=a("DeliveryMethodsCardBody");return o(),n("div",{style:y("background:"+t.storeForm.cardSecondaryColor+";"),class:"md:max-w-lg mx-4 mb-4 md:mx-auto rounded-lg shadow-lg space-y-4 pt-4 overflow-hidden"},[d(p),d(i)],4)}const Br=u(Nr,[["render",Lr]]),$r={components:{TipsCard:At,ItemsCard:ae,StoreLogo:et,StoreName:rt,CheckoutHeading:Me,GrandTotal:ot,StoreBanner:st,ReturnToShop:pe,CustomerCard:ke,CreateStoreLink:nt,PromotionCodeCard:Ze,OrderSummaryCard:Ge,StoreFooterMenus:at,StoreDescription:it,CustomizeDrawer:dt,DeliveryMethodsCard:Br,ShoppingCartDrawer:pt},data(){return{storeState:F(),shoppingCartState:x()}},watch:{"shoppingCartState.mappedCartProducts":{handler(e){Object.keys(this.mappedCartProducts).length===0&&this.closeShoppingCartDrawer(),this.isInspectingShoppingCart||this.inspectStoreShoppingCartWithDelay()},deep:!0}},computed:{store(){return this.storeState.store},storeForm(){return this.storeState.storeForm},shoppingCart(){return this.shoppingCartState.shoppingCart},mappedCartProducts(){return this.shoppingCartState.mappedCartProducts}},methods:{setStoreForm(){return this.storeState.setStoreForm(this.store)},setShoppingCartForm(){return this.shoppingCartState.setShoppingCartForm()},closeShoppingCartDrawer(){return this.shoppingCartState.closeShoppingCartDrawer()},inspectStoreShoppingCartWithDelay(){return this.shoppingCartState.inspectStoreShoppingCartWithDelay()}},created(){this.setStoreForm(),this.setShoppingCartForm()}},Or={class:"w-full max-w-lg mx-auto mt-20 mb-4"},Vr={class:"w-full max-w-lg mx-auto mb-4 flex justify-center items-center space-x-4"};function Hr(e,r,h,C,c,t){const p=a("StoreBanner"),i=a("StoreLogo"),l=a("StoreName"),v=a("CheckoutHeading"),I=a("GrandTotal"),$=a("ReturnToShop"),T=a("CustomerCard"),g=a("ItemsCard"),k=a("DeliveryMethodsCard"),M=a("TipsCard"),j=a("PromotionCodeCard"),U=a("OrderSummaryCard"),W=a("StoreFooterMenus"),Z=a("CreateStoreLink"),Q=a("CustomizeDrawer"),q=a("ShoppingCartDrawer");return o(),n("div",{class:"pb-20",style:y("background:"+t.storeForm.bgColor+";")},[d(p),s("div",Or,[d(i),d(l,{size:"text-base sm:text-lg"}),d(v)]),s("div",Vr,[d(I),d($)]),d(T),d(g),d(k),d(M),d(j),d(U),d(W),d(Z),d(Q),d(q)],4)}const Do=u($r,[["render",Hr]]);export{Do as default};
