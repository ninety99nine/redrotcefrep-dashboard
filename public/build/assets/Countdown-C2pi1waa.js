import{d as S}from"./form-store-C265_0LO.js";import{G as V,O as B,r as E,o as r,e as g,w as I,z as x,c as h,F as _,b as s,t as e,f as p,n as v,h as O}from"./app-jXH5QC3l.js";import{M as H}from"./MoreInfoPopover-DuLCv7tU.js";import{_ as P}from"./_plugin-vue_export-helper-DlAUqK2U.js";/*! vue-countdown v2.1.2 | (c) 2018-present Chen Fengyuan | MIT */const f=1e3,M=60*f,y=60*M,C=24*y,b="abort",L="end",N="progress",T="start",w="visibilitychange";var q=V({name:"VueCountdown",props:{autoStart:{type:Boolean,default:!0},emitEvents:{type:Boolean,default:!0},interval:{type:Number,default:1e3,validator:t=>t>=0},now:{type:Function,default:()=>Date.now()},tag:{type:String,default:"span"},time:{type:Number,default:0,validator:t=>t>=0},transform:{type:Function,default:t=>t}},emits:[b,L,N,T],data(){return{counting:!1,endTime:0,totalMilliseconds:0,requestId:0}},computed:{days(){return Math.floor(this.totalMilliseconds/C)},hours(){return Math.floor(this.totalMilliseconds%C/y)},minutes(){return Math.floor(this.totalMilliseconds%y/M)},seconds(){return Math.floor(this.totalMilliseconds%M/f)},milliseconds(){return Math.floor(this.totalMilliseconds%f)},totalDays(){return this.days},totalHours(){return Math.floor(this.totalMilliseconds/y)},totalMinutes(){return Math.floor(this.totalMilliseconds/M)},totalSeconds(){return Math.floor(this.totalMilliseconds/f)}},watch:{$props:{deep:!0,immediate:!0,handler(){this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.autoStart&&this.start()}}},mounted(){document.addEventListener(w,this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener(w,this.handleVisibilityChange),this.pause()},methods:{start(){this.counting||(this.counting=!0,this.autoStart||(this.totalMilliseconds=this.time,this.endTime=this.now()+this.time),this.emitEvents&&this.$emit(T),document.visibilityState==="visible"&&this.continue())},continue(){if(!this.counting)return;const t=Math.min(this.totalMilliseconds,this.interval);if(t>0){let i,o;const u=d=>{i||(i=d),o||(o=d);const m=d-i;m>=t||m+(d-o)/2>=t?this.progress():this.requestId=requestAnimationFrame(u),o=d};this.requestId=requestAnimationFrame(u)}else this.end()},pause(){cancelAnimationFrame(this.requestId)},progress(){this.counting&&(this.update(),this.emitEvents&&this.totalMilliseconds>0&&this.$emit(N,{days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}),this.continue())},abort(){this.counting&&(this.pause(),this.counting=!1,this.emitEvents&&this.$emit(b))},end(){this.counting&&(this.pause(),this.totalMilliseconds=0,this.counting=!1,this.emitEvents&&this.$emit(L))},update(){this.counting&&(this.totalMilliseconds=Math.max(0,this.endTime-this.now()))},restart(){this.pause(),this.totalMilliseconds=this.time,this.endTime=this.now()+this.time,this.counting=!1,this.start()},handleVisibilityChange(){switch(document.visibilityState){case"visible":this.update(),this.continue();break;case"hidden":this.pause();break}}},render(){return B(this.tag,this.$slots.default?[this.$slots.default(this.transform({days:this.days,hours:this.hours,minutes:this.minutes,seconds:this.seconds,milliseconds:this.milliseconds,totalDays:this.totalDays,totalHours:this.totalHours,totalMinutes:this.totalMinutes,totalSeconds:this.totalSeconds,totalMilliseconds:this.totalMilliseconds}))]:void 0)}});const A={components:{VueCountdown:q,MoreInfoPopover:H},props:{time:{type:[String,null],required:!0},textClass:{type:String,default:""},showMoreInfoPopover:{type:Boolean,default:!0},moreInfoPopoverClass:{type:String,default:""}},data(){return{timeLeftInMilliSeconds:0}},watch:{time:{immediate:!0,handler(t){this.calculateTimeLeft(t)}}},computed:{hasExpired(){return this.timeLeftInMilliSeconds==0}},methods:{calculateTimeLeft(t){if(!t){this.timeLeftInMilliSeconds=0;return}const i=S(t),o=S(),u=i.diff(o);u>0?this.timeLeftInMilliSeconds=u:this.timeLeftInMilliSeconds=0}}},F={key:0},$={key:0},R={key:0},G={key:3},U={class:"w-full text-sm text-left rtl:text-right text-gray-500"},z={class:"px-2 py-1 text-center"},Y={class:"px-2 py-1 text-center"},j={class:"px-2 py-1 text-center"},J={class:"px-2 py-1 text-center"};function K(t,i,o,u,d,m){const D=E("MoreInfoPopover"),k=E("vue-countdown");return r(),g(k,{time:d.timeLeftInMilliSeconds,class:"flex items-center space-x-1"},{default:I(({days:c,hours:n,minutes:a,seconds:l})=>[x(t.$slots,"prefix",{hasExpired:m.hasExpired}),c>0||n>0||a>0||l>0?(r(),h("span",{key:0,class:v(o.textClass)},[c>0?(r(),h(_,{key:0},[s("span",null,e(c)+" "+e(c==1?"day ":"days "),1),n>0?(r(),h("span",F,e(n)+" "+e(n==1?"hr ":"hrs "),1)):p("",!0)],64)):n>0?(r(),h(_,{key:1},[s("span",null,e(n)+" "+e(n==1?"hr ":"hrs "),1),a>0?(r(),h("span",$,e(a)+" "+e(a==1?"min ":"mins "),1)):p("",!0)],64)):a>0?(r(),h(_,{key:2},[s("span",null,e(a)+" "+e(a==1?"min ":"mins "),1),l>0?(r(),h("span",R,e(l)+" "+e(l==1?"sec ":"secs "),1)):p("",!0)],64)):l>0?(r(),h("span",G,e(l)+" "+e(l==1?"sec ":"secs "),1)):p("",!0)],2)):x(t.$slots,"default",{key:1},()=>[i[0]||(i[0]=O("Expired"))]),x(t.$slots,"suffix",{hasExpired:m.hasExpired}),o.showMoreInfoPopover&&!m.hasExpired?(r(),g(D,{key:2,placement:"top",class:v(o.moreInfoPopoverClass)},{description:I(()=>[s("table",U,[i[1]||(i[1]=s("thead",{class:"font-bold text-xs text-gray-700 uppercase bg-gray-50"},[s("tr",null,[s("td",{class:"px-2 py-1 text-center"},"Days"),s("td",{class:"px-2 py-1 text-center"},"Hrs"),s("td",{class:"px-2 py-1 text-center"},"Mins"),s("td",{class:"px-2 py-1 text-center"},"Secs")])],-1)),s("tbody",null,[s("tr",null,[s("td",z,e(c<10?"0"+c:c),1),s("td",Y,e(n<10?"0"+n:n),1),s("td",j,e(a<10?"0"+a:a),1),s("td",J,e(l<10?"0"+l:l),1)])])])]),_:2},1032,["class"])):p("",!0)]),_:3},8,["time"])}const tt=P(A,[["render",K]]);export{tt as C};
