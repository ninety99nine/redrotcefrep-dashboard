import{u as J,c as w,i as K}from"./store-store-CS0zX2od.js";import{o as a,c as r,F as c,d as i,w as m,f as h,e as p,b as e,r as d,s as X,u as C,k as P,h as f,t as A,p as F}from"./app-BB_DGrdP.js";import{A as Y}from"./Alert-D0-6ewwI.js";import{F as L}from"./FormMixin-DuhuDStf.js";import{U as $}from"./UtilsMixin-CbFS-0FV.js";import{V as ee}from"./vue-draggable-next.esm-bundler-C5k-gEaz.js";import{T as N}from"./TextInput-CYcFtt0N.js";import{A as te}from"./AddButton-B0ZoTv19.js";import{C as D}from"./Checkbox-jSM3iTEZ.js";import{U as oe}from"./UndoButton-DuiCb3Cn.js";import{B as se}from"./BackButton-Dj-4cxRq.js";import{S as ae}from"./SearchInput-CRZrkkbT.js";import{C as ne}from"./ConfirmModal-Bx2x0fSV.js";import{S as re}from"./ShineEffect-CVR21PpE.js";import{T as ie}from"./TextareaInput-CvxPEpBK.js";import{P as le}from"./PrimaryButton-DY8_N9mV.js";import{S as de}from"./SpinningLoader-DQkG61_P.js";import{L as me}from"./LineSkeleton-n-dr_Q9J.js";import{R as he}from"./RoundSkeleton-DlzoYvhd.js";import{B as ce}from"./ButtonSkeleton-E53rE2zx.js";import{T as ue}from"./ToogleSwitch-DKBbkoKD.js";import{B as pe}from"./BadgeIndicator-CkIPUXTr.js";import{F as ye}from"./FormErrorMessages-DU94CZx_.js";import{g as I,p as B,a as fe,d as ge}from"./api-repository-CbJkBgbK.js";import{P as _e}from"./PasswordInput-BhnfEOB8.js";import{C as we}from"./CountrySelectInput-4BbzCBcz.js";import{_ as E}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-store-Dm2E1hFJ.js";import"./InputLabel-DUxkttvx.js";import"./MoreInfoPopover-CfesgIMT.js";import"./InputErrorMessage-BofDrlG_.js";import"./index-B_gOZyBG.js";import"./StatusDot-fnxXUltP.js";import"./SelectInput-nZkvoVlK.js";const Me={mixins:[L],components:{TextInput:N,Checkbox:D,PasswordInput:_e,CountrySelectInput:we},props:{modelValue:{type:Object},paymentMethod:{type:Object}},data(){return{localModelValue:this.modelValue}},watch:{modelValue(s,t){this.updateValue(s)},localModelValue(s,t){this.$emit("update:modelValue",s)}},computed:{type(){return this.paymentMethod.type.toLowerCase()}},methods:{updateValue(s){this.localModelValue=s}}},Pe={class:"space-y-4"},ke=e("div",{class:"space-y-1 mt-0.5"},[e("p",{class:"font-bold text-sm mx-2"},"Email Payment Request"),e("p",{class:"text-sm text-gray-500 mx-2"},"Automatically send a payment request to the customer's email")],-1),xe=e("div",{class:"py-1.5 px-2 rounded-l-md bg-gray-50 text-gray-500 border-r whitespace-nowrap"},[e("svg",{class:"w-5 h-5 mt-0.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m20.893 13.393-1.135-1.135a2.252 2.252 0 0 1-.421-.585l-1.08-2.16a.414.414 0 0 0-.663-.107.827.827 0 0 1-.812.21l-1.273-.363a.89.89 0 0 0-.738 1.595l.587.39c.59.395.674 1.23.172 1.732l-.2.2c-.212.212-.33.498-.33.796v.41c0 .409-.11.809-.32 1.158l-1.315 2.191a2.11 2.11 0 0 1-1.81 1.025 1.055 1.055 0 0 1-1.055-1.055v-1.172c0-.92-.56-1.747-1.414-2.089l-.655-.261a2.25 2.25 0 0 1-1.383-2.46l.007-.042a2.25 2.25 0 0 1 .29-.787l.09-.15a2.25 2.25 0 0 1 2.37-1.048l1.178.236a1.125 1.125 0 0 0 1.302-.795l.208-.73a1.125 1.125 0 0 0-.578-1.315l-.665-.332-.091.091a2.25 2.25 0 0 1-1.591.659h-.18c-.249 0-.487.1-.662.274a.931.931 0 0 1-1.458-1.137l1.411-2.353a2.25 2.25 0 0 0 .286-.76m11.928 9.869A9 9 0 0 0 8.965 3.525m11.928 9.868A9 9 0 1 1 8.965 3.525"})])],-1);function ve(s,t,M,U,o,l){const k=d("TextInput"),b=d("CountrySelectInput"),g=d("Checkbox"),x=d("PasswordInput");return a(),r("div",Pe,[l.type=="dpo"?(a(),r(c,{key:0},[i(k,{label:"Company Token",placeholder:"123456789",labelPopoverTitle:"What Is This?",modelValue:o.localModelValue.companyToken,"onUpdate:modelValue":t[0]||(t[0]=u=>o.localModelValue.companyToken=u),errorText:s.getFormError("companyToken"),labelPopoverDescription:"The DPO company token that identifies the DPO account used to receive payments"},null,8,["modelValue","errorText"]),i(b,{width:"w-full",label:"Country",labelPopoverTitle:"What Is This?",modelValue:o.localModelValue.defaultCountryCode,"onUpdate:modelValue":t[1]||(t[1]=u=>o.localModelValue.defaultCountryCode=u),labelPopoverDescription:"The default country used when the customer wants to pay"},null,8,["modelValue"]),i(g,{size:"xs",class:"mt-1",modelValue:o.localModelValue.emailPaymentRequest,"onUpdate:modelValue":t[2]||(t[2]=u=>o.localModelValue.emailPaymentRequest=u),errorText:s.getFormError("emailPaymentRequest")},{default:m(()=>[ke]),_:1},8,["modelValue","errorText"])],64)):h("",!0),l.type=="stripe"?(a(),r(c,{key:1},[i(x,{label:"Secret Token",showForgotPassword:!1,modelValue:o.localModelValue.secretToken,"onUpdate:modelValue":t[3]||(t[3]=u=>o.localModelValue.secretToken=u),errorText:s.getFormError("secretToken"),labelPopoverDescription:"The Stripe secret token - Check your Stripe developer dashboard to get your API secret key"},null,8,["modelValue","errorText"]),i(x,{label:"Public Token",showForgotPassword:!1,modelValue:o.localModelValue.publicToken,"onUpdate:modelValue":t[4]||(t[4]=u=>o.localModelValue.publicToken=u),errorText:s.getFormError("publicToken"),labelPopoverDescription:"The Stripe public token - Check your Stripe developer dashboard to get your API public key"},null,8,["modelValue","errorText"])],64)):h("",!0),l.type=="paypal"?(a(),p(k,{key:2,label:"Payment Link",labelPopoverTitle:"What Is This?",modelValue:o.localModelValue.paymentLink,"onUpdate:modelValue":t[5]||(t[5]=u=>o.localModelValue.paymentLink=u),errorText:s.getFormError("paymentLink"),placeholder:"https://paypal.me/baby-cakes",labelPopoverDescription:"The PayPal payment link - Check your PayPal developer dashboard to get your payment link"},{prepend:m(()=>[xe]),_:1},8,["modelValue","errorText"])):h("",!0)])}const be=E(Me,[["render",ve]]),Se={mixins:[L,$],components:{Alert:Y,draggable:ee,TextInput:N,AddButton:te,Checkbox:D,UndoButton:oe,BackButton:se,SearchInput:ae,ConfirmModal:ne,ShineEffect:re,TextareaInput:ie,PrimaryButton:le,SpinningLoader:de,LineSkeleton:me,RoundSkeleton:he,ButtonSkeleton:ce,ToogleSwitch:ue,BadgeIndicator:pe,FormErrorMessages:ye,PaymentMethodMetadataSettings:be},data(){return{form:null,searchTerm:"",paymentMethods:[],settings:X,originalForm:null,isSubmitting:!1,paymentMethod:null,apiState:C(),storeState:J(),deletablePaymentMethod:null,isDeletingPaymentMethodIds:[],isLoadingPaymentMethods:!1,nonAssociatedPaymentMethods:[],selectedPaymentCategory:"Automated",isUpdatingPaymentMethodArrangement:!1,isShowingNonAssociatedPaymentMethods:!1,isLoadingNonAssociatedPaymentMethods:!1,paymentCategories:["All","Manual","Local","Automated"]}},watch:{searchTerm(s,t){this.isShowingNonAssociatedPaymentMethods?this.showNonAssociatedPaymentMethods():this.showPaymentMethods()}},computed:{store(){return this.storeState.store},isSearching(){return this.hasSearchTerm&&(this.isLoadingPaymentMethods||this.isLoadingNonAssociatedPaymentMethods)},hasSearchTerm(){return this.searchTerm.length>0},hasPaymentMethods(){return this.paymentMethods.length>0},isAutomatedPaymentMethod(){return this.paymentMethod&&this.paymentMethod._attributes.isAutomated},hasNonAssociatedPaymentMethods(){return this.nonAssociatedPaymentMethods.length>0},formHasChanged(){var s=w(this.form),t=w(this.originalForm);return!K(s,t)},mustSaveChanges(){return this.formHasChanged&&!this.isSubmitting}},methods:{showDeleteConfirmationModal(s){this.deletablePaymentMethod=s,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(s){return this.isDeletingPaymentMethodIds.findIndex(t=>t==s.id)!=-1},selectPaymentMethod(s){this.paymentMethod=s,this.setFormFields()},setFormFields(){this.form={name:this.paymentMethod.name,active:this.paymentMethod.active,metadata:this.paymentMethod.metadata,instruction:this.paymentMethod.instruction,requireProofOfPayment:this.paymentMethod.requireProofOfPayment,automaticallyMarkAsPaid:this.paymentMethod.automaticallyMarkAsPaid,contactSellerBeforePayment:this.paymentMethod.contactSellerBeforePayment},this.originalForm=w(this.form)},openPaymentMethods(){this.form=null,this.searchTerm="",this.originalForm=null,this.paymentMethod=null,this.isShowingNonAssociatedPaymentMethods=!1,this.showPaymentMethods()},openNonAssociatedPaymentMethods(){this.form=null,this.searchTerm="",this.originalForm=null,this.paymentMethod=null,this.isShowingNonAssociatedPaymentMethods=!0,this.showNonAssociatedPaymentMethods()},changePaymentCategory(s){this.selectedPaymentCategory=s,this.showNonAssociatedPaymentMethods()},showPaymentMethods(){this.isLoadingPaymentMethods=!0;const s={storeId:this.store.id,search:this.searchTerm};I(this.store._links.showStorePaymentMethods,s).then(t=>{t.status==200&&(this.pagination=t.data,this.paymentMethods=this.pagination.data),this.isLoadingPaymentMethods=!1}).catch(t=>{this.isLoadingPaymentMethods=!1,this.setServerFormErrors(t)})},showNonAssociatedPaymentMethods(){this.isLoadingNonAssociatedPaymentMethods=!0;const s={nonAssociatedStoreId:this.store.id,search:this.searchTerm};this.selectedPaymentCategory!="All"&&!this.hasSearchTerm&&(s._filters="category:eq:"+this.selectedPaymentCategory),I(this.apiState.apiHome._links.showPaymentMethods,s).then(t=>{t.status==200&&(this.pagination=t.data,this.nonAssociatedPaymentMethods=this.pagination.data),this.isLoadingNonAssociatedPaymentMethods=!1}).catch(t=>{this.isLoadingNonAssociatedPaymentMethods=!1,this.setServerFormErrors(t)})},parseForm(){var s=w(this.form);return this.paymentMethod.storeId||(s.store_id=this.store.id,s.type=this.paymentMethod.type,s.category=this.paymentMethod.category),s},createStorePaymentMethod(){this.hideFormErrors(),this.form.name.trim()==""?this.setFormError("name","Enter payment method name"):(this.isSubmitting=!0,B(C().apiHome._links.createPaymentMethod,this.parseForm()).then(s=>{s.status==200&&(s.data.created?(this.originalForm=w(this.form),this.showSuccessfulNotification("Payment method added"),this.openPaymentMethods()):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message))),this.isSubmitting=!1}).catch(s=>{this.isSubmitting=!1,this.setServerFormErrors(s)}))},updatePaymentMethod(){this.isSubmitting=!0,fe(this.paymentMethod._links.updatePaymentMethod,this.parseForm()).then(s=>{s.status==200&&(s.data.updated?(this.showSuccessfulNotification("Payment method updated"),this.openPaymentMethods()):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message)),this.originalForm=w(this.form)),this.isSubmitting=!1}).catch(s=>{this.isSubmitting=!1,this.setServerFormErrors(s)})},updatePaymentMethodArrangement(){this.isUpdatingPaymentMethodArrangement=!0;const s={storeId:this.store.id,paymentMethodIds:this.paymentMethods.map(t=>t.id)};B(this.apiState.apiHome._links.updatePaymentMethodArrangement,s).then(t=>{t.status==200&&(t.data.updated?this.showSuccessfulNotification("Payment method arrangement updated"):(this.setFormError("general",t.data.message),this.showUnsuccessfulNotification(t.data.message))),this.isUpdatingPaymentMethodArrangement=!1}).catch(t=>{this.isUpdatingPaymentMethodArrangement=!1,this.setServerFormErrors(t)})},deletePaymentMethod(s){this.isDeletingPaymentMethodIds.push(this.deletablePaymentMethod.id),ge(this.deletablePaymentMethod._links.deletePaymentMethod).then(t=>{s(),this.isDeletingPaymentMethodIds.splice(this.isDeletingPaymentMethodIds.findIndex(M=>M==this.deletePaymentMethod.id,1)),t.status==200&&(t.data.deleted?(this.showSuccessfulNotification("Payment method deleted"),this.isDeletingPaymentMethodIds.length==0&&this.showPaymentMethods()):(this.setFormError("general",t.data.message),this.showUnsuccessfulNotification(t.data.message)))}).catch(t=>{this.isDeletingPaymentMethodIds.splice(this.isDeletingPaymentMethodIds.findIndex(M=>M==this.deletePaymentMethod.id,1)),this.setServerFormErrors(t)})}},mounted(){},created(){this.showPaymentMethods()}},Te={class:"bg-white shadow-lg border p-8 rounded-lg mb-4"},Ae=e("h1",{class:"flex items-center text-lg font-bold mb-2"},[e("svg",{class:"w-6 h-6 mr-2 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})]),e("span",null,"Payment Methods")],-1),Ve=e("p",{class:"text-sm text-gray-500"}," Choose how your customers can pay for their orders to make shopping simple and easy for them. ",-1),Ce={class:"mt-8",action:"#",method:"POST"},Fe={class:"space-y-4"},Ie=e("div",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})]),e("span",null,"Please save your changes")],-1),Be={class:"flex items-center space-x-2"},Le=e("span",{class:"ml-1"},"Undo",-1),Ne={class:"flex items-center space-x-20"},De=e("span",{class:"ml-1"},"Back",-1),Ee={class:"flex items-center space-x-2"},Ue=e("span",{class:"text-4xl pl-8"},"👈",-1),je={class:"flex items-center border rounded-lg px-4 py-2 text-sm text-gray-500 mt-40"},qe={key:0,class:"w-6 h-6 flex-shrink-0 mr-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ze=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"},null,-1),He=[ze],Oe={key:1,class:"w-6 h-6 flex-shrink-0 mr-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Re=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"},null,-1),Ze=[Re],We={key:2,class:"w-4/5 mx-auto space-y-4"},Qe=e("span",{class:"ml-1"},"Back",-1),Ge={class:"space-y-4 shadow-lg rounded-lg border p-4"},Je={class:"flex justify-center"},Ke=["src"],Xe=e("div",{class:"space-y-1 mt-0.5"},[e("p",{class:"font-bold text-sm mx-2"},"Contact seller before payment"),e("p",{class:"text-sm text-gray-500 mx-2"},"Customers can reach out to the seller before making a payment. This encourages inquiries, fosters trust, and helps reduce the likelihood of cancellations.")],-1),Ye=e("div",{class:"space-y-1 mt-0.5"},[e("p",{class:"font-bold text-sm mx-2"},"Require proof of payment"),e("p",{class:"text-sm text-gray-500 mx-2"},"Customers should always upload their proof of payment e.g Screenshot, receipt, bank transfer confirmation, or any other proof of payment.")],-1),$e=e("div",{class:"space-y-1 mt-0.5"},[e("p",{class:"font-bold text-sm mx-2"},"Mark as paid on customer confirmation"),e("p",{class:"text-sm text-gray-500 mx-2"},"Automatically set the payment status to 'Paid' when the customer confirms their payment. Ideal for trusted customer relationships and for simplifying payment processes.")],-1),et=e("span",null,"Save Changes",-1),tt=e("span",null,"Add Payment Method",-1),ot={key:1,class:"space-y-2"},st={class:"w-full flex items-center space-x-2"},at={key:2,class:"space-y-2"},nt=["onClick"],rt={class:"w-full flex items-center justify-between"},it={class:"flex items-center space-x-2"},lt=["src"],dt={class:"text-sm font-semibold"},mt=e("div",{class:"flex items-center space-x-2"},[e("span",{class:"hidden group-hover:block text-sm text-blue-500"},"Add"),e("svg",{class:"w-6 h-6 group-hover:text-blue-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"})])],-1),ht={key:0},ct=e("div",{class:"flex items-center space-x-2 p-4 border rounded-lg bg-gray-50"},[e("svg",{class:"w-8 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})]),e("p",{class:"text-gray-500 text-sm"},"No payment methods found")],-1),ut=[ct],pt={class:"w-full flex items-center space-x-2"},yt={class:"flex items-center"},ft=["onClick"],gt={class:"w-full flex items-center justify-between"},_t={class:"flex items-center space-x-2"},wt=["src"],Mt={class:"text-sm font-semibold"},Pt={class:"flex items-center space-x-2"},kt={key:0,class:"w-3 h-3 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},xt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m3.75 13.5 10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75Z"},null,-1),vt=[xt],bt=e("span",{class:"text-xs ml-2"},"Deleting...",-1),St=["onClick"],Tt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),At=[Tt],Vt=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),Ct=[Vt],Ft={key:0},It={class:"flex justify-between items-center space-x-8 px-16 py-4 border rounded-lg bg-gray-50"},Bt=e("svg",{class:"w-80 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),Lt={class:"space-y-2"},Nt={key:0,class:"font-bold"},Dt=e("span",{class:"leading-none text-sm"},"＋",-1),Et=e("span",{class:"ml-2"},"Add Payment Method",-1),Ut=e("span",{class:"ml-2"},"Add Payment Method",-1),jt=e("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),qt={class:"mb-8"},zt={class:"font-bold text-black"};function Ht(s,t,M,U,o,l){const k=d("FormErrorMessages"),b=d("UndoButton"),g=d("PrimaryButton"),x=d("Alert"),u=d("BackButton"),v=d("BadgeIndicator"),j=d("ToogleSwitch"),q=d("TextInput"),z=d("TextareaInput"),S=d("Checkbox"),H=d("PaymentMethodMetadataSettings"),O=d("SearchInput"),V=d("RoundSkeleton"),_=d("LineSkeleton"),T=d("ShineEffect"),R=d("SpinningLoader"),Z=d("draggable"),W=d("ButtonSkeleton"),Q=d("AddButton"),G=d("ConfirmModal");return a(),r("div",Te,[o.paymentMethod?h("",!0):(a(),r(c,{key:0},[Ae,Ve],64)),e("form",Ce,[e("div",Fe,[i(k),l.mustSaveChanges?(a(),p(x,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:m(()=>[Ie,e("div",Be,[i(b,{action:l.setFormFields,type:"light",size:"xs"},{default:m(()=>[Le]),_:1},8,["action"]),i(g,{action:l.updatePaymentMethod,loading:o.isSubmitting,class:"w-40"},{default:m(()=>[f(" Save Changes ")]),_:1},8,["action","loading"])])]),_:1})):h("",!0),o.isShowingNonAssociatedPaymentMethods&&!o.paymentMethod?(a(),r(c,{key:1},[e("div",Ne,[i(u,{action:l.openPaymentMethods,type:"light",size:"xs",class:"w-40"},{default:m(()=>[De]),_:1},8,["action"]),e("div",Ee,[(a(!0),r(c,null,P(o.paymentCategories,(n,y)=>(a(),p(v,{key:y,showDot:!1,size:"px-4 py-1",clickable:!0,text:n,action:()=>l.changePaymentCategory(n),type:o.selectedPaymentCategory==n?"primary":"info"},null,8,["text","action","type"]))),128)),Ue])]),e("div",je,[o.selectedPaymentCategory=="Automated"?(a(),r("svg",qe,He)):(a(),r("svg",Oe,Ze)),e("span",null,[o.selectedPaymentCategory=="Manual"?(a(),r(c,{key:0},[f("Select a manual payment method to add to your store. These are payment methods that will require you to confirm the payment manually and update the order payment status yourself.")],64)):o.selectedPaymentCategory=="Local"?(a(),r(c,{key:1},[f("Select a local payment method to add to your store. These are payment methods that will require you to confirm the payment manually and update the order payment status yourself.")],64)):o.selectedPaymentCategory=="Automated"?(a(),r(c,{key:2},[f("Select an automated payment method to add to your store. These are payment methods that do not require you to confirm the payment. They are confirmed automatically by the system.")],64)):h("",!0)])])],64)):h("",!0),o.paymentMethod?(a(),r("div",We,[i(u,{action:o.paymentMethod.storeId?l.openPaymentMethods:l.openNonAssociatedPaymentMethods,type:"light",size:"xs",class:"w-40"},{default:m(()=>[Qe]),_:1},8,["action"]),e("div",Ge,[e("div",Je,[o.paymentMethod?(a(),r("img",{key:0,class:"w-16 h-16 flex-shrink-0 rounded-full shadow",src:o.paymentMethod._attributes.image_url},null,8,Ke)):h("",!0)]),i(j,{size:"md",modelValue:o.form.active,"onUpdate:modelValue":t[0]||(t[0]=n=>o.form.active=n),labelPopoverTitle:"What Is This?",errorText:s.getFormError("active"),labelPopoverDescription:"Turn on so that your payment method is made available to customers. Turn off so that your payment method not available to customers"},{default:m(()=>[f(" Active ")]),_:1},8,["modelValue","errorText"]),i(q,{label:"Name",modelValue:o.form.name,"onUpdate:modelValue":t[1]||(t[1]=n=>o.form.name=n),placeholder:"PerfectPay",errorText:s.getFormError("name"),labelPopoverTitle:"What Is This?",labelPopoverDescription:"The payment method name e.g PerfectPay"},null,8,["modelValue","errorText"]),i(z,{rows:2,label:"Instruction",modelValue:o.form.instruction,"onUpdate:modelValue":t[2]||(t[2]=n=>o.form.instruction=n),labelPopoverTitle:"What Is This?",errorText:s.getFormError("instruction"),placeholder:"Pay using our perfect pay QR Code",labelPopoverDescription:"The payment method instructions to guide the customer on how to pay"},null,8,["modelValue","errorText"]),l.isAutomatedPaymentMethod?h("",!0):(a(),r(c,{key:0},[i(S,{size:"xs",modelValue:o.form.contactSellerBeforePayment,"onUpdate:modelValue":t[3]||(t[3]=n=>o.form.contactSellerBeforePayment=n),errorText:s.getFormError("contactSellerBeforePayment")},{default:m(()=>[Xe]),_:1},8,["modelValue","errorText"]),i(S,{size:"xs",modelValue:o.form.requireProofOfPayment,"onUpdate:modelValue":t[4]||(t[4]=n=>o.form.requireProofOfPayment=n),errorText:s.getFormError("requireProofOfPayment")},{default:m(()=>[Ye]),_:1},8,["modelValue","errorText"]),i(S,{size:"xs",modelValue:o.form.automaticallyMarkAsPaid,"onUpdate:modelValue":t[5]||(t[5]=n=>o.form.automaticallyMarkAsPaid=n),errorText:s.getFormError("automaticallyMarkAsPaid")},{default:m(()=>[$e]),_:1},8,["modelValue","errorText"])],64)),o.form.metadata?(a(),p(H,{key:1,modelValue:o.form.metadata,"onUpdate:modelValue":t[6]||(t[6]=n=>o.form.metadata=n),paymentMethod:o.paymentMethod},null,8,["modelValue","paymentMethod"])):h("",!0),o.paymentMethod.storeId?(a(),p(g,{key:2,action:()=>l.updatePaymentMethod(),disabled:!l.mustSaveChanges,type:"dark",class:"w-full mt-8"},{default:m(()=>[et]),_:1},8,["action","disabled"])):(a(),p(g,{key:3,action:()=>l.createStorePaymentMethod(),type:"dark",class:"w-full mt-8"},{default:m(()=>[tt]),_:1},8,["action"]))])])):(a(),r(c,{key:3},[l.hasSearchTerm||l.hasPaymentMethods?(a(),p(O,{key:0,modelValue:o.searchTerm,"onUpdate:modelValue":t[7]||(t[7]=n=>o.searchTerm=n),isSearching:l.isSearching},null,8,["modelValue","isSearching"])):h("",!0),o.isShowingNonAssociatedPaymentMethods&&o.isLoadingNonAssociatedPaymentMethods?(a(),r("div",ot,[(a(),r(c,null,P([1,2,3],(n,y)=>e("div",{key:y,class:"border shadow-sm rounded-lg p-4 bg-gray-50"},[i(T,{class:"w-full flex items-center justify-between space-x-2"},{default:m(()=>[e("div",st,[i(V,{size:"w-8 h-8",class:"flex-shrink-0"}),i(_,{width:"w-32"})]),i(_,{width:"w-16"})]),_:1})])),64))])):o.isShowingNonAssociatedPaymentMethods?(a(),r("div",at,[(a(!0),r(c,null,P(o.nonAssociatedPaymentMethods,(n,y)=>(a(),r("div",{key:y,onClick:()=>l.selectPaymentMethod(n),class:"border shadow-sm rounded-lg p-4 bg-gray-50 cursor-pointer hover:border-blue-200 hover:bg-blue-50 group"},[e("div",rt,[e("div",it,[e("img",{class:"w-8 h-8 flex-shrink-0 rounded-full shadow",src:o.settings.appApiUrl+"/images/payment-method-logos/"+n.type+".jpg"},null,8,lt),e("h1",dt,A(n.name),1)]),mt])],8,nt))),128)),l.hasNonAssociatedPaymentMethods?h("",!0):(a(),r("div",ht,ut))])):o.isLoadingPaymentMethods?(a(),r(c,{key:3},P([1,2,3],(n,y)=>e("div",{key:y,class:"border shadow-sm rounded-lg p-4 bg-gray-50"},[i(T,{class:"w-full flex items-center justify-between"},{default:m(()=>[e("div",pt,[i(V,{size:"w-8 h-8",class:"flex-shrink-0"}),i(_,{width:"w-32"})]),e("div",yt,[i(_,{width:"w-24 mr-4"}),i(_,{width:"w-4 mr-2"}),i(_,{width:"w-4"})])]),_:1})])),64)):(a(),r(c,{key:4},[i(Z,{class:"space-y-2",modelValue:o.paymentMethods,"onUpdate:modelValue":t[9]||(t[9]=n=>o.paymentMethods=n),handle:".draggable-handle","ghost-class":"bg-yellow-50",onChange:l.updatePaymentMethodArrangement},{default:m(()=>[(a(!0),r(c,null,P(o.paymentMethods,(n,y)=>(a(),r("div",{onClick:()=>l.selectPaymentMethod(n),key:y,class:"flex items-center justify-between space-x-4 border shadow-sm rounded-lg p-4 bg-gray-50 cursor-pointer hover:border-blue-200 hover:bg-blue-50 group"},[e("div",gt,[e("div",_t,[e("img",{class:"w-8 h-8 flex-shrink-0 rounded-full shadow",src:o.settings.appApiUrl+"/images/payment-method-logos/"+n.type+".jpg"},null,8,wt),e("h1",Mt,A(n.name),1)]),e("div",Pt,[i(v,{type:n.category.toLowerCase()==="automated"?"primary":"info",text:s.capitalize(n.category),showDot:!1},{default:m(()=>[n.category.toLowerCase()==="automated"?(a(),r("svg",kt,vt)):h("",!0)]),_:2},1032,["type","text"]),i(v,{type:n.active?"success":"warning",text:n.active?"Active":"Inactive",showDot:!1},null,8,["type","text"])])]),l.isDeleting(n)?(a(),p(R,{key:0,type:"danger"},{default:m(()=>[bt]),_:1})):(a(),r("svg",{key:1,onClick:F(Ot=>l.showDeleteConfirmationModal(n),["stop","prevent"]),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},At,8,St)),(a(),r("svg",{onClick:t[8]||(t[8]=F(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ct))],8,ft))),128))]),_:1},8,["modelValue","onChange"]),l.hasPaymentMethods?h("",!0):(a(),r("div",Ft,[e("div",It,[Bt,e("div",Lt,[l.hasSearchTerm?(a(),r("p",Nt,"No payment methods found.")):h("",!0),e("p",null,[f("Click the "),i(v,{type:"primary",text:"+ Add Payment Method",showDot:!1,clickable:!0,action:()=>l.openNonAssociatedPaymentMethods()},null,8,["action"]),f(" button to offer your customers convenient payment methods on your store")])])])]))],64)),!o.paymentMethod&&!o.isShowingNonAssociatedPaymentMethods?(a(),r(c,{key:5},[o.isLoadingPaymentMethods?(a(),p(T,{key:0},{default:m(()=>[i(W,{size:"sm",class:"w-full"},{default:m(()=>[Dt,Et]),_:1})]),_:1})):(a(),p(Q,{key:1,action:()=>l.openNonAssociatedPaymentMethods(),size:"sm",type:"light"},{default:m(()=>[Ut]),_:1},8,["action"]))],64)):h("",!0)],64)),o.deletablePaymentMethod?(a(),p(G,{key:4,approveText:"Delete",approveAction:n=>l.deletePaymentMethod(n),isLoading:l.isDeleting(l.deletePaymentMethod)},{content:m(()=>[jt,e("p",qt,[f("Are you sure you want to delete "),e("span",zt,A(o.deletablePaymentMethod.name),1),f("?")])]),trigger:m(n=>[i(g,{ref:"confirmDeleteButton",action:n.showModal,class:"hidden",type:"danger"},null,8,["action"])]),_:1},8,["approveAction","isLoading"])):h("",!0)])])])}const bo=E(Se,[["render",Ht]]);export{bo as default};
