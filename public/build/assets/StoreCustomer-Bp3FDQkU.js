import{U as A,d as se}from"./UtilsMixin-CbFS-0FV.js";import{u as F,c as S,i as oe}from"./store-store-53JUHgLt.js";import{A as re}from"./Alert-BLAvGLA1.js";import{F as H}from"./FormMixin-BgiMcnBc.js";import{o,c as i,b as e,d as n,w as c,h as _,A as E,f as m,e as u,F as x,k as M,t as d,p as C,n as j,y as K,r as h,s as ie,u as ne}from"./app-D0p-ECFe.js";import{T as ae}from"./TextInput-orDVtuFB.js";import{I as le}from"./InputTags-BE367DEk.js";import{T as U}from"./TextHeader-CVudhav3.js";import{M as ce}from"./MoneyInput-Db6TWnfL.js";import{B as de}from"./BackButton-B5qH5Uw5.js";import{N as he}from"./NumberInput-B4Pyi29U.js";import{S as me}from"./SelectInput-C-r_ZwSE.js";import{D as ue}from"./Datepicker-DSY0b35A.js";import{C as Z}from"./ConfirmModal-CX9rIo-N.js";import{S as pe}from"./ShineEffect-D7TUGluv.js";import{T as _e}from"./TextareaInput-Bll2pSQy.js";import{L as ge}from"./LineSkeleton-ChTjItNl.js";import{P as W}from"./PrimaryButton-DL2Xx4v6.js";import{S as R}from"./SpinningLoader-DgFsswht.js";import{S as fe}from"./SelectInputTags-DmzLC1Wy.js";import{M as q}from"./MoreInfoPopover-D2BmJvwS.js";import{B as ye}from"./BackdropLoader-jrSawbVP.js";import{T as Y}from"./ToogleSwitch-CRfGJER4.js";import{M as we}from"./MobileNumberInput-B1FbyHqf.js";import{B as Q}from"./BadgeIndicator-B_jFJj6c.js";import{A as X}from"./AddButton---aM3aVC.js";import{B as $}from"./BasicTable-C3cmmmR-.js";import{C as ee}from"./Checkbox-lFUvp63D.js";import{O as ve,a as xe}from"./OrderPaymentStatus-Bus0n_ek.js";import{g as z,d as G,p as be,a as ke}from"./api-repository-eCe_KSr2.js";import{N as Ce}from"./NoDataPlaceholder-Dlm3gEpT.js";import{O as Te}from"./OrderCollectionStatus-Bx59aBDi.js";import{_ as J}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Se}from"./Countdown-bLPu5dVH.js";import{E as De}from"./ExternalLink-C5t0Eas2.js";import{T as Le}from"./TransactionPaymentStatus-DB17CXaV.js";import"./form-store-DZR6yWnT.js";import"./InputLabel-Bc3dE3T1.js";import"./InputErrorMessage-COw24VzK.js";import"./vue3-tags-input.esm-C2_SvMjY.js";import"./StatusDot-CbLvKGu6.js";import"./SearchInput-ClI-K4mq.js";import"./index-B_gOZyBG.js";const Ie={mixins:[H,A],components:{TextHeader:U,AddButton:X,BasicTable:$,Checkbox:ee,OrderStatus:ve,ConfirmModal:Z,SpinningLoader:R,PrimaryButton:W,MoreInfoPopover:q,ToogleSwitch:Y,OrderPaymentStatus:xe,NoDataPlaceholder:Ce,OrderCollectionStatus:Te},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{orders:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,deletableOrder:null,isDeletingOrderIds:[],isLoadingOrders:!1,storeState:F()}},watch:{isLoadingCustomer(s,a){s==!1&&this.getOrders()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Name","Customer","Summary","status","Payment Status","Collection Status","Grand Total","Paid","Pending","Outstanding","Special Note","Created Date",""]:["","Name","Customer","Summary","status","Grand Total","Created Date",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(s){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:s._links.showOrder}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(s){this.deletableOrder=s,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(s){return this.isDeletingOrderIds.findIndex(a=>a==s.id)!=-1},onAddOrder(){this.$router.push({name:"create-store-order",params:{store_href:this.store._links.showStore}})},paginate(s){this.getOrders(s)},search(s){this.searchTerm=s,this.getOrders()},getOrders(s=null){this.isLoadingOrders=!0;const a={association:"teamMember",_relationships:"cart"};this.hasSearchTerm&&(a.search=this.searchTerm),s=s??this.customer._links.showCustomerOrders,z(s,a).then(g=>{g.status==200&&(this.pagination=g.data,this.orders=this.pagination.data,this.checkedRowIds=this.orders.map(N=>!1)),this.isLoadingOrders=!1}).catch(g=>{this.isLoadingOrders=!1,this.setServerFormErrors(g)})},deleteOrder(){this.isDeletingOrderIds.push(this.deletableOrder.id),G(this.deletableOrder._links.deleteOrder).then(s=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(a=>a==this.deletableOrder.id,1)),s.status==200&&(s.data.deleted?(this.showSuccessfulNotification("Order deleted"),this.isDeletingOrderIds.length==0&&this.getOrders(),this.refreshCustomer()):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message)))}).catch(s=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(a=>a==this.deletableOrder.id,1)),this.setServerFormErrors(s)})}}},Pe={key:0,class:"flex justify-between items-center border-dashed pb-6"},Oe={class:"flex items-center"},Ve=e("span",{class:"mr-2"},"üéÅ",-1),Be=["onClick"],Me={class:"whitespace-nowrap px-4 py-4"},Ne={class:"flex space-x-1 items-center"},Ee={class:"px-4 py-4"},Ae={class:"w-40"},Fe={class:"px-4 py-4"},He={class:"w-60"},je={class:"whitespace-nowrap px-4 py-4"},Ue={key:0,class:"whitespace-nowrap px-4 py-4"},Ze={key:1,class:"whitespace-nowrap px-4 py-4"},We={class:"whitespace-nowrap px-4 py-4"},Re={class:"flex space-x-1 items-center"},qe={class:"font-bold"},Ye=e("hr",null,null,-1),ze={class:"text-black"},Ge={class:"text-black"},Je={class:"text-black"},Ke=e("hr",null,null,-1),Qe={class:"text-black"},Xe={class:"font-bold"},$e={key:2,class:"whitespace-nowrap px-4 py-4"},et={class:"flex space-x-1 items-center"},tt={key:3,class:"whitespace-nowrap px-4 py-4"},st={class:"flex space-x-1 items-center"},ot={key:4,class:"whitespace-nowrap px-4 py-4"},rt={class:"flex space-x-1 items-center"},it={key:5,class:"whitespace-nowrap px-4 py-4"},nt={class:"flex space-x-1 items-center"},at={key:1},lt={class:"whitespace-nowrap px-4 py-4"},ct={class:"flex space-x-1 items-center"},dt={class:"px-4 py-4 flex items-center space-x-4"},ht=["onClick"],mt=e("span",{class:"text-xs ml-2"},"Deleting...",-1),ut=["onClick"],pt={key:2,class:"p-8 border rounded-lg bg-gray-50"},_t=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">üéÅ</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Orders Yet</h1><p class="text-gray-500 text-sm">Orders will appear here once your customer starts shopping.</p></div></div>',1),gt={class:"flex justify-end"},ft=e("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),yt={class:"mb-8"},wt={class:"font-bold text-black"};function vt(s,a,g,N,t,l){const L=h("TextHeader"),p=h("MoreInfoPopover"),f=h("ToogleSwitch"),I=h("Checkbox"),b=h("OrderStatus"),D=h("OrderPaymentStatus"),P=h("OrderCollectionStatus"),T=h("NoDataPlaceholder"),O=h("SpinningLoader"),V=h("BasicTable"),B=h("PrimaryButton"),k=h("ConfirmModal");return o(),i("div",null,[!(t.isLoadingOrders||g.isLoadingCustomer)&&(t.pagination??{}).total>0?(o(),i("div",Pe,[e("div",Oe,[n(L,null,{default:c(()=>[Ve,_(" Orders")]),_:1}),n(p,{class:"ml-2 mt-1",title:"What Is This?",description:"Orders are requests placed by customers to purchase products or services from your store.",placement:"top"})]),(t.pagination??{}).total>0?E(s.$slots,"actionButtons",{key:0}):m("",!0)])):m("",!0),t.isLoadingOrders||g.isLoadingCustomer||(t.pagination??{}).total>0||l.hasSearchTerm?(o(),u(V,{key:1,pagination:t.pagination,isLoading:t.isLoadingOrders||g.isLoadingCustomer,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getOrders,totalHeaders:l.tableHeaders.length},{primaryFilters:c(()=>[n(f,{modelValue:t.showEverything,"onUpdate:modelValue":a[0]||(a[0]=r=>t.showEverything=r),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your orders"},{default:c(()=>[_(" Show Everything ")]),_:1},8,["modelValue"])]),head:c(()=>[e("tr",null,[(o(!0),i(x,null,M(l.tableHeaders,(r,w)=>(o(),i("th",{key:w,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(r),1))),128))])]),body:c(()=>[(o(!0),i(x,null,M(t.orders,(r,w)=>(o(),i("tr",{onClick:C(v=>l.onView(r),["stop"]),key:r.id,class:j(["group cursor-pointer border-b",t.checkedRowIds[w]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[e("td",{onClick:a[1]||(a[1]=C(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[n(I,{size:"xs",modelValue:t.checkedRowIds[w],"onUpdate:modelValue":v=>t.checkedRowIds[w]=v},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Me,[e("div",Ne,[e("span",null,"#"+d(r._attributes.number),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"#"+r._attributes.number,description:r.summary,placement:"top"},null,8,["title","description"])])]),e("td",Ee,[e("div",Ae,[e("span",null,d(r._attributes.customerDisplayName),1)])]),e("td",Fe,[e("div",He,[e("span",null,d(r.summary),1)])]),e("td",je,[n(b,{order:r,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])]),t.showEverything?(o(),i("td",Ue,[n(D,{order:r,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):m("",!0),t.showEverything?(o(),i("td",Ze,[n(P,{order:r,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):m("",!0),e("td",We,[e("div",Re,[e("span",qe,d(r.grandTotal.amountWithCurrency),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"Cost Breakdown",placement:"top"},{description:c(()=>[Ye,e("p",null,[_("Subtotal: "),e("span",ze,d(r._relationships.cart.subTotal.amountWithCurrency),1)]),e("p",null,[_("Sale Discount: "),e("span",Ge,d(r._relationships.cart.saleDiscountTotal.amountWithCurrency),1)]),e("p",null,[_("Coupon Discount: "),e("span",Je,d(r._relationships.cart.couponDiscountTotal.amountWithCurrency),1)]),Ke,e("p",Qe,[_("Grand Total: "),e("span",Xe,d(r.grandTotal.amountWithCurrency),1)])]),_:2},1024)])]),t.showEverything?(o(),i("td",$e,[e("div",et,[e("span",null,d(r.paidTotal.amountWithCurrency),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"Paid: "+r.paidPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),t.showEverything?(o(),i("td",tt,[e("div",st,[e("span",null,d(r.pendingTotal.amountWithCurrency),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"Pending: "+r.pendingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),t.showEverything?(o(),i("td",ot,[e("div",rt,[e("span",null,d(r.outstandingTotal.amountWithCurrency),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"Outstanding: "+r.outstandingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),t.showEverything?(o(),i("td",it,[e("div",nt,[r.specialNote?(o(),u(T,{key:0})):(o(),i("span",at,d(r.specialNote),1))])])):m("",!0),e("td",lt,[e("div",ct,[e("span",null,d(s.formattedDatetime(r.createdAt)),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:s.formattedRelativeDate(r.createdAt),placement:"top"},null,8,["title"])])]),e("td",dt,[l.isDeleting(r)?m("",!0):(o(),i("a",{key:0,href:"#",onClick:C(v=>l.onView(r),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,ht)),l.isDeleting(r)?(o(),u(O,{key:1,type:"danger"},{default:c(()=>[mt]),_:1})):(o(),i("a",{key:2,href:"#",onClick:C(v=>l.showDeleteConfirmationModal(r),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,ut))])],10,Be))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(o(),i("div",pt,[_t,e("div",gt,[E(s.$slots,"actionButtons")])])),t.deletableOrder?(o(),u(k,{key:3,approveText:"Delete Order",approveAction:l.deleteOrder,isLoading:l.isDeleting(t.deletableOrder)},{content:c(()=>[ft,e("p",yt,[_("Are you sure you want to permanently delete "),e("span",wt,d(t.deletableOrder.name),1),_("?")])]),trigger:c(r=>[n(B,{ref:"confirmDeleteButton",action:r.showModal,class:"hidden",type:"danger"},{default:c(()=>[_(" Delete Order ")]),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):m("",!0)])}const xt=J(Ie,[["render",vt]]),bt={mixins:[H,A],components:{AddButton:X,TextHeader:U,BasicTable:$,Checkbox:ee,Countdown:Se,ExternalLink:De,ConfirmModal:Z,SpinningLoader:R,PrimaryButton:W,MoreInfoPopover:q,ToogleSwitch:Y,BadgeIndicator:Q,TransactionPaymentStatus:Le},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{transactions:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,appName:ie.appName,deletableTransaction:null,isDeletingTransactionIds:[],isLoadingTransactions:!1,storeState:F()}},watch:{isLoadingCustomer(s,a){s==!1&&this.getTransactions()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Trans #","Description","Payment Status","Amount","Percentage","Payment Method","Requester","Verifyer","Payment Link","Created Date",""]:["","Trans #","Payment Status","Amount","Payment Method","Requester","Verifyer","Payment Link",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(s){this.$router.push({name:"show-store-transaction",params:{store_href:this.store._links.showStore,transaction_href:s._links.showTransaction}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(s){this.deletableTransaction=s,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(s){return this.isDeletingTransactionIds.findIndex(a=>a==s.id)!=-1},onAddTransaction(){this.$router.push({name:"create-store-transaction",params:{store_href:this.store._links.showStore}})},paginate(s){this.getTransactions(s)},search(s){this.searchTerm=s,this.getTransactions()},getTransactions(s=null){this.isLoadingTransactions=!0;const a={_relationships:"customer,requestedByUser,manuallyVerifiedByUser,paymentMethod"};this.hasSearchTerm&&(a.search=this.searchTerm),s=s??this.customer._links.showCustomerTransactions,z(s,a).then(g=>{g.status==200&&(this.pagination=g.data,this.transactions=this.pagination.data,this.checkedRowIds=this.transactions.map(N=>!1)),this.isLoadingTransactions=!1}).catch(g=>{this.isLoadingTransactions=!1})},deleteTransaction(){this.isDeletingTransactionIds.push(this.deletableTransaction.id),G(this.deletableTransaction._links.deleteTransaction).then(s=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(a=>a==this.deletableTransaction.id,1)),s.status==200&&(s.data.deleted?(this.showSuccessfulNotification("Transaction deleted"),this.isDeletingTransactionIds.length==0&&this.getTransactions()):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message)))}).catch(s=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(a=>a==this.deletableTransaction.id,1)),this.setServerFormErrors(s)})}}},kt={key:0,class:"flex justify-between items-center border-dashed py-6"},Ct={class:"flex items-center"},Tt=e("span",{class:"mr-2"},"üíµ",-1),St=["onClick"],Dt={class:"whitespace-nowrap px-4 py-4"},Lt={class:"flex space-x-1 items-center"},It={key:0,class:"px-4 py-4"},Pt={class:"min-w-80"},Ot={class:"whitespace-nowrap px-4 py-4"},Vt={class:"whitespace-nowrap px-4 py-4 text-center"},Bt={key:1,class:"whitespace-nowrap px-4 py-4 text-center"},Mt={class:"whitespace-nowrap px-4 py-4 text-center"},Nt={class:"whitespace-nowrap px-4 py-4"},Et={key:0},At={key:1,class:"text-xs text-center text-gray-300"},Ft={class:"text-xs text-center text-gray-300"},Ht={key:0,class:"whitespace-nowrap px-4 py-4"},jt={key:0,class:"flex items-start space-x-2"},Ut={key:0,class:"max-w-80"},Zt={key:2,class:"text-xs text-center text-gray-300"},Wt=e("div",{class:"border-t border-dashed my-2"},null,-1),Rt={key:1,class:"text-xs text-center text-gray-300"},qt={key:2,class:"whitespace-nowrap px-4 py-4"},Yt={class:"flex space-x-1 items-center"},zt={class:"px-4 py-4 flex items-center space-x-4"},Gt=["onClick"],Jt=e("span",{class:"text-xs ml-2"},"Deleting...",-1),Kt=["onClick"],Qt={key:2,class:"p-8 border rounded-lg bg-gray-50"},Xt=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">üíµ</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Transactions Yet</h1><p class="text-gray-500 text-sm">Transactions will appear here once your customer start paying.</p></div></div>',1),$t={class:"flex justify-end"},es=e("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),ts={class:"mb-8"},ss={class:"font-bold text-black"};function os(s,a,g,N,t,l){const L=h("TextHeader"),p=h("MoreInfoPopover"),f=h("ToogleSwitch"),I=h("Checkbox"),b=h("TransactionPaymentStatus"),D=h("BadgeIndicator"),P=h("ExternalLink"),T=h("Countdown"),O=h("SpinningLoader"),V=h("BasicTable"),B=h("PrimaryButton"),k=h("ConfirmModal");return o(),i("div",null,[!(t.isLoadingTransactions||g.isLoadingCustomer)&&(t.pagination??{}).total>0?(o(),i("div",kt,[e("div",Ct,[n(L,null,{default:c(()=>[Tt,_(" Transactions")]),_:1}),n(p,{class:"ml-2 mt-1",title:"What Is This?",description:"Transactions are detailed records of payments made by customers for purchasing products or services from your store.",placement:"top"})]),(t.pagination??{}).total>0?E(s.$slots,"actionButtons",{key:0}):m("",!0)])):m("",!0),t.isLoadingTransactions||g.isLoadingCustomer||(t.pagination??{}).total>0||l.hasSearchTerm?(o(),u(V,{key:1,pagination:t.pagination,isLoading:t.isLoadingTransactions||g.isLoadingCustomer,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getTransactions,totalHeaders:l.tableHeaders.length},{primaryFilters:c(()=>[n(f,{modelValue:t.showEverything,"onUpdate:modelValue":a[0]||(a[0]=r=>t.showEverything=r),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your transactions"},{default:c(()=>[_(" Show Everything ")]),_:1},8,["modelValue"])]),head:c(()=>[e("tr",null,[(o(!0),i(x,null,M(l.tableHeaders,(r,w)=>(o(),i("th",{key:w,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(r),1))),128))])]),body:c(()=>[(o(!0),i(x,null,M(t.transactions,(r,w)=>(o(),i("tr",{onClick:C(v=>l.onView(r),["stop"]),key:r.id,class:j(["group cursor-pointer border-b",t.checkedRowIds[w]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[e("td",{onClick:a[1]||(a[1]=C(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[n(I,{size:"xs",modelValue:t.checkedRowIds[w],"onUpdate:modelValue":v=>t.checkedRowIds[w]=v},null,8,["modelValue","onUpdate:modelValue"])]),e("td",Dt,[e("div",Lt,[e("span",null,"#"+d(r._attributes.number),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:"#"+r._attributes.number,description:r.description,placement:"top"},null,8,["title","description"])])]),t.showEverything?(o(),i("td",It,[e("div",Pt,d(r.description),1)])):m("",!0),e("td",Ot,[n(b,{transaction:r},null,8,["transaction"])]),e("td",Vt,d(r.amount.amountWithCurrency),1),t.showEverything?(o(),i("td",Bt,d(r.percentage.valueSymbol),1)):m("",!0),e("td",Mt,d(r._relationships.paymentMethod.name),1),e("td",Nt,[r._relationships.requestedByUser?(o(),i("span",Et,d(r._relationships.requestedByUser._attributes.name),1)):(o(),i("span",At,"---"))]),e("td",Ft,[r._relationships.verifiedByUser?(o(),i("span",Ht,d(r._relationships.verifiedByUser._attributes.name),1)):(o(),u(D,{key:1,type:"info",text:t.appName,showDot:!1},null,8,["text"]))]),e("td",{class:"px-4 py-4",onClick:a[2]||(a[2]=C(()=>{},["stop"]))},[r.metadata?(o(),i("div",jt,[r.metadata.canPayUsingDpo?(o(),i("div",Ut,[n(P,{url:r.metadata.dpoPaymentUrl,class:"text-xs"},{default:c(()=>[_(d(r.metadata.dpoPaymentUrl),1)]),_:2},1032,["url"])])):r.metadata.dpoPaymentLinkHasExpired==!0?(o(),u(D,{key:1,type:"warning",text:"Expired",showDot:!1})):(o(),i("span",Zt,"---")),r.metadata.canPayUsingDpo?(o(),u(p,{key:3,title:"Expires In",placement:"top",class:"opacity-0 group-hover:opacity-100 mt-1"},{description:c(()=>[Wt,n(T,{showMoreInfoPopover:!1,time:r.metadata.dpoPaymentUrlExpiresAt},null,8,["time"])]),_:2},1024)):m("",!0)])):(o(),i("span",Rt,"---"))]),t.showEverything?(o(),i("td",qt,[e("div",Yt,[e("span",null,d(s.formattedDatetime(r.createdAt)),1),n(p,{class:"opacity-0 group-hover:opacity-100",title:s.formattedRelativeDate(r.createdAt),placement:"top"},null,8,["title"])])])):m("",!0),e("td",zt,[l.isDeleting(r)?m("",!0):(o(),i("a",{key:0,href:"#",onClick:C(v=>l.onView(r),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,Gt)),l.isDeleting(r)?(o(),u(O,{key:1,type:"danger"},{default:c(()=>[Jt]),_:1})):(o(),i("a",{key:2,href:"#",onClick:C(v=>l.showDeleteConfirmationModal(r),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,Kt))])],10,St))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(o(),i("div",Qt,[Xt,e("div",$t,[E(s.$slots,"actionButtons")])])),t.deletableTransaction?(o(),u(k,{key:3,approveText:"Delete Transaction",approveAction:l.deleteTransaction,isLoading:l.isDeleting(t.deletableTransaction)},{content:c(()=>[es,e("p",ts,[_("Are you sure you want to permanently delete "),e("span",ss,"transaction #"+d(t.deletableTransaction._attributes.number),1),_("?")])]),trigger:c(r=>[n(B,{ref:"confirmDeleteButton",action:r.showModal,class:"hidden",type:"danger"},{default:c(()=>[_(" Delete Transaction ")]),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):m("",!0)])}const rs=J(bt,[["render",os]]),is={mixins:[A,H],components:{Alert:re,TextInput:ae,TextHeader:U,MoneyInput:ce,InputTags:le,BackButton:de,NumberInput:he,SelectInput:me,Datepicker:ue,ConfirmModal:Z,ShineEffect:pe,TextareaInput:_e,LineSkeleton:ge,PrimaryButton:W,SpinningLoader:R,SelectInputTags:fe,MoreInfoPopover:q,BackdropLoader:ye,ToogleSwitch:Y,MobileNumberInput:we,BadgeIndicator:Q,CustomerOrders:xt,CustomerTransactions:rs},data(){return{form:{notes:"",email:"",birthday:"",lastName:"",firstName:"",mobileNumber:""},customer:null,showForm:!1,isDeleting:!1,originalForm:null,isSubmitting:!1,isLoadingCustomer:!1,apiState:ne(),storeState:F()}},watch:{"$route.params.customer_href"(s,a){window.scrollTo(0,0),this.getCustomer()}},computed:{store(){return this.storeState.store},isCreating(){return this.$route.name==="create-store-customer"},isEditting(){return this.$route.name==="show-store-customer"},addresses(){return((this.customer||{})._relationships||{}).addresses||[]},hasAddresses(){return this.addresses.length>0},formHasChanged(){var s=S(this.form),a=S(this.originalForm);return!oe(s,a)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-customers",params:{store_href:this.store._links.showStore}})},stopShowingForm(){this.form=S(this.originalForm),this.showForm=!1},setCustomerFields(){this.form.email=this.customer.email,this.form.notes=this.customer.notes,this.form.lastName=this.customer.lastName,this.form.firstName=this.customer.firstName,this.form.mobileNumber=(this.customer.mobileNumber||{}).international||"",this.customer.birthday&&(this.form.birthday=se(this.customer.birthday).format("DD MMM YYYY")),this.originalForm=S(this.form)},getCustomer(){this.isLoadingCustomer=!0;const s={_relationships:"addresses"};z(this.$route.params.customer_href,s).then(a=>{a.status==200&&a.data.exists&&(this.customer=a.data.customer,this.setCustomerFields()),this.isLoadingCustomer=!1}).catch(a=>{this.isLoadingCustomer=!1,this.setServerFormErrors(a)})},createCustomer(){this.isSubmitting=!0,be(this.apiState.apiHome._links.createCustomer,this.parseForm()).then(s=>{s.status==200&&(this.showSuccessfulNotification("Customer created"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)),this.isSubmitting=!1}).catch(s=>{this.isSubmitting=!1,this.setServerFormErrors(s)})},updateCustomer(){this.isSubmitting=!0,this.form.return=!0,ke(this.customer._links.showCustomer,this.parseForm()).then(s=>{s.status==200&&(s.data.updated?(this.showSuccessfulNotification("Customer updated"),this.showForm=!1,this.getCustomer()):(this.form=S(this.originalForm),this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message))),this.isSubmitting=!1}).catch(s=>{this.isSubmitting=!1,this.setServerFormErrors(s)})},deleteCustomer(){this.isDeleting=!0,G(this.customer._links.deleteCustomer).then(s=>{s.status==200&&(s.data.deleted?(this.showSuccessfulNotification("Customer deleted"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message))),this.isDeleting=!1}).catch(s=>{this.isDeleting=!1,this.setServerFormErrors(s)})},parseForm(){var s=S(this.form);return this.form.birthday==""&&delete s.birthday,s}},created(){this.showForm=this.isCreating,this.form.storeId=this.store.id,this.originalForm=S(this.form),this.isEditting&&this.getCustomer()}},ns={class:"grid grid-cols-2 py-6"},as={class:"flex items-center border-dashed"},ls={key:0,class:"flex items-center space-x-2"},cs={key:0,class:"flex justify-end items-center"},ds=e("span",null,"Cancel",-1),hs=e("svg",{class:"w-4 h-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),ms=e("span",null,"Edit",-1),us={key:0,class:"relative",action:"#",method:"POST"},ps={class:"flex items-center space-x-2"},_s=e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),gs={class:"flex justify-end items-center space-x-4"},fs=e("span",null,"Cancel",-1),ys={class:"grid grid-cols-12 gap-4 mb-8"},ws={class:"col-span-8 col-start-3 relative"},vs={class:"space-y-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},xs={key:1,class:"grid grid-cols-12 gap-4 mb-8"},bs={class:"col-span-8 relative"},ks={class:"grid grid-cols-3 gap-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},Cs={class:"flex flex-col items-center space-y-2"},Ts=e("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})],-1),Ss={class:"flex space-x-1 items-center"},Ds=e("p",{class:"text-gray-500 text-sm"},"Orders",-1),Ls={key:1,class:"font-bold text-2xl"},Is={class:"flex flex-col items-center space-y-2"},Ps=e("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})],-1),Os={class:"flex space-x-1 items-center"},Vs=e("p",{class:"text-gray-500 text-sm"},"Total Spend",-1),Bs={key:1,class:"font-bold text-2xl"},Ms={class:"flex flex-col items-center space-y-2"},Ns=e("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})],-1),Es={class:"flex space-x-1 items-center"},As=e("p",{class:"text-gray-500 text-sm"},"Average Order Spend",-1),Fs={key:1,class:"font-bold text-2xl"},Hs={key:0,class:"col-span-3 px-4 border-t border-dashed"},js={key:1,class:"col-span-3 flex space-x-2 items-center px-4"},Us=e("svg",{class:"w-6 h-6 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),Zs=e("span",{class:"whitespace-nowrap text-gray-500 text-sm"},"Last order:",-1),Ws={class:"whitespace-nowrap text-sm font-bold"},Rs={class:"col-span-3 flex space-x-2 items-center px-4"},qs=e("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1),Ys=e("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1),zs={class:"text-gray-500 text-sm"},Gs={class:"col-span-4"},Js={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4 mb-4"},Ks={class:"flex items-center space-x-2"},Qs=e("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[e("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1),Xs={key:1,class:"font-bold"},$s={class:"space-y-2"},eo={key:0,class:"flex items-center space-x-2 text-sm"},to=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1),so={key:1,class:"font-bold"},oo={key:1,class:"flex items-center space-x-2 text-sm"},ro=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),io={key:1,class:"font-bold"},no={key:2,class:"flex items-center space-x-2 text-sm"},ao=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 2.994v2.25m10.5-2.25v2.25m-14.252 13.5V7.491a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.251m-18 0a2.25 2.25 0 0 0 2.25 2.25h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5m-6.75-6h2.25m-9 2.25h4.5m.002-2.25h.005v.006H12v-.006Zm-.001 4.5h.006v.006h-.006v-.005Zm-2.25.001h.005v.006H9.75v-.006Zm-2.25 0h.005v.005h-.006v-.005Zm6.75-2.247h.005v.005h-.005v-.005Zm0 2.247h.006v.006h-.006v-.006Zm2.25-2.248h.006V15H16.5v-.005Z"})],-1),lo={class:"font-bold"},co={key:3,class:"border-t border-dashed pt-2"},ho={key:0,class:"flex items-center space-x-2 text-sm"},mo=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),uo=e("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1),po={class:"col-span-12"},_o={class:"bg-white shadow-lg rounded-lg border p-4"},go={class:"col-span-12"},fo={class:"bg-white shadow-lg rounded-lg border p-4"},yo={class:"font-bold text-black"},wo={class:"flex justify-end"},vo=e("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),xo={class:"mb-8"},bo={class:"font-bold text-black"};function ko(s,a,g,N,t,l){const L=h("BackButton"),p=h("LineSkeleton"),f=h("ShineEffect"),I=h("TextHeader"),b=h("PrimaryButton"),D=h("Alert"),P=h("BackdropLoader"),T=h("TextInput"),O=h("MobileNumberInput"),V=h("TextareaInput"),B=h("Datepicker"),k=h("MoreInfoPopover"),r=h("CustomerOrders"),w=h("CustomerTransactions"),v=h("ConfirmModal");return o(),i("div",null,[e("div",ns,[e("div",as,[n(L,{class:"w-16 mr-4",action:l.goBack},null,8,["action"]),t.isLoadingCustomer?(o(),i("div",ls,[n(f,{class:"flex space-x-2"},{default:c(()=>[n(p,{width:"w-40 mt-2"})]),_:1})])):(o(),u(I,{key:1},{default:c(()=>[_(d(l.isCreating?"Add Customer":t.customer._attributes.name),1)]),_:1}))]),!l.isCreating&&!t.isLoadingCustomer&&!(l.mustCreate||l.mustSaveChanges)?(o(),i("div",cs,[t.showForm?(o(),u(b,{key:0,action:l.stopShowingForm,class:"w-40",type:"light"},{default:c(()=>[ds]),_:1},8,["action"])):(o(),u(b,{key:1,action:()=>t.showForm=!0,class:"w-40",type:"light"},{default:c(()=>[hs,ms]),_:1},8,["action"]))])):m("",!0)]),t.showForm?(o(),i("form",us,[l.mustCreate||l.mustSaveChanges?(o(),u(D,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:c(()=>[e("div",ps,[_s,e("span",null,d(l.isCreating?"Create your customer":"Please save your changes"),1)]),e("div",gs,[l.isCreating?m("",!0):(o(),u(b,{key:0,action:l.stopShowingForm,class:"w-40",type:"light"},{default:c(()=>[fs]),_:1},8,["action"])),n(b,{action:l.isCreating?l.createCustomer:l.updateCustomer,loading:t.isSubmitting,class:"w-40"},{default:c(()=>[_(d(l.isCreating?"Create Customer":"Save Changes"),1)]),_:1},8,["action","loading"])])]),_:1})):m("",!0),e("div",ys,[e("div",ws,[t.isLoadingCustomer||t.isSubmitting?(o(),u(P,{key:0,class:"rounded-lg"})):m("",!0),e("div",vs,[n(T,{label:"First Name",placeholder:"John",modelValue:t.form.firstName,"onUpdate:modelValue":a[0]||(a[0]=y=>t.form.firstName=y),labelPopoverTitle:"What Is This?",errorText:s.getFormError("firstName"),labelPopoverDescription:"Customer's first name e.g John"},null,8,["modelValue","errorText"]),n(T,{label:"Last Name",placeholder:"Doe",modelValue:t.form.lastName,"onUpdate:modelValue":a[1]||(a[1]=y=>t.form.lastName=y),labelPopoverTitle:"What Is This?",errorText:s.getFormError("lastName"),labelPopoverDescription:"Customer's last name e.g Doe"},null,8,["modelValue","errorText"]),n(T,{label:"Email",modelValue:t.form.email,"onUpdate:modelValue":a[2]||(a[2]=y=>t.form.email=y),placeholder:"johndoe@gmail.com",errorText:s.getFormError("email"),labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's email e.g johndoe@gmail.com"},null,8,["modelValue","errorText"]),n(O,{modelValue:t.form.mobileNumber,"onUpdate:modelValue":a[3]||(a[3]=y=>t.form.mobileNumber=y),labelPopoverTitle:"What Is This?",errorText:s.getFormError("mobileNumber"),labelPopoverDescription:"Customer's mobile number e.g +26772000001"},null,8,["modelValue","errorText"]),n(V,{rows:2,label:"Notes",modelValue:t.form.notes,"onUpdate:modelValue":a[4]||(a[4]=y=>t.form.notes=y),labelPopoverTitle:"What Is This?",errorText:s.getFormError("notes"),placeholder:"Very loyal customer",labelPopoverDescription:"Short notes about customer e.g Very loyal customer"},null,8,["modelValue","errorText"]),(o(),u(B,{key:t.form.birthday,modelValue:t.form.birthday,"onUpdate:modelValue":a[5]||(a[5]=y=>t.form.birthday=y),errorText:s.getFormError("birthday"),label:"Birthday",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's birthday ü•≥"},null,8,["modelValue","errorText"]))])])])])):(o(),i("div",xs,[e("div",bs,[e("div",ks,[e("div",Cs,[Ts,e("div",Ss,[Ds,n(k,{title:"What Is This?",description:"This is the number of orders placed by the customer",placement:"top"})]),t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-24"})]),_:1})):(o(),i("p",Ls,d(t.customer.totalOrders),1))]),e("div",Is,[Ps,e("div",Os,[Vs,n(k,{title:"What Is This?",description:"This is the total amount spent by the customer on their orders",placement:"top"})]),t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-24"})]),_:1})):(o(),i("p",Bs,d(t.customer.totalSpend.amountWithCurrency),1))]),e("div",Ms,[Ns,e("div",Es,[As,n(k,{title:"What Is This?",description:"This is the average amount spent by the customer per order",placement:"top"})]),t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-24"})]),_:1})):(o(),i("p",Fs,d(t.customer.totalAverageSpend.amountWithCurrency),1))]),t.isLoadingCustomer||t.customer.lastOrderAt||t.customer.notes?(o(),i("div",Hs)):m("",!0),t.isLoadingCustomer||t.customer.lastOrderAt?(o(),i("div",js,[Us,Zs,t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-24"})]),_:1})):(o(),i(x,{key:1},[e("span",Ws,d(s.formattedDatetime(t.customer.lastOrderAt)),1),n(k,{class:"opacity-0 group-hover:opacity-100",title:s.formattedRelativeDate(t.customer.lastOrderAt),placement:"top"},null,8,["title"])],64))])):m("",!0),e("div",Rs,[t.isLoadingCustomer?(o(),i(x,{key:0},[qs,n(f,null,{default:c(()=>[n(p,{width:"w-24"})]),_:1})],64)):t.customer.notes?(o(),i(x,{key:1},[Ys,e("div",null,[e("span",zs,d(t.customer.notes),1)])],64)):m("",!0)])])]),e("div",Gs,[e("div",Js,[e("div",Ks,[Qs,t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-32"})]),_:1})):(o(),i("span",Xs,d(t.customer._attributes.name),1))]),e("div",$s,[t.isLoadingCustomer||t.customer.mobileNumber?(o(),i("div",eo,[to,t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-32"})]),_:1})):(o(),i("span",so,d(t.customer.mobileNumber.national),1))])):m("",!0),t.isLoadingCustomer||t.customer.email?(o(),i("div",oo,[ro,t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-32"})]),_:1})):(o(),i("span",io,d(t.customer.email),1))])):m("",!0),t.isLoadingCustomer||t.customer.birthday?(o(),i("div",no,[ao,t.isLoadingCustomer?(o(),u(f,{key:0},{default:c(()=>[n(p,{width:"w-32"})]),_:1})):(o(),i(x,{key:1},[e("span",lo,d(s.formattedDate(t.customer.birthday)),1),n(k,{title:"What Is This?",description:"This is the customers birthday ü•≥",placement:"top"})],64))])):m("",!0),!t.isLoadingCustomer&&l.hasAddresses?(o(),i("div",co)):m("",!0),t.isLoadingCustomer||l.hasAddresses?(o(),i(x,{key:4},[t.isLoadingCustomer?(o(),i("div",ho,[mo,n(f,null,{default:c(()=>[n(p,{width:"w-32"})]),_:1})])):(o(!0),i(x,{key:1},M(l.addresses,(y,te)=>(o(),i("div",{key:te,class:"flex items-center space-x-2 text-sm"},[uo,e("span",null,d(y._attributes.completeAddress),1)]))),128))],64)):m("",!0)])])]),e("div",po,[e("div",_o,[n(r,{customer:t.customer,isLoadingCustomer:t.isLoadingCustomer,refreshCustomer:l.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])]),e("div",go,[e("div",fo,[n(w,{customer:t.customer,isLoadingCustomer:t.isLoadingCustomer,refreshCustomer:l.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])])])),t.customer?(o(),i("div",{key:2,class:j(["space-y-4 shadow-lg rounded-lg border p-4",t.isLoadingCustomer?"bg-gray-50":"border-red-300 bg-red-50"])},[e("p",null,[_("Do you want to permanently delete "),e("span",yo,d(t.form.name),1),_("? Once this customer is deleted you will not be able to recover it.")]),e("div",wo,[n(v,{approveText:"Delete Customer",approveAction:l.deleteCustomer,isLoading:t.isDeleting},{content:c(()=>[vo,e("p",xo,[_("Are you sure you want to permanently delete "),e("span",bo,d(t.form.name),1),_("?")])]),trigger:c(y=>[n(b,{action:y.showModal,loading:t.isDeleting,class:"w-40",type:"danger"},{default:c(()=>[_(" Delete Customer ")]),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):m("",!0)])}const ur=J(is,[["render",ko]]);export{ur as default};
