import{F as u}from"./FormMixin-BSf8Kh8A.js";import{u as h}from"./store-store-CV52Rs-E.js";import{o as s,c as l,d as o,n as a,h as d,e as m,r as p}from"./app-piavnWUw.js";import{p as f}from"./api-repository-LmUqmO20.js";import{I as w}from"./InputErrorMessage-D6kZl79B.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";async function v(r,e){const t=new FormData;return t.append("logo",e),await f(r._links.updateLogo,t,{headers:{"Content-Type":"multipart/form-data"}})}const _={props:{store:{type:Object},width:{type:String,default:"w-20"},height:{type:String,default:"h-20"},canUpload:{type:Boolean,default:!0}},mixins:[u],components:{InputErrorMessage:w},data(){return{selectedFile:null,isSubmitting:!1,imageUrl:this.store.logo,storeState:h(),originalImageUrl:this.store.logo}},watch:{"store.logo":{handler(r,e){this.imageUrl=r},deep:!1}},methods:{selectImage(){this.canUpload&&this.$refs.fileInput.click()},handleImageChange(r){const e=r.target.files[0];e&&(this.selectedFile=e,this.imageUrl=URL.createObjectURL(e),this.store.id==this.storeState.store.id&&(h().store.logo=this.imageUrl),this.$emit("selectedPhoto",e),this.uploadImage(r,e))},uploadImage(r,e){this.hideFormErrors(),this.isSubmitting=!0,v(this.store,e).then(t=>{t.status==200&&(this.isSubmitting=!1,this.showSuccessfulNotification("Store logo updated"))}).catch(t=>{this.isSubmitting=!1,this.setServerFormErrors(t),this.store.id==this.storeState.store.id&&(h().store.logo=this.originalImageUrl),r.target.value=null})}}},b=["src"],x={key:0,class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20"},y=o("svg",{class:"w-6 h-6 animate-spin text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),S=[y],U=["src"],I={key:0,class:"absolute bottom-0 -right-2 w-4 h-4 text-gray-400",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},C=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"},null,-1),M=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"},null,-1),V=[C,M],j={key:0,class:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 z-20"},F=o("svg",{class:"w-6 h-6 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.827 6.175A2.31 2.31 0 0 1 5.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 0 0-1.134-.175 2.31 2.31 0 0 1-1.64-1.055l-.822-1.316a2.192 2.192 0 0 0-1.736-1.039 48.774 48.774 0 0 0-5.232 0 2.192 2.192 0 0 0-1.736 1.039l-.821 1.316Z"}),o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.5 12.75a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0ZM18.75 10.5h.008v.008h-.008V10.5Z"})],-1),B=[F],E={key:1,class:a(["absolute top-0 bottom-0 left-0 right-0 z-10 bg-black/75 group-hover:bg-black/50"])},A={class:a(["w-full h-full rounded-full bg-gray-100 text-gray-200 border-gray-200 p-1 border-2"]),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Z=o("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 21v-7.5a.75.75 0 0 1 .75-.75h3a.75.75 0 0 1 .75.75V21m-4.5 0H2.36m11.14 0H18m0 0h3.64m-1.39 0V9.349M3.75 21V9.349m0 0a3.001 3.001 0 0 0 3.75-.615A2.993 2.993 0 0 0 9.75 9.75c.896 0 1.7-.393 2.25-1.016a2.993 2.993 0 0 0 2.25 1.016c.896 0 1.7-.393 2.25-1.015a3.001 3.001 0 0 0 3.75.614m-16.5 0a3.004 3.004 0 0 1-.621-4.72l1.189-1.19A1.5 1.5 0 0 1 5.378 3h13.243a1.5 1.5 0 0 1 1.06.44l1.19 1.189a3 3 0 0 1-.621 4.72M6.75 18h3.75a.75.75 0 0 0 .75-.75V13.5a.75.75 0 0 0-.75-.75H6.75a.75.75 0 0 0-.75.75v3.75c0 .414.336.75.75.75Z"},null,-1),L=[Z];function z(r,e,t,N,i,n){const g=p("InputErrorMessage");return s(),l("div",null,[o("div",{class:a([t.width,t.height,"relative","mx-auto"])},[i.imageUrl?(s(),l("div",{key:0,onClick:e[0]||(e[0]=(...c)=>n.selectImage&&n.selectImage(...c)),class:a(["w-full h-full",{"cursor-pointer group":t.canUpload}])},[o("div",{src:i.imageUrl,class:a(["w-full h-full rounded-full border-4 overflow-hidden relative"])},[i.isSubmitting?(s(),l("div",x,S)):d("",!0),t.canUpload?(s(),l("div",{key:1,class:a(["absolute top-0 bottom-0 left-0 right-0 z-10 group-hover:bg-black/50",{"bg-black/75":i.isSubmitting}])},null,2)):d("",!0),(s(),l("img",{class:"w-full h-full object-cover object-top",key:i.imageUrl,src:i.imageUrl,alt:"Store Logo"},null,8,U))],8,b),t.canUpload?(s(),l("svg",I,V)):d("",!0)],2)):(s(),l("div",{key:1,onClick:e[1]||(e[1]=(...c)=>n.selectImage&&n.selectImage(...c)),class:a(["w-full h-full rounded-full border-4 border-transparent overflow-hidden relative",{"cursor-pointer group":t.canUpload}])},[t.canUpload?(s(),l("div",j,B)):d("",!0),t.canUpload?(s(),l("div",E)):d("",!0),(s(),l("svg",A,L))],2)),o("input",{type:"file",ref:"fileInput",class:"hidden",onChange:e[2]||(e[2]=(...c)=>n.handleImageChange&&n.handleImageChange(...c)),accept:"image/jpeg, image/png, image/jpg, image/gif, image/bmp"},null,544)],2),m(g,{errorText:r.getFormError("logo"),class:a({"block text-center mt-4":this.getFormError("logo")})},null,8,["errorText","class"])])}const q=k(_,[["render",z]]);export{q as S};
