import{F as T}from"./FormMixin-CULzALzX.js";import{U as k}from"./UtilsMixin-CBwmyCNB.js";import{u as S}from"./store-store-D6KBR7nZ.js";import{T as B}from"./TextHeader-DSSmQ7LM.js";import{g as P}from"./api-repository-bdlVH5Lr.js";import{B as D}from"./BasicTable-CB82VRf8.js";import{M as L}from"./MoreInfoPopover-DUIgEZ-J.js";import{B as H}from"./BadgeIndicator-DlVYZEkg.js";import{N as C}from"./NoDataPlaceholder-DUt2_bbH.js";import{c as r,b as e,d as c,w as h,e as y,h as m,r as p,o as a,F as u,k as g,t as d,n as I}from"./app-BoGXsv54.js";import{_ as M}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-store-CuTEKvPg.js";import"./cloneDeep-BSUglKOW.js";import"./SearchInput-oKDF-Tqv.js";import"./index-D19FfSVG.js";import"./TextInput-CYwxZsJZ.js";import"./InputErrorMessage-BzaNbvNM.js";import"./SpinningLoader-BEnaF0ac.js";const N={mixins:[T,k],components:{TextHeader:B,BasicTable:D,MoreInfoPopover:L,BadgeIndicator:H,NoDataPlaceholder:C},data(){return{reviews:[],pagination:null,searchTerm:null,isLoadingReviews:!1,storeState:S(),tableHeaders:["Customer","Subject","Rating","Comment","Review Date"]}},computed:{store(){return this.storeState.store},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{navigateToShowProducts(){this.$router.push({name:"show-store-products",params:{store_href:this.store._links.showStore}})},paginate(s){this.getReviews(s)},search(s){this.searchTerm=s,this.getReviews()},getReviews(s=null){this.isLoadingReviews=!0;const t={_relationships:"user"};this.hasSearchTerm&&(t.search=this.searchTerm),s=s??this.store._links.showStoreReviews,P(s,t).then(l=>{l.status==200&&(this.pagination=l.data,this.reviews=this.pagination.data),this.isLoadingReviews=!1}).catch(l=>{this.isLoadingReviews=!1,this.setServerFormErrors(l)})}},created(){this.getReviews()}},F={class:"flex justify-between items-center border-dashed py-6"},j={class:"flex items-center"},A={class:"whitespace-nowrap px-4 py-4"},V={class:"items-center"},E={class:"whitespace-nowrap px-4 py-4"},U={class:"items-center"},z={class:"whitespace-nowrap px-4 py-4"},W={class:"flex items-center"},Z={class:"px-4 py-4"},q={class:"flex space-x-1 items-center w-60"},G={key:1},J={class:"whitespace-nowrap px-4 py-4"},K={class:"flex space-x-1 items-center"},O={key:1,class:"flex justify-between space-x-20 bg-white shadow-lg rounded-lg border p-20"},Q={class:"space-y-4"};function X(s,t,l,Y,i,n){const x=p("TextHeader"),f=p("MoreInfoPopover"),b=p("NoDataPlaceholder"),R=p("BasicTable"),w=p("BadgeIndicator");return a(),r("div",null,[e("div",F,[e("div",j,[c(x,null,{default:h(()=>t[0]||(t[0]=[e("span",{class:"mr-2"},"ðŸ’¬",-1),m(" Reviews")])),_:1}),c(f,{class:"ml-2 mt-1",title:"What Is This?",description:"Reviews are customer feedback on products and services that you offer. This helps you and your customers make informed decisions",placement:"top"})])]),i.isLoadingReviews||(i.pagination??{}).total>0||n.hasSearchTerm?(a(),y(R,{key:0,pagination:i.pagination,isLoading:i.isLoadingReviews,onPaginate:n.paginate,onSearch:n.search,onRefresh:n.getReviews,totalHeaders:i.tableHeaders.length},{head:h(()=>[e("tr",null,[(a(!0),r(u,null,g(i.tableHeaders,(o,v)=>(a(),r("th",{key:v,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(o),1))),128))])]),body:h(()=>[(a(!0),r(u,null,g(i.reviews,o=>(a(),r("tr",{key:o.id,class:"group bg-white hover:bg-gray-50 border-b"},[e("td",A,[e("div",V,[e("span",null,d(o._relationships.user._attributes.name),1)])]),e("td",E,[e("div",U,[e("span",null,d(o.subject),1)])]),e("td",z,[e("div",W,[(a(),r(u,null,g(5,(v,_)=>e("svg",{key:_,class:I([o.rating>_?"text-yellow-300":"text-gray-300","w-4 h-4"]),xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},t[1]||(t[1]=[e("path",{"fill-rule":"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006 5.404.434c1.164.093 1.636 1.545.749 2.305l-4.117 3.527 1.257 5.273c.271 1.136-.964 2.033-1.96 1.425L12 18.354 7.373 21.18c-.996.608-2.231-.29-1.96-1.425l1.257-5.273-4.117-3.527c-.887-.76-.415-2.212.749-2.305l5.404-.434 2.082-5.005Z","clip-rule":"evenodd"},null,-1)]),2)),64))])]),e("td",Z,[e("div",q,[o.comment==null?(a(),y(b,{key:0})):(a(),r("span",G,d(o.comment),1))])]),e("td",J,[e("div",K,[e("span",null,d(s.formattedDatetime(o.createdAt)),1),c(f,{class:"opacity-0 group-hover:opacity-100",title:s.formattedRelativeDate(o.createdAt),placement:"top"},null,8,["title"])])])]))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(a(),r("div",O,[e("div",Q,[t[6]||(t[6]=e("h1",{class:"text-2xl font-bold"},"Discover Customer Feedback",-1)),e("div",null,[e("p",null,[t[2]||(t[2]=m("See what your customers are saying about your ")),c(w,{type:"primary",text:"products",showDot:!1,clickable:!0,action:n.navigateToShowProducts},null,8,["action"]),t[3]||(t[3]=m(" and ")),c(w,{type:"primary",text:"services",showDot:!1,clickable:!0,action:n.navigateToShowProducts},null,8,["action"]),t[4]||(t[4]=m("."))]),t[5]||(t[5]=e("p",null,"Reviews will appear here once customers provide feedback.",-1))])]),t[7]||(t[7]=e("div",null,[e("span",{class:"text-8xl"},"ðŸ’¬")],-1))]))])}const we=M(N,[["render",X]]);export{we as default};
