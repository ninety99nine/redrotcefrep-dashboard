import{z as s,ak as r}from"./app-BJ2494tY.js";import{c as t,i}from"./cloneDeep-BSUglKOW.js";const n=s("workflow",{state:()=>({workflow:null,workflowSteps:[],route:r(),workflowForm:null,isSuccessful:!1,isLoadingWorkflow:!1,unsavedWorkflowSteps:[],originalWorkflowSteps:[],uncreatedWorkflowSteps:[],resetableWorkflowSteps:[],originalWorkflowForm:null,updateWorkflowStepArrangement:null}),actions:{reset(){this.setWorkflowForm(this.workflow),this.resetWorkflowSteps()},beforeUnmount(){this.workflow=null,this.workflowSteps=[],this.workflowForm=null,this.isSuccessful=!1,this.isLoadingWorkflow=!1,this.unsavedWorkflowSteps=[],this.originalWorkflowSteps=[],this.uncreatedWorkflowSteps=[],this.resetableWorkflowSteps=[],this.originalWorkflowForm=null,this.updateWorkflowStepArrangement=null},setWorkflowForm(o=null){o?this.workflowForm={name:o.name,active:o.active,trigger:o.trigger,resource:o.resource}:this.workflowForm={name:"",active:!0,resource:"order",trigger:"waiting"},this.setOriginalWorkflowForm()},setWorkflow(o){this.workflow=o},setIsSuccessful(o){this.isSuccessful=o},setIsLoadingWorkflow(o){this.isLoadingWorkflow=o},setIsSubmittingWorkflow(o){this.isSubmittingWorkflow=o},setIsUpdatingWorkflowArrangement(o){this.isUpdatingWorkflowArrangement=o},setOriginalWorkflowForm(){this.originalWorkflowForm=t(this.workflowForm)},addUnsavedWorkflowStep(o){this.unsavedWorkflowSteps.includes(o)||this.unsavedWorkflowSteps.push(o)},removeUnsavedWorkflowStep(o){const e=this.unsavedWorkflowSteps.indexOf(o);e>-1&&this.unsavedWorkflowSteps.splice(e,1)},addUncreatedWorkflowStep(o){this.uncreatedWorkflowSteps.includes(o)||this.uncreatedWorkflowSteps.push(o)},removeUncreatedWorkflowStep(o){const e=this.uncreatedWorkflowSteps.indexOf(o);e>-1&&this.uncreatedWorkflowSteps.splice(e,1)},addResetableWorkflowStep(o){this.resetableWorkflowSteps.includes(o)||this.resetableWorkflowSteps.push(o)},removeResetableWorkflowStep(o){const e=this.resetableWorkflowSteps.indexOf(o);e>-1&&this.resetableWorkflowSteps.splice(e,1)},async updateWorkflowSteps(){await Promise.all(this.unsavedWorkflowSteps.map(async o=>{await o()}))},async createWorkflowSteps(){await Promise.all(this.uncreatedWorkflowSteps.map(async o=>{await o()}))},async resetWorkflowSteps(){this.resetableWorkflowSteps.map(o=>o())}},getters:{isCreating(){return this.route.name==="create-store-workflow"},isEditting(){return this.route.name==="show-store-workflow"},mustCreate(){return this.isCreating&&this.workflowFormHasChanged&&!this.isLoadingWorkflow&&!this.isSubmittingWorkflow&&this.hasWorkflowSteps},mustSaveChanges(){return this.isEditting&&this.workflowFormHasChanged&&!this.isLoadingWorkflow&&!this.isSubmittingWorkflow&&this.hasWorkflowSteps},hasWorkflow(){return this.workflow!=null},hasWorkflowSteps(){return this.totalWorkflowSteps>0},totalWorkflowSteps(){return this.workflowSteps.length},hasUnsavedWorkflowSteps(){return this.unsavedWorkflowSteps.length>0},hasUncreatedWorkflowSteps(){return this.uncreatedWorkflowSteps.length>0},workflowFormHasName(){return this.workflowForm.name!=""},workflowFormHasChanged(){var o=t(this.workflowForm),e=t(this.originalWorkflowForm);return!i(o,e)}}});export{n as u};
