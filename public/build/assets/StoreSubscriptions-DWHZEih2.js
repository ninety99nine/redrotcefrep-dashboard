import{P as y}from"./Pill-CD_3pjy5.js";import{F as v}from"./FormMixin-D44Bj-el.js";import{B as k}from"./Button-CTlUNYLQ.js";import{U as T}from"./form-store-B_ZbhArT.js";import{u as P}from"./store-store-CxinBL3L.js";import{T as B}from"./TextHeader-DRGBY_Ui.js";import{A as L}from"./AddButton-CqVfIWO7.js";import{B as A}from"./BasicTable-BCie5vLF.js";import{C}from"./Checkbox-BOFyOk4h.js";import{P as M}from"./ProfilePhoto-Dhc2cTuv.js";import{C as V}from"./ConfirmModal-CKYpWGJT.js";import{P as F}from"./PrimaryButton-Cwf__Lsv.js";import{S as H}from"./SpinningLoader-BnJGVf_7.js";import{M as D}from"./MoreInfoPopover-CrxGv8yo.js";import{g as N}from"./api-repository-CIJPUswr.js";import{T as j}from"./ToogleSwitch-CtY-gb5u.js";import{c as l,b as t,e as I,w as a,d as m,r as d,o as n,F as f,k as _,t as p,m as w,h as U}from"./app-DEkFCb1u.js";import{_ as z}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShineEffect-CWpUJr6E.js";import"./cloneDeep-BGE7Bmb-.js";import"./SearchInput-BKDyZ1Nd.js";import"./index-D14zHmA0.js";import"./TextInput-CwB-G_mS.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./SelectInput-DXfLro8i.js";import"./Drawer-DoikbwU2.js";import"./MoneyInput-C1qj8tqg.js";import"./Datepicker-HHxVzfmA.js";import"./vue-draggable-next.esm-bundler-C7oHOHQm.js";/* empty css                                                                      */const E={mixins:[v,T],components:{Button:k,TextHeader:B,AddButton:L,BasicTable:A,Checkbox:C,ProfilePhoto:M,ConfirmModal:V,PrimaryButton:F,SpinningLoader:H,MoreInfoPopover:D,ToogleSwitch:j,Pill:y},data(){return{pagination:null,searchTerm:null,subscriptions:[],storeState:P(),isLoadingSubscriptions:!1,tableHeaders:["Plan Name","Status","Start At","End At","Amount",""]}},watch:{isLoadingStore(s){s||this.getSubscriptions()}},computed:{store(){return this.storeState.store},isLoadingStore(){return this.storeState.isLoadingStore},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(s){this.$router.push({name:"show-store-subscription",params:{store_href:this.store._links.showStore,subscription_href:s._links.showSubscription}})},onAddSubscription(){this.$router.push({name:"show-store-pricing-plans",params:{store_href:this.store._links.showStore}})},getStatusType(s){const e=s._attributes.status.toLowerCase();return e=="active"?"success":e=="expired"?"warning":"light"},paginate(s){this.getSubscriptions(s)},search(s){this.searchTerm=s,this.getSubscriptions()},getSubscriptions(s=null){this.isLoadingSubscriptions=!0;let h={_relationships:["transaction","pricingPlan"].join(",")};this.hasSearchTerm&&(h.search=this.searchTerm),s=s??this.store._links.showStoreSubscriptions,N(s,h).then(c=>{c.status==200&&(this.pagination=c.data,this.subscriptions=this.pagination.data),this.isLoadingSubscriptions=!1}).catch(c=>{this.isLoadingSubscriptions=!1,this.formState.setServerFormErrors(c)})}},created(){this.isLoadingSubscriptions=!0}},R={class:"pt-24 pb-80 px-8 relative"},W={class:"relative"},Y=["onClick"],Z={class:"whitespace-nowrap px-4 py-4 align-top"},q={class:"whitespace-nowrap px-4 py-4 align-top"},G={class:"flex items-center space-x-2"},J={class:"whitespace-normal text-xs space-y-2 mt-4"},K={class:"whitespace-nowrap px-4 py-4 align-top"},O={class:"whitespace-nowrap px-4 py-4 align-top"},Q={class:"whitespace-nowrap px-4 py-4 align-top"},X={class:"px-4 py-4 space-x-4 align-top"},$=["onClick"],tt={key:1,class:"flex justify-center"},st={class:"animated-border-blue w-96 bg-white py-4 px-4 shadow-sm space-y-4 rounded-xl"},et={class:"flex justify-end"};function ot(s,e,h,c,r,i){const g=d("Button"),S=d("Pill"),b=d("MoreInfoPopover"),x=d("BasicTable");return n(),l("div",R,[e[5]||(e[5]=t("img",{src:"/images/clouds.png",class:"absolute top-0"},null,-1)),t("div",W,[e[4]||(e[4]=t("div",{class:"flex flex-col items-center mb-8"},[t("h1",{class:"space-x-2 text-xl text-gray-700 font-semibold bg-white rounded-full py-2 px-8 mb-4"},[t("span",null,"ðŸš€"),t("span",null,"Subscriptions")]),t("img",{src:"/images/store-rooftop.png",class:"w-96"})],-1)),r.isLoadingSubscriptions||(r.pagination??{}).total>0||i.hasSearchTerm?(n(),I(x,{key:0,pagination:r.pagination,isLoading:r.isLoadingSubscriptions,onPaginate:i.paginate,onSearch:i.search,onRefresh:i.getSubscriptions,totalHeaders:r.tableHeaders.length},{head:a(()=>[t("tr",null,[(n(!0),l(f,null,_(r.tableHeaders,(o,u)=>(n(),l("th",{key:u,scope:"col",class:"whitespace-nowrap px-4 py-3"},p(o),1))),128))])]),afterRefreshButton:a(()=>[m(g,{action:i.onAddSubscription,type:"primary",size:"sm",icon:"add"},{default:a(()=>e[0]||(e[0]=[t("span",null,"Add Subscription",-1)])),_:1},8,["action"])]),body:a(()=>[(n(!0),l(f,null,_(r.subscriptions,o=>(n(),l("tr",{key:o.id,onClick:w(u=>i.onView(o),["stop"]),class:"group cursor-pointer border-b bg-white hover:bg-gray-50"},[t("td",Z,p(o._relationships.pricingPlan.name),1),t("td",q,[t("div",G,[m(S,{type:i.getStatusType(o),size:"xs"},{default:a(()=>[U(p(o._attributes.status),1)]),_:2},1032,["type"]),m(b,{title:"What Is This?",placement:"top"},{description:a(()=>[t("p",J,p(o._attributes.statusDescription),1)]),_:2},1024)])]),t("td",K,[t("span",null,p(s.formattedDatetime(o.startAt)),1)]),t("td",O,[t("span",null,p(s.formattedDatetime(o.endAt)),1)]),t("td",Q,[t("span",null,p(o._relationships.transaction.amount.amountWithCurrency),1)]),t("td",X,[t("span",{onClick:w(u=>i.onView(o),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,$)])],8,Y))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(n(),l("div",tt,[t("div",st,[e[2]||(e[2]=t("h1",{class:"text-xl font-bold"}," Update Now ",-1)),e[3]||(e[3]=t("p",{class:"text-sm text-gray-500"}," You are on the Free plan with limited features. Do so much more with an upgrade âœ¨ ",-1)),t("div",et,[m(g,{action:i.onAddSubscription,type:"primary",size:"sm"},{default:a(()=>e[1]||(e[1]=[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.59 14.37a6 6 0 0 1-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 0 0 6.16-12.12A14.98 14.98 0 0 0 9.631 8.41m5.96 5.96a14.926 14.926 0 0 1-5.841 2.58m-.119-8.54a6 6 0 0 0-7.381 5.84h4.8m2.581-5.84a14.927 14.927 0 0 0-2.58 5.84m2.699 2.7c-.103.021-.207.041-.311.06a15.09 15.09 0 0 1-2.448-2.448 14.9 14.9 0 0 1 .06-.312m-2.24 2.39a4.493 4.493 0 0 0-1.757 4.306 4.493 4.493 0 0 0 4.306-1.758M16.5 9a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"})],-1),t("span",null,"Upgrade",-1)])),_:1},8,["action"])])])]))])])}const Ht=z(E,[["render",ot]]);export{Ht as default};
