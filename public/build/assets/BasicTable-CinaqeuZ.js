import{c as F,g as W,U as G,S as X}from"./SpiningLoader-CtP8XMxq.js";import{o as a,c as l,d as L,a as t,t as v,i as b,F as w,l as M,m,n as N,q as Z,M as J,h as j,k,r as P}from"./app-DgwDG0oL.js";import{_ as H}from"./_plugin-vue_export-helper-DlAUqK2U.js";var K="Expected a function",U=NaN,Q="[object Symbol]",Y=/^\s+|\s+$/g,$=/^[-+]0x[0-9a-f]+$/i,ee=/^0b[01]+$/i,te=/^0o[0-7]+$/i,re=parseInt,ie=typeof F=="object"&&F&&F.Object===Object&&F,ne=typeof self=="object"&&self&&self.Object===Object&&self,se=ie||ne||Function("return this")(),ae=Object.prototype,oe=ae.toString,le=Math.max,de=Math.min,I=function(){return se.Date.now()};function ce(e,r,i){var g,h,n,c,d,s,u=0,y=!1,x=!1,C=!0;if(typeof e!="function")throw new TypeError(K);r=D(r)||0,B(i)&&(y=!!i.leading,x="maxWait"in i,n=x?le(D(i.maxWait)||0,r):n,C="trailing"in i?!!i.trailing:C);function S(o){var f=g,p=h;return g=h=void 0,u=o,c=e.apply(p,f),c}function q(o){return u=o,d=setTimeout(_,r),y?S(o):c}function z(o){var f=o-s,p=o-u,A=r-f;return x?de(A,n-p):A}function O(o){var f=o-s,p=o-u;return s===void 0||f>=r||f<0||x&&p>=n}function _(){var o=I();if(O(o))return E(o);d=setTimeout(_,z(o))}function E(o){return d=void 0,C&&g?S(o):(g=h=void 0,c)}function R(){d!==void 0&&clearTimeout(d),u=0,g=s=h=d=void 0}function V(){return d===void 0?c:E(I())}function T(){var o=I(),f=O(o);if(g=arguments,h=this,s=o,f){if(d===void 0)return q(s);if(x)return d=setTimeout(_,r),S(s)}return d===void 0&&(d=setTimeout(_,r)),c}return T.cancel=R,T.flush=V,T}function B(e){var r=typeof e;return!!e&&(r=="object"||r=="function")}function ue(e){return!!e&&typeof e=="object"}function he(e){return typeof e=="symbol"||ue(e)&&oe.call(e)==Q}function D(e){if(typeof e=="number")return e;if(he(e))return U;if(B(e)){var r=typeof e.valueOf=="function"?e.valueOf():e;e=B(r)?r+"":r}if(typeof e!="string")return e===0?e:+e;e=e.replace(Y,"");var i=ee.test(e);return i||te.test(e)?re(e.slice(2),i?2:8):$.test(e)?U:+e}var ge=ce;const fe=W(ge),be={props:{pagination:{type:Object}},computed:{showResultTotals(){return this.pagination.from&&this.pagination.to&&this.pagination.total}},methods:{onClick(e){e.url&&this.$emit("paginate",e.url)},isDisabled(e){return e.url==null},getLinkClass(e,r){var i;return e==0?i="flex items-center justify-center px-3 h-8 ms-0 leading-tight border rounded-s-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":e==this.pagination.links.length-1?i="flex items-center justify-center px-3 h-8 leading-tight border rounded-e-lg hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":i="flex items-center justify-center px-3 h-8 leading-tight border dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",this.isDisabled(r)?i+=" cursor-not-allowed bg-gray-100":i+=r.active?" bg-blue-500 hover:bg-blue-500 border-blue-500 text-white":"bg-white hover:bg-gray-100 hover:text-gray-700 text-gray-500",i}}},me={key:0,class:"text-sm font-normal text-gray-500 dark:text-gray-400"},ye={class:"font-semibold text-gray-900 dark:text-white"},xe={class:"font-semibold text-gray-900 dark:text-white"},ve={class:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8"},pe=["href","onClick","disabled"],ke=["innerHTML"];function we(e,r,i,g,h,n){return a(),l("nav",{class:N(["flex items-center flex-column flex-wrap md:flex-row",n.showResultTotals?"justify-between":"justify-end"]),"aria-label":"Table navigation"},[n.showResultTotals?(a(),l("span",me,[L("Showing "),t("span",ye,v(i.pagination.from)+"-"+v(i.pagination.to),1),L(" of "),t("span",xe,v(i.pagination.total),1)])):b("",!0),t("ul",ve,[(a(!0),l(w,null,M(i.pagination.links,(c,d)=>(a(),l("li",{key:d},[t("a",{href:c.url??"#",onClick:m(s=>n.onClick(c),["prevent"]),disabled:n.isDisabled(c),class:N(n.getLinkClass(d,c))},[t("span",{innerHTML:c.label},null,8,ke)],10,pe)]))),128))])],2)}const _e=H(be,[["render",we]]),Fe={mixins:[G],components:{Pagination:_e,SpiningLoader:X},props:{isLoading:{type:Boolean,default:!1},pagination:{type:Object},totalHeaders:{type:Number,default:0},showAddFilter:{type:Boolean,default:!1},filters:{type:Array,default:()=>[]}},data(){return{modal:null,filter:null,searchTerm:"",filterIndex:null,selectedFilter:null,debouncedSearch:null,uniqueModalId:this.generateUniqueId("modal")}},watch:{isSearching(e,r){e==!1&&this.focusInput()}},computed:{isSearching(){return this.searchTerm.length>0&&this.isLoading}},methods:{refresh(){this.isLoading||this.$emit("refresh")},paginate(e){this.$emit("paginate",e)},search(e){e&&(this.searchTerm=e.target.value),this.debouncedSearch()},focusInput(){this.$nextTick(()=>{this.$refs.searchInput.focus()})},addOrUpdateFilter(){this.$emit("addOrUpdateFilter",this.filterIndex),this.filterIndex=null,this.filter=null},removeFilter(e){this.filters.splice(e,1),this.$emit("removeFilter")},showFilterModal(){this.modal.show(),this.$emit("showFilterModal")},hideFilterModal(){this.modal.hide(),this.$emit("hideFilterModal")},showSelectedFilter(e,r){this.showFilterModal(),this.filter=e,this.filterIndex=r,this.$emit("showSelectedFilter",e)}},mounted(){Z();const e=document.getElementById(this.uniqueModalId);e!=null&&(this.modal=new J(e))},created(){this.debouncedSearch=fe(()=>{this.$emit("search",this.searchTerm)},1e3)}},je={class:"flex justify-between items-center mb-4"},Me={class:"flex justify-center items-center space-x-4"},Ce={class:"relative"},Se={key:1,class:"absolute inset-y-0 left-0 rtl:inset-r-0 rtl:right-0 flex items-center ps-3 pointer-events-none"},Te=t("svg",{class:"w-4 h-4 text-gray-500 dark:text-gray-400","aria-hidden":"true",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},[t("path",{"fill-rule":"evenodd",d:"M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z","clip-rule":"evenodd"})],-1),Ie=[Te],Le=["disabled"],Be=t("svg",{class:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),Oe=[Be],Ee={class:"flex justify-start items-center bg-gray-50 rounded-lg p-4 mb-4"},Ae=t("div",{class:"h-4 border-r border-gray-300 mx-4"},null,-1),Ne={class:"flex flex-wrap"},Pe=["onClick"],Ue=["onClick"],De=["onClick"],He=["onClick"],qe=["id"],ze={class:"relative p-4 w-full max-w-md max-h-full"},Re={class:"relative bg-white rounded-lg shadow dark:bg-gray-700"},Ve={class:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600"},We={class:"text-lg font-semibold text-gray-900 dark:text-white"},Ge=t("svg",{class:"w-3 h-3","aria-hidden":"true",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14"},[t("path",{stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})],-1),Xe=t("span",{class:"sr-only"},"Close modal",-1),Ze=[Ge,Xe],Je={class:"grid grid-col-12 lg:gap-4 gap-4 p-4"},Ke={class:"col-span-12 flex justify-end"},Qe={key:0,class:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg"},Ye=t("path",{"fill-rule":"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule":"evenodd"},null,-1),$e=[Ye],et={class:"relative overflow-y-auto bg-white border rounded-lg shadow"},tt={key:0,class:"absolute top-0 bottom-0 left-0 right-0 bg-white/50 flex justify-center items-center"},rt={class:"w-full text-sm text-left rtl:text-right text-gray-500"},it={class:"text-xs text-gray-700 uppercase bg-gray-50"},nt={key:0},st=t("div",{class:"h-2 bg-gray-200 rounded-full dark:bg-gray-700 mx-4 my-4"},null,-1),at=[st],ot={key:2},lt={key:1,class:"text-xs text-gray-700 text-center py-16 bg-gray-50 border-t"};function dt(e,r,i,g,h,n){const c=P("SpiningLoader"),d=P("Pagination");return a(),l("div",null,[t("div",je,[t("div",Me,[t("form",{onSubmit:r[1]||(r[1]=m(s=>n.search(),["prevent"])),class:"flex justify-center items-center"},[t("div",Ce,[n.isSearching?(a(),j(c,{key:0,class:"absolute top-3.5 left-3",size:"sm"})):(a(),l("div",Se,Ie)),t("input",{ref:"searchInput",onInput:r[0]||(r[0]=(...s)=>n.search&&n.search(...s)),disabled:n.isSearching,type:"text",id:"table-search",class:"block p-2 ps-8 text-sm text-gray-900 border border-gray-300 rounded-lg w-80 bg-gray-50 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Search",required:""},null,40,Le)])],32),k(e.$slots,"primaryFilters")]),t("button",{onClick:r[2]||(r[2]=m((...s)=>n.refresh&&n.refresh(...s),["prevent"])),type:"button",class:"text-gray-900 bg-white border border-gray-300 focus:outline-none hover:bg-gray-100 focus:ring-4 focus:ring-gray-100 font-medium rounded-lg text-sm px-5 py-2.5 dark:bg-gray-800 dark:text-white dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:border-gray-600 dark:focus:ring-gray-700"},Oe)]),i.showAddFilter?(a(),l(w,{key:0},[t("div",Ee,[t("button",{onClick:r[3]||(r[3]=(...s)=>n.showFilterModal&&n.showFilterModal(...s)),type:"button",class:"text-xs text-blue-500 rounded-lg py-1 px-4 whitespace-nowrap cursor-pointer border border-blue-300 bg-blue-50 hover:text-blue-400 hover:border-blue-200 active:text-blue-300 active:border-blue-100"}," + Add Filter "),Ae,t("div",Ne,[(a(!0),l(w,null,M(i.filters,(s,u)=>(a(),l("button",{onClick:m(y=>n.showSelectedFilter(s),["self"]),type:"button",class:"flex items-center mr-2 text-xs text-white rounded-lg py-1 px-2 whitespace-nowrap cursor-pointer border border-white bg-blue-500",key:u},[t("span",{onClick:m(y=>n.showSelectedFilter(s,u),["self"])},v(s.displayName),9,Ue),(a(),l("svg",{onClick:m(y=>n.removeFilter(u),["self"]),class:"w-4 h-4 ml-2 hover:text-blue-400 hover:border-blue-200 active:text-blue-300 active:border-blue-100",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{onClick:m(y=>n.removeFilter(u),["self"]),"stroke-linecap":"round","stroke-linejoin":"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,8,He)],8,De))],8,Pe))),128))])]),t("div",{id:h.uniqueModalId,tabindex:"-1","aria-hidden":"true",class:"hidden overflow-y-auto overflow-x-hidden fixed top-0 right-0 left-0 z-50 justify-center items-center w-full md:inset-0 h-[calc(100%-1rem)] max-h-full"},[t("div",ze,[t("div",Re,[t("div",Ve,[t("h3",We,v(h.filter==null?"+ Add Filter":"Edit Filter"),1),t("button",{onClick:r[4]||(r[4]=(...s)=>n.hideFilterModal&&n.hideFilterModal(...s)),type:"button",class:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"},Ze)]),t("div",Je,[k(e.$slots,"modalFilters"),t("div",Ke,[t("button",{onClick:[r[5]||(r[5]=m((...s)=>n.addOrUpdateFilter&&n.addOrUpdateFilter(...s),["prevent"])),r[6]||(r[6]=(...s)=>n.hideFilterModal&&n.hideFilterModal(...s))],type:"button",class:"text-white inline-flex items-center bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-xs px-4 py-2 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800"},[h.filter==null?(a(),l("svg",Qe,$e)):b("",!0),L(" "+v(h.filter==null?"Add Filter":"Done"),1)])])])])])],8,qe)],64)):b("",!0),i.pagination&&i.pagination.total>5?(a(),j(d,{key:1,pagination:i.pagination,onPaginate:n.paginate,class:"mb-4"},null,8,["pagination","onPaginate"])):b("",!0),t("div",et,[i.pagination&&i.isLoading&&!n.isSearching?(a(),l("div",tt,[n.isSearching?b("",!0):(a(),j(c,{key:0}))])):b("",!0),t("table",rt,[t("thead",it,[k(e.$slots,"head")]),!i.pagination&&i.isLoading&&i.totalHeaders>0?(a(),l("tbody",nt,[(a(),l(w,null,M([1,2,3],(s,u)=>t("tr",{key:u,class:"animate-pulse"},[(a(!0),l(w,null,M(i.totalHeaders,(y,x)=>(a(),l("td",{key:x},at))),128))])),64))])):e.$slots.tbody?k(e.$slots,"tbody",{key:1}):(a(),l("tbody",ot,[k(e.$slots,"body")]))]),i.pagination&&i.pagination.total==0?(a(),l("div",lt," No results found ")):b("",!0)]),i.pagination?(a(),j(d,{key:2,pagination:i.pagination,onPaginate:n.paginate,class:"mt-4"},null,8,["pagination","onPaginate"])):b("",!0)])}const gt=H(Fe,[["render",dt]]);export{gt as B};
