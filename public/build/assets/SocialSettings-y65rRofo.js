import{c as h,i as M}from"./cloneDeep-DHnls51a.js";import{s as V,c as l,d as s,g,w as a,h as p,e as c,F as f,l as S,r as d,o as r,i as _,t as v,k as C}from"./app-Crpx-0aq.js";import{A}from"./Alert-CQqXtibI.js";import{F as I}from"./FormMixin-B4DJNxx6.js";import{U}from"./SpiningLoader-DbS6kSol.js";import{V as N}from"./vue-draggable-next.esm-bundler-CG1_zvOB.js";import{u as x}from"./store-store-1qa60_39.js";import{T as j}from"./TextInput-Gr3dUA-D.js";import{T as E}from"./TextHeader-BF1J3pF0.js";import{S as H}from"./StoreLogo-DlSeAaXm.js";import{A as P}from"./AddButton-AJSdtmPE.js";import{B as z}from"./BasicModal-CP2d9wVE.js";import{U as D}from"./UndoButton-Bnw0lTnp.js";import{T as W}from"./TextareaInput-4itNE9Nc.js";import{P as X}from"./PrimaryButton-I0X0LQCN.js";import{T as Y}from"./ToogleSwitch-DGGZx4WU.js";import{M as Z}from"./MobileNumberInput-BdEt4oHT.js";import{a as q}from"./api-repository-DaixBKlV.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputLabel-DfaakMiG.js";import"./MoreInfoPopover-BeTt5w0j.js";import"./InputErrorMessage-Dq6x8AzU.js";const O={mixins:[I,U],components:{Alert:A,draggable:N,TextInput:j,TextHeader:E,StoreLogo:H,AddButton:P,BasicModal:z,UndoButton:D,TextareaInput:W,PrimaryButton:X,ToogleSwitch:Y,MobileNumberInput:Z},data(){return{form:{socialLinks:[{name:"Facebook",link:"https://www.facebook.com/"}]},socialIcons:["Whatsapp","Telegram","Messenger","Facebook","Instagram","LinkedIn","YouTube","Snapchat","TikTok","Twitch","X"],socialLink:{name:"",link:""},storeState:x(),settings:V,isSubmitting:!1,originalForm:null}},watch:{},computed:{store(){return this.storeState.store},formHasChanged(){var e=h(this.form),o=h(this.originalForm);return!M(e,o)},canAddSocialLink(){return this.socialLink.name.length&&this.socialLink.link.length},mustSaveChanges(){return this.formHasChanged&&!this.isSubmitting}},methods:{setStoreFields(){this.form.socialLinks=this.store.socialLinks,this.ensureSocialLink("Whatsapp"),this.ensureSocialLink("Telegram"),this.ensureSocialLink("Messenger"),this.ensureSocialLink("Facebook"),this.ensureSocialLink("Instagram"),this.ensureSocialLink("LinkedIn"),this.ensureSocialLink("YouTube"),this.ensureSocialLink("Snapchat"),this.ensureSocialLink("TikTok"),this.ensureSocialLink("Twitch"),this.ensureSocialLink("X"),this.originalForm=h(this.form)},ensureSocialLink(e){this.form.socialLinks.some(u=>u.name===e)||this.form.socialLinks.push({name:e,link:""})},checkSocialIcon(e){return this.socialIcons.some(o=>o===e)},addSocialLink(e){this.form.socialLinks.some(u=>u.name===name)||this.form.socialLinks.push({name:this.socialLink.name,link:this.socialLink.link}),this.socialLink.name="",this.socialLink.link="",e()},removeSocialLink(e){this.form.socialLinks=this.form.socialLinks.filter(o=>o.name!==e)},resetForm(){this.form=h(this.originalForm)},updateStore(){this.isSubmitting=!0,q(this.store._links.updateStore,this.parseForm()).then(e=>{e.status==200&&(x().shouldUpdate=!0,this.originalForm=h(this.form),this.showSuccessfulNotification("Social links updated")),this.isSubmitting=!1}).catch(e=>{this.isSubmitting=!1,this.setServerFormErrors(e)})},parseForm(){var e=h(this.form);return e.socialLinks=e.socialLinks.map(o=>({name:o.name===""?null:o.name,link:o.link===""?null:o.link})),e}},mounted(){},created(){this.setStoreFields()}},J={class:"bg-white shadow-lg border p-8 rounded-lg mb-4"},K=s("h1",{class:"text-lg font-bold mb-2"},"Social Links",-1),Q=s("p",{class:"text-sm text-gray-500"}," Connect with your customers! ",-1),R=s("p",{class:"text-sm text-gray-500"}," Share your storeâ€™s social pages, groups, channels, or profiles to showcase your online community. ",-1),$={class:"mt-4",action:"#",method:"POST"},ee={class:"space-y-4"},se=s("div",{class:"flex items-center space-x-2"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})]),s("span",null,"Please save your changes")],-1),oe={class:"flex items-center space-x-2"},te=s("span",{class:"ml-1"},"Undo",-1),ie={class:"w-full"},ne={class:"flex items-center py-1.5 pl-4 pr-4 rounded-l-md bg-gray-50 text-gray-500 border-r whitespace-nowrap"},re=["src"],ae=s("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})],-1),le=["onClick"],ce=s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),me=[ce],de=s("svg",{class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})],-1),he={class:"flex justify-end"},ue=s("h1",{class:"font-lg font-bold mb-2"},"Add Social Link",-1),pe=s("p",{class:"text-sm text-gray-500 mb-4"},"Give us the name of the the social media platform and your store link",-1),ke=s("span",{class:"ml-2"},"Add",-1);function ge(e,o,u,fe,i,m){const L=d("Alert"),b=d("UndoButton"),w=d("PrimaryButton"),k=d("TextInput"),y=d("draggable"),T=d("AddButton"),F=d("BasicModal");return r(),l("div",J,[K,Q,R,s("form",$,[s("div",ee,[e.getFormError("general")?(r(),g(L,{key:0,type:"warning"},{default:a(()=>[_(v(e.getFormError("general")),1)]),_:1})):p("",!0),m.mustSaveChanges?(r(),g(L,{key:1,type:"warning",class:"flex justify-between items-center mb-2"},{default:a(()=>[se,s("div",oe,[c(b,{action:m.resetForm,type:"light",size:"xs"},{default:a(()=>[te]),_:1},8,["action"]),c(w,{action:m.updateStore,loading:i.isSubmitting,class:"w-40"},{default:a(()=>[_(" Save Changes ")]),_:1},8,["action","loading"])])]),_:1})):p("",!0),c(y,{class:"space-y-2",modelValue:i.form.socialLinks,"onUpdate:modelValue":o[0]||(o[0]=t=>i.form.socialLinks=t),handle:".draggable-handle","ghost-class":"bg-yellow-50"},{default:a(()=>[(r(!0),l(f,null,S(i.form.socialLinks,(t,n)=>(r(),l("div",{key:n,class:"flex items-center justify-between space-x-4"},[s("div",ie,[c(k,{placeholder:"https://",modelValue:i.form.socialLinks[n].link,"onUpdate:modelValue":B=>i.form.socialLinks[n].link=B,errorText:e.getFormError("socialLinks"+n+"Name")||e.getFormError("socialLinks"+n+"Link")},{prepend:a(()=>[s("div",ne,[m.checkSocialIcon(t.name)?(r(),l("img",{key:0,class:"w-8",src:i.settings.domainUrl+"/images/social-icons/"+t.name.toLowerCase()+".png"},null,8,re)):(r(),l(f,{key:1},[ae,s("span",null,v(t.name),1)],64))])]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"])]),this.checkSocialIcon(t.name)?p("",!0):(r(),l("svg",{key:0,onClick:()=>m.removeSocialLink(t.name),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},me,8,le)),de]))),128))]),_:1},8,["modelValue"]),(r(!0),l(f,null,S(i.form.socialLinks,(t,n)=>(r(),l("div",{key:n}))),128)),s("div",he,[c(F,null,{content:a(t=>[ue,pe,c(k,{placeholder:"MySpace",modelValue:i.socialLink.name,"onUpdate:modelValue":o[1]||(o[1]=n=>i.socialLink.name=n)},null,8,["modelValue"]),c(k,{modelValue:i.socialLink.link,"onUpdate:modelValue":o[2]||(o[2]=n=>i.socialLink.link=n),placeholder:"https://"},null,8,["modelValue"]),m.canAddSocialLink?(r(),g(w,{key:0,action:()=>m.addSocialLink(t.hideModal),size:"sm",type:"success",class:"mt-4"},{default:a(()=>[_(" Add ")]),_:2},1032,["action"])):p("",!0)]),trigger:a(t=>[C(e.$slots,"trigger",{showModal:t.showModal},()=>[c(T,{onClick:t.showModal,size:"sm"},{default:a(()=>[ke]),_:2},1032,["onClick"])])]),_:3})])])])])}const ze=G(O,[["render",ge]]);export{ze as default};
