import{P as C}from"./Pill-CD_3pjy5.js";import{F as A}from"./FormMixin-D44Bj-el.js";import{B as I}from"./Button-CTlUNYLQ.js";import{u as V,c as l,b as t,e as p,f as c,F as g,k as D,d,w as h,h as u,r as a,o as i,t as w,m as M}from"./app-DEkFCb1u.js";import{V as B}from"./vue-draggable-next.esm-bundler-C7oHOHQm.js";import{u as T}from"./store-store-CxinBL3L.js";import{S as N}from"./SearchInput-BKDyZ1Nd.js";import{C as j}from"./ConfirmModal-CKYpWGJT.js";import{L as F}from"./LineSkeleton-DFWRI7XC.js";import{P}from"./PrimaryButton-Cwf__Lsv.js";import{S as U}from"./SpinningLoader-BnJGVf_7.js";import{g as E,p as H,d as z}from"./api-repository-CIJPUswr.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-store-B_ZbhArT.js";import"./ShineEffect-CWpUJr6E.js";import"./cloneDeep-BGE7Bmb-.js";import"./index-D14zHmA0.js";import"./TextInput-CwB-G_mS.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./MoreInfoPopover-CrxGv8yo.js";/* empty css                                                                      */const q={mixins:[A],components:{Pill:C,Button:I,draggable:B,SearchInput:N,ConfirmModal:j,SpinningLoader:U,LineSkeleton:F,PrimaryButton:P},props:{form:{type:Object}},data(){return{searchTerm:"",deliveryMethods:[],apiState:V(),storeState:T(),deletableDeliveryMethod:null,isDeletingDeliveryMethodIds:[],isLoadingDeliveryMethods:!1,isUpdatingDeliveryMethodArrangement:!1}},watch:{searchTerm(o,e){this.showDeliveryMethods()}},computed:{store(){return this.storeState.store},isSearching(){return this.hasSearchTerm&&this.isLoadingDeliveryMethods},hasSearchTerm(){return this.searchTerm.length>0},hasDeliveryMethods(){return this.deliveryMethods.length>0}},methods:{onViewDeliveryMethod(o){this.$router.push({name:"show-store-delivery-method",params:{delivery_method_href:o._links.showDeliveryMethod}}).then(()=>{window.scrollTo(0,0)})},onAddDeliveryMethod(){this.$router.push({name:"create-store-delivery-method",params:{store_href:this.store._links.showStore}})},showDeleteConfirmationModal(o){this.deletableDeliveryMethod=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingDeliveryMethodIds.findIndex(e=>e==o.id)!=-1},showDeliveryMethods(){this.isLoadingDeliveryMethods=!0;const o={storeId:this.store.id};this.searchTerm&&(o.search=this.searchTerm),E(this.store._links.showStoreDeliveryMethods,o).then(e=>{e.status==200&&(this.pagination=e.data,this.deliveryMethods=this.pagination.data),this.isLoadingDeliveryMethods=!1}).catch(e=>{this.isLoadingDeliveryMethods=!1,this.setServerFormErrors(e)})},updateDeliveryMethodArrangement(){this.isUpdatingDeliveryMethodArrangement=!0;const o={storeId:this.store.id,deliveryMethodIds:this.deliveryMethods.map(e=>e.id)};H(this.apiState.apiHome._links.updateDeliveryMethodArrangement,o).then(e=>{e.status==200&&(e.data.updated?this.showSuccessfulNotification("Delivery method arrangement updated"):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message))),this.isUpdatingDeliveryMethodArrangement=!1}).catch(e=>{this.isUpdatingDeliveryMethodArrangement=!1,this.setServerFormErrors(e)})},deleteDeliveryMethod(o){this.isDeletingDeliveryMethodIds.push(this.deletableDeliveryMethod.id),z(this.deletableDeliveryMethod._links.deleteDeliveryMethod).then(e=>{o(),this.isDeletingDeliveryMethodIds.splice(this.isDeletingDeliveryMethodIds.findIndex(m=>m==this.deleteDeliveryMethod.id,1)),e.status==200&&(e.data.deleted?(this.showSuccessfulNotification("Delivery method deleted"),this.isDeletingDeliveryMethodIds.length==0&&this.showDeliveryMethods()):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)))}).catch(e=>{this.isDeletingDeliveryMethodIds.splice(this.isDeletingDeliveryMethodIds.findIndex(m=>m==this.deleteDeliveryMethod.id,1)),this.setServerFormErrors(e)})}},created(){this.showDeliveryMethods()}},G={class:"bg-white shadow-lg border p-8 rounded-lg"},J={class:"space-y-4"},K={key:1,class:"space-y-2"},Q={class:"w-full flex items-center justify-between"},R=["onClick"],W={class:"w-full flex items-center justify-between"},X={class:"text-sm font-semibold"},Y={class:"flex items-center space-x-2"},Z=["onClick"],$={key:0},ee={class:"flex justify-between items-center space-x-8 px-16 py-4 border rounded-lg bg-gray-50"},te={class:"space-y-2"},se={key:0,class:"font-bold"},oe={class:"mb-8"},re={class:"font-bold text-black"};function ie(o,e,m,le,n,r){const k=a("SearchInput"),y=a("LineSkeleton"),f=a("Pill"),b=a("SpinningLoader"),x=a("draggable"),_=a("Button"),S=a("PrimaryButton"),L=a("ConfirmModal");return i(),l("div",G,[e[13]||(e[13]=t("h1",{class:"flex items-center text-lg font-bold mb-2"},[t("svg",{class:"w-6 h-6 mr-2 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})]),t("span",null,"Delivery / Pickup Methods")],-1)),e[14]||(e[14]=t("p",{class:"text-sm text-gray-500 mb-4"}," Set up how your customers can get their orders, whether through delivery or pickup, to make it easy and convenient for them. ",-1)),t("div",J,[r.hasSearchTerm||r.hasDeliveryMethods?(i(),p(k,{key:0,modelValue:n.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=s=>n.searchTerm=s),isSearching:r.isSearching},null,8,["modelValue","isSearching"])):c("",!0),n.isLoadingDeliveryMethods?(i(),l("div",K,[(i(),l(g,null,D([1,2,3],(s,v)=>t("div",{key:v,class:"border shadow-sm rounded-lg p-4 bg-gray-50"},[t("div",Q,[d(y,{width:"w-32",shine:!0}),d(y,{width:"w-16",shine:!0})])])),64))])):(i(),l(g,{key:2},[d(x,{class:"space-y-2",modelValue:n.deliveryMethods,"onUpdate:modelValue":e[2]||(e[2]=s=>n.deliveryMethods=s),handle:".draggable-handle","ghost-class":"bg-yellow-50",onChange:r.updateDeliveryMethodArrangement},{default:h(()=>[(i(!0),l(g,null,D(n.deliveryMethods,(s,v)=>(i(),l("div",{onClick:()=>r.onViewDeliveryMethod(s),key:v,class:"flex items-center justify-between space-x-4 border shadow-sm rounded-lg p-4 bg-gray-50 cursor-pointer hover:border-blue-200 hover:bg-blue-50 group"},[t("div",W,[t("h1",X,w(s.name),1),t("div",Y,[d(f,{type:s.active?"success":"warning",text:s.active?"Active":"Inactive",showDot:!1},null,8,["type","text"])])]),r.isDeleting(s)?(i(),p(b,{key:0,type:"danger"},{default:h(()=>e[3]||(e[3]=[t("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(i(),l("svg",{key:1,onClick:M(ne=>r.showDeleteConfirmationModal(s),["stop","prevent"]),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)]),8,Z)),(i(),l("svg",{onClick:e[1]||(e[1]=M(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])))],8,R))),128))]),_:1},8,["modelValue","onChange"]),r.hasDeliveryMethods?c("",!0):(i(),l("div",$,[t("div",ee,[e[8]||(e[8]=t("svg",{class:"w-80 text-gray-300",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.25 18.75a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h6m-9 0H3.375a1.125 1.125 0 0 1-1.125-1.125V14.25m17.25 4.5a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m3 0h1.125c.621 0 1.129-.504 1.09-1.124a17.902 17.902 0 0 0-3.213-9.193 2.056 2.056 0 0 0-1.58-.86H14.25M16.5 18.75h-2.25m0-11.177v-.958c0-.568-.422-1.048-.987-1.106a48.554 48.554 0 0 0-10.026 0 1.106 1.106 0 0 0-.987 1.106v7.635m12-6.677v6.677m0 4.5v-4.5m0 0h-12"})],-1)),t("div",te,[r.hasSearchTerm?(i(),l("p",se,"No delivery methods found.")):c("",!0),t("p",null,[e[6]||(e[6]=u("Click the ")),d(f,{type:"primary",text:"+ Add Delivery Method",showDot:!1,clickable:!0,action:()=>r.onAddDeliveryMethod()},null,8,["action"]),e[7]||(e[7]=u(" button to offer your customers convenient delivery methods on your store"))])])])]))],64)),d(_,{type:"light",size:"sm",skeleton:n.isLoadingDeliveryMethods,action:()=>r.onAddDeliveryMethod()},{default:h(()=>e[9]||(e[9]=[t("span",{class:"ml-2"},"Add Delivery Method",-1)])),_:1},8,["skeleton","action"]),n.deletableDeliveryMethod?(i(),p(L,{key:3,approveText:"Delete",approveAction:s=>r.deleteDeliveryMethod(s),isLoading:r.isDeleting(r.deleteDeliveryMethod)},{content:h(()=>[e[12]||(e[12]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",oe,[e[10]||(e[10]=u("Are you sure you want to delete ")),t("span",re,w(n.deletableDeliveryMethod.name),1),e[11]||(e[11]=u("?"))])]),trigger:h(s=>[d(S,{ref:"confirmDeleteButton",action:s.showModal,class:"hidden",type:"danger"},null,8,["action"])]),_:1},8,["approveAction","isLoading"])):c("",!0)])])}const Ae=O(q,[["render",ie]]);export{Ae as default};
