import{L as e}from"./app-piavnWUw.js";import{U as n}from"./SpiningLoader-COnJLsaj.js";const a=e("notification",{state:()=>({notifications:[]}),actions:{addSuccessNotification(r){this.addNotification(r,"success-notification")},addWarningNotification(r){this.addNotification(r,"warning-notification")},addNotification(r,t){this.notifications.push({type:t,message:r,id:n.methods.generateUniqueId("notification")})}}}),c={data(){return{formErrors:{},formErrorsTimeout:null,notificationState:a()}},computed:{hasErrors(){return Object.keys(this.formErrors).length>0},generalErrorText(){this.formErrors.hasOwnProperty("general")&&this.formErrors.general}},methods:{showSuccessfulNotification(r){this.notificationState.addSuccessNotification(r)},showUnsuccessfulNotification(r){this.notificationState.addWarningNotification(r)},setServerFormErrors(r){if(this.hideFormErrors(),(r.response??{}).status==422){var t=((r.response??{}).data??{}).errors??{};this.formErrors=Object.keys(t).reduce((i,s)=>(i[s]=t[s][0],i),{})}else{var o=((r.response??{}).data??{}).message??r.message;this.setGeneralFormError(o),o!=null&&this.showUnsuccessfulNotification(o)}this.setFormErrorsTimeout()},setGeneralFormError(r){this.setFormError("general",r)},setFormError(r,t){this.formErrors[r]=t,this.setFormErrorsTimeout()},getFormError(r){return this.formErrors[r]??null},hideFormErrors(){this.formErrors={}},setFormErrorsTimeout(){this.clearFormErrorsTimeout(),this.formErrorsTimeout=setTimeout(()=>this.hideFormErrors(),5e3)},clearFormErrorsTimeout(){clearTimeout(this.formErrorsTimeout)}}};export{c as F,a as u};
