import{c as d,i as B}from"./cloneDeep-Cj89CU0d.js";import{s as I,u as C,c as h,d as e,e as n,f,w as r,g,r as l,o as c,i as _,F as S,l as T,t as V,k as A}from"./app-Kf0mCOXy.js";import{A as U}from"./Alert-BHnqwbfj.js";import{F as E}from"./FormMixin-CYiBG1ca.js";import{U as N}from"./SpiningLoader-CsPmXxst.js";import{V as j}from"./vue-draggable-next.esm-bundler-DinbD466.js";import{u as L}from"./store-store-C2_eLuQh.js";import{T as H}from"./TextInput-_gM6fl6u.js";import{T as P}from"./TextHeader-Cdgnrugi.js";import{S as z}from"./StoreLogo-zYi9lXOD.js";import{A as D}from"./AddButton-YPx_iiuG.js";import{B as Z}from"./BasicModal-CDGWEgr6.js";import{U as q}from"./UndoButton-BBUKxXJA.js";import{T as G}from"./TextareaInput-Cp6x4S0k.js";import{P as O}from"./PrimaryButton-DULDYb5e.js";import{T as W}from"./ToogleSwitch-CDDQu6G0.js";import{M as X}from"./MobileNumberInput-E_RreW9n.js";import{F as Y}from"./FormErrorMessages-Bdf-el1D.js";import{g as J,a as K}from"./api-repository-C4cDgx_E.js";import{_ as Q}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./InputLabel-B11U1-WT.js";import"./MoreInfoPopover-gLIaCQca.js";import"./InputErrorMessage-B1NpEu7u.js";const R={mixins:[E,N],components:{Alert:U,draggable:j,TextInput:H,TextHeader:P,StoreLogo:z,AddButton:D,BasicModal:Z,UndoButton:q,TextareaInput:G,PrimaryButton:O,ToogleSwitch:W,MobileNumberInput:X,FormErrorMessages:Y},data(){return{form:{socialLinks:[]},socialLink:{name:"",link:""},settings:I,originalForm:null,isSubmitting:!1,socialMediaIcons:[],apiState:C(),isLoadingSocialMediaIcons:!1,storeState:L()}},watch:{},computed:{store(){return this.storeState.store},formHasChanged(){var s=d(this.form),o=d(this.originalForm);return!B(s,o)},canAddSocialLink(){return this.socialLink.name.length&&this.socialLink.link.length},mustSaveChanges(){return this.formHasChanged&&!this.isSubmitting}},methods:{setStoreFields(){this.form.socialLinks=this.store.socialLinks,this.ensureSocialLink("Whatsapp"),this.ensureSocialLink("Telegram"),this.ensureSocialLink("Messenger"),this.ensureSocialLink("Facebook"),this.ensureSocialLink("Instagram"),this.ensureSocialLink("LinkedIn"),this.ensureSocialLink("YouTube"),this.ensureSocialLink("Snapchat"),this.ensureSocialLink("TikTok"),this.ensureSocialLink("Twitch"),this.ensureSocialLink("X"),this.originalForm=d(this.form)},ensureSocialLink(s){this.form.socialLinks.some(u=>u.name===s)||this.form.socialLinks.push({name:s,link:""})},hasMatchingSocialMediaIcon(s){return this.socialMediaIcons.some(o=>o.name.toLowerCase()===s.toLowerCase())},addSocialLink(s){this.form.socialLinks.some(u=>u.name===name)||this.form.socialLinks.push({name:this.socialLink.name,link:this.socialLink.link}),this.socialLink.name="",this.socialLink.link="",s()},removeSocialLink(s){this.form.socialLinks=this.form.socialLinks.filter(o=>o.name!==s)},resetForm(){this.form=d(this.originalForm)},showSocialMediaIcons(){this.socialMediaIcons.length||(this.isLoadingSocialMediaIcons=!0,J(this.apiState.apiHome._links.showSocialMediaIcons).then(s=>{s.status==200&&(this.socialMediaIcons=s.data,this.setStoreFields()),this.isLoadingSocialMediaIcons=!1}).catch(s=>{this.isLoadingSocialMediaIcons=!1,this.setServerFormErrors(s)}))},updateStore(){this.isSubmitting=!0,K(this.store._links.updateStore,this.parseForm()).then(s=>{s.status==200&&(L().shouldUpdate=!0,this.originalForm=d(this.form),this.showSuccessfulNotification("Social links updated")),this.isSubmitting=!1}).catch(s=>{this.isSubmitting=!1,this.setServerFormErrors(s)})},parseForm(){var s=d(this.form);return s.socialLinks=s.socialLinks.map(o=>({name:o.name===""?null:o.name,link:o.link===""?null:o.link})),s}},mounted(){},created(){this.showSocialMediaIcons()}},$={class:"bg-white shadow-lg border p-8 rounded-lg mb-4"},ss=e("h1",{class:"text-lg font-bold mb-2"},"Social Links",-1),es=e("p",{class:"text-sm text-gray-500"}," Connect with your customers! ",-1),os=e("p",{class:"text-sm text-gray-500"}," Share your storeâ€™s social pages, groups, channels, or profiles to showcase your online community. ",-1),ts={class:"mt-4",action:"#",method:"POST"},is={class:"space-y-4"},as=e("div",{class:"flex items-center space-x-2"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})]),e("span",null,"Please save your changes")],-1),ns={class:"flex items-center space-x-2"},rs=e("span",{class:"ml-1"},"Undo",-1),ls={class:"w-full"},cs={class:"flex items-center py-1.5 pl-4 pr-4 rounded-l-md bg-gray-50 text-gray-500 border-r whitespace-nowrap"},ms=["src"],ds=e("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})],-1),hs=["onClick"],us=e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),ps=[us],gs=e("svg",{class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})],-1),ks={class:"flex justify-end"},fs=e("h1",{class:"font-lg font-bold mb-2"},"Add Social Link",-1),_s=e("p",{class:"text-sm text-gray-500 mb-4"},"Give us the name of the the social media platform and your store link",-1),Ss={class:"space-y-4"},Ls=e("span",{class:"ml-2"},"Add",-1);function ws(s,o,u,vs,i,m){const w=l("FormErrorMessages"),v=l("UndoButton"),k=l("PrimaryButton"),x=l("Alert"),p=l("TextInput"),M=l("draggable"),b=l("AddButton"),y=l("BasicModal");return c(),h("div",$,[ss,es,os,e("form",ts,[e("div",is,[n(w),m.mustSaveChanges?(c(),f(x,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:r(()=>[as,e("div",ns,[n(v,{action:m.resetForm,type:"light",size:"xs"},{default:r(()=>[rs]),_:1},8,["action"]),n(k,{action:m.updateStore,loading:i.isSubmitting,class:"w-40"},{default:r(()=>[_(" Save Changes ")]),_:1},8,["action","loading"])])]),_:1})):g("",!0),n(M,{class:"space-y-2",modelValue:i.form.socialLinks,"onUpdate:modelValue":o[0]||(o[0]=t=>i.form.socialLinks=t),handle:".draggable-handle","ghost-class":"bg-yellow-50"},{default:r(()=>[(c(!0),h(S,null,T(i.form.socialLinks,(t,a)=>(c(),h("div",{key:a,class:"flex items-center justify-between space-x-4"},[e("div",ls,[n(p,{placeholder:"https://",modelValue:i.form.socialLinks[a].link,"onUpdate:modelValue":F=>i.form.socialLinks[a].link=F,errorText:s.getFormError("socialLinks"+a+"Name")||s.getFormError("socialLinks"+a+"Link")},{prepend:r(()=>[e("div",cs,[m.hasMatchingSocialMediaIcon(t.name)?(c(),h("img",{key:0,class:"w-8",src:i.settings.domainUrl+"/images/social-icons/"+t.name.toLowerCase()+".png"},null,8,ms)):(c(),h(S,{key:1},[ds,e("span",null,V(t.name),1)],64))])]),_:2},1032,["modelValue","onUpdate:modelValue","errorText"])]),this.hasMatchingSocialMediaIcon(t.name)?g("",!0):(c(),h("svg",{key:0,onClick:()=>m.removeSocialLink(t.name),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ps,8,hs)),gs]))),128))]),_:1},8,["modelValue"]),e("div",ks,[n(y,null,{content:r(t=>[fs,_s,e("div",Ss,[n(p,{placeholder:"MySpace",modelValue:i.socialLink.name,"onUpdate:modelValue":o[1]||(o[1]=a=>i.socialLink.name=a)},null,8,["modelValue"]),n(p,{modelValue:i.socialLink.link,"onUpdate:modelValue":o[2]||(o[2]=a=>i.socialLink.link=a),placeholder:"https://"},null,8,["modelValue"])]),m.canAddSocialLink?(c(),f(k,{key:0,action:()=>m.addSocialLink(t.hideModal),size:"sm",type:"success",class:"mt-4"},{default:r(()=>[_(" Add ")]),_:2},1032,["action"])):g("",!0)]),trigger:r(t=>[A(s.$slots,"trigger",{showModal:t.showModal},()=>[n(b,{onClick:t.showModal,size:"sm"},{default:r(()=>[Ls]),_:2},1032,["onClick"])])]),_:3})])])])])}const Ws=Q(R,[["render",ws]]);export{Ws as default};
