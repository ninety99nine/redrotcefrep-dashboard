import{F as k}from"./FormMixin-D44Bj-el.js";import{U as _}from"./form-store-B_ZbhArT.js";import{B as b}from"./Button-CTlUNYLQ.js";import{S as T}from"./SpinningLoader-BnJGVf_7.js";import{g as L,p as C}from"./api-repository-CIJPUswr.js";import{M as F}from"./MoreInfoPopover-CrxGv8yo.js";import{c as i,b as t,f as r,F as d,h as m,e as h,n as u,t as l,k as M,w as p,d as f,r as g,o as n}from"./app-DEkFCb1u.js";import{_ as S}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./ShineEffect-CWpUJr6E.js";const B={mixins:[k,_],components:{Button:b,SpinningLoader:T,MoreInfoPopover:F},data(){return{transaction:null,transactionHref:null,isLoadingTransaction:!1,transactionDescription:null,isGeneratingPaymentLink:!1,isRenewTransactionPaymentLink:!1}},computed:{isPaid(){return this.transaction._attributes.isPaid},isFailedPayment(){return this.transaction._attributes.isFailedPayment},isPendingPayment(){return this.transaction._attributes.isPendingPayment},store(){return this.transaction._relationships.store},pricingPlan(){return this.transaction._relationships.pricingPlan},dpoPaymentUrl(){return this.transaction.metadata.dpoPaymentUrl},dpoPaymentLinkHasExpired(){return this.transaction.metadata.dpoPaymentLinkHasExpired}},methods:{changePricingPlan(o){this.activePricingPlan=o},showTransaction(){this.isLoadingTransaction=!0;let s={_relationships:["owner","store","aiAssistant"].join(",")};L(this.transactionHref,s).then(c=>{c.status==200&&c.data.exists&&(this.transaction=c.data.transaction),this.isLoadingTransaction=!1}).catch(c=>{this.isLoadingTransaction=!1,this.formState.setServerFormErrors(c)})},makePayment(){this.dpoPaymentLinkHasExpired?this.renewTransactionPaymentLink():(this.isRenewTransactionPaymentLink=!0,window.location.assign(this.dpoPaymentUrl))},renewTransactionPaymentLink(){this.isRenewTransactionPaymentLink||(this.isRenewTransactionPaymentLink=!0,C(this.transaction._links.renewTransactionPaymentLink).then(o=>{if(o.status==200&&o.data.successful){const c=o.data.transaction.metadata.dpoPaymentUrl;window.location.href=c}else this.isRenewTransactionPaymentLink=!1}).catch(o=>{this.isRenewTransactionPaymentLink=!1,this.formState.setServerFormErrors(o)}))},navigateToStoreHome(){this.$router.push({name:"show-store-home",params:{store_href:this.store._links.showStore}})}},created(){this.transactionHref=this.$route.query.transactionHref,this.showTransaction()}},H={class:"min-h-screen relative overflow-hidden pb-80"},R={class:"z-10 pt-32 px-20 relative"},Z={class:"flex flex-col items-center mb-10"},V={class:"flex flex-col items-center space-y-2 text-xl text-gray-700 font-semibold mb-4"},A={key:0,class:"text-4xl"},U={class:"w-96 text-sm text-gray-500 text-center"},z={class:"flex flex-col items-center mb-8"},E={class:"flex justify-center space-x-4 mb-8"},I={class:"flex items-center space-x-2 mb-2"},j={key:0,class:"w-8 h-8 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},D={key:1,class:"w-8 h-8 text-yellow-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},N={key:2,class:"w-8 h-8 text-red-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},W={key:0,class:"text-red-500 p-4 bg-red-50 border border-red-300 rounded-lg mb-4"},q={class:"text-sm font-semibold mb-2"},G={key:0,class:"text-xs"},J={class:"bg-gray-50 border p-4 rounded-lg mb-4"},K={class:"text-gray-500 text-xs"},O={class:"flex items-center space-x-2 text-xs mb-2"},Q={class:"text-gray-400"},X={class:"flex items-center space-x-2 text-xs"},Y={class:"text-gray-400"},$={class:"flex justify-center"};function tt(o,s,c,et,a,e){const w=g("SpinningLoader"),y=g("Button"),x=g("MoreInfoPopover");return n(),i("div",H,[t("div",R,[t("div",Z,[t("h1",V,[!a.isLoadingTransaction&&e.isPaid?(n(),i("span",A,"ðŸŽ‰")):r("",!0),s[0]||(s[0]=t("span",null,"Transaction Status",-1))]),t("p",U,[a.isLoadingTransaction?(n(),i(d,{key:0},[m(" Hang tight! We're checking the transaction status ")],64)):e.isPaid?(n(),i(d,{key:1},[m(" This transaction has been paid successully ")],64)):e.isPendingPayment?(n(),i(d,{key:2},[m(" This transaction is still waiting to payment ")],64)):e.isFailedPayment?(n(),i(d,{key:3},[m(" This transaction has failed ")],64)):r("",!0)])]),t("div",z,[s[1]||(s[1]=t("img",{src:"/images/store-rooftop.png",class:"w-96"},null,-1)),a.isLoadingTransaction?(n(),h(w,{key:0,class:"mt-16"})):r("",!0)]),a.isLoadingTransaction?r("",!0):(n(),i(d,{key:0},[t("div",E,[t("div",{class:u([{"animated-border-green":e.isPaid},{"animated-border-red":e.isFailedPayment},{"animated-border-cyan":e.isPendingPayment},"w-96 bg-white py-4 px-4 shadow-sm rounded-xl"])},[t("div",I,[e.isPaid?(n(),i("svg",j,s[2]||(s[2]=[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"},null,-1)]))):r("",!0),e.isPendingPayment?(n(),i("svg",D,s[3]||(s[3]=[t("path",{"fill-rule":"evenodd",d:"M12 2.25c-5.385 0-9.75 4.365-9.75 9.75s4.365 9.75 9.75 9.75 9.75-4.365 9.75-9.75S17.385 2.25 12 2.25ZM12.75 6a.75.75 0 0 0-1.5 0v6c0 .414.336.75.75.75h4.5a.75.75 0 0 0 0-1.5h-3.75V6Z","clip-rule":"evenodd"},null,-1)]))):r("",!0),e.isFailedPayment?(n(),i("svg",N,s[4]||(s[4]=[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12ZM12 8.25a.75.75 0 0 1 .75.75v3.75a.75.75 0 0 1-1.5 0V9a.75.75 0 0 1 .75-.75Zm0 8.25a.75.75 0 1 0 0-1.5.75.75 0 0 0 0 1.5Z","clip-rule":"evenodd"},null,-1)]))):r("",!0),t("h1",{class:u([{"text-green-500":e.isPaid},{"text-red-500":e.isFailedPayment},{"text-yellow-500":e.isPendingPayment},"text-xl font-bold"])},l(o.capitalize(a.transaction.paymentStatus.name)),3)]),t("h2",{class:u([{"text-green-500":e.isPaid},{"text-red-500":e.isFailedPayment},{"text-yellow-500":e.isPendingPayment},"text-sm mb-4"])},l(a.transaction.description),3),t("h2",{class:u([{"text-green-500":e.isPaid},{"text-red-500":e.isFailedPayment},{"text-yellow-500":e.isPendingPayment},"text-3xl text-gray-700 font-bold space-x-1 mb-4"])},[t("span",null,l(a.transaction.amount.amountWithCurrency),1)],2),e.isFailedPayment?(n(),i("div",W,[t("p",q,l(a.transaction.failureType??"Failure Reason"),1),a.transaction.failureReason?(n(),i("p",G,l(a.transaction.failureReason),1)):r("",!0)])):r("",!0),t("div",J,[(n(!0),i(d,null,M(a.transaction._relationships.owner.features,(P,v)=>(n(),i("div",{key:v},[t("span",K,l(P),1)]))),128))]),e.isPendingPayment?(n(),h(y,{key:1,size:"sm",type:"primary",class:"w-full mb-4",onClick:e.makePayment,loading:a.isRenewTransactionPaymentLink},{default:p(()=>s[5]||(s[5]=[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),t("span",null,"Make Payment",-1)])),_:1},8,["onClick","loading"])):r("",!0),e.isFailedPayment?(n(),h(y,{key:2,size:"sm",type:"primary",class:"w-full mb-4",onClick:e.makePayment,loading:a.isRenewTransactionPaymentLink},{default:p(()=>s[6]||(s[6]=[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M4.755 10.059a7.5 7.5 0 0 1 12.548-3.364l1.903 1.903h-3.183a.75.75 0 1 0 0 1.5h4.992a.75.75 0 0 0 .75-.75V4.356a.75.75 0 0 0-1.5 0v3.18l-1.9-1.9A9 9 0 0 0 3.306 9.67a.75.75 0 1 0 1.45.388Zm15.408 3.352a.75.75 0 0 0-.919.53 7.5 7.5 0 0 1-12.548 3.364l-1.902-1.903h3.183a.75.75 0 0 0 0-1.5H2.984a.75.75 0 0 0-.75.75v4.992a.75.75 0 0 0 1.5 0v-3.18l1.9 1.9a9 9 0 0 0 15.059-4.035.75.75 0 0 0-.53-.918Z","clip-rule":"evenodd"})],-1),t("span",null,"Retry Payment",-1)])),_:1},8,["onClick","loading"])):r("",!0),e.isPaid?(n(),i(d,{key:3},[t("div",O,[t("span",Q,l(o.formattedDatetime(a.transaction.createdAt)),1),f(x,{title:"What Is This?",description:"This is the transaction date",placement:"top"})]),t("div",X,[t("span",Y,l(a.transaction.id),1),f(x,{title:"What Is This?",description:"This is the transaction ID",placement:"top"})])],64)):r("",!0)],2)]),t("div",$,[e.store?(n(),h(y,{key:0,onClick:e.navigateToStoreHome,type:e.isPaid?"primary":"light",size:"xs"},{default:p(()=>[t("span",null,l(e.store.name),1),s[7]||(s[7]=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M16.72 7.72a.75.75 0 0 1 1.06 0l3.75 3.75a.75.75 0 0 1 0 1.06l-3.75 3.75a.75.75 0 1 1-1.06-1.06l2.47-2.47H3a.75.75 0 0 1 0-1.5h16.19l-2.47-2.47a.75.75 0 0 1 0-1.06Z","clip-rule":"evenodd"})],-1))]),_:1},8,["onClick","type"])):r("",!0)])],64))]),s[8]||(s[8]=t("img",{src:"/images/confetti.png",class:"absolute top-1/2 opacity-10"},null,-1)),s[9]||(s[9]=t("img",{src:"/images/clouds.png",class:"absolute top-32"},null,-1))])}const mt=S(B,[["render",tt]]);export{mt as default};
