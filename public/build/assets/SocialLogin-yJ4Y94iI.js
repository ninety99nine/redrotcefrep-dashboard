import{F as g}from"./FormMixin-CKU7-6TW.js";import{U as f}from"./UtilsMixin-CBwmyCNB.js";import{a as p,c as s,b as r,n as _,i as y,d as a,w as c,T as b,t as l,r as d,o as t,e as x}from"./app-DKsaVPPK.js";import{S as L}from"./ShineEffect-C-NATXyb.js";import{s as S}from"./auth-repository-C8WAGsyI.js";import{R as k}from"./RoundSkeleton-B15FCIkx.js";import{F as v}from"./FormErrorMessages-04LAAIQc.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-store-BwizIfv1.js";const M={mixins:[g,f],components:{ShineEffect:L,RoundSkeleton:k,FormErrorMessages:v},data(){return{countdown:5,errorMessage:null,isLoadingLogo:!0,countdownInterval:null,authState:p(),error:this.$route.query.error,logoUrl:this.$route.query.logo_url,provider:this.$route.query.provider,accessToken:this.$route.query.token,errorDescription:this.$route.query.error_description}},computed:{borderColor(){return this.errorMessage?"#e02523":{google:"#df4b39",linkedin:"#117bb8",facebook:"#3f5c9b"}[this.provider]}},methods:{onLogoLoaded(){this.isLoadingLogo=!1},startCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown-=1:(clearInterval(this.countdownInterval),this.$router.replace({name:"login"}))},1e3)},attemptSocialLogin(){S(this.accessToken).then(o=>{o.status==200&&(this.$router.replace({name:"dashboard"}),this.showSuccessfulNotification("Welcome back "+this.authState.user.firstName))}).catch(o=>{this.setServerFormErrors(o),this.hasErrors&&(this.errorMessage=this.formErrors[0])})}},created(){this.errorDescription||this.error?(this.errorMessage=this.errorDescription||this.error,this.startCountdown()):this.attemptSocialLogin()}},E={class:"flex min-h-screen flex-col justify-center items-center px-6 py-12 lg:px-8 bg-gray-200"},C={class:"relative inline-flex items-center justify-center w-28 h-28"},I=["src"],R=["src"],q={key:0,class:"mt-8"},F={class:"font-medium text-red-500 text-sm mb-4"},U={class:"text-gray-400 text-sm text-center"},B={key:1,class:"text-gray-400 text-center mt-8"};function D(o,n,N,T,e,i){const u=d("RoundSkeleton"),h=d("ShineEffect");return t(),s("div",E,[r("div",C,[r("div",{class:_(["absolute inset-0 animate-spin rounded-full border-4 border-gray-300"]),style:y("border-top-color:"+i.borderColor+";")},null,4),a(b,{name:"fade-1",mode:"out-in"},{default:c(()=>[e.isLoadingLogo?(t(),x(h,{key:0,class:"rounded-full"},{default:c(()=>[a(u,{color:"bg-gray-200",size:"w-20 h-20",class:"border border-gray-300"})]),_:1})):(t(),s("img",{key:1,src:e.logoUrl,alt:"Social Logo",class:"w-20 h-20 relative"},null,8,I))]),_:1})]),r("img",{src:e.logoUrl,onLoad:n[0]||(n[0]=(...m)=>i.onLogoLoaded&&i.onLogoLoaded(...m)),class:"hidden"},null,40,R),e.errorMessage?(t(),s("div",q,[r("p",F,l(e.errorMessage),1),r("p",U,l(e.countdown==0?"Redirecting...":`${"Redirecting in "+e.countdown}`),1)])):(t(),s("p",B,"Logging In"))])}const K=w(M,[["render",D]]);export{K as default};
