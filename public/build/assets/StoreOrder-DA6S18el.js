import{r as l,o as s,c as o,b as t,F as b,k,d as i,f as m,j as W,w as y,t as c,e as _,n as I,h as B,p as H,u as Z,m as A}from"./app-DEkFCb1u.js";import{F as j}from"./FormMixin-D44Bj-el.js";import{B as S}from"./Button-CTlUNYLQ.js";import{U as Y}from"./form-store-B_ZbhArT.js";import{T as K}from"./TextInput-CwB-G_mS.js";import{C as Q,u as V,S as J,P as X}from"./CollectionStatus-W0gkLP_P.js";import{u as C}from"./store-store-CxinBL3L.js";import{S as U}from"./SelectInput-DXfLro8i.js";import{T as R}from"./TextareaInput-CtY-WADI.js";import{L as M}from"./LineSkeleton-DFWRI7XC.js";import{M as ee}from"./MoreInfoPopover-CrxGv8yo.js";import{P as E}from"./Pill-CD_3pjy5.js";import{_ as L}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as te}from"./CopyToClipboard-HFvSmN7m.js";import{G as se}from"./GoogleMaps-BO2i0bSd.js";import{C as z}from"./ConfirmModal-CKYpWGJT.js";import{V as re}from"./vue-draggable-next.esm-bundler-C7oHOHQm.js";import{C as oe}from"./Checkbox-BOFyOk4h.js";import{T as ne}from"./ToogleSwitch-CtY-gb5u.js";import"./ShineEffect-CWpUJr6E.js";import"./SpinningLoader-BnJGVf_7.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./cloneDeep-BGE7Bmb-.js";import"./api-repository-CIJPUswr.js";const ae={components:{Pill:E,Button:S,LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},data(){return{}},computed:{},methods:{}},ie={key:0,class:"space-y-2"},de={class:"w-full flex items-center justify-between"};function le(r,e,a,w,d,n){const h=l("LineSkeleton");return s(),o("div",null,[e[0]||(e[0]=t("h1",{class:"text-lg text-gray-700 font-semibold mb-4"},"Payments",-1)),a.isLoadingOrder?(s(),o("div",ie,[(s(),o(b,null,k([1,2,3],(p,f)=>t("div",{key:f,class:"border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t("div",de,[i(h,{width:"w-32",shine:!0}),i(h,{width:"w-16",shine:!0})])])),64))])):m("",!0),e[1]||(e[1]=t("div",null," Payments ",-1))])}const ue=L(ae,[["render",le]]),ce={mixins:[j],components:{Button:S,SelectInput:U,LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},data(){return{teamMembers:[],teamMemberId:null,isLoadingTeamMembers:!1,storeState:C()}},watch:{isLoadingOrder(r){r||this.getTeamMembers()}},computed:{store(){return this.storeState.store}},methods:{async getTeamMembers(){this.isLoadingTeamMembers=!0,await W.get(this.store._links.showStoreTeamMembers).then(r=>{if(r.status==200){const e=r.data;this.teamMembers=e.data,this.teamMemberId=this.teamMembers[0].id}else this.formState.setFormError("general",r.data.message),this.notificationState.showWarningNotification(r.data.message)}).catch(r=>{this.formState.setServerFormErrors(r)}),this.isLoadingTeamMembers=!1}}},he={class:"bg-white rounded-lg p-4 mb-4"},pe={key:0,class:"w-full border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50 space-y-1"},me={key:1},ge=["value"];function we(r,e,a,w,d,n){const h=l("LineSkeleton"),p=l("SelectInput");return s(),o("div",he,[e[2]||(e[2]=t("div",{class:"flex items-center space-x-2 mb-4"},[t("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})]),t("span",{class:"text-gray-700 font-semibold"},"Team Member")],-1)),a.isLoadingOrder?(s(),o("div",pe,[i(h,{width:"w-2/3",shine:!0}),i(h,{width:"w-1/3",shine:!0})])):(s(),o("div",me,[i(p,{width:"w-full",modelValue:d.teamMemberId,"onUpdate:modelValue":e[0]||(e[0]=f=>d.teamMemberId=f)},{default:y(()=>[e[1]||(e[1]=t("option",{value:null},"Unassigned",-1)),(s(!0),o(b,null,k(d.teamMembers,(f,u)=>(s(),o("option",{value:f.id,key:u},c(f._attributes.name),9,ge))),128))]),_:1},8,["modelValue"])]))])}const fe=L(ce,[["render",we]]),ye={components:{Button:S,CopyToClipboard:te},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},data(){return{storeState:C()}},computed:{store(){return this.storeState.store},paymentLink(){return"https://www.google.com"}}},_e={class:"bg-white rounded-lg p-4 mb-4"},be={class:"flex space-x-1 items-stretch"},xe=["href"];function ve(r,e,a,w,d,n){const h=l("CopyToClipboard"),p=l("Button");return s(),o("div",_e,[e[0]||(e[0]=t("div",{class:"flex items-center space-x-2 mb-4"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})]),t("span",{class:"text-gray-700 font-semibold"},"Payment Link")],-1)),t("div",be,[i(h,{text:n.paymentLink,placeholder:"...",loading:a.isLoadingOrder},null,8,["text","loading"]),t("a",{href:n.paymentLink,target:"_blank"},[i(p,{type:"light",size:"sm",icon:"externalLink",wrapperClass:"h-full",class:"h-full"})],8,xe)])])}const ke=L(ye,[["render",ve]]),Le={components:{LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},computed:{hasFeeTotal(){return this.isLoadingOrder?!1:this.order.feeTotal.amount>0},hasDiscountTotal(){return this.isLoadingOrder?!1:this.order.discountTotal.amount>0},orderFees(){return this.isLoadingOrder?[]:this.order._relationships.orderFees},orderDiscounts(){return this.isLoadingOrder?[]:this.order._relationships.orderDiscounts}}},Oe={class:"bg-blue-50 border border-blue-400 rounded-lg p-4"},Se={key:0,class:"flex items-center justify-between text-sm border-b border-dashed pb-2 mb-2"},Ce={key:1},Me={key:1,class:"border-b border-dashed pb-2 mb-2"},Te={key:1},$e={key:3},Be={class:"border-b border-dashed pb-2 mb-2"},Pe={class:"flex items-center justify-between text-sm mb-1"},De={key:1,class:"w-full"},Fe={key:3},We={key:1,class:"text-xs text-gray-400"},Ve={key:2,class:"border-b border-dashed pb-2 mb-2"},je={key:1},Ne={key:3},Ie={class:"flex items-center justify-between text-base pt-2"},Ae={key:1,class:"font-bold"};function He(r,e,a,w,d,n){const h=l("LineSkeleton");return s(),o("div",Oe,[a.isLoadingOrder||n.hasDiscountTotal||n.hasFeeTotal?(s(),o("div",Se,[e[0]||(e[0]=t("span",null,"Subtotal",-1)),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-24",color:"bg-blue-200",shine:!0})):(s(),o("span",Ce,c(a.order.subtotal.amountWithCurrency),1))])):m("",!0),a.isLoadingOrder||n.hasDiscountTotal?(s(),o("div",Me,[(s(!0),o(b,null,k(a.isLoadingOrder?[1]:n.orderDiscounts,(p,f)=>(s(),o("div",{key:f,class:"flex items-center justify-between text-sm text-gray-500"},[a.isLoadingOrder?(s(),_(h,{key:0,width:"w-24",color:"bg-blue-200",shine:!0})):(s(),o("span",Te,c(p.name),1)),a.isLoadingOrder?(s(),_(h,{key:2,width:"w-20",color:"bg-blue-200",shine:!0})):(s(),o("span",$e,c(p.amount.amountWithCurrency),1))]))),128))])):m("",!0),t("div",Be,[t("div",Pe,[a.isLoadingOrder?(s(),_(h,{key:0,width:"w-16",color:"bg-blue-200",shine:!0})):(s(),o("div",De,"Tax ("+c(a.order.vatRate.valueSymbol)+" "+c(a.order.vatMethod)+")",1)),a.isLoadingOrder?(s(),_(h,{key:2,width:"w-16",color:"bg-blue-200",shine:!0})):(s(),o("span",Fe,c(a.order.vatAmount.amountWithCurrency),1))]),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-1/3",color:"bg-blue-200",shine:!0})):(s(),o("p",We,"Tax calculated on the discounted subtotal of "+c(a.order.subtotalAfterDiscount.amountWithCurrency),1))]),a.isLoadingOrder||n.hasFeeTotal?(s(),o("div",Ve,[(s(!0),o(b,null,k(a.isLoadingOrder?[1]:n.orderFees,(p,f)=>(s(),o("div",{key:f,class:"flex items-center justify-between text-sm text-gray-500"},[a.isLoadingOrder?(s(),_(h,{key:0,width:"w-20",color:"bg-blue-200",shine:!0})):(s(),o("span",je,c(p.name),1)),a.isLoadingOrder?(s(),_(h,{key:2,width:"w-16",color:"bg-blue-200",shine:!0})):(s(),o("span",Ne,c(p.amount.amountWithCurrency),1))]))),128))])):m("",!0),t("div",Ie,[e[1]||(e[1]=t("div",{class:"w-full font-bold"},"Grand Total",-1)),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-24",color:"bg-blue-200",shine:!0})):(s(),o("span",Ae,c(a.order.grandTotal.amountWithCurrency),1))])])}const Ze=L(Le,[["render",He]]),Ue={components:{LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},computed:{orderHistory(){return this.isLoadingOrder?[]:this.order._relationships.orderHistory},groupedOrderHistory(){return this.orderHistory.length?this.orderHistory.reduce((r,e)=>{let a=this.formattedDate(e.createdAt);return r[a]||(r[a]=[]),r[a].push(e),r},{}):{}},sortedGroupedOrderHistory(){let r=Object.keys(this.groupedOrderHistory).sort((a,w)=>new Date(w)-new Date(a)),e={};return r.forEach(a=>{e[a]=this.groupedOrderHistory[a].sort((w,d)=>new Date(d.createdAt)-new Date(w.createdAt))}),e}},methods:{formattedDate(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"2-digit"})},formattedTime(r){return new Date(r).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!0})}}},Ee={class:"bg-white rounded-lg p-4 mb-4"},ze={class:"relative"},Re={class:"max-h-80 overflow-y-auto py-4 px-4 border-t border-b"},Ge={key:0,class:"space-y-6"},qe={class:"border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50 space-y-1 w-full"},Ye={key:1,class:"text-gray-700 space-y-6"},Ke={class:"text-sm font-semibold text-gray-500 ml-2 mb-2"},Qe={class:"space-y-2"},Je={class:"ml-4"},Xe={class:"text-sm"},et={class:"text-xs text-gray-400"};function tt(r,e,a,w,d,n){const h=l("LineSkeleton");return s(),o("div",Ee,[e[3]||(e[3]=t("h1",{class:"text-lg text-gray-700 font-semibold pb-4"},"Order History",-1)),t("div",ze,[t("div",Re,[e[2]||(e[2]=t("div",{class:"absolute left-2 top-0 bottom-40 h-full w-0.5 bg-gray-200"},null,-1)),a.isLoadingOrder?(s(),o("div",Ge,[(s(),o(b,null,k([1,2,3],(p,f)=>t("div",{key:f,class:"relative flex items-start space-x-4"},[e[0]||(e[0]=t("div",{class:"w-4 h-4 bg-gray-200 rounded-full absolute left-[-15px] top-0.5"},null,-1)),t("div",qe,[i(h,{width:"w-2/3",shine:!0}),i(h,{width:"w-1/3",shine:!0})])])),64))])):(s(),o("div",Ye,[(s(!0),o(b,null,k(n.sortedGroupedOrderHistory,(p,f,u)=>(s(),o("div",{class:"relative",key:u},[e[1]||(e[1]=t("div",{class:"w-4 h-4 bg-gray-200 rounded-full absolute left-[-15px] top-0.5"},null,-1)),t("p",Ke,c(f),1),t("div",Qe,[(s(!0),o(b,null,k(p,(v,O)=>(s(),o("div",{key:O,class:"relative flex items-start space-x-4"},[t("div",Je,[t("p",Xe,c(v.comment),1),t("p",et,c(n.formattedTime(v.createdAt)),1)])]))),128))])]))),128))]))])])])}const st=L(Ue,[["render",tt]]),rt={components:{Pill:E,Button:S,LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},data(){return{openTabs:[],storeState:C()}},watch:{isLoadingOrder(r){r||(this.openTabs=this.orderProducts.map(()=>!1))}},computed:{store(){return this.storeState.store},orderProducts(){return this.isLoadingOrder?[]:this.order._relationships.orderProducts}},methods:{toggleTab(r){this.openTabs[r]=!this.openTabs[r]},navigateToProduct(r){const e=this.getProduct(r);this.$router.push({name:"show-store-product",params:{store_href:this.store._links.showStore,product_href:e._links.showProduct}})},hasDetectedChanges(r){return r.detectedChanges.length>0},totalDetectedChanges(r){return r.detectedChanges.length},hasProduct(r){return r._relationships.product!=null},getProduct(r){return r._relationships.product},getProductPhotos(r){return r._relationships.product._relationships.photos},getFirstProductPhoto(r){return r._relationships.product._relationships.photos.length?r._relationships.product._relationships.photos[0]:null},hasFirstProductPhoto(r){return!!r._relationships.product._relationships.photos.length}}},ot={key:0,class:"space-y-2"},nt={class:"w-full flex items-center justify-between"},at={key:1,class:"space-y-2"},it=["onClick"],dt={class:"w-full flex items-center space-x-4"},lt=["src"],ut={key:1,class:"w-6 h-6 text-gray-400 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ct={class:"w-full flex items-center justify-between"},ht={class:"flex items-center space-x-2"},pt={class:"font-semibold text-sm bg-blue-50 border border-blue-400 px-2 py-1 rounded-full"},mt={class:"text-sm font-semibold"},gt={class:"flex items-center space-x-2 mr-4"},wt={class:"flex items-center space-x-2"},ft={class:"text-sm"},yt={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},_t={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},bt={key:0,class:"text-sm p-4 pb-8"},xt={class:"flex items-end justify-between mb-4 ml-4"},vt={class:"w-full overflow-x-auto rounded-lg border mb-4"},kt={class:"w-full text-sm text-left rtl:text-right text-gray-500"},Lt={class:"whitespace-nowrap align-top text-left p-2 pl-4"},Ot={class:"whitespace-nowrap align-top text-center py-2"},St={class:"whitespace-nowrap align-top text-center py-2"},Ct={class:"whitespace-nowrap align-top text-center py-2"},Mt={class:"whitespace-nowrap align-top text-center py-2"},Tt={class:"whitespace-nowrap align-top text-right p-2 pr-4"},$t={class:"w-full overflow-x-auto rounded-lg border mb-4"},Bt={class:"w-full text-sm text-left rtl:text-right text-gray-500"},Pt={class:"whitespace-nowrap align-top text-left p-2 pl-4"},Dt={class:"whitespace-nowrap align-top text-center p-2"},Ft={class:"whitespace-nowrap align-top text-center p-2"},Wt={class:"w-full overflow-x-auto rounded-lg border mb-4"},Vt={class:"w-full text-sm text-left rtl:text-right text-gray-500"},jt={class:"text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-100"},Nt={key:0,class:"whitespace-nowrap align-top text-left p-2 pl-4"},It={key:1,class:"whitespace-nowrap align-top text-center p-2"},At={key:0,class:"whitespace-nowrap align-top text-left p-2 pl-4"},Ht={key:1,class:"whitespace-nowrap align-top text-center p-2"},Zt={key:2,class:"space-y-2"},Ut={class:"text-xs"};function Et(r,e,a,w,d,n){const h=l("LineSkeleton"),p=l("Pill"),f=l("Button");return s(),o("div",null,[e[14]||(e[14]=t("h1",{class:"text-lg text-gray-700 font-semibold mb-4"},"Items",-1)),a.isLoadingOrder?(s(),o("div",ot,[(s(),o(b,null,k([1,2,3],(u,v)=>t("div",{key:v,class:"border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50"},[t("div",nt,[i(h,{width:"w-32",shine:!0}),i(h,{width:"w-16",shine:!0})])])),64))])):(s(),o("div",at,[(s(!0),o(b,null,k(n.orderProducts,(u,v)=>(s(),o("div",{key:v,class:I([{"shadow-md":d.openTabs[v]},"rounded-lg overflow-hidden border"])},[t("div",{onClick:O=>n.toggleTab(v),class:I([{"shadow-sm border-b":d.openTabs[v]},"flex justify-between items-center cursor-pointer py-2 px-4 bg-gray-50 hover:bg-gray-100"])},[t("div",dt,[t("div",{class:I(["flex items-center justify-center w-16 h-16",{"border border-dashed border-gray-200 rounded-lg":!n.hasFirstProductPhoto(u)}])},[n.hasFirstProductPhoto(u)?(s(),o("img",{key:0,class:"w-full object-contain rounded-lg bg-red-200 flex-shrink-0",src:n.getFirstProductPhoto(u).filePath},null,8,lt)):(s(),o("svg",ut,e[0]||(e[0]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)])))],2),t("div",ct,[t("div",ht,[t("span",pt,c(u.quantity)+"x",1),t("span",mt,c(u.name),1)]),t("div",gt,[n.hasDetectedChanges(u)?(s(),_(p,{key:0,type:"warning",size:"xs",showDot:!1},{default:y(()=>[B(c(`${n.totalDetectedChanges(u)} ${n.totalDetectedChanges(u)==1?"change":"changes"} found`),1)]),_:2},1024)):m("",!0),u.onSale.status?(s(),_(p,{key:1,type:"success",size:"xs",showDot:!1},{default:y(()=>e[1]||(e[1]=[B("on sale")])),_:1})):m("",!0),u.isFree.status?(s(),_(p,{key:2,type:"success",size:"xs",showDot:!1},{default:y(()=>e[2]||(e[2]=[B("free")])),_:1})):m("",!0)])])]),t("div",wt,[t("span",ft,c(u.unitPrice.amountWithCurrency),1),d.openTabs[v]?(s(),o("svg",yt,e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))):(s(),o("svg",_t,e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)])))])],10,it),d.openTabs[v]?(s(),o("div",bt,[t("div",xt,[e[6]||(e[6]=t("h1",{class:"text-base text-gray-500 font-semibold"},"Pricing",-1)),n.hasProduct(u)?(s(),_(f,{key:0,action:()=>n.navigateToProduct(u),type:"light",size:"xs",skeleton:a.isLoadingOrder,icon:"short-right-arrow"},{default:y(()=>e[5]||(e[5]=[t("span",null,"Show Product",-1)])),_:2},1032,["action","skeleton"])):m("",!0)]),t("div",vt,[t("table",kt,[e[7]||(e[7]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-100"},[t("tr",null,[t("th",{class:"whitespace-nowrap align-top text-left p-2 pl-4"},[t("span",null,"Regular Price")]),t("th",{class:"whitespace-nowrap align-top text-center py-2"},[t("span",null,"Sale Price")]),t("th",{class:"whitespace-nowrap align-top text-center py-2"},[t("span",null,"Quantity")]),t("th",{class:"whitespace-nowrap align-top text-center py-2"},[t("span",null,"Subtotal")]),t("th",{class:"whitespace-nowrap align-top text-center py-2"},[t("span",null,"Discount Total")]),t("th",{class:"whitespace-nowrap align-top text-right p-2 pr-4"},[t("span",null,"Grand Total")])])],-1)),t("tbody",null,[t("tr",null,[t("td",Lt,[t("span",null,c(u.unitRegularPrice.amountWithCurrency),1)]),t("td",Ot,[t("span",null,c(u.unitSalePrice.amountWithCurrency),1)]),t("td",St,[t("span",null,c(u.quantity),1)]),t("td",Ct,[t("span",null,c(u.subtotal.amountWithCurrency),1)]),t("td",Mt,[t("span",null,c(u.saleDiscountTotal.amountWithCurrency),1)]),t("td",Tt,[t("span",null,c(u.grandTotal.amountWithCurrency),1)])])])])]),(s(),o(b,{key:0},[e[9]||(e[9]=t("h1",{class:"text-base text-gray-500 font-semibold mb-4 ml-4"},"Weight",-1)),t("div",$t,[t("table",Bt,[e[8]||(e[8]=t("thead",{class:"text-xs text-gray-700 uppercase bg-gray-50 border-b border-gray-100"},[t("tr",null,[t("th",{class:"whitespace-nowrap align-top text-left p-2 pl-4"},[t("span",null,"Unit Weight")]),t("th",{class:"whitespace-nowrap align-top text-center p-2"},[t("span",null,"Quantity")]),t("th",{class:"whitespace-nowrap align-top text-center p-2"},[t("span",null,"Total Weight")])])],-1)),t("tbody",null,[t("tr",null,[t("td",Pt,[t("span",null,c(u.unitWeight),1)]),t("td",Dt,[t("span",null,c(u.quantity),1)]),t("td",Ft,[t("span",null,c(u.unitWeight),1)])])])])])],64)),(s(),o(b,{key:1},[e[12]||(e[12]=t("h1",{class:"text-base text-gray-500 font-semibold mb-4 ml-4"},"Identification",-1)),t("div",Wt,[t("table",Vt,[t("thead",jt,[t("tr",null,[u.sku?(s(),o("th",Nt,e[10]||(e[10]=[t("span",null,"SKU",-1)]))):m("",!0),u.barcode?(s(),o("th",It,e[11]||(e[11]=[t("span",null,"Barcode",-1)]))):m("",!0)])]),t("tbody",null,[t("tr",null,[u.sku?(s(),o("td",At,[t("span",null,c(u.sku),1)])):m("",!0),u.barcode?(s(),o("td",Ht,[t("span",null,c(u.barcode),1)])):m("",!0)])])])])],64)),e[13]||(e[13]=t("h1",{class:"text-base text-gray-500 font-semibold mb-4 ml-4"},"Changes",-1)),n.hasDetectedChanges(u)?(s(),o("div",Zt,[(s(!0),o(b,null,k(u.detectedChanges,(O,T)=>(s(),o("div",{key:T,class:"flex space-x-2 p-2 border-l-8 border-yellow-300 bg-gray-50"},[t("p",Ut,c(O.message),1)]))),128))])):m("",!0)])):m("",!0)],2))),128))]))])}const zt=L(rt,[["render",Et]]),Rt={components:{Button:S,GoogleMaps:se,LineSkeleton:M,CollectionStatus:Q},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},computed:{hasDeliveryAddress(){var r;return((r=this.order._relationships)==null?void 0:r.deliveryAddress)!=null},deliveryAddress(){var e;const r=((e=this.order._relationships)==null?void 0:e.deliveryAddress)||{};return{...r,latitude:r.latitude?parseFloat(r.latitude):null,longitude:r.longitude?parseFloat(r.longitude):null}},googleMapsUrl(){return!this.isLoadingOrder&&this.deliveryAddress.latitude&&this.deliveryAddress.longitude?`https://www.google.com/maps?q=${this.deliveryAddress.latitude},${this.deliveryAddress.longitude}`:null}},methods:{markerMoved(r){this.form.placeId=null,this.form.latitude=r.latitude,this.form.longitude=r.longitude},addedMarker(r){this.form.placeId=r.placeId,this.form.latitude=r.latitude,this.form.longitude=r.longitude}}},Gt={class:"bg-white rounded-lg p-4 mb-4"},qt={key:0,class:"w-full border-b shadow-sm rounded-lg py-6 px-4 bg-gray-50 space-y-1"},Yt={key:1},Kt={class:"text-sm mb-4"},Qt={class:"flex justify-end"},Jt={class:"rounded-lg overflow-hidden"},Xt={key:0,class:"flex justify-end mt-4"},es=["href"];function ts(r,e,a,w,d,n){const h=l("LineSkeleton"),p=l("CollectionStatus"),f=l("GoogleMaps"),u=l("Button");return s(),o("div",Gt,[e[1]||(e[1]=H('<div class="flex items-center space-x-2 mb-4"><svg class="w-6 h-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"></path><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"></path></svg><span class="text-gray-700 font-semibold">Delivery Address</span></div>',1)),a.isLoadingOrder?(s(),o("div",qt,[i(h,{width:"w-4/5",shine:!0}),i(h,{width:"w-1/3",shine:!0})])):(s(),o("div",Yt,[t("p",Kt,c(n.deliveryAddress._attributes.completeAddress),1),t("div",Qt,[i(p,{class:"mb-4"})]),t("div",Jt,[i(f,{height:"350px",gmpDraggable:!1,latitude:n.deliveryAddress.latitude,longitude:n.deliveryAddress.longitude},null,8,["latitude","longitude"])]),n.googleMapsUrl?(s(),o("div",Xt,[t("a",{href:n.googleMapsUrl,target:"_blank"},[i(u,{type:"light",size:"xs",icon:"externalLink"},{default:y(()=>e[0]||(e[0]=[t("span",null,"Google Maps",-1)])),_:1})],8,es)])):m("",!0)]))])}const ss=L(Rt,[["render",ts]]),rs={components:{Button:S,LineSkeleton:M},props:{order:{type:Object},isLoadingOrder:{type:Boolean}},computed:{hasCustomer(){return this.order._relationships.customer!=null},customer(){return this.order._relationships.customer}},methods:{navigateToCustomer(){this.$router.push({name:"show-store-customer",params:{store_href:this.store._links.showStore,customer_href:this.customer._links.showCustomer}})}}},os={class:"bg-white rounded-lg space-y-3 p-4 mb-4"},ns={class:"flex items-center space-x-2"},as={key:1,class:"text-gray-700 font-semibold truncate"},is={key:2,class:"text-gray-700 font-semibold"},ds={class:"space-y-2 ml-2"},ls={key:0,class:"flex items-center space-x-2 text-sm"},us={key:1,class:"text-sm"},cs={key:1,class:"flex items-center space-x-2 text-sm"},hs={key:1,class:"text-sm truncate"},ps={key:1,class:"text-sm"},ms={key:0,class:"flex justify-end mt-4"};function gs(r,e,a,w,d,n){const h=l("LineSkeleton"),p=l("Button");return s(),o("div",os,[t("div",ns,[e[0]||(e[0]=t("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1)),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-32",shine:!0})):a.order._attributes.customerName?(s(),o("span",as,c(a.order._attributes.customerName),1)):(s(),o("span",is,"Customer"))]),t("div",ds,[a.isLoadingOrder||!a.order.customerMobileNumber||a.order.customerEmail?(s(),o(b,{key:0},[a.isLoadingOrder||a.order.customerMobileNumber?(s(),o("div",ls,[e[1]||(e[1]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1)),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-32",shine:!0})):(s(),o("span",us,c(a.order.customerMobileNumber.national),1))])):m("",!0),a.isLoadingOrder||a.order.customerEmail?(s(),o("div",cs,[e[2]||(e[2]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1)),a.isLoadingOrder?(s(),_(h,{key:0,width:"w-32",shine:!0})):(s(),o("span",hs,c(a.order.customerEmail),1))])):m("",!0)],64)):(s(),o("span",ps,"No information"))]),!a.isLoadingOrder&&n.hasCustomer?(s(),o("div",ms,[i(p,{action:n.navigateToCustomer,type:"light",size:"xs",skeleton:a.isLoadingOrder,icon:"short-right-arrow"},{default:y(()=>e[3]||(e[3]=[t("span",null,"Show Profile",-1)])),_:1},8,["action","skeleton"])])):m("",!0)])}const ws=L(rs,[["render",gs]]),fs={data(){return{storeState:C()}},computed:{storeForm(){return this.storeState.storeForm}}},ys={class:"p-4 flex flex-col items-center space-y-4"};function _s(r,e,a,w,d,n){return s(),o("div",ys,e[0]||(e[0]=[t("svg",{class:"text-gray-400 w-8 h-8",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"})],-1),t("span",{class:"text-gray-400 text-xs sm:text-sm inline-block"}," No products selected ",-1)]))}const bs=L(fs,[["render",_s]]),xs={components:{Button:S},data(){return{storeState:C()}},computed:{store(){return this.storeState.store}},methods:{goBack(){this.$router.replace({name:"show-store-orders",params:{store_href:this.store._links.showStore}})}}};function vs(r,e,a,w,d,n){const h=l("Button");return s(),_(h,{type:"light",size:"xs",icon:"short-left-arrow",action:n.goBack},{default:y(()=>e[0]||(e[0]=[t("span",null,"Back",-1)])),_:1},8,["action"])}const ks=L(xs,[["render",vs]]),Ls={mixins:[j],components:{Button:S,ConfirmModal:z},data(){return{printPdfModal:null,apiState:Z(),isDownloadingOrder:!1,storeState:C(),orderState:V()}},computed:{order(){return this.orderState.order},store(){return this.storeState.store},isLoadingOrder(){return this.orderState.isLoadingOrder}},methods:{showDownloadPdfModal(){this.printPdfModal.showModal()},async downloadOrder(){if(this.isDownloadingOrder)return;const r={store_id:this.store.id,order_ids:[this.order.id]},e={responseType:"blob"};this.isDownloadingOrder=!0,await W.post(this.apiState.apiHome._links.downloadOrders,r,e).then(a=>{if(a.status===200&&!a.data.hasOwnProperty("downloaded")){const w=new Blob([a.data],{type:"application/pdf"}),d=window.URL.createObjectURL(w),n=window.open(d);n&&(n.onload=()=>{n.focus(),n.print()})}else this.formState.setFormError("general",a.data.message),this.notificationState.showWarningNotification(a.data.message)}).catch(a=>{this.formState.setServerFormErrors(a)}),this.isDownloadingOrder=!1}},mounted(){this.printPdfModal=this.$refs.printPdfModal}};function Os(r,e,a,w,d,n){const h=l("Button"),p=l("ConfirmModal");return s(),o("div",null,[i(h,{type:"light",size:"xs",skeleton:n.isLoadingOrder,action:n.showDownloadPdfModal,icon:"print"},{default:y(()=>e[0]||(e[0]=[t("span",null,"Print",-1)])),_:1},8,["skeleton","action"]),i(p,{ref:"printPdfModal",approveText:"Print PDF",approveAction:n.downloadOrder,approveType:"primary",approveIcon:"print",isLoading:d.isDownloadingOrder},{content:y(()=>e[1]||(e[1]=[t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Print PDF",-1),t("div",{class:"flex space-x-2 p-4 text-xs bg-blue-100 rounded-lg mb-8"},[t("svg",{class:"w-6 h-6 shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]),t("span",null,"Creating the PDF to print may take a moment. Please do not close this window.")],-1)])),_:1},8,["approveAction","isLoading"])])}const Ss=L(Ls,[["render",Os]]),Cs={mixins:[j],components:{Button:S,ConfirmModal:z},data(){return{downloadPdfModal:null,apiState:Z(),isDownloadingOrder:!1,storeState:C(),orderState:V()}},computed:{order(){return this.orderState.order},store(){return this.storeState.store},isLoadingOrder(){return this.orderState.isLoadingOrder}},methods:{showDownloadPdfModal(){this.downloadPdfModal.showModal()},async downloadOrder(){if(this.isDownloadingOrder)return;const r={store_id:this.store.id,order_ids:[this.order.id]},e={responseType:"blob"};this.isDownloadingOrder=!0,await W.post(this.apiState.apiHome._links.downloadOrders,r,e).then(a=>{if(a.status===200&&!a.data.hasOwnProperty("downloaded")){const w=new Blob([a.data],{type:"application/pdf"}),d=document.createElement("a");d.href=window.URL.createObjectURL(w),d.download=`Order #${this.order._attributes.number}.pdf`,document.body.appendChild(d),d.click(),document.body.removeChild(d)}else this.formState.setFormError("general",a.data.message),this.notificationState.showWarningNotification(a.data.message)}).catch(a=>{this.formState.setServerFormErrors(a)}),this.isDownloadingOrder=!1}},mounted(){this.downloadPdfModal=this.$refs.downloadPdfModal}};function Ms(r,e,a,w,d,n){const h=l("Button"),p=l("ConfirmModal");return s(),o("div",null,[i(h,{type:"light",size:"xs",skeleton:n.isLoadingOrder,action:n.showDownloadPdfModal,icon:"download"},{default:y(()=>e[0]||(e[0]=[t("span",null,"Download",-1)])),_:1},8,["skeleton","action"]),i(p,{ref:"downloadPdfModal",approveText:"Download PDF",approveAction:n.downloadOrder,approveType:"primary",approveIcon:"download",isLoading:d.isDownloadingOrder},{content:y(()=>e[1]||(e[1]=[t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Download PDF",-1),t("div",{class:"flex space-x-2 p-4 text-xs bg-blue-100 rounded-lg mb-8"},[t("svg",{class:"w-6 h-6 shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})]),t("span",null,"Creating the PDF to download may take a moment. Please do not close this window.")],-1)])),_:1},8,["approveAction","isLoading"])])}const Ts=L(Cs,[["render",Ms]]),$s={props:{message:{type:String,default:""}},computed:{formattedMessage(){return this.message?this.message.replace(/\n/g,"<br>").replace(/\*(.*?)\*/g,"<strong>$1</strong>").replace(/_(.*?)_/g,"<em>$1</em>").replace(/`(.*?)`/g,'<span class="text-xs font-mono p-1 rounded break-all" style="background:#cff4cd;">$1</span>'):""}}},Bs={class:"flex justify-end bg-[#efe9e0] rounded-lg p-4 mb-8"},Ps={class:"bg-[#d0fecf] p-3 rounded-lg max-w-xs shadow-md relative"},Ds=["innerHTML"],Fs={class:"absolute bottom-1 right-2 flex items-center space-x-1"},Ws={class:"text-xs text-gray-500"};function Vs(r,e,a,w,d,n){return s(),o("div",Bs,[t("div",Ps,[t("div",{class:"text-sm text-gray-700 pb-4 break-words whitespace-pre-wrap",innerHTML:n.formattedMessage},null,8,Ds),t("div",Fs,[t("span",Ws,c(new Date().toLocaleTimeString().slice(0,5)),1),e[0]||(e[0]=t("svg",{class:"w-4 h-4 text-blue-500",viewBox:"0 -0.5 25 25",fill:"currentColor"},[t("path",{d:"M5.03033 11.4697C4.73744 11.1768 4.26256 11.1768 3.96967 11.4697C3.67678 11.7626 3.67678 12.2374 3.96967 12.5303L5.03033 11.4697ZM8.5 16L7.96967 16.5303C8.26256 16.8232 8.73744 16.8232 9.03033 16.5303L8.5 16ZM17.0303 8.53033C17.3232 8.23744 17.3232 7.76256 17.0303 7.46967C16.7374 7.17678 16.2626 7.17678 15.9697 7.46967L17.0303 8.53033ZM9.03033 11.4697C8.73744 11.1768 8.26256 11.1768 7.96967 11.4697C7.67678 11.7626 7.67678 12.2374 7.96967 12.5303L9.03033 11.4697ZM12.5 16L11.9697 16.5303C12.2626 16.8232 12.7374 16.8232 13.0303 16.5303L12.5 16ZM21.0303 8.53033C21.3232 8.23744 21.3232 7.76256 21.0303 7.46967C20.7374 7.17678 20.2626 7.17678 19.9697 7.46967L21.0303 8.53033ZM3.96967 12.5303L7.96967 16.5303L9.03033 15.4697L5.03033 11.4697L3.96967 12.5303ZM9.03033 16.5303L17.0303 8.53033L15.9697 7.46967L7.96967 15.4697L9.03033 16.5303ZM7.96967 12.5303L11.9697 16.5303L13.0303 15.4697L9.03033 11.4697L7.96967 12.5303ZM13.0303 16.5303L21.0303 8.53033L19.9697 7.46967L11.9697 15.4697L13.0303 16.5303Z",fill:"#027bfc"})],-1))])])])}const js=L($s,[["render",Vs]]),Ns={components:{Pill:E,Button:S,draggable:re,Checkbox:oe,SelectInput:U,ConfirmModal:z,TextareaInput:R,WhatsappMessage:js,ToogleSwitch:ne},data(){return{activeTab:"edit",actionDropdown:null,whatsappAction:null,whatsappMessage:null,sendToWhatsappModal:null,orderState:V(),storeState:C(),includeOrderFieldNames:!0,sendableWhatsappMessage:null,whatsappFields:this.prepareWhatsappFields(),whatsappActions:this.prepareWhatsappActions()}},watch:{isLoadingOrder(r){r||this.prepareWhatsappDropdown()},whatsappAction(r){this.setWhatsappMessage(r),this.generateWhatsappMessage()},activeTab(){this.generateWhatsappMessage()}},computed:{order(){return this.orderState.order},store(){return this.storeState.store},isLoadingOrder(){return this.orderState.isLoadingOrder}},methods:{selectEditTab(){this.activeTab="edit"},selectPreviewTab(){this.activeTab="preview"},prepareWhatsappDropdown(){this.$nextTick(()=>{initFlowbite();const r=document.getElementById("action-dropdown"),e=document.getElementById("action-dropdown-trigger"),a={triggerType:"click",placement:"bottom"};r&&(this.actionDropdown=new Dropdown(r,e,a))})},prepareWhatsappActions(){return["Write message","Request review","Share order details","Remind about payment","Request proof of payment","Send payment confirmation","Send completion confirmation","Send cancellation confirmation","Send thank you message"].map(e=>({name:e,action:null}))},prepareWhatsappFields(){const r=["Number","Customer","Summary","Status","Payment Status","Collection Status","Grand Total","Paid","Pending","Outstanding","Customer Note","Created Date","Order Link"],e=["Number","Customer","Summary","Status","Grand Total","Created Date","Order Link"];return r.map(a=>({name:a,linebreak:!1,active:e.includes(a),priority:e.includes(a)}))},showSendToWhatsappModal(r){this.selectEditTab(),this.actionDropdown.hide(),this.whatsappAction=r,this.sendToWhatsappModal.showModal()},setWhatsappMessage(){const r={"Request review":`Hello ${this.order.customerFirstName}, we hope you enjoyed your order! Could you take a moment to leave us a review? Your feedback is greatly appreciated!`,"Share order details":`Hello ${this.order.customerFirstName}, here are the details of your order:

Order #${this.order._attributes.number}
----------------------
`,"Remind about payment":`Hello ${this.order.customerFirstName}, just a friendly reminder that your order (#${this.order._attributes.number}) is currently unpaid. The total amount due is ${this.order.outstandingTotal.amountWithCurrency}. Kindly make payment at your earliest convenience. Let us know if you need assistance!`,"Request proof of payment":`Hello ${this.order.customerFirstName}, could you please send us the proof of payment for order #${this.order._attributes.number}? This will help us process your order faster. Thank you!`,"Send payment confirmation":`Hello ${this.order.customerFirstName}, we've received your payment for order #${this.order._attributes.number}. Your order is now being processed. Thank you for your prompt payment!`,"Send completion confirmation":`Hello ${this.order.customerFirstName}, your order (#${this.order._attributes.number}) has been completed successfully! We hope you enjoy your meal. Thank you for ordering with us!`,"Send cancellation confirmation":`Hello ${this.order.customerFirstName}, your order (#${this.order._attributes.number}) has been cancelled. If you have any questions or need further assistance, feel free to reach out to us.`,"Send thank you message":`Hello ${this.order.customerFirstName}, thank you for your order! We truly appreciate your support and look forward to serving you again. Have a great day!`,"Write message":`Write anything to ${this.order.customerFirstName}`};this.whatsappMessage=r[this.whatsappAction]||null},generateWhatsappMessage(){if(this.sendableWhatsappMessage=this.whatsappMessage,this.whatsappAction=="Share order details"){let r="";this.whatsappFields.forEach(e=>{if(e.active)switch(e.linebreak&&(r+=`
`),this.includeOrderFieldNames&&(r+=`${e.name}: `),e.name){case"Number":r+=`${this.order._attributes.number}
`;break;case"Customer":r+=`${this.order._attributes.customerName}
`;break;case"Summary":r+=`${this.order.summary}
`;break;case"Status":r+=`${this.order.status.name}
`;break;case"Payment Status":r+=`${this.order.paymentStatus.name}
`;break;case"Collection Status":r+=`${this.order.collectionVerified.name}
`;break;case"Grand Total":r+=`${this.order.grandTotal.amountWithCurrency}
`;break;case"Paid":r+=`${this.order.paidTotal.amountWithCurrency}
`;break;case"Pending":r+=`${this.order.pendingTotal.amountWithCurrency}
`;break;case"Outstanding":r+=`${this.order.outstandingTotal.amountWithCurrency}
`;break;case"Customer Note":r+=`${this.order.customerNote||"None"}
`;break;case"Created Date":r+=`${this.order.createdAt}
`;break;case"Order Link":r+=`${window.location.origin+this.$router.resolve({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:this.order._links.showOrder}}).href}
`;break}}),this.sendableWhatsappMessage+=`

${r.trim()}`}},async sendToWhatsapp(){this.generateWhatsappMessage(),window.open(`https://wa.me/?text=${encodeURIComponent(this.sendableWhatsappMessage)}`,"_blank"),this.sendToWhatsappModal.hideModal()}},mounted(){this.sendToWhatsappModal=this.$refs.sendToWhatsappModal}},Is={id:"action-dropdown",class:"w-60 border z-50 hidden text-base list-none bg-white divide-y divide-gray-100 rounded-lg shadow-sm overflow-hidden"},As={key:0,class:"text-xs text-center p-4 bg-gray-100"},Hs=["onClick"],Zs={class:"flex space-x-2 items-center"},Us={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Es={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},zs={key:2,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Rs={key:3,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Gs={key:4,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},qs={key:5,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ys={key:6,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Ks={key:7,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Qs={key:8,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Js={key:9,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Xs={class:"text-xs text-gray-500 group-hover:text-gray-900"},er={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},tr={class:"flex items-center space-x-2 mb-4"},sr=["value"],rr={key:1,class:"space-y-4 mb-8"},or={class:"border divide-y overflow-y-auto rounded-lg h-60 px-4 mb-4"},nr={class:"flex items-center space-x-4"};function ar(r,e,a,w,d,n){const h=l("Button"),p=l("SelectInput"),f=l("Pill"),u=l("WhatsappMessage"),v=l("TextareaInput"),O=l("Checkbox"),T=l("ToogleSwitch"),P=l("draggable"),N=l("ConfirmModal");return s(),o("div",null,[i(h,{id:"action-dropdown-trigger",type:"light",size:"xs",icon:"chevron-down-arrow",skeleton:n.isLoadingOrder},{default:y(()=>e[6]||(e[6]=[t("span",null,"Whatsapp",-1)])),_:1},8,["skeleton"]),t("div",Is,[n.isLoadingOrder?(s(),o("div",As,e[7]||(e[7]=[t("span",null,"Not yeady yet",-1)]))):(s(),o(b,{key:1},[e[19]||(e[19]=H('<div class="flex space-x-2 items-center px-2 py-1 text-sm bg-green-100"><svg class="w-8 h-8" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="96px" height="96px" fill-rule="evenodd" clip-rule="evenodd"><path fill="#fff" d="M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"></path><path fill="#fff" d="M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"></path><path fill="#cfd8dc" d="M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"></path><path fill="#40c351" d="M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"></path><path fill="#fff" fill-rule="evenodd" d="M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z" clip-rule="evenodd"></path></svg><span class="text-xs">Send using Whatsapp</span></div>',1)),(s(!0),o(b,null,k(d.whatsappActions,(g,$)=>(s(),o("div",{key:$,onClick:A(()=>n.showSendToWhatsappModal(g.name),["stop"]),class:"cursor-pointer flex justify-between items-center py-2 px-4 text-gray-900 hover:bg-gray-100 group"},[t("div",Zs,[g.name=="Write message"?(s(),o("svg",Us,e[8]||(e[8]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L6.832 19.82a4.5 4.5 0 0 1-1.897 1.13l-2.685.8.8-2.685a4.5 4.5 0 0 1 1.13-1.897L16.863 4.487Zm0 0L19.5 7.125"},null,-1)]))):m("",!0),g.name=="Request review"?(s(),o("svg",Es,e[9]||(e[9]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"},null,-1)]))):m("",!0),g.name=="Share order details"?(s(),o("svg",zs,e[10]||(e[10]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M7.217 10.907a2.25 2.25 0 1 0 0 2.186m0-2.186c.18.324.283.696.283 1.093s-.103.77-.283 1.093m0-2.186 9.566-5.314m-9.566 7.5 9.566 5.314m0 0a2.25 2.25 0 1 0 3.935 2.186 2.25 2.25 0 0 0-3.935-2.186Zm0-12.814a2.25 2.25 0 1 0 3.933-2.185 2.25 2.25 0 0 0-3.933 2.185Z"},null,-1)]))):m("",!0),g.name=="Remind about payment"?(s(),o("svg",Rs,e[11]||(e[11]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m15 15-6 6m0 0-6-6m6 6V9a6 6 0 0 1 12 0v3"},null,-1)]))):m("",!0),g.name=="Request proof of payment"?(s(),o("svg",Gs,e[12]||(e[12]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m9 14.25 6-6m4.5-3.493V21.75l-3.75-1.5-3.75 1.5-3.75-1.5-3.75 1.5V4.757c0-1.108.806-2.057 1.907-2.185a48.507 48.507 0 0 1 11.186 0c1.1.128 1.907 1.077 1.907 2.185ZM9.75 9h.008v.008H9.75V9Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm4.125 4.5h.008v.008h-.008V13.5Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1)]))):m("",!0),g.name=="Send payment confirmation"?(s(),o("svg",qs,e[13]||(e[13]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"},null,-1)]))):m("",!0),g.name=="Send completion confirmation"?(s(),o("svg",Ys,e[14]||(e[14]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"},null,-1)]))):m("",!0),g.name=="Send cancellation confirmation"?(s(),o("svg",Ks,e[15]||(e[15]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M10.05 4.575a1.575 1.575 0 1 0-3.15 0v3m3.15-3v-1.5a1.575 1.575 0 0 1 3.15 0v1.5m-3.15 0 .075 5.925m3.075.75V4.575m0 0a1.575 1.575 0 0 1 3.15 0V15M6.9 7.575a1.575 1.575 0 1 0-3.15 0v8.175a6.75 6.75 0 0 0 6.75 6.75h2.018a5.25 5.25 0 0 0 3.712-1.538l1.732-1.732a5.25 5.25 0 0 0 1.538-3.712l.003-2.024a.668.668 0 0 1 .198-.471 1.575 1.575 0 1 0-2.228-2.228 3.818 3.818 0 0 0-1.12 2.687M6.9 7.575V12m6.27 4.318A4.49 4.49 0 0 1 16.35 15m.002 0h-.002"},null,-1)]))):m("",!0),g.name=="Send thank you message"?(s(),o("svg",Qs,e[16]||(e[16]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.182 15.182a4.5 4.5 0 0 1-6.364 0M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0ZM9.75 9.75c0 .414-.168.75-.375.75S9 10.164 9 9.75 9.168 9 9.375 9s.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Zm5.625 0c0 .414-.168.75-.375.75s-.375-.336-.375-.75.168-.75.375-.75.375.336.375.75Zm-.375 0h.008v.015h-.008V9.75Z"},null,-1)]))):m("",!0),g.name=="Suggest another option"?(s(),o("svg",Js,e[17]||(e[17]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"},null,-1)]))):m("",!0),t("span",Xs,c(g.name),1)]),g.name=="Suggest another option"?(s(),o("svg",er,e[18]||(e[18]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"},null,-1)]))):m("",!0)],8,Hs))),128)),e[20]||(e[20]=H('<a href="#" target="_blank" class="cursor-pointer flex justify-between items-center py-2 px-4 text-gray-900 hover:bg-gray-100 group"><div class="flex space-x-2 items-center"><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"></path></svg><span class="text-xs text-gray-500 group-hover:text-gray-900"> Suggest another option </span></div><svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M13.5 4.5 21 12m0 0-7.5 7.5M21 12H3"></path></svg></a>',1))],64))]),i(N,{ref:"sendToWhatsappModal",approveText:"Send",approveAction:n.sendToWhatsapp,approveType:"success",approveIcon:"whatsapp"},{content:y(()=>[e[27]||(e[27]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Send To Whatsapp",-1)),t("div",tr,[i(p,{width:"w-full",modelValue:d.whatsappAction,"onUpdate:modelValue":e[0]||(e[0]=g=>d.whatsappAction=g)},{default:y(()=>[(s(!0),o(b,null,k(d.whatsappActions,(g,$)=>(s(),o("option",{value:g.name,key:$},c(g.name),9,sr))),128))]),_:1},8,["modelValue"]),i(f,{type:d.activeTab=="edit"?"primary":"light",size:"sm",action:n.selectEditTab},{default:y(()=>e[21]||(e[21]=[B("Edit")])),_:1},8,["type","action"]),i(f,{type:d.activeTab=="preview"?"primary":"light",size:"sm",action:n.selectPreviewTab},{default:y(()=>e[22]||(e[22]=[B("Preview")])),_:1},8,["type","action"])]),d.activeTab=="preview"?(s(),_(u,{key:0,class:"mb-8",message:d.sendableWhatsappMessage},null,8,["message"])):(s(),o("div",rr,[i(v,{rows:6,label:"Message to send",modelValue:d.whatsappMessage,"onUpdate:modelValue":e[1]||(e[1]=g=>d.whatsappMessage=g),placeholder:"Your whatsapp message"},null,8,["modelValue"]),d.whatsappAction=="Share order details"?(s(),o(b,{key:0},[e[26]||(e[26]=t("div",{class:"flex space-x-2 p-4 text-sm bg-green-100 rounded-lg"},[t("svg",{class:"w-16 h-8",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",width:"96px",height:"96px","fill-rule":"evenodd","clip-rule":"evenodd"},[t("path",{fill:"#fff",d:"M4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98c-0.001,0,0,0,0,0h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303z"}),t("path",{fill:"#fff",d:"M4.868,43.803c-0.132,0-0.26-0.052-0.355-0.148c-0.125-0.127-0.174-0.312-0.127-0.483l2.639-9.636c-1.636-2.906-2.499-6.206-2.497-9.556C4.532,13.238,13.273,4.5,24.014,4.5c5.21,0.002,10.105,2.031,13.784,5.713c3.679,3.683,5.704,8.577,5.702,13.781c-0.004,10.741-8.746,19.48-19.486,19.48c-3.189-0.001-6.344-0.788-9.144-2.277l-9.875,2.589C4.953,43.798,4.911,43.803,4.868,43.803z"}),t("path",{fill:"#cfd8dc",d:"M24.014,5c5.079,0.002,9.845,1.979,13.43,5.566c3.584,3.588,5.558,8.356,5.556,13.428c-0.004,10.465-8.522,18.98-18.986,18.98h-0.008c-3.177-0.001-6.3-0.798-9.073-2.311L4.868,43.303l2.694-9.835C5.9,30.59,5.026,27.324,5.027,23.979C5.032,13.514,13.548,5,24.014,5 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974C24.014,42.974,24.014,42.974,24.014,42.974 M24.014,4C24.014,4,24.014,4,24.014,4C12.998,4,4.032,12.962,4.027,23.979c-0.001,3.367,0.849,6.685,2.461,9.622l-2.585,9.439c-0.094,0.345,0.002,0.713,0.254,0.967c0.19,0.192,0.447,0.297,0.711,0.297c0.085,0,0.17-0.011,0.254-0.033l9.687-2.54c2.828,1.468,5.998,2.243,9.197,2.244c11.024,0,19.99-8.963,19.995-19.98c0.002-5.339-2.075-10.359-5.848-14.135C34.378,6.083,29.357,4.002,24.014,4L24.014,4z"}),t("path",{fill:"#40c351",d:"M35.176,12.832c-2.98-2.982-6.941-4.625-11.157-4.626c-8.704,0-15.783,7.076-15.787,15.774c-0.001,2.981,0.833,5.883,2.413,8.396l0.376,0.597l-1.595,5.821l5.973-1.566l0.577,0.342c2.422,1.438,5.2,2.198,8.032,2.199h0.006c8.698,0,15.777-7.077,15.78-15.776C39.795,19.778,38.156,15.814,35.176,12.832z"}),t("path",{fill:"#fff","fill-rule":"evenodd",d:"M19.268,16.045c-0.355-0.79-0.729-0.806-1.068-0.82c-0.277-0.012-0.593-0.011-0.909-0.011c-0.316,0-0.83,0.119-1.265,0.594c-0.435,0.475-1.661,1.622-1.661,3.956c0,2.334,1.7,4.59,1.937,4.906c0.237,0.316,3.282,5.259,8.104,7.161c4.007,1.58,4.823,1.266,5.693,1.187c0.87-0.079,2.807-1.147,3.202-2.255c0.395-1.108,0.395-2.057,0.277-2.255c-0.119-0.198-0.435-0.316-0.909-0.554s-2.807-1.385-3.242-1.543c-0.435-0.158-0.751-0.237-1.068,0.238c-0.316,0.474-1.225,1.543-1.502,1.859c-0.277,0.317-0.554,0.357-1.028,0.119c-0.474-0.238-2.002-0.738-3.815-2.354c-1.41-1.257-2.362-2.81-2.639-3.285c-0.277-0.474-0.03-0.731,0.208-0.968c0.213-0.213,0.474-0.554,0.712-0.831c0.237-0.277,0.316-0.475,0.474-0.791c0.158-0.317,0.079-0.594-0.04-0.831C20.612,19.329,19.69,16.983,19.268,16.045z","clip-rule":"evenodd"})]),t("span",null,"Show, hide and move the order information to include with this whatsapp message")],-1)),i(O,{onClick:e[2]||(e[2]=A(()=>{},["stop"])),modelValue:d.includeOrderFieldNames,"onUpdate:modelValue":e[3]||(e[3]=g=>d.includeOrderFieldNames=g)},{default:y(()=>e[23]||(e[23]=[t("span",{class:"text-sm block"},"Include Order field names",-1)])),_:1},8,["modelValue"]),t("div",or,[i(P,{class:"divide-y mb-4",modelValue:d.whatsappFields,"onUpdate:modelValue":e[5]||(e[5]=g=>d.whatsappFields=g),handle:".draggable-handle","ghost-class":"bg-yellow-50"},{default:y(()=>[(s(!0),o(b,null,k(d.whatsappFields,(g,$)=>(s(),o("div",{key:$,class:"flex items-center justify-between p-4"},[i(T,{size:"md",modelValue:g.active,"onUpdate:modelValue":D=>g.active=D},{default:y(()=>[B(c(g.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),t("div",nr,[g.active?(s(),_(O,{key:0,onClick:e[4]||(e[4]=A(()=>{},["stop"])),modelValue:g.linebreak,"onUpdate:modelValue":D=>g.linebreak=D},{default:y(()=>e[24]||(e[24]=[t("span",{class:"text-sm block"},"Gap",-1)])),_:2},1032,["modelValue","onUpdate:modelValue"])):m("",!0),e[25]||(e[25]=t("svg",{class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 visible:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})],-1))])]))),128))]),_:1},8,["modelValue"])])],64)):m("",!0)]))]),_:1},8,["approveAction"])])}const ir=L(Ns,[["render",ar]]),dr={components:{Button:S,LineSkeleton:M,Status:J,BackButton:ks,PrintButton:Ss,PaymentStatus:X,DownloadButton:Ts,WhatsappButton:ir},data(){return{orderState:V()}},computed:{order(){return this.orderState.order},hasOrder(){return this.orderState.hasOrder},isLoadingOrder(){return this.orderState.isLoadingOrder},isCreating(){return this.$route.name==="create-store-order"}}},lr={class:"bg-white rounded-lg p-4 mb-4"},ur={class:"flex justify-between items-center"},cr={class:"flex items-center space-x-4"},hr={key:0,class:"flex items-center space-x-2"},pr={class:"flex space-x-2"},mr={key:1,class:"text-xl text-gray-700 font-semibold"},gr={key:0,class:"flex space-x-2 items-center"},wr={class:"flex space-x-2 items-center"};function fr(r,e,a,w,d,n){const h=l("BackButton"),p=l("LineSkeleton"),f=l("Status"),u=l("PaymentStatus"),v=l("WhatsappButton"),O=l("Button"),T=l("PrintButton"),P=l("DownloadButton");return s(),o("div",lr,[t("div",ur,[t("div",cr,[i(h),n.isLoadingOrder?(s(),o("div",hr,[e[0]||(e[0]=t("span",{class:"text-2xl font-bold tracking-tight text-gray-300"},"Order #",-1)),t("div",pr,[i(p,{width:"w-12",shine:!0}),i(p,{width:"w-4",shine:!0})])])):(s(),o("h1",mr,c(n.isCreating?"Add Order":"Order #"+n.order._attributes.number),1)),n.isLoadingOrder||n.hasOrder?(s(),o(b,{key:2},[i(f),i(u)],64)):m("",!0)]),n.isLoadingOrder||n.hasOrder?(s(),o("div",gr,[i(v),i(O,{type:"light",size:"xs",skeleton:n.isLoadingOrder,action:null},{default:y(()=>e[1]||(e[1]=[t("span",null,"Edit",-1)])),_:1},8,["skeleton"]),i(T),i(P),t("div",wr,[i(O,{type:"light",size:"xs",skeleton:n.isLoadingOrder,action:null,icon:"chevron-left-arrow"},null,8,["skeleton"]),i(O,{type:"light",size:"xs",skeleton:n.isLoadingOrder,action:null,icon:"chevron-right-arrow"},null,8,["skeleton"])])])):m("",!0)])])}const yr=L(dr,[["render",fr]]),_r={mixins:[Y,j],components:{Button:S,TextInput:K,SelectInput:U,TextareaInput:R,LineSkeleton:M,MoreInfoPopover:ee,Payments:ue,TeamMember:fe,PaymentLink:ke,OrderTotals:Ze,OrderHistory:st,OrderProducts:zt,DeliveryAddress:ss,CustomerSummary:ws,NoOrderProducts:bs,OrderHeader:yr},data(){return{couriers:[],apiState:Z(),isLoadingCouriers:!1,orderState:V(),storeState:C(),paymentStatuses:["Paid","Unpaid","Pending Payment","Partially Paid"],statuses:["Waiting","Cancelled","Completed","On Its Way","Ready For Pickup"]}},watch:{isLoadingStore(r){r||this.isEditting&&this.showOrder()}},computed:{store(){return this.storeState.store},order(){return this.orderState.order},hasOrder(){return this.orderState.hasOrder},orderForm(){return this.orderState.orderForm},isLoadingOrder(){return this.orderState.isLoadingOrder},isLoadingStore(){return this.storeState.isLoadingStore},isEditting(){return this.$route.name==="show-store-order"}},methods:{async showOrder(){this.orderState.setIsLoadingOrder(!0);const r=this.$route.params.order_href;let e={params:{_relationships:"courier,customer,deliveryAddress,orderFees,orderComments,orderProducts.product.photos,orderDiscounts,orderPromotions,orderHistory"}};await W.get(r,e).then(a=>{if(a.status==200&&a.data.exists){const w=a.data.order;this.orderState.setOrder(w),this.orderState.setOrderForm(w)}else a.data.exists?this.formState.setFormError("general",a.data.message):this.notificationState.showWarningNotification("This order does not exist"),this.$router.push({name:"show-store-orders",params:{store_href:this.store._links.showStore}})}).catch(a=>{this.formState.setServerFormErrors(a)}),this.orderState.setIsLoadingOrder(!1)},async showCouriers(){if(this.couriers.length)return;this.isLoadingCouriers=!0;const r=this.apiState.apiHome._links.showCouriers;let e={params:{per_page:100}};await W.get(r,e).then(a=>{a.status==200?this.couriers=a.data.data:(this.formState.setFormError("general",a.data.message),this.notificationState.showWarningNotification(a.data.message))}).catch(a=>{this.formState.setServerFormErrors(a)}),this.isLoadingCouriers=!1}},created(){this.showCouriers(),this.orderState.setEmptyOrderForm(),this.isEditting&&this.orderState.setIsLoadingOrder(!0)}},br={class:"pt-24 px-4"},xr={class:"grid grid-cols-12 gap-4 mb-4"},vr={class:"col-span-8"},kr={class:"bg-white rounded-lg p-4 mb-4"},Lr={key:0,class:"flex justify-end"},Or={class:"flex space-x-1 items-center"},Sr={key:0,class:"flex space-x-2"},Cr={class:"text-gray-500 text-xs"},Mr={class:"space-y-4"},Tr={key:0,class:"space-y-2 mt-4"},$r=["value"],Br={key:2,class:"space-y-2"},Pr=["value"],Dr={class:"flex space-x-4"},Fr={class:"w-1/2 space-y-2"},Wr=["value"],Vr={class:"w-1/2 space-y-2"},jr={class:"bg-white overflow-hidden rounded-lg space-y-4 p-4 mb-4"},Nr={class:"bg-white overflow-hidden rounded-lg space-y-4 p-4"},Ir={class:"col-span-4"};function Ar(r,e,a,w,d,n){const h=l("OrderHeader"),p=l("LineSkeleton"),f=l("MoreInfoPopover"),u=l("SelectInput"),v=l("TextInput"),O=l("TextareaInput"),T=l("OrderProducts"),P=l("OrderTotals"),N=l("Payments"),g=l("PaymentLink"),$=l("CustomerSummary"),D=l("DeliveryAddress"),G=l("TeamMember"),q=l("OrderHistory");return s(),o("div",br,[i(h),t("div",xr,[t("div",vr,[t("div",kr,[n.isLoadingOrder||n.hasOrder?(s(),o("div",Lr,[t("div",Or,[n.isLoadingOrder?(s(),o("div",Sr,[i(p,{width:"w-32",shine:!0}),i(p,{width:"w-4",shine:!0})])):(s(),o(b,{key:1},[t("span",Cr,c(r.formattedDatetime(n.order.createdAt)),1),i(f,{title:`Created ${r.formattedRelativeDate(n.order.createdAt)}`,placement:"top"},null,8,["title"])],64))])])):m("",!0),t("div",Mr,[n.isLoadingOrder?(s(),o("div",Tr,[e[5]||(e[5]=t("h1",{class:"text-sm font-medium leading-6 text-gray-900"},"Status",-1)),i(p,{shine:!0})])):(s(),_(u,{key:1,width:"w-full",label:"Status",modelValue:n.orderForm.status,"onUpdate:modelValue":e[0]||(e[0]=x=>n.orderForm.status=x)},{default:y(()=>[(s(!0),o(b,null,k(d.statuses,(x,F)=>(s(),o("option",{value:x,key:F},c(x),9,$r))),128))]),_:1},8,["modelValue"])),n.isLoadingOrder?(s(),o("div",Br,[e[6]||(e[6]=t("h1",{class:"text-sm font-medium leading-6 text-gray-900"},"Payment Status",-1)),i(p,{shine:!0})])):(s(),_(u,{key:3,width:"w-full",label:"Payment Status",modelValue:n.orderForm.paymentStatus,"onUpdate:modelValue":e[1]||(e[1]=x=>n.orderForm.paymentStatus=x)},{default:y(()=>[(s(!0),o(b,null,k(d.paymentStatuses,(x,F)=>(s(),o("option",{value:x,key:F},c(x),9,Pr))),128))]),_:1},8,["modelValue"])),t("div",Dr,[t("div",Fr,[e[7]||(e[7]=t("h1",{class:"text-sm font-medium leading-6 text-gray-900"},"Courier",-1)),d.isLoadingCouriers?(s(),_(p,{key:0,shine:!0})):(s(),_(u,{key:1,width:"w-full",modelValue:n.orderForm.courierId,"onUpdate:modelValue":e[2]||(e[2]=x=>n.orderForm.courierId=x)},{default:y(()=>[(s(!0),o(b,null,k(d.couriers,(x,F)=>(s(),o("option",{value:x.name,key:F},c(x.name),9,Wr))),128))]),_:1},8,["modelValue"]))]),t("div",Vr,[e[8]||(e[8]=t("h1",{class:"text-sm font-medium leading-6 text-gray-900"},"Tracking Number",-1)),d.isLoadingCouriers?(s(),_(p,{key:0,shine:!0})):(s(),_(v,{key:1,modelValue:n.orderForm.trackingNumber,"onUpdate:modelValue":e[3]||(e[3]=x=>n.orderForm.trackingNumber=x),errorText:r.getFormError("trackingNumber")},null,8,["modelValue","errorText"]))])]),i(O,{rows:2,label:"Internal Note",skeleton:n.isLoadingOrder,modelValue:n.orderForm.storeNote,"onUpdate:modelValue":e[4]||(e[4]=x=>n.orderForm.storeNote=x),labelPopoverTitle:"What Is This?",errorText:r.getFormError("storeNote"),labelPopoverDescription:"Internal information about this order only visible to you and other team members"},null,8,["skeleton","modelValue","errorText"])])]),t("div",jr,[i(T,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),i(P,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"])]),t("div",Nr,[i(N,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"])])]),t("div",Ir,[i(g,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),i($,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),i(D,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),i(G,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),i(q,{order:n.order,isLoadingOrder:n.isLoadingOrder},null,8,["order","isLoadingOrder"]),e[9]||(e[9]=t("div",{class:"bg-white rounded-lg p-4"},null,-1))])])])}const ho=L(_r,[["render",Ar]]);export{ho as default};
