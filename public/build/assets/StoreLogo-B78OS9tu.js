import{F as p}from"./FormMixin-DjetEzI6.js";import{u as g}from"./store-store-BVdLpB3d.js";import{p as u}from"./api-repository-Dpcq158Q.js";import{o as s,c as i,b as t,n as d,t as c,f as h}from"./app-BLw6N2N-.js";import{_ as f}from"./_plugin-vue_export-helper-DlAUqK2U.js";const m={mixins:[p],props:{size:{type:String,default:"w-20 h-20"},store:{type:[Object,null],default:null},showButton:{type:Boolean,default:!0}},data(){return{localStore:null,logoFilePath:null,isUploading:!1,storeState:g()}},methods:{triggerFileUpload(){this.$refs.fileInput.click()},handleFileUpload(o){const e=o.target.files[0];e&&(this.logoFilePath=URL.createObjectURL(e),this.uploadStoreLogo())},async uploadStoreLogo(){if(this.isUploading||this.$refs.fileInput.files.length==0)return;let o=new FormData;o.append("return",1),o.append("store_logo",this.$refs.fileInput.files[0]),this.isUploading=!0;try{const e=await u(this.localStore._links.uploadStoreLogo,o,{headers:{"Content-Type":"multipart/form-data"}});e.status===200?(this.isUploading=!1,this.storeState.store&&this.localStore.id==this.storeState.store.id&&(g().store._relationships.logo=e.data.mediaFile)):(this.showUnsuccessfulNotification(e.data.message),console.error(error))}catch(e){this.isUploading=!1,e.message&&this.showUnsuccessfulNotification(e.message),console.error(e)}}},created(){this.localStore=this.store?this.store:this.storeState.store,this.localStore._relationships.logo&&(this.logoFilePath=this.localStore._relationships.logo.filePath)}},w=["src"],k={class:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center rounded-full opacity-0 group-hover:opacity-100 transition-opacity"},x={key:0,class:"w-4 h-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},v={key:1,class:"w-4 h-4 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},y={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},F={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"};function S(o,e,a,U,r,l){return s(),i("div",{class:d({"flex flex-col items-center":a.showButton})},[t("div",{onClick:e[0]||(e[0]=(...n)=>l.triggerFileUpload&&l.triggerFileUpload(...n)),class:d([a.size,"bg-gray-200 rounded-full flex items-center justify-center cursor-pointer active:scale-95 transition-all relative group"])},[t("img",{src:r.logoFilePath?r.logoFilePath:"/images/logo-black-transparent.png",alt:"Store Logo",class:"w-full h-full rounded-full"},null,8,w),t("div",k,[r.logoFilePath?(s(),i("svg",x,e[3]||(e[3]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"},null,-1)]))):(s(),i("svg",v,e[4]||(e[4]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1)])))])],2),t("input",{type:"file",class:"hidden",ref:"fileInput",onChange:e[1]||(e[1]=(...n)=>l.handleFileUpload&&l.handleFileUpload(...n)),accept:"image/jpeg, image/jpg, image/png, image/gif"},null,544),a.showButton?(s(),i("button",{key:0,onClick:e[2]||(e[2]=(...n)=>l.triggerFileUpload&&l.triggerFileUpload(...n)),class:"flex items-center space-x-2 mt-4 text-xs border rounded-lg px-4 py-2 hover:bg-gray-100 active:scale-95 transition-all"},[r.logoFilePath?(s(),i("svg",y,e[5]||(e[5]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 12c0-1.232-.046-2.453-.138-3.662a4.006 4.006 0 0 0-3.7-3.7 48.678 48.678 0 0 0-7.324 0 4.006 4.006 0 0 0-3.7 3.7c-.017.22-.032.441-.046.662M19.5 12l3-3m-3 3-3-3m-12 3c0 1.232.046 2.453.138 3.662a4.006 4.006 0 0 0 3.7 3.7 48.656 48.656 0 0 0 7.324 0 4.006 4.006 0 0 0 3.7-3.7c.017-.22.032-.441.046-.662M4.5 12l3 3m-3-3-3 3"},null,-1)]))):(s(),i("svg",F,e[6]||(e[6]=[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m7.5-7.5h-15"},null,-1)]))),t("span",null,c(r.logoFilePath?"Add":"Change")+" store logo",1)])):h("",!0)],2)}const M=f(m,[["render",S]]);export{M as S};
