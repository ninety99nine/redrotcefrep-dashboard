import{u as P,c as T,i as W}from"./store-store-C4uDn5g4.js";import{q as G,o as e,e as d,w as c,c as a,f as u,A as J,r as l,D as K,b as t,d as s,t as h,F as y,u as Q,s as X,n as Y,h as g}from"./app-BMtIl1oL.js";import{A as $}from"./Alert-CITeqzk5.js";import{F as tt}from"./FormMixin-C9hWnrjF.js";import{U as et}from"./UtilsMixin-CbFS-0FV.js";import{T as st}from"./TextHeader-D12dS0xP.js";import{B as nt}from"./BackButton-povxR_sG.js";import{P as b}from"./PrimaryButton-CYQ7iQUy.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as ot}from"./Countdown-CHh_ExMt.js";import{E as at}from"./ExternalLink-kusKp_Gm.js";import{C as it}from"./ConfirmModal-78TVwEmj.js";import{S as C}from"./ShineEffect-BNKhlniq.js";import{L}from"./LineSkeleton-B85GKw1a.js";import{R as V}from"./RoundSkeleton-aDl0Y_xD.js";import{B as rt}from"./ButtonSkeleton-CEegY_9N.js";import{M as E}from"./MoreInfoPopover-BC6KphnW.js";import{B as F}from"./BadgeIndicator-GktKxOKf.js";import{F as ct}from"./FormErrorMessages-f6OOaco7.js";import{g as M,p as lt,d as dt}from"./api-repository-CEXPkGdM.js";import{T as ht}from"./TransactionPaymentStatus-CHT6D79l.js";import"./form-store-CmdXgIuJ.js";import"./SpinningLoader-CW2_T6BH.js";import"./StatusDot-BK_Nc1P_.js";const mt={components:{PrimaryButton:b},props:{action:{type:Function},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"base",options:["xs","sm","base","lg"]},type:{type:String,default:"dark",options:["dark","success","light","primary","warning","danger"]},content:{type:String,default:""}},data(){return{showText:!1,copyTimeout:null}},methods:{copyToClipboard(){this.showText=!0,this.copyTimeout==null&&clearInterval(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.showText=!1,clearInterval(this.copyTimeout)},1e3),this.action&&this.action()}}},ut={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},_t=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"},null,-1),pt=[_t],ft={key:1};function wt(n,_,m,x,i,o){const f=l("PrimaryButton"),r=K("clipboard");return G((e(),d(f,{action:o.copyToClipboard,disabled:m.disabled,loading:m.loading,size:m.size,type:m.type},{default:c(()=>[i.showText?u("",!0):(e(),a("svg",ut,pt)),i.showText?(e(),a("span",ft,"Copied!")):J(n.$slots,"default",{key:2})]),_:3},8,["action","disabled","loading","size","type"])),[[r,m.content]])}const yt=k(mt,[["render",wt]]),gt={components:{ShineEffect:C,LineSkeleton:L,PrimaryButton:b,RoundSkeleton:V},props:{transaction:{type:Object},isLoadingTransaction:{type:Boolean}},data(){return{storeState:P()}},computed:{store(){return this.storeState.store},owner(){return((this.transaction||{})._relationships||{}).owner||null},transactionForOrder(){return((this.transaction||{}).ownerType||"").toLowerCase()=="order"},transactionForPricingPlan(){return((this.transaction||{}).ownerType||"").toLowerCase()=="pricing plan"}},methods:{onViewOrder(){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:this.owner._links.showOrder}}).then(()=>{window.scrollTo(0,0)})}}},kt={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4"},xt={class:"flex items-center space-x-2"},vt={key:1,class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},Tt={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},bt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"},null,-1),Ct=[bt],Lt={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},St=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1),Bt=[St],Pt={key:3,class:"font-bold text-lg"},Mt={key:4,class:"font-bold text-lg"},Vt={key:5,class:"font-bold text-lg"},Et={key:0,class:"text-xs"},Ft={key:1,class:"flex justify-end"},At=t("span",null,"View Order",-1);function Dt(n,_,m,x,i,o){const f=l("RoundSkeleton"),r=l("ShineEffect"),p=l("LineSkeleton"),S=l("PrimaryButton");return e(),a("div",kt,[t("div",xt,[m.isLoadingTransaction?(e(),d(r,{key:0},{default:c(()=>[s(f,{size:"w-6 h-6"})]),_:1})):(e(),a("div",vt,[o.transactionForOrder?(e(),a("svg",Tt,Ct)):(e(),a("svg",Lt,Bt))])),m.isLoadingTransaction?(e(),d(r,{key:2},{default:c(()=>[s(p,{width:"w-32"})]),_:1})):o.transactionForOrder?(e(),a("span",Pt,"Order #"+h(o.owner._attributes.number),1)):o.transactionForPricingPlan?(e(),a("span",Mt,h(o.owner.name),1)):(e(),a("span",Vt,"..."))]),o.transactionForPricingPlan?(e(),a("span",Et,h(o.owner.description),1)):u("",!0),o.transactionForOrder?(e(),a("div",Ft,[s(S,{size:"xs",type:"primary",iconClass:"w-4 h-4",action:()=>o.onViewOrder()},{default:c(()=>[At]),_:1},8,["action"])])):u("",!0)])}const jt=k(gt,[["render",Dt]]),It={components:{ShineEffect:C,LineSkeleton:L,PrimaryButton:b},props:{transaction:{type:Object},isLoadingTransaction:{type:Boolean}},data(){return{storeState:P()}},computed:{store(){return this.storeState.store},hasCustomer(){return this.transaction._relationships.customer!=null},customer(){return this.transaction._relationships.customer}},methods:{onViewCustomer(){this.$router.push({name:"show-store-customer",params:{store_href:this.store._links.showStore,customer_href:this.customer._links.showCustomer}}).then(()=>{window.scrollTo(0,0)})}}},Nt={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4"},Rt={class:"flex items-center space-x-2"},Ht=t("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1),Ot={key:1,class:"font-bold"},Ut={key:2,class:"font-bold text-lg"},zt={class:"space-y-2"},Zt={key:0,class:"flex items-center space-x-2 text-sm"},qt=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1),Wt={key:1,class:"font-bold"},Gt={key:1,class:"flex items-center space-x-2 text-sm"},Jt=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),Kt={key:1,class:"font-bold"},Qt={key:1,class:"text-xs"},Xt={key:0,class:"flex justify-end"},Yt=t("span",null,"View Customer",-1);function $t(n,_,m,x,i,o){const f=l("LineSkeleton"),r=l("ShineEffect"),p=l("PrimaryButton");return e(),a("div",Nt,[t("div",Rt,[Ht,m.isLoadingTransaction?(e(),d(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):o.hasCustomer?(e(),a("span",Ot,h(o.customer._attributes.name),1)):(e(),a("span",Ut,"Customer"))]),t("div",zt,[m.isLoadingTransaction||o.hasCustomer&&(o.customer.mobileNumber||o.customer.email)?(e(),a(y,{key:0},[m.isLoadingTransaction||o.customer.mobileNumber?(e(),a("div",Zt,[qt,m.isLoadingTransaction?(e(),d(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):(e(),a("span",Wt,h(o.customer.mobileNumber.national),1))])):u("",!0),m.isLoadingTransaction||o.customer.email?(e(),a("div",Gt,[Jt,m.isLoadingTransaction?(e(),d(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):(e(),a("span",Kt,h(o.customer.email),1))])):u("",!0)],64)):(e(),a("span",Qt,"No information"))]),!m.isLoadingTransaction&&o.hasCustomer?(e(),a("div",Xt,[s(p,{size:"xs",type:"primary",iconClass:"w-4 h-4",action:()=>o.onViewCustomer()},{default:c(()=>[Yt]),_:1},8,["action"])])):u("",!0)])}const te=k(It,[["render",$t]]),ee={components:{ShineEffect:C,LineSkeleton:L,MoreInfoPopover:E,BadgeIndicator:F},props:{transaction:{type:Object}}},se={class:"flex space-x-1 items-center"};function ne(n,_,m,x,i,o){const f=l("BadgeIndicator"),r=l("MoreInfoPopover");return e(),a("div",se,[s(f,{type:"danger",text:m.transaction.failureType,showDot:!1},null,8,["text"]),s(r,{description:m.transaction.failureReason,placement:"top"},null,8,["description"])])}const oe=k(ee,[["render",ne]]),ae={mixins:[et,tt],components:{Alert:$,TextHeader:st,BackButton:nt,CopyButton:yt,Countdown:ot,ExternalLink:at,ConfirmModal:it,ShineEffect:C,LineSkeleton:L,PrimaryButton:b,RoundSkeleton:V,ButtonSkeleton:rt,MoreInfoPopover:E,BadgeIndicator:F,TransactionOwner:jt,FormErrorMessages:ct,TransactionFailureType:oe,TransactionCustomer:te,TransactionPaymentStatus:ht},data(){return{form:{paymentMethodId:null,description:null,amount:null},transaction:null,isDeleting:!1,isSubmitting:!1,apiState:Q(),appName:X.appName,storeState:P(),isRenewingPaymentLink:!1}},watch:{"$route.params.transaction_href"(n,_){window.scrollTo(0,0),this.getTransaction()}},computed:{store(){return this.storeState.store},isPaid(){return((this.transaction||{})._attributes||{}).isPaid},isPendingPayment(){return((this.transaction||{})._attributes||{}).isPendingPayment},hasCustomer(){return this.customer!=null},hasTransaction(){return this.transaction!=null},customer(){return((this.transaction||{})._relationships||{}).customer},paymentMethod(){return((this.transaction||{})._relationships||{}).paymentMethod||null},requestedByUser(){return((this.transaction||{})._relationships||{}).requestedByUser||null},manuallyVerifiedByUser(){return((this.transaction||{})._relationships||{}).manuallyVerifiedByUser||null},isCreating(){return this.$route.name==="create-store-transaction"},isEditting(){return this.$route.name==="show-store-transaction"},formHasChanged(){var n=T(this.form),_=T(this.originalForm);return!W(n,_)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingTransaction&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingTransaction&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-transactions",params:{store_href:this.store._links.showStore}})},openPaymentLinkInNewTab(){window.open(this.transaction.metadata.dpoPaymentUrl,"_blank")},getTransaction(){this.isLoadingTransaction=!0;const n={_relationships:"customer,requestedByUser,manuallyVerifiedByUser,paymentMethod,owner"};M(this.$route.params.transaction_href,n).then(_=>{_.status==200&&(this.transaction=_.data.transaction),this.isLoadingTransaction=!1}).catch(_=>{this.isLoadingTransaction=!1,this.setServerFormErrors(_)})},renewTransactionPaymentLink(){this.isRenewingPaymentLink=!0,lt(this.transaction._links.renewTransactionPaymentLink).then(n=>{n.status==200&&(this.showSuccessfulNotification("Transaction renewed"),this.getTransaction()),this.isRenewingPaymentLink=!1}).catch(n=>{this.isRenewingPaymentLink=!1,this.setServerFormErrors(n)})},updateTransaction(){this.isSubmitting=!0;const n={};M(this.transaction._links.updateTransaction,n).then(_=>{_.status==200&&(this.originalForm=T(this.form),this.showSuccessfulNotification("Transaction updated")),this.isSubmitting=!1}).catch(_=>{this.isSubmitting=!1,this.setServerFormErrors(_)})},deleteTransaction(){this.isDeleting=!0,dt(this.transaction._links.deleteTransaction).then(n=>{n.status==200&&(n.data.deleted?(this.showSuccessfulNotification("Transaction deleted"),this.$router.push({name:"show-store-transactions",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):(this.setFormError("general",n.data.message),this.showUnsuccessfulNotification(n.data.message))),this.isDeleting=!1}).catch(n=>{this.isDeleting=!1,this.setServerFormErrors(n)})}},created(){this.originalForm=T(this.form),this.isEditting&&this.getTransaction()}},ie={class:"flex justify-between items-center border-dashed py-6"},re={class:"flex justify-start"},ce={key:0,class:"flex items-center space-x-2"},le=t("span",{class:"text-2xl font-bold tracking-tight text-gray-300 animate-pulse"},"Transaction #",-1),de={key:1,class:"flex items-center"},he={key:0,class:"flex space-x-1 items-center"},me=t("span",null,"Created:",-1),ue={class:"font-bold"},_e={class:"relative",action:"#",method:"POST"},pe={class:"flex items-center space-x-2"},fe=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),we={class:"grid grid-cols-12 gap-4 mb-8"},ye={class:"col-span-8"},ge={class:"bg-white shadow-lg rounded-lg border space-y-4 p-4 mb-4"},ke={class:"flex items-center space-x-8"},xe={class:"flex items-center space-x-2"},ve=t("span",{class:"text-xs"},"Status:",-1),Te={key:1,class:"flex items-center space-x-2"},be=t("span",{class:"text-xs"},"Payment Method:",-1),Ce={key:1,class:"flex space-x-1 items-center"},Le={class:"text-xs font-bold"},Se={class:"w-full space-y-2"},Be={key:1},Pe={key:0,class:"flex items-center space-x-2 border-b border-dashed pb-4 mb-4"},Me=t("span",{class:"text-xs"},"Payment Method:",-1),Ve={class:"flex space-x-1 items-center"},Ee={class:"text-xs font-bold"},Fe={class:"flex items-center space-x-2 text-sm"},Ae=t("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),De={class:"flex items-center bg-white shadow-lg rounded-lg border space-y-4 p-4 mb-4"},je={class:"w-full space-y-4"},Ie={class:"flex items-end space-x-2"},Ne={class:"text-4xl font-bold"},Re={key:0,class:"text-2xl text-gray-400"},He={key:0,class:"flex items-center space-x-2 text-sm"},Oe=t("span",{class:"whitespace-nowrap"},"Date Paid: ",-1),Ue={class:"flex items-center space-x-2"},ze={class:"font-bold"},Ze={key:1,class:"flex items-center justify-between"},qe={key:1,class:"flex items-center space-x-2"},We=t("span",null,"Payment Link Expires In: ",-1),Ge=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})],-1),Je=t("span",{class:"ml-1"},"Copy Payment Link",-1),Ke=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),Qe=t("span",null,"Pay Now",-1),Xe={key:1,class:"flex space-x-2"},Ye=t("span",{class:"ml-1"},"Copy Payment Link",-1),$e=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),ts=t("span",null,"Pay Now",-1),es={key:2,class:"flex justify-end"},ss=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),ns=t("span",null,"Renew Payment Link",-1),os={key:0,class:"border rounded-full bg-gray-50"},as=t("svg",{class:"w-20 h-20 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})],-1),is=[as],rs={class:"col-span-4 space-y-4"},cs={class:"flex flex-col justify-between bg-white shadow-lg rounded-lg border space-y-2 p-4"},ls={class:"flex items-center space-x-2 text-sm"},ds=t("span",{class:"whitespace-nowrap"},"Requester: ",-1),hs={class:"font-bold"},ms={class:"flex items-center space-x-2 text-sm"},us=t("span",{class:"whitespace-nowrap"},"Verifyer: ",-1),_s={key:0,class:"font-bold"},ps={key:1,class:"font-bold"},fs={class:"flex items-center space-x-2 text-sm"},ws=t("span",{class:"whitespace-nowrap"},"Verification Method: ",-1),ys={class:"flex items-center whitespace-pre"},gs=t("span",null,"Do you want to permanently delete",-1),ks={key:1,class:"font-bold text-black"},xs=t("span",null,"? Once this transaction is deleted you will not be able to recover it.",-1),vs={class:"flex justify-end"},Ts=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),bs={class:"mb-8"},Cs={class:"font-bold text-black"};function Ls(n,_,m,x,i,o){const f=l("BackButton"),r=l("LineSkeleton"),p=l("ShineEffect"),S=l("TextHeader"),w=l("MoreInfoPopover"),v=l("PrimaryButton"),A=l("Alert"),D=l("FormErrorMessages"),j=l("TransactionPaymentStatus"),I=l("TransactionFailureType"),N=l("RoundSkeleton"),R=l("Countdown"),B=l("ButtonSkeleton"),H=l("CopyButton"),O=l("TransactionOwner"),U=l("TransactionCustomer"),z=l("BadgeIndicator"),Z=l("ConfirmModal");return e(),a("div",null,[t("div",ie,[t("div",re,[s(f,{class:"w-16 mr-4",action:o.goBack},null,8,["action"]),n.isLoadingTransaction?(e(),a("div",ce,[le,s(p,{class:"flex space-x-2"},{default:c(()=>[s(r,{width:"w-12 mt-2"}),s(r,{width:"w-4 mt-2"})]),_:1})])):(e(),a("div",de,[s(S,null,{default:c(()=>[g(h(o.isCreating?"Add Transaction":"Transaction #"+i.transaction._attributes.number),1)]),_:1}),s(w,{class:"ml-2 mt-1",title:"What Is This?",description:"Transactions are detailed records of payments made by customers for purchasing products or services from your store.",placement:"top"})]))]),o.isEditting?(e(),a("div",he,[n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-32"}),s(r,{width:"w-4"})]),_:1})):(e(),a(y,{key:1},[me,t("span",ue,h(n.formattedDatetime(i.transaction.createdAt)),1),s(w,{title:n.formattedRelativeDate(i.transaction.createdAt),placement:"top"},null,8,["title"])],64))])):u("",!0)]),t("form",_e,[o.mustCreate||o.mustSaveChanges?(e(),d(A,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:c(()=>[t("div",pe,[fe,t("span",null,h(o.isCreating?"Create your transaction":"Please save your changes"),1)]),s(v,{action:o.isCreating?n.createTransaction:o.updateTransaction,loading:i.isSubmitting},{default:c(()=>[g(h(o.isCreating?"Create Transaction":"Save Changes"),1)]),_:1},8,["action","loading"])]),_:1})):u("",!0),t("div",we,[t("div",ye,[s(D),t("div",ge,[t("div",ke,[t("div",xe,[ve,n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-24"}),s(r,{width:"w-4"})]),_:1})):(e(),d(j,{key:1,transaction:i.transaction},null,8,["transaction"]))]),o.hasTransaction&&i.transaction.failureReason?(e(),d(I,{key:0,transaction:i.transaction},null,8,["transaction"])):u("",!0),n.isLoadingTransaction||!i.transaction.failureReason?(e(),a("div",Te,[be,n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-24"}),s(r,{width:"w-4"})]),_:1})):(e(),a("div",Ce,[t("span",Le,h(o.paymentMethod.name),1),s(w,{title:"What Is This?",description:"This is the payment method used for this transaction",placement:"top"})]))])):u("",!0)]),t("div",null,[n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2 w-full"},{default:c(()=>[s(N,{size:"w-8 h-8 flex-shrink-0"}),t("div",Se,[s(r,{width:"w-2/3"}),s(r,{width:"w-1/3"})])]),_:1})):(e(),a("div",Be,[i.transaction.failureReason?(e(),a("div",Pe,[Me,t("div",Ve,[t("span",Ee,h(o.paymentMethod.name),1),s(w,{title:"What Is This?",description:"This is the payment method used for this transaction",placement:"top"})])])):u("",!0),t("div",Fe,[Ae,t("span",null,h(i.transaction.description),1)])]))])]),t("div",De,[t("div",je,[t("div",Ie,[n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-40 h-8"}),s(r,{width:"w-12 h-6"})]),_:1})):(e(),a(y,{key:1},[t("span",Ne,h(i.transaction.amount.amountWithCurrency),1),i.transaction.percentage.value!=100?(e(),a("span",Re,"("+h(i.transaction.percentage.valueSymbol)+")",1)):u("",!0)],64))]),o.isPaid?(e(),a("div",He,[Oe,t("span",Ue,[t("span",ze,h(n.formattedDatetime(i.transaction.updatedAt)),1),s(w,{title:n.formattedRelativeDate(i.transaction.updatedAt),placement:"top"},null,8,["title"])])])):u("",!0),n.isLoadingTransaction||i.transaction.metadata&&i.transaction.metadata.canPayUsingDpo?(e(),a("div",Ze,[t("div",null,[n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-40"}),s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a("div",qe,[We,s(R,{showMoreInfoPopover:!1,time:i.transaction.metadata.dpoPaymentUrlExpiresAt,textClass:"text-yellow-500 font-bold underline decoration-dashed underline-offset-4"},null,8,["time"]),s(w,{title:"This is the time left before the payment link expires",placement:"top"})]))]),n.isLoadingTransaction||i.transaction.metadata.canPayUsingDpo?(e(),a(y,{key:0},[n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex space-x-2"},{default:c(()=>[s(B,{size:"sm"},{default:c(()=>[Ge,Je]),_:1}),s(B,{size:"sm"},{default:c(()=>[Ke,Qe]),_:1})]),_:1})):(e(),a("div",Xe,[s(H,{type:"light",size:"sm",content:i.transaction.metadata.dpoPaymentUrl},{default:c(()=>[Ye]),_:1},8,["content"]),s(v,{action:o.openPaymentLinkInNewTab(),type:"primary",size:"sm"},{default:c(()=>[$e,ts]),_:1},8,["action"])]))],64)):u("",!0)])):i.transaction.metadata&&i.transaction.metadata.dpoPaymentLinkHasExpired?(e(),a("div",es,[s(v,{action:o.renewTransactionPaymentLink(),type:"primary",size:"sm",loading:i.isRenewingPaymentLink},{default:c(()=>[ss,ns]),_:1},8,["action","loading"])])):u("",!0)]),o.isPaid?(e(),a("span",os,is)):u("",!0)])]),t("div",rs,[s(O,{transaction:i.transaction,isLoadingTransaction:n.isLoadingTransaction},null,8,["transaction","isLoadingTransaction"]),s(U,{transaction:i.transaction,isLoadingTransaction:n.isLoadingTransaction},null,8,["transaction","isLoadingTransaction"]),t("div",cs,[t("div",ls,[ds,n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a(y,{key:1},[t("span",hs,h(o.requestedByUser._attributes.name),1),s(w,{title:"What Is This?",description:"This is the person that requested this transaction",placement:"top"})],64))]),t("div",ms,[us,n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-32"}),s(r,{width:"w-4"})]),_:1})):(e(),a(y,{key:1},[o.manuallyVerifiedByUser?(e(),a("span",_s,h(o.manuallyVerifiedByUser._attributes.name),1)):(e(),a("span",ps,h(i.appName),1)),s(w,{title:"What Is This?",description:o.manuallyVerifiedByUser?"This is the person that verified this transaction":"This is the application that verified this transaction",placement:"top"},null,8,["description"])],64))]),t("div",fs,[ws,n.isLoadingTransaction?(e(),d(p,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a(y,{key:1},[s(z,{type:i.transaction.verificationType.toLowerCase()=="automatic"?"success":"info",text:i.transaction.verificationType,showDot:!1},null,8,["type","text"]),s(w,{title:"What Is This?",description:"This indicates whether the transaction was verified manually by a person or automatically by the application",placement:"top"})],64))])])])]),i.transaction?(e(),a("div",{key:1,class:Y(["space-y-4 shadow-lg rounded-lg border p-4",n.isLoadingTransaction?"bg-gray-50":"border-red-300 bg-red-50"])},[t("div",ys,[gs,n.isLoadingTransaction?(e(),d(p,{key:0},{default:c(()=>[s(r,{width:"w-20 mx-2"})]),_:1})):(e(),a("span",ks," Transaction #"+h(i.transaction._attributes.number),1)),xs]),t("div",vs,[o.isEditting&&n.isLoadingTransaction?(e(),d(B,{key:0},{default:c(()=>[g("Delete Transaction")]),_:1})):(e(),d(Z,{key:1,approveText:"Delete Order",approveAction:o.deleteTransaction,isLoading:i.isDeleting},{content:c(()=>[Ts,t("p",bs,[g("Are you sure you want to permanently delete "),t("span",Cs,"Transaction #"+h(i.transaction._attributes.number),1),g("?")])]),trigger:c(q=>[s(v,{action:q.showModal,loading:i.isDeleting,type:"danger"},{default:c(()=>[g(" Delete Transaction ")]),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"]))])],2)):u("",!0)])])}const Xs=k(ae,[["render",Ls]]);export{Xs as default};
