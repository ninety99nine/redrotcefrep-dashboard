import{P}from"./Pill-CD_3pjy5.js";import{o as r,c as n,F as k,k as C,b as i,m as E,n as R,u as T,r as h,d as u,w as v,t as b,e as V,h as L,f,x as Z,Z as W,z as O,T as G}from"./app-DEkFCb1u.js";import{B as Y}from"./Button-CTlUNYLQ.js";import{d as A,U as J}from"./form-store-B_ZbhArT.js";import{S as K}from"./SearchInput-BKDyZ1Nd.js";import{S as Q}from"./SelectInput-DXfLro8i.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as B}from"./SpinningLoader-BnJGVf_7.js";import{c as S,i as z}from"./cloneDeep-BGE7Bmb-.js";import{F as I}from"./FormMixin-D44Bj-el.js";import{D as U}from"./Drawer-DoikbwU2.js";import{u as X}from"./store-store-CxinBL3L.js";import{g as H}from"./api-repository-CIJPUswr.js";import{C as $}from"./Checkbox-BOFyOk4h.js";import{M as ee}from"./MoneyInput-C1qj8tqg.js";import{D as te}from"./Datepicker-HHxVzfmA.js";import{V as N}from"./vue-draggable-next.esm-bundler-C7oHOHQm.js";import{T as se}from"./ToogleSwitch-CtY-gb5u.js";const oe={props:{pagination:{type:Object}},methods:{onClick(t){t.url&&this.$emit("paginate",t.url)},isDisabled(t){return t.url==null},getLinkClass(t,e){var o;return t==0?o="flex items-center justify-center whitespace-nowrap px-3 h-8 ms-0 leading-tight border rounded-s-lg dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":t==this.pagination.links.length-1?o="flex items-center justify-center whitespace-nowrap px-3 h-8 leading-tight border rounded-e-lg hover:bg-gray-100 dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white":o="flex items-center justify-center whitespace-nowrap px-3 h-8 leading-tight border dark:bg-gray-800 dark:border-gray-700 dark:text-gray-400 dark:hover:bg-gray-700 dark:hover:text-white",this.isDisabled(e)?o+=" cursor-not-allowed bg-gray-100":o+=e.active?" bg-blue-500 hover:bg-blue-500 border-blue-500 text-white":"bg-white hover:bg-gray-100 hover:text-gray-700 text-gray-500",o}}},re={class:"inline-flex -space-x-px rtl:space-x-reverse text-sm h-8"},ie=["href","onClick","disabled"],le=["innerHTML"];function ne(t,e,o,g,l,s){return r(),n("ul",re,[(r(!0),n(k,null,C(o.pagination.links,(d,c)=>(r(),n("li",{key:c},[i("a",{href:d.url??"#",onClick:E(w=>s.onClick(d),["prevent"]),disabled:s.isDisabled(d),class:R(s.getLinkClass(c,d))},[i("span",{innerHTML:d.label},null,8,le)],10,ie)]))),128))])}const ae=j(oe,[["render",ne]]),ce={mixins:[I],components:{Pill:P,Button:Y,Drawer:U,Checkbox:$,MoneyInput:ee,Datepicker:te,SpinningLoader:B},props:{filterExpressions:{type:Array,default:()=>[]}},emits:["updatedFilters"],data(){return{showMore:!1,localFilters:null,filterDrawer:null,originalFilters:null,apiState:T(),isLoadingFilters:!1,lastEmittedFilters:null,storeState:X()}},watch:{localFilters:{handler(t){this.createFilterExpressions()},deep:!0}},computed:{store(){return this.storeState.store},hasFilterExpressions(){return this.filterExpressions.length>0}},methods:{countActiveOptions(t){return t.options.filter(e=>e.active).length},createFilterExpressions(){let t=[];for(let e=0;e<this.localFilters.length;e++){const o=this.localFilters[e];if(o.options.some(l=>l.active))if(o.type==="checkboxes"){const d=o.options.filter(x=>x.active).map(x=>x.value).join(","),c=`${o.label} = ${d}`,w=`${o.target}:in:${d}`;t.push({label:c,expression:w,filterIndex:e})}else for(let l=0;l<o.options.length;l++){const s=o.options[l];if(s.active&&["money","date"].includes(o.type)){let c=null,w=null,x=s.value1,_=s.value2;const p=s.value;o.type==="date"&&(x=A(s.value1,"DD MMM YYYY").format("YYYY-MM-DD"),_=A(s.value2,"DD MMM YYYY").format("YYYY-MM-DD")),["bt","bt_ex"].includes(p)?(c=`${o.label} between ${s.value1} - ${s.value2} ${p=="bt"?"(including)":"(excluding)"}`,w=`${o.target}:${p}:${x}:${_}`):(c=`${o.label} ${p} ${s.value1}`,w=`${o.target}:${p}:${x}`),t.push({label:c,expression:w,filterIndex:e,optionIndex:l})}}}this.filtersHaveChanged(t,this.lastEmittedFilters)&&(this.$emit("updatedFilters",t),this.lastEmittedFilters=S(t))},applyFilterExpressions(){this.filterExpressions.forEach(t=>{const e=t.split(":"),o=e[0],g=e[1],l=e[2],s=e[3]??null,d=this.localFilters.find(c=>c.target===o);if(d)if(g==="in"){const c=l.split(",");d.options.forEach(w=>{c.includes(w.value)&&(w.active=!0)})}else d.options.forEach(c=>{c.value===g&&(c.active=!0,A(l).isValid()?c.value1=A(l).format("DD MMM YYYY"):c.value1=l,s&&A(s).isValid()?c.value2=A(s).format("DD MMM YYYY"):c.value2=s)})})},filtersHaveChanged(t,e){var o=S(t),g=S(e);return!z(o,g)},openFilterDrawer(){this.localFilters==null&&this.getFilters(),this.filterDrawer.showDrawer()},closeFilterDrawer(){this.filterDrawer.hideDrawer()},toggleFilterVisibility(t){this.localFilters[t].active||this.localFilters.forEach((e,o)=>{this.localFilters[o].active=!1}),this.localFilters[t].active=!this.localFilters[t].active},showMoreOrLess(){this.showMore=!this.showMore},removeAppliedFilter(t){t.hasOwnProperty("filterIndex")&&t.hasOwnProperty("optionIndex")?this.localFilters[t.filterIndex].options[t.optionIndex].active=!1:this.localFilters[t.filterIndex].options.forEach(e=>{e.active=!1})},clearFilters(){this.localFilters=S(this.originalFilters)},getFilters(){if(this.isLoadingFilters)return;this.isLoadingFilters=!0;const t={type:"orders"};this.store&&(t.store_id=this.store.id),H(this.apiState.apiHome._links.showFilters,t).then(e=>{e.status==200&&(this.localFilters=e.data.map(o=>({...o,active:!1,options:o.options.map(g=>{let l={...g,active:!1};return o.type=="money"?(l.value1="0.00",l.value2="0.00"):o.type=="date"&&(l.value1=A().subtract(7,"day").format("DD MMM YYYY"),l.value2=A().add(7,"day").format("DD MMM YYYY")),l})})),this.originalFilters=S(this.localFilters),this.applyFilterExpressions()),this.isLoadingFilters=!1}).catch(e=>{this.isLoadingFilters=!1,this.formState.setServerFormErrors(e)})}},mounted(){this.filterDrawer=this.$refs.filterDrawer,this.hasFilterExpressions&&this.getFilters()}},ue={class:"flex justify-between items-center space-x-2 bg-gray-100 border-b shadow-sm p-4"},de={key:0,class:"flex justify-center my-8"},he={key:1,class:"divide-y mb-4"},pe={key:0},ge=["onClick"],me={class:"flex items-center space-x-2"},fe={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},ve={key:2,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},we={key:0,class:"text-sm p-4"},ye={key:0,class:"my-4"},xe={key:0,class:"space-y-4"},be={key:1,class:"space-y-4"},ke={key:2,class:"flex flex-col items-center px-4 space-y-8 mb-60"};function Se(t,e,o,g,l,s){const d=h("Button"),c=h("SpinningLoader"),w=h("Pill"),x=h("Checkbox"),_=h("Datepicker"),p=h("MoneyInput"),y=h("Drawer");return r(),n("div",null,[u(d,{action:s.openFilterDrawer,type:"outline",size:"sm",icon:"filter"},null,8,["action"]),u(y,{ref:"filterDrawer",placement:"right",bodyScrolling:!0,backdrop:!0,hideCloseIcon:!0},{content:v(()=>[i("div",ue,[e[7]||(e[7]=i("div",{class:"flex items-center space-x-2"},[i("svg",{class:"w-5 h-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 3c2.755 0 5.455.232 8.083.678.533.09.917.556.917 1.096v1.044a2.25 2.25 0 0 1-.659 1.591l-5.432 5.432a2.25 2.25 0 0 0-.659 1.591v2.927a2.25 2.25 0 0 1-1.244 2.013L9.75 21v-6.568a2.25 2.25 0 0 0-.659-1.591L3.659 7.409A2.25 2.25 0 0 1 3 5.818V4.774c0-.54.384-1.006.917-1.096A48.32 48.32 0 0 1 12 3Z"})]),i("h2",{class:"text-gray-700"}," Filters ")],-1)),(r(),n("svg",{onClick:e[0]||(e[0]=(...m)=>s.closeFilterDrawer&&s.closeFilterDrawer(...m)),class:"w-6 h-6 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[6]||(e[6]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])))]),e[11]||(e[11]=i("p",{class:"p-4 text-sm bg-blue-100"}," Find exactly what you need by applying filters to your data ",-1)),l.isLoadingFilters?(r(),n("div",de,[u(c)])):(r(),n("div",he,[(r(!0),n(k,null,C(l.localFilters,(m,M)=>(r(),n(k,{key:M},[l.showMore||m.priority?(r(),n("div",pe,[i("div",{onClick:a=>s.toggleFilterVisibility(M),class:"text-sm p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer flex items-center justify-between"},[i("span",null,b(m.label),1),i("div",me,[s.countActiveOptions(m)?(r(),V(w,{key:0,type:"primary",size:"xs",class:"flex-shrink-0"},{default:v(()=>[L(b(s.countActiveOptions(m)),1)]),_:2},1024)):f("",!0),m.active?(r(),n("svg",fe,e[8]||(e[8]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))):(r(),n("svg",ve,e[9]||(e[9]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)])))])],8,ge),m.active?(r(),n("div",we,[(r(!0),n(k,null,C(m.options,(a,D)=>(r(),n("div",{key:D},[u(x,{onClick:e[1]||(e[1]=E(()=>{},["stop"])),modelValue:a.active,"onUpdate:modelValue":F=>a.active=F},{default:v(()=>[L(b(a.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),a.active&&["date","money"].includes(m.type)?(r(),n("div",ye,[m.type==="date"?(r(),n("div",xe,[u(_,{onClick:e[2]||(e[2]=E(()=>{},["stop"])),modelValue:a.value1,"onUpdate:modelValue":F=>a.value1=F},null,8,["modelValue","onUpdate:modelValue"]),["bt","bt_ex"].includes(a.value)?(r(),V(_,{key:0,onClick:e[3]||(e[3]=E(()=>{},["stop"])),modelValue:a.value2,"onUpdate:modelValue":F=>a.value2=F},null,8,["modelValue","onUpdate:modelValue"])):f("",!0)])):m.type==="money"?(r(),n("div",be,[u(p,{onClick:e[4]||(e[4]=E(()=>{},["stop"])),modelValue:a.value1,"onUpdate:modelValue":F=>a.value1=F},null,8,["modelValue","onUpdate:modelValue"]),["bt","bt_ex"].includes(a.value)?(r(),V(p,{key:0,onClick:e[5]||(e[5]=E(()=>{},["stop"])),modelValue:a.value2,"onUpdate:modelValue":F=>a.value2=F},null,8,["modelValue","onUpdate:modelValue"])):f("",!0)])):f("",!0)])):f("",!0)]))),128))])):f("",!0)])):f("",!0)],64))),128))])),l.isLoadingFilters?f("",!0):(r(),n("div",ke,[u(d,{action:s.showMoreOrLess,type:"outline",size:"xs",icon:l.showMore?"short-up-arrow":"short-down-arrow"},{default:v(()=>[i("span",null,b(l.showMore?"show less options":"show more options"),1)]),_:1},8,["action","icon"]),u(d,{action:s.clearFilters,type:"light",size:"sm",class:"w-full"},{default:v(()=>e[10]||(e[10]=[i("span",null,"Clear Filters",-1)])),_:1},8,["action"])]))]),_:1},512)])}const _e=j(ce,[["render",Se]]),De={mixins:[I],components:{draggable:N,Pill:P,Button:Y,Drawer:U,Checkbox:$,ToogleSwitch:se},props:{columns:{type:Array,default:()=>[]}},emits:["updatedColumns"],data(){return{showMore:!1,columnsDrawer:null,showEverything:!1,localColumns:S(this.columns),originalColumns:S(this.columns)}},watch:{localColumns:{handler(t){this.showEverything!=this.isShowingEverything&&(this.showEverything=this.isShowingEverything),this.$emit("updatedColumns",t)},deep:!0},showEverything(t){t?this.localColumns.map(e=>e.active=!0):this.isShowingEverything&&this.localColumns.map(e=>e.active=e.priority)}},computed:{isShowingEverything(){return this.localColumns.filter(t=>t.active==!0).length==this.localColumns.length}},methods:{openColumnsDrawer(){this.columnsDrawer.showDrawer()},closeColumnsDrawer(){this.columnsDrawer.hideDrawer()},resetColumns(){this.localColumns=S(this.originalColumns)}},mounted(){this.columnsDrawer=this.$refs.columnsDrawer}},Ce={class:"flex justify-between items-center space-x-2 bg-gray-100 border-b shadow-sm p-4"},Fe={class:"p-4 border-b shadow-sm"},Me={class:"divide-y mb-4"},Ee={class:"text-sm block"},Ve={class:"px-4 mb-60"};function Le(t,e,o,g,l,s){const d=h("Button"),c=h("ToogleSwitch"),w=h("Checkbox"),x=h("draggable"),_=h("Drawer");return r(),n("div",null,[u(d,{action:s.openColumnsDrawer,type:"outline",size:"sm",icon:"bars-4"},null,8,["action"]),u(_,{ref:"columnsDrawer",placement:"right",bodyScrolling:!0,backdrop:!0,hideCloseIcon:!0},{content:v(()=>[i("div",Ce,[e[5]||(e[5]=i("div",{class:"flex items-center space-x-2"},[i("svg",{class:"w-5 h-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 6.75h16.5M3.75 12h16.5m-16.5 5.25h16.5"})]),i("h2",{class:"text-gray-700"}," Columns ")],-1)),(r(),n("svg",{onClick:e[0]||(e[0]=(...p)=>s.closeColumnsDrawer&&s.closeColumnsDrawer(...p)),class:"w-6 h-6 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[4]||(e[4]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])))]),e[9]||(e[9]=i("p",{class:"p-4 text-sm bg-blue-100"}," Show, hide and move your data they way you want to see it ",-1)),i("div",Fe,[u(c,{size:"md",modelValue:l.showEverything,"onUpdate:modelValue":e[1]||(e[1]=p=>l.showEverything=p)},{default:v(()=>e[6]||(e[6]=[L(" Show Everything ")])),_:1},8,["modelValue"])]),i("div",Me,[u(x,{class:"divide-y mb-4",modelValue:l.localColumns,"onUpdate:modelValue":e[3]||(e[3]=p=>l.localColumns=p),handle:".draggable-handle","ghost-class":"bg-yellow-50"},{default:v(()=>[(r(!0),n(k,null,C(l.localColumns,(p,y)=>(r(),n("div",{key:y,class:"flex items-center justify-between p-4"},[u(w,{onClick:e[2]||(e[2]=E(()=>{},["stop"])),modelValue:p.active,"onUpdate:modelValue":m=>p.active=m},{default:v(()=>[i("span",Ee,b(p.name),1)]),_:2},1032,["modelValue","onUpdate:modelValue"]),e[7]||(e[7]=i("svg",{class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 visible:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"})],-1))]))),128))]),_:1},8,["modelValue"])]),i("div",Ve,[u(d,{action:s.resetColumns,type:"light",size:"sm",class:"w-full"},{default:v(()=>e[8]||(e[8]=[i("span",null,"Rest Columns",-1)])),_:1},8,["action"])])]),_:1},512)])}const Ae=j(De,[["render",Le]]),Oe={mixins:[I],components:{draggable:N,Pill:P,Button:Y,Drawer:U,Checkbox:$,SpinningLoader:B},props:{sortingExpressions:{type:Array,default:()=>[]}},emits:["updatedSorting"],data(){return{showMore:!1,sortDrawer:null,localSorting:null,originalSorting:null,apiState:T(),isLoadingSorting:!1,lastEmittedSorting:null}},watch:{localSorting:{handler(t){this.createSortingExpressions()},deep:!0}},computed:{hasSortingExpressions(){return this.sortingExpressions.length>0},totalActiveSortOptions(){return this.localSorting==null?0:this.localSorting.filter(t=>t.options.some(e=>e.active)).length}},methods:{toggleSortOption(t,e){this.localSorting[t].options.forEach((o,g)=>{g!==e&&(o.active=!1)})},countActiveOptions(t){return t.options.filter(e=>e.active).length},createSortingExpressions(){let t=[];for(let e=0;e<this.localSorting.length;e++){const o=this.localSorting[e];if(o.options.some(l=>l.active)){const s=o.options.filter(w=>w.active)[0],d=`${o.label} (${s.label})`,c=`${o.target}:${s.value}`;t.push({label:d,sortIndex:e,expression:c})}}this.sortingHasChanged(t,this.lastEmittedSorting)&&(this.$emit("updatedSorting",t),this.lastEmittedSorting=S(t))},applySortingExpressions(){this.sortingExpressions.forEach(t=>{const e=t.split(":"),o=e[0],g=e[1],l=this.localSorting.find(s=>s.target===o);l&&l.options.forEach(s=>{s.value==g&&(s.active=!0)})})},sortingHasChanged(t,e){var o=S(t),g=S(e);return!z(o,g)},openSortDrawer(){this.localSorting==null&&this.getSorting(),this.sortDrawer.showDrawer()},closeSortDrawer(){this.sortDrawer.hideDrawer()},toggleSortingVisibility(t){this.localSorting[t].active||this.localSorting.forEach((e,o)=>{this.localSorting[o].active=!1}),this.localSorting[t].active=!this.localSorting[t].active},showMoreOrLess(){this.showMore=!this.showMore},removeAppliedSort(t){this.localSorting[t.sortIndex].options.forEach(e=>{e.active=!1})},clearSorting(){this.localSorting=S(this.originalSorting)},getSorting(){if(this.isLoadingSorting)return;this.isLoadingSorting=!0;const t={type:"orders"};H(this.apiState.apiHome._links.showSorting,t).then(e=>{e.status==200&&(this.localSorting=e.data.map(o=>({...o,active:!1,options:o.options.map(g=>({...g,active:!1}))})),this.originalSorting=S(this.localSorting),this.applySortingExpressions()),this.isLoadingSorting=!1}).catch(e=>{this.isLoadingSorting=!1,this.formState.setServerFormErrors(e)})}},mounted(){this.sortDrawer=this.$refs.sortDrawer,this.hasSortingExpressions&&this.getSorting()}},je={class:"flex justify-between items-center space-x-2 bg-gray-100 border-b shadow-sm p-4"},Pe={key:0,class:"flex justify-center my-8"},Ye={key:0},Be=["onClick"],Ie={class:"flex items-center space-x-2"},Ue={key:2,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},$e={key:3,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Te={key:0,class:"text-sm p-4"},ze={key:2,class:"flex flex-col items-center px-4 space-y-8 mb-60"};function He(t,e,o,g,l,s){const d=h("Button"),c=h("SpinningLoader"),w=h("Pill"),x=h("Checkbox"),_=h("draggable"),p=h("Drawer");return r(),n("div",null,[u(d,{action:s.openSortDrawer,type:"outline",size:"sm",icon:"sort-downwards"},null,8,["action"]),u(p,{ref:"sortDrawer",placement:"right",bodyScrolling:!0,backdrop:!0,hideCloseIcon:!0},{content:v(()=>[i("div",je,[e[4]||(e[4]=i("div",{class:"flex items-center space-x-2"},[i("svg",{class:"w-5 h-5 text-gray-700",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 4.5h14.25M3 9h9.75M3 13.5h9.75m4.5-4.5v12m0 0-3.75-3.75M17.25 21 21 17.25"})]),i("h2",{class:"text-gray-700"}," Sorting ")],-1)),(r(),n("svg",{onClick:e[0]||(e[0]=(...y)=>s.closeSortDrawer&&s.closeSortDrawer(...y)),class:"w-6 h-6 text-gray-400 cursor-pointer hover:opacity-90 active:opacity-80 active:scale-90 transition-all",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[3]||(e[3]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},null,-1)])))]),e[9]||(e[9]=i("p",{class:"p-4 text-sm bg-blue-100"}," When using two or more sorting options, you can rearrange their order to prioritize which criteria are applied first. ",-1)),l.isLoadingSorting?(r(),n("div",Pe,[u(c)])):(r(),V(_,{key:1,modelValue:l.localSorting,"onUpdate:modelValue":e[2]||(e[2]=y=>l.localSorting=y),class:"divide-y mb-4",handle:".draggable-handle","ghost-class":"bg-yellow-50"},{default:v(()=>[(r(!0),n(k,null,C(l.localSorting,(y,m)=>(r(),n(k,{key:m},[l.showMore||y.priority?(r(),n("div",Ye,[i("div",{onClick:M=>s.toggleSortingVisibility(m),class:"text-sm p-4 bg-gray-50 hover:bg-gray-100 cursor-pointer flex items-center justify-between"},[i("span",null,b(y.label),1),i("div",Ie,[s.countActiveOptions(y)?(r(),V(w,{key:0,type:"primary",size:"xs",class:"flex-shrink-0"},{default:v(()=>[L(b(s.countActiveOptions(y)),1)]),_:2},1024)):f("",!0),s.countActiveOptions(y)?(r(),n("svg",{key:1,onClick:e[1]||(e[1]=E(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-yellow-500 visible:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[5]||(e[5]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)]))):f("",!0),y.active?(r(),n("svg",Ue,e[6]||(e[6]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 15.75 7.5-7.5 7.5 7.5"},null,-1)]))):(r(),n("svg",$e,e[7]||(e[7]=[i("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m19.5 8.25-7.5 7.5-7.5-7.5"},null,-1)])))])],8,Be),y.active?(r(),n("div",Te,[(r(!0),n(k,null,C(y.options,(M,a)=>(r(),n("div",{key:a},[u(x,{modelValue:M.active,"onUpdate:modelValue":D=>M.active=D,onClick:E(()=>s.toggleSortOption(m,a),["stop"])},{default:v(()=>[L(b(M.label),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onClick"])]))),128))])):f("",!0)])):f("",!0)],64))),128))]),_:1},8,["modelValue"])),l.isLoadingSorting?f("",!0):(r(),n("div",ze,[u(d,{action:s.showMoreOrLess,type:"outline",size:"xs",icon:l.showMore?"short-up-arrow":"short-down-arrow"},{default:v(()=>[i("span",null,b(l.showMore?"show less options":"show more options"),1)]),_:1},8,["action","icon"]),u(d,{action:s.clearSorting,type:"light",size:"sm",class:"w-full"},{default:v(()=>e[8]||(e[8]=[i("span",null,"Clear Sorting",-1)])),_:1},8,["action"])]))]),_:1},512)])}const Ne=j(Oe,[["render",He]]),qe={mixins:[J],components:{Pill:P,Button:Y,SearchInput:K,SelectInput:Q,Pagination:ae,SpinningLoader:B,FilterDrawer:_e,ColumnsDrawer:Ae,SortingDrawer:Ne},props:{isLoading:{type:Boolean,default:!1},pagination:{type:Object},perPage:{type:String,default:"15"},columns:{type:Array,default:()=>[]},filterExpressions:{type:Array,default:()=>[]},sortingExpressions:{type:Array,default:()=>[]}},emits:["search","refresh","paginate","updatedColumns","updatedFilters","updatedSorting","updatedPerPage"],data(){return{modal:null,filters:[],sorting:[],searchTerm:"",filterDrawer:null,sortingDrawer:null,localPerPage:this.perPage,perPageOptions:["15","50","100","200"],uniqueModalId:this.generateUniqueId("modal")}},watch:{searchTerm(t){this.$emit("search",t)},localPerPage(t){this.$emit("updatedPerPage",t)},pagination(t){t&&this.$nextTick(()=>{this.filterDrawer=this.$refs.filterDrawer,this.sortingDrawer=this.$refs.sortingDrawer})}},computed:{isSearching(){return this.hasSearchTerm&&this.isLoading},hasSearchTerm(){return this.searchTerm.length>0},hasFilters(){return this.filters.length>0},hasSorting(){return this.sorting.length>0},hasFilterExpressions(){return this.filterExpressions.length>0},hasSortingExpressions(){return this.sortingExpressions.length>0},totalActiveColumns(){return this.columns.filter(t=>t.active).length}},methods:{refresh(){this.isLoading||this.$emit("refresh")},paginate(t){this.$emit("paginate",t)},updatedColumns(t){this.$emit("updatedColumns",t)},updatedFilters(t){this.filters=t,this.$emit("updatedFilters",t)},updatedSorting(t){this.sorting=t,this.$emit("updatedSorting",t)},removeAppliedFilter(t){this.filterDrawer.removeAppliedFilter(t)},removeAppliedSort(t){this.sortingDrawer.removeAppliedSort(t)}},mounted(){Z();const t=document.getElementById(this.uniqueModalId);t!=null&&(this.modal=new W(t))}},Re={class:"bg-white py-4 px-4 shadow-sm rounded-xl overflow-y-auto relative"},Ze={class:"flex justify-between items-center mb-4"},We={class:"w-1/3 flex justify-center items-center space-x-4"},Ge={key:0,class:"flex justify-center items-center space-x-2"},Je={key:0,class:"flex flex-col items-center mb-4"},Ke={class:"flex items-center space-x-2"},Qe={key:1,class:"flex flex-col items-center mb-4"},Xe={class:"flex items-center space-x-2"},et={key:2,class:"flex flex-wrap gap-2 mb-4"},tt={key:0,class:"absolute top-0 bottom-0 left-0 right-0 bg-white/50 flex justify-center items-center"},st={class:"w-full overflow-x-auto rounded-lg"},ot={class:"w-full text-sm text-left rtl:text-right text-gray-500"},rt={class:"text-xs text-gray-700 uppercase bg-gray-50"},it={key:0},lt={key:2},nt={key:1,class:"text-xs text-gray-700 text-center py-16 bg-gray-50 border-t"},at={key:2,class:"flex justify-between items-center mt-4"},ct={class:"text-sm font-normal text-gray-500 dark:text-gray-400"},ut={class:"font-semibold text-gray-900 dark:text-white"},dt={class:"font-semibold text-gray-900 dark:text-white"},ht={class:"flex items-center space-x-4"},pt=["value"];function gt(t,e,o,g,l,s){const d=h("SearchInput"),c=h("FilterDrawer"),w=h("SortingDrawer"),x=h("ColumnsDrawer"),_=h("Button"),p=h("SpinningLoader"),y=h("Pill"),m=h("SelectInput"),M=h("Pagination");return r(),n("div",Re,[O(t.$slots,"header"),i("div",Ze,[i("div",We,[u(d,{modelValue:l.searchTerm,"onUpdate:modelValue":e[0]||(e[0]=a=>l.searchTerm=a),isSearching:s.isSearching,class:"w-full"},null,8,["modelValue","isSearching"])]),o.pagination?(r(),n("div",Ge,[u(c,{ref:"filterDrawer",filterExpressions:o.filterExpressions,onUpdatedFilters:s.updatedFilters},null,8,["filterExpressions","onUpdatedFilters"]),u(w,{ref:"sortingDrawer",sortingExpressions:o.sortingExpressions,onUpdatedSorting:s.updatedSorting},null,8,["sortingExpressions","onUpdatedSorting"]),u(x,{ref:"columnsDrawer",columns:o.columns,onUpdatedColumns:s.updatedColumns},null,8,["columns","onUpdatedColumns"]),u(_,{action:s.refresh,type:"outline",size:"sm",icon:"refresh"},null,8,["action"]),O(t.$slots,"afterRefreshButton")])):f("",!0)]),u(G,{name:"fade-1",mode:"out-in"},{default:v(()=>[s.hasFilterExpressions&&!s.hasFilters?(r(),n("div",Je,[i("div",Ke,[u(p),e[2]||(e[2]=i("span",{class:"text-sm text-gray-500"},"Preparing filters",-1))])])):s.hasSortingExpressions&&!s.hasSorting?(r(),n("div",Qe,[i("div",Xe,[u(p),e[3]||(e[3]=i("span",{class:"text-sm text-gray-500"},"Preparing sorting",-1))])])):s.hasFilters||s.hasSorting?(r(),n("div",et,[(r(!0),n(k,null,C(l.filters,(a,D)=>(r(),V(y,{key:D,type:"primary",size:"xs",closableAction:()=>s.removeAppliedFilter(a)},{default:v(()=>[L(b(a.label),1)]),_:2},1032,["closableAction"]))),128)),(r(!0),n(k,null,C(l.sorting,(a,D)=>(r(),V(y,{key:D,type:"info",size:"xs",closableAction:()=>s.removeAppliedSort(a)},{default:v(()=>[L(b(a.label),1)]),_:2},1032,["closableAction"]))),128))])):f("",!0)]),_:1}),o.pagination&&o.isLoading&&!s.isSearching?(r(),n("div",tt,[s.isSearching?f("",!0):(r(),V(p,{key:0}))])):f("",!0),O(t.$slots,"belowToolbar"),i("div",st,[i("table",ot,[i("thead",rt,[O(t.$slots,"head")]),!o.pagination&&o.isLoading&&s.totalActiveColumns>0?(r(),n("tbody",it,[(r(),n(k,null,C([1,2,3],(a,D)=>i("tr",{key:D,class:"animate-pulse"},[(r(!0),n(k,null,C(s.totalActiveColumns,(F,q)=>(r(),n("td",{key:q},e[4]||(e[4]=[i("div",{class:"h-2 bg-gray-200 rounded-full dark:bg-gray-700 mx-4 my-4"},null,-1)])))),128))])),64))])):t.$slots.tbody?O(t.$slots,"tbody",{key:1}):(r(),n("tbody",lt,[O(t.$slots,"body")]))])]),o.pagination&&o.pagination.total==0?(r(),n("div",nt," No results found ")):f("",!0),o.pagination&&o.pagination.total>0?(r(),n("div",at,[i("span",ct,[e[5]||(e[5]=L("Showing ")),i("span",ut,b(o.pagination.from)+"-"+b(o.pagination.to),1),e[6]||(e[6]=L(" of ")),i("span",dt,b(o.pagination.total),1)]),i("div",ht,[u(m,{width:"w-fit",modelValue:l.localPerPage,"onUpdate:modelValue":e[1]||(e[1]=a=>l.localPerPage=a)},{default:v(()=>[(r(!0),n(k,null,C(l.perPageOptions,(a,D)=>(r(),n("option",{value:a,key:D},b(a)+" per page ",9,pt))),128))]),_:1},8,["modelValue"]),o.pagination?(r(),V(M,{key:0,pagination:o.pagination,onPaginate:s.paginate},null,8,["pagination","onPaginate"])):f("",!0)])])):f("",!0)])}const Ot=j(qe,[["render",gt]]);export{Ot as B};
