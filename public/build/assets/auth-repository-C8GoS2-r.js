import{j as e,a as n,u as i}from"./app-CEjZQ6df.js";const s=()=>i().apiHome._links;async function u(t){try{const r=await e.post(s().login,t);return r.status==200&&(o(r.data.accessToken),a(r.data.user)),r}catch(r){throw console.error("Login error:",r),r}}async function l(t){try{o(t);const r=await e.get(s().showAuthUser);return r.status==200&&r.data.exists&&(a(r.data.user),console.log("response.data.user"),console.log(r.data.user)),r}catch(r){throw console.error("Login error:",r),r}}async function g(t){try{return await e.post(s().validateRegister,t)}catch(r){throw console.error("Registration error:",r),r}}async function h(t){try{const r=await e.post(s().register,t);return r.status==200&&(o(r.data.accessToken),a(r.data.user)),r}catch(r){throw console.error("Registration error:",r),r}}function o(t){e.defaults.headers.common.Authorization=`Bearer ${t}`,localStorage.setItem("accessToken",t)}function a(t){const r=n();r.authenticated=!0,r.user=t}export{u as l,h as r,l as s,g as v};
