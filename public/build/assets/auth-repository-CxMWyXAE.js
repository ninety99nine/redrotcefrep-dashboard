import{f as o,e as r,u as c}from"./app-DgwDG0oL.js";const s=()=>c().apiHome._links;async function h(t){try{const e=await o.post(s().login,t);return e.status==200&&(a(e),n(e)),e}catch(e){throw console.error("Login error:",e),e}}async function f(t){try{const e=await o.post(s().validateRegister,t);return e.status==200&&(a(e),n(e)),e}catch(e){throw console.error("Registration error:",e),e}}async function g(t){try{const e=await o.post(s().register,t);return e.status==200&&(a(e),n(e)),e}catch(e){throw console.error("Registration error:",e),e}}async function m(){try{const t=r(),e=await o.post(t.user._links.logoutUser);return e.status==200&&(i(),u()),e}catch(t){throw console.error("Logout error:",t),t}}function a(t){const e=t.data.accessToken;o.defaults.headers.common.Authorization=`Bearer ${e}`,localStorage.setItem("accessToken",e)}function i(){o.defaults.headers.common.Authorization=null,localStorage.removeItem("accessToken")}function n(t){const e=r();e.authenticated=!0,e.user=t.data.user}function u(){const t=r();t.authenticated=!1,t.user=null}export{m as a,h as l,g as r,f as v};
