import{U as E,d as te}from"./form-store-B_ZbhArT.js";import{c as C,i as se}from"./cloneDeep-BGE7Bmb-.js";import{P as J}from"./Pill-CD_3pjy5.js";import{A as oe}from"./Alert-DEJps0rh.js";import{F as A}from"./FormMixin-D44Bj-el.js";import{r as m,o as r,c as n,b as t,d as l,w as u,h as f,z as N,f as c,e as h,F as v,k as B,t as d,m as b,n as F,p as K,s as re,u as ie}from"./app-DEkFCb1u.js";import{u as H}from"./store-store-CxinBL3L.js";import{T as ne}from"./TextInput-CwB-G_mS.js";import{I as ae}from"./InputTags-Cvrz7IG0.js";import{T as j}from"./TextHeader-DRGBY_Ui.js";import{M as le}from"./MoneyInput-C1qj8tqg.js";import{B as de}from"./BackButton-DMqpm81M.js";import{N as me}from"./NumberInput-DlCNpvmN.js";import{S as ce}from"./SelectInput-DXfLro8i.js";import{D as ue}from"./Datepicker-HHxVzfmA.js";import{C as U}from"./ConfirmModal-CKYpWGJT.js";import{T as he}from"./TextareaInput-CtY-WADI.js";import{L as pe}from"./LineSkeleton-DFWRI7XC.js";import{P as Z}from"./PrimaryButton-Cwf__Lsv.js";import{S as W}from"./SpinningLoader-BnJGVf_7.js";import{S as ge}from"./SelectInputTags-DgViRfHa.js";import{M as R}from"./MoreInfoPopover-CrxGv8yo.js";import{B as fe}from"./BackdropLoader-jo1Que9S.js";import{T as q}from"./ToogleSwitch-CtY-gb5u.js";import{M as ye}from"./MobileNumberInput-DB74IXOZ.js";import{A as Q}from"./AddButton-CqVfIWO7.js";import{B as X}from"./BasicTable-BCie5vLF.js";import{C as $}from"./Checkbox-BOFyOk4h.js";import{g as z,d as Y,p as we,a as ve}from"./api-repository-CIJPUswr.js";import{N as xe}from"./NoDataPlaceholder-L-PjtqdQ.js";import{S as _e,P as be,C as ke}from"./CollectionStatus-W0gkLP_P.js";import{_ as G}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as Ce}from"./Countdown-BcBEvPsk.js";import{E as Te}from"./ExternalLink-5lKBVHvg.js";import{T as Se}from"./TransactionPaymentStatus-DQnJsagb.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./vue3-tags-input.esm-DL6THQw8.js";import"./Button-CTlUNYLQ.js";import"./ShineEffect-CWpUJr6E.js";/* empty css                                                                      */import"./SearchInput-BKDyZ1Nd.js";import"./index-D14zHmA0.js";import"./Drawer-DoikbwU2.js";import"./vue-draggable-next.esm-bundler-C7oHOHQm.js";const Le={mixins:[A,E],components:{TextHeader:j,AddButton:Q,BasicTable:X,Checkbox:$,Status:_e,ConfirmModal:U,SpinningLoader:W,PrimaryButton:Z,MoreInfoPopover:R,ToogleSwitch:q,PaymentStatus:be,NoDataPlaceholder:xe,CollectionStatus:ke},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{orders:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,deletableOrder:null,isDeletingOrderIds:[],isLoadingOrders:!1,storeState:H()}},watch:{isLoadingCustomer(o,e){o==!1&&this.getOrders()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Name","Customer","Summary","status","Payment Status","Collection Status","Grand Total","Paid","Pending","Outstanding","Special Note","Created Date",""]:["","Name","Customer","Summary","status","Grand Total","Created Date",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(o){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:o._links.showOrder}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(o){this.deletableOrder=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingOrderIds.findIndex(e=>e==o.id)!=-1},onAddOrder(){this.$router.push({name:"create-store-order",params:{store_href:this.store._links.showStore}})},paginate(o){this.getOrders(o)},search(o){this.searchTerm=o,this.getOrders()},getOrders(o=null){this.isLoadingOrders=!0;const e={association:"teamMember",_relationships:"cart"};this.hasSearchTerm&&(e.search=this.searchTerm),o=o??this.customer._links.showCustomerOrders,z(o,e).then(y=>{y.status==200&&(this.pagination=y.data,this.orders=this.pagination.data,this.checkedRowIds=this.orders.map(O=>!1)),this.isLoadingOrders=!1}).catch(y=>{this.isLoadingOrders=!1,this.setServerFormErrors(y)})},deleteOrder(){this.isDeletingOrderIds.push(this.deletableOrder.id),Y(this.deletableOrder._links.deleteOrder).then(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(e=>e==this.deletableOrder.id,1)),o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Order deleted"),this.isDeletingOrderIds.length==0&&this.getOrders(),this.refreshCustomer()):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)))}).catch(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(e=>e==this.deletableOrder.id,1)),this.setServerFormErrors(o)})}}},De={key:0,class:"flex justify-between items-center border-dashed pb-6"},Pe={class:"flex items-center"},Ie=["onClick"],Ve={class:"whitespace-nowrap px-4 py-4"},Me={class:"flex space-x-1 items-center"},Be={class:"px-4 py-4"},Oe={class:"w-40"},Ne={class:"px-4 py-4"},Ee={class:"w-60"},Ae={class:"whitespace-nowrap px-4 py-4"},Fe={key:0,class:"whitespace-nowrap px-4 py-4"},He={key:1,class:"whitespace-nowrap px-4 py-4"},je={class:"whitespace-nowrap px-4 py-4"},Ue={class:"flex space-x-1 items-center"},Ze={class:"font-bold"},We={class:"text-black"},Re={class:"text-black"},qe={class:"text-black"},ze={class:"text-black"},Ye={class:"font-bold"},Ge={key:2,class:"whitespace-nowrap px-4 py-4"},Je={class:"flex space-x-1 items-center"},Ke={key:3,class:"whitespace-nowrap px-4 py-4"},Qe={class:"flex space-x-1 items-center"},Xe={key:4,class:"whitespace-nowrap px-4 py-4"},$e={class:"flex space-x-1 items-center"},et={key:5,class:"whitespace-nowrap px-4 py-4"},tt={class:"flex space-x-1 items-center"},st={key:1},ot={class:"whitespace-nowrap px-4 py-4"},rt={class:"flex space-x-1 items-center"},it={class:"px-4 py-4 flex items-center space-x-4"},nt=["onClick"],at=["onClick"],lt={key:2,class:"p-8 border rounded-lg bg-gray-50"},dt={class:"flex justify-end"},mt={class:"mb-8"},ct={class:"font-bold text-black"};function ut(o,e,y,O,s,a){const S=m("TextHeader"),g=m("MoreInfoPopover"),L=m("ToogleSwitch"),x=m("Checkbox"),D=m("Status"),T=m("PaymentStatus"),k=m("CollectionStatus"),P=m("NoDataPlaceholder"),I=m("SpinningLoader"),V=m("BasicTable"),_=m("PrimaryButton"),M=m("ConfirmModal");return r(),n("div",null,[!(s.isLoadingOrders||y.isLoadingCustomer)&&(s.pagination??{}).total>0?(r(),n("div",De,[t("div",Pe,[l(S,null,{default:u(()=>e[2]||(e[2]=[t("span",{class:"mr-2"},"🎁",-1),f(" Orders")])),_:1}),l(g,{class:"ml-2 mt-1",title:"What Is This?",description:"Orders are requests placed by customers to purchase products or services from your store.",placement:"top"})]),(s.pagination??{}).total>0?N(o.$slots,"actionButtons",{key:0}):c("",!0)])):c("",!0),s.isLoadingOrders||y.isLoadingCustomer||(s.pagination??{}).total>0||a.hasSearchTerm?(r(),h(V,{key:1,pagination:s.pagination,isLoading:s.isLoadingOrders||y.isLoadingCustomer,onPaginate:a.paginate,onSearch:a.search,onRefresh:a.getOrders,totalHeaders:a.tableHeaders.length},{primaryFilters:u(()=>[l(L,{modelValue:s.showEverything,"onUpdate:modelValue":e[0]||(e[0]=i=>s.showEverything=i),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your orders"},{default:u(()=>e[3]||(e[3]=[f(" Show Everything ")])),_:1},8,["modelValue"])]),head:u(()=>[t("tr",null,[(r(!0),n(v,null,B(a.tableHeaders,(i,w)=>(r(),n("th",{key:w,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(i),1))),128))])]),body:u(()=>[(r(!0),n(v,null,B(s.orders,(i,w)=>(r(),n("tr",{onClick:b(p=>a.onView(i),["stop"]),key:i.id,class:F(["group cursor-pointer border-b",s.checkedRowIds[w]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[t("td",{onClick:e[1]||(e[1]=b(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[l(x,{size:"xs",modelValue:s.checkedRowIds[w],"onUpdate:modelValue":p=>s.checkedRowIds[w]=p},null,8,["modelValue","onUpdate:modelValue"])]),t("td",Ve,[t("div",Me,[t("span",null,"#"+d(i._attributes.number),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"#"+i._attributes.number,description:i.summary,placement:"top"},null,8,["title","description"])])]),t("td",Be,[t("div",Oe,[t("span",null,d(i._attributes.customerDisplayName),1)])]),t("td",Ne,[t("div",Ee,[t("span",null,d(i.summary),1)])]),t("td",Ae,[l(D,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])]),s.showEverything?(r(),n("td",Fe,[l(T,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):c("",!0),s.showEverything?(r(),n("td",He,[l(k,{order:i,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):c("",!0),t("td",je,[t("div",Ue,[t("span",Ze,d(i.grandTotal.amountWithCurrency),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"Cost Breakdown",placement:"top"},{description:u(()=>[e[8]||(e[8]=t("hr",null,null,-1)),t("p",null,[e[4]||(e[4]=f("Subtotal: ")),t("span",We,d(i._relationships.cart.subTotal.amountWithCurrency),1)]),t("p",null,[e[5]||(e[5]=f("Sale Discount: ")),t("span",Re,d(i._relationships.cart.saleDiscountTotal.amountWithCurrency),1)]),t("p",null,[e[6]||(e[6]=f("Coupon Discount: ")),t("span",qe,d(i._relationships.cart.couponDiscountTotal.amountWithCurrency),1)]),e[9]||(e[9]=t("hr",null,null,-1)),t("p",ze,[e[7]||(e[7]=f("Grand Total: ")),t("span",Ye,d(i.grandTotal.amountWithCurrency),1)])]),_:2},1024)])]),s.showEverything?(r(),n("td",Ge,[t("div",Je,[t("span",null,d(i.paidTotal.amountWithCurrency),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"Paid: "+i.paidPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):c("",!0),s.showEverything?(r(),n("td",Ke,[t("div",Qe,[t("span",null,d(i.pendingTotal.amountWithCurrency),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"Pending: "+i.pendingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):c("",!0),s.showEverything?(r(),n("td",Xe,[t("div",$e,[t("span",null,d(i.outstandingTotal.amountWithCurrency),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"Outstanding: "+i.outstandingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):c("",!0),s.showEverything?(r(),n("td",et,[t("div",tt,[i.specialNote?(r(),h(P,{key:0})):(r(),n("span",st,d(i.specialNote),1))])])):c("",!0),t("td",ot,[t("div",rt,[t("span",null,d(o.formattedDatetime(i.createdAt)),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(i.createdAt),placement:"top"},null,8,["title"])])]),t("td",it,[a.isDeleting(i)?c("",!0):(r(),n("a",{key:0,href:"#",onClick:b(p=>a.onView(i),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,nt)),a.isDeleting(i)?(r(),h(I,{key:1,type:"danger"},{default:u(()=>e[10]||(e[10]=[t("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(r(),n("a",{key:2,href:"#",onClick:b(p=>a.showDeleteConfirmationModal(i),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,at))])],10,Ie))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(r(),n("div",lt,[e[11]||(e[11]=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">🎁</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Orders Yet</h1><p class="text-gray-500 text-sm">Orders will appear here once your customer starts shopping.</p></div></div>',1)),t("div",dt,[N(o.$slots,"actionButtons")])])),s.deletableOrder?(r(),h(M,{key:3,approveText:"Delete Order",approveAction:a.deleteOrder,isLoading:a.isDeleting(s.deletableOrder)},{content:u(()=>[e[14]||(e[14]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",mt,[e[12]||(e[12]=f("Are you sure you want to permanently delete ")),t("span",ct,d(s.deletableOrder.name),1),e[13]||(e[13]=f("?"))])]),trigger:u(i=>[l(_,{ref:"confirmDeleteButton",action:i.showModal,class:"hidden",type:"danger"},{default:u(()=>e[15]||(e[15]=[f(" Delete Order ")])),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):c("",!0)])}const ht=G(Le,[["render",ut]]),pt={mixins:[A,E],components:{AddButton:Q,TextHeader:j,BasicTable:X,Checkbox:$,Countdown:Ce,ExternalLink:Te,ConfirmModal:U,SpinningLoader:W,PrimaryButton:Z,MoreInfoPopover:R,ToogleSwitch:q,Pill:J,TransactionPaymentStatus:Se},props:{customer:{type:Object},isLoadingCustomer:{type:Boolean},refreshCustomer:{type:Function}},data(){return{transactions:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,appName:re.appName,deletableTransaction:null,isDeletingTransactionIds:[],isLoadingTransactions:!1,storeState:H()}},watch:{isLoadingCustomer(o,e){o==!1&&this.getTransactions()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Trans #","Description","Payment Status","Amount","Percentage","Payment Method","Requester","Verifyer","Payment Link","Created Date",""]:["","Trans #","Payment Status","Amount","Payment Method","Requester","Verifyer","Payment Link",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(o){this.$router.push({name:"show-store-transaction",params:{store_href:this.store._links.showStore,transaction_href:o._links.showTransaction}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(o){this.deletableTransaction=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingTransactionIds.findIndex(e=>e==o.id)!=-1},onAddTransaction(){this.$router.push({name:"create-store-transaction",params:{store_href:this.store._links.showStore}})},paginate(o){this.getTransactions(o)},search(o){this.searchTerm=o,this.getTransactions()},getTransactions(o=null){this.isLoadingTransactions=!0;const e={_relationships:"customer,requestedByUser,manuallyVerifiedByUser,paymentMethod"};this.hasSearchTerm&&(e.search=this.searchTerm),o=o??this.customer._links.showCustomerTransactions,z(o,e).then(y=>{y.status==200&&(this.pagination=y.data,this.transactions=this.pagination.data,this.checkedRowIds=this.transactions.map(O=>!1)),this.isLoadingTransactions=!1}).catch(y=>{this.isLoadingTransactions=!1})},deleteTransaction(){this.isDeletingTransactionIds.push(this.deletableTransaction.id),Y(this.deletableTransaction._links.deleteTransaction).then(o=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(e=>e==this.deletableTransaction.id,1)),o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Transaction deleted"),this.isDeletingTransactionIds.length==0&&this.getTransactions()):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)))}).catch(o=>{this.isDeletingTransactionIds.splice(this.isDeletingTransactionIds.findIndex(e=>e==this.deletableTransaction.id,1)),this.setServerFormErrors(o)})}}},gt={key:0,class:"flex justify-between items-center border-dashed py-6"},ft={class:"flex items-center"},yt=["onClick"],wt={class:"whitespace-nowrap px-4 py-4"},vt={class:"flex space-x-1 items-center"},xt={key:0,class:"px-4 py-4"},_t={class:"min-w-80"},bt={class:"whitespace-nowrap px-4 py-4"},kt={class:"whitespace-nowrap px-4 py-4 text-center"},Ct={key:1,class:"whitespace-nowrap px-4 py-4 text-center"},Tt={class:"whitespace-nowrap px-4 py-4 text-center"},St={class:"whitespace-nowrap px-4 py-4"},Lt={key:0},Dt={key:1,class:"text-xs text-center text-gray-300"},Pt={class:"text-xs text-center text-gray-300"},It={key:0,class:"whitespace-nowrap px-4 py-4"},Vt={key:0,class:"flex items-start space-x-2"},Mt={key:0,class:"max-w-80"},Bt={key:2,class:"text-xs text-center text-gray-300"},Ot={key:1,class:"text-xs text-center text-gray-300"},Nt={key:2,class:"whitespace-nowrap px-4 py-4"},Et={class:"flex space-x-1 items-center"},At={class:"px-4 py-4 flex items-center space-x-4"},Ft=["onClick"],Ht=["onClick"],jt={key:2,class:"p-8 border rounded-lg bg-gray-50"},Ut={class:"flex justify-end"},Zt={class:"mb-8"},Wt={class:"font-bold text-black"};function Rt(o,e,y,O,s,a){const S=m("TextHeader"),g=m("MoreInfoPopover"),L=m("ToogleSwitch"),x=m("Checkbox"),D=m("TransactionPaymentStatus"),T=m("Pill"),k=m("ExternalLink"),P=m("Countdown"),I=m("SpinningLoader"),V=m("BasicTable"),_=m("PrimaryButton"),M=m("ConfirmModal");return r(),n("div",null,[!(s.isLoadingTransactions||y.isLoadingCustomer)&&(s.pagination??{}).total>0?(r(),n("div",gt,[t("div",ft,[l(S,null,{default:u(()=>e[3]||(e[3]=[t("span",{class:"mr-2"},"💵",-1),f(" Transactions")])),_:1}),l(g,{class:"ml-2 mt-1",title:"What Is This?",description:"Transactions are detailed records of payments made by customers for purchasing products or services from your store.",placement:"top"})]),(s.pagination??{}).total>0?N(o.$slots,"actionButtons",{key:0}):c("",!0)])):c("",!0),s.isLoadingTransactions||y.isLoadingCustomer||(s.pagination??{}).total>0||a.hasSearchTerm?(r(),h(V,{key:1,pagination:s.pagination,isLoading:s.isLoadingTransactions||y.isLoadingCustomer,onPaginate:a.paginate,onSearch:a.search,onRefresh:a.getTransactions,totalHeaders:a.tableHeaders.length},{primaryFilters:u(()=>[l(L,{modelValue:s.showEverything,"onUpdate:modelValue":e[0]||(e[0]=i=>s.showEverything=i),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your transactions"},{default:u(()=>e[4]||(e[4]=[f(" Show Everything ")])),_:1},8,["modelValue"])]),head:u(()=>[t("tr",null,[(r(!0),n(v,null,B(a.tableHeaders,(i,w)=>(r(),n("th",{key:w,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(i),1))),128))])]),body:u(()=>[(r(!0),n(v,null,B(s.transactions,(i,w)=>(r(),n("tr",{onClick:b(p=>a.onView(i),["stop"]),key:i.id,class:F(["group cursor-pointer border-b",s.checkedRowIds[w]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[t("td",{onClick:e[1]||(e[1]=b(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[l(x,{size:"xs",modelValue:s.checkedRowIds[w],"onUpdate:modelValue":p=>s.checkedRowIds[w]=p},null,8,["modelValue","onUpdate:modelValue"])]),t("td",wt,[t("div",vt,[t("span",null,"#"+d(i._attributes.number),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:"#"+i._attributes.number,description:i.description,placement:"top"},null,8,["title","description"])])]),s.showEverything?(r(),n("td",xt,[t("div",_t,d(i.description),1)])):c("",!0),t("td",bt,[l(D,{transaction:i},null,8,["transaction"])]),t("td",kt,d(i.amount.amountWithCurrency),1),s.showEverything?(r(),n("td",Ct,d(i.percentage.valueSymbol),1)):c("",!0),t("td",Tt,d(i._relationships.paymentMethod.name),1),t("td",St,[i._relationships.requestedByUser?(r(),n("span",Lt,d(i._relationships.requestedByUser._attributes.name),1)):(r(),n("span",Dt,"---"))]),t("td",Pt,[i._relationships.verifiedByUser?(r(),n("span",It,d(i._relationships.verifiedByUser._attributes.name),1)):(r(),h(T,{key:1,type:"info",text:s.appName,showDot:!1},null,8,["text"]))]),t("td",{class:"px-4 py-4",onClick:e[2]||(e[2]=b(()=>{},["stop"]))},[i.metadata?(r(),n("div",Vt,[i.metadata.canPayUsingDpo?(r(),n("div",Mt,[l(k,{url:i.metadata.dpoPaymentUrl,class:"text-xs"},{default:u(()=>[f(d(i.metadata.dpoPaymentUrl),1)]),_:2},1032,["url"])])):i.metadata.dpoPaymentLinkHasExpired==!0?(r(),h(T,{key:1,type:"warning",text:"Expired",showDot:!1})):(r(),n("span",Bt,"---")),i.metadata.canPayUsingDpo?(r(),h(g,{key:3,title:"Expires In",placement:"top",class:"opacity-0 group-hover:opacity-100 mt-1"},{description:u(()=>[e[5]||(e[5]=t("div",{class:"border-t border-dashed my-2"},null,-1)),l(P,{showMoreInfoPopover:!1,time:i.metadata.dpoPaymentUrlExpiresAt},null,8,["time"])]),_:2},1024)):c("",!0)])):(r(),n("span",Ot,"---"))]),s.showEverything?(r(),n("td",Nt,[t("div",Et,[t("span",null,d(o.formattedDatetime(i.createdAt)),1),l(g,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(i.createdAt),placement:"top"},null,8,["title"])])])):c("",!0),t("td",At,[a.isDeleting(i)?c("",!0):(r(),n("a",{key:0,href:"#",onClick:b(p=>a.onView(i),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,Ft)),a.isDeleting(i)?(r(),h(I,{key:1,type:"danger"},{default:u(()=>e[6]||(e[6]=[t("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(r(),n("a",{key:2,href:"#",onClick:b(p=>a.showDeleteConfirmationModal(i),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,Ht))])],10,yt))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(r(),n("div",jt,[e[7]||(e[7]=K('<div class="flex items-center space-x-8"><div><span class="text-8xl">💵</span></div><div class="space-y-2"><h1 class="text-lg font-bold">No Transactions Yet</h1><p class="text-gray-500 text-sm">Transactions will appear here once your customer start paying.</p></div></div>',1)),t("div",Ut,[N(o.$slots,"actionButtons")])])),s.deletableTransaction?(r(),h(M,{key:3,approveText:"Delete Transaction",approveAction:a.deleteTransaction,isLoading:a.isDeleting(s.deletableTransaction)},{content:u(()=>[e[10]||(e[10]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",Zt,[e[8]||(e[8]=f("Are you sure you want to permanently delete ")),t("span",Wt,"transaction #"+d(s.deletableTransaction._attributes.number),1),e[9]||(e[9]=f("?"))])]),trigger:u(i=>[l(_,{ref:"confirmDeleteButton",action:i.showModal,class:"hidden",type:"danger"},{default:u(()=>e[11]||(e[11]=[f(" Delete Transaction ")])),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):c("",!0)])}const qt=G(pt,[["render",Rt]]),zt={mixins:[E,A],components:{Pill:J,Alert:oe,TextInput:ne,TextHeader:j,MoneyInput:le,InputTags:ae,BackButton:de,NumberInput:me,SelectInput:ce,Datepicker:ue,ConfirmModal:U,TextareaInput:he,LineSkeleton:pe,PrimaryButton:Z,SpinningLoader:W,SelectInputTags:ge,MoreInfoPopover:R,BackdropLoader:fe,ToogleSwitch:q,MobileNumberInput:ye,CustomerOrders:ht,CustomerTransactions:qt},data(){return{form:{notes:"",email:"",birthday:"",lastName:"",firstName:"",mobileNumber:""},customer:null,showForm:!1,isDeleting:!1,originalForm:null,isSubmitting:!1,isLoadingCustomer:!1,apiState:ie(),storeState:H()}},watch:{"$route.params.customer_href"(o,e){window.scrollTo(0,0),this.getCustomer()}},computed:{store(){return this.storeState.store},isCreating(){return this.$route.name==="create-store-customer"},isEditting(){return this.$route.name==="show-store-customer"},addresses(){return((this.customer||{})._relationships||{}).addresses||[]},hasAddresses(){return this.addresses.length>0},formHasChanged(){var o=C(this.form),e=C(this.originalForm);return!se(o,e)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingCustomer&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-customers",params:{store_href:this.store._links.showStore}})},stopShowingForm(){this.form=C(this.originalForm),this.showForm=!1},setCustomerFields(){this.form.email=this.customer.email,this.form.notes=this.customer.notes,this.form.lastName=this.customer.lastName,this.form.firstName=this.customer.firstName,this.form.mobileNumber=(this.customer.mobileNumber||{}).international||"",this.customer.birthday&&(this.form.birthday=te(this.customer.birthday).format("DD MMM YYYY")),this.originalForm=C(this.form)},getCustomer(){this.isLoadingCustomer=!0;const o={_relationships:"addresses"};z(this.$route.params.customer_href,o).then(e=>{e.status==200&&e.data.exists&&(this.customer=e.data.customer,this.setCustomerFields()),this.isLoadingCustomer=!1}).catch(e=>{this.isLoadingCustomer=!1,this.setServerFormErrors(e)})},createCustomer(){this.isSubmitting=!0,we(this.apiState.apiHome._links.createCustomer,this.parseForm()).then(o=>{o.status==200&&(this.showSuccessfulNotification("Customer created"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)})},updateCustomer(){this.isSubmitting=!0,this.form.return=!0,ve(this.customer._links.showCustomer,this.parseForm()).then(o=>{o.status==200&&(o.data.updated?(this.showSuccessfulNotification("Customer updated"),this.showForm=!1,this.getCustomer()):(this.form=C(this.originalForm),this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message))),this.isSubmitting=!1}).catch(o=>{this.isSubmitting=!1,this.setServerFormErrors(o)})},deleteCustomer(){this.isDeleting=!0,Y(this.customer._links.deleteCustomer).then(o=>{o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Customer deleted"),this.$router.push({name:"show-store-customers",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message))),this.isDeleting=!1}).catch(o=>{this.isDeleting=!1,this.setServerFormErrors(o)})},parseForm(){var o=C(this.form);return this.form.birthday==""&&delete o.birthday,o}},created(){this.showForm=this.isCreating,this.form.storeId=this.store.id,this.originalForm=C(this.form),this.isEditting&&this.getCustomer()}},Yt={class:"grid grid-cols-2 py-6"},Gt={class:"flex items-center border-dashed"},Jt={key:0,class:"flex justify-end items-center"},Kt={key:0,class:"relative",action:"#",method:"POST"},Qt={class:"flex items-center space-x-2"},Xt={class:"flex justify-end items-center space-x-4"},$t={class:"grid grid-cols-12 gap-4 mb-8"},es={class:"col-span-8 col-start-3 relative"},ts={class:"space-y-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},ss={key:1,class:"grid grid-cols-12 gap-4 mb-8"},os={class:"col-span-8 relative"},rs={class:"grid grid-cols-3 gap-4 bg-white shadow-lg rounded-lg border p-4 mb-4"},is={class:"flex flex-col items-center space-y-2"},ns={class:"flex space-x-1 items-center"},as={key:1,class:"font-bold text-2xl"},ls={class:"flex flex-col items-center space-y-2"},ds={class:"flex space-x-1 items-center"},ms={key:1,class:"font-bold text-2xl"},cs={class:"flex flex-col items-center space-y-2"},us={class:"flex space-x-1 items-center"},hs={key:1,class:"font-bold text-2xl"},ps={key:0,class:"col-span-3 px-4 border-t border-dashed"},gs={key:1,class:"col-span-3 flex space-x-2 items-center px-4"},fs={class:"whitespace-nowrap text-sm font-bold"},ys={class:"col-span-3 flex space-x-2 items-center px-4"},ws={class:"text-gray-500 text-sm"},vs={class:"col-span-4"},xs={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4 mb-4"},_s={class:"flex items-center space-x-2"},bs={key:1,class:"font-bold"},ks={class:"space-y-2"},Cs={key:0,class:"flex items-center space-x-2 text-sm"},Ts={key:1,class:"font-bold"},Ss={key:1,class:"flex items-center space-x-2 text-sm"},Ls={key:1,class:"font-bold"},Ds={key:2,class:"flex items-center space-x-2 text-sm"},Ps={class:"font-bold"},Is={key:3,class:"border-t border-dashed pt-2"},Vs={key:0,class:"flex items-center space-x-2 text-sm"},Ms={class:"col-span-12"},Bs={class:"bg-white shadow-lg rounded-lg border p-4"},Os={class:"col-span-12"},Ns={class:"bg-white shadow-lg rounded-lg border p-4"},Es={class:"font-bold text-black"},As={class:"flex justify-end"},Fs={class:"mb-8"},Hs={class:"font-bold text-black"};function js(o,e,y,O,s,a){const S=m("BackButton"),g=m("LineSkeleton"),L=m("TextHeader"),x=m("PrimaryButton"),D=m("Alert"),T=m("BackdropLoader"),k=m("TextInput"),P=m("MobileNumberInput"),I=m("TextareaInput"),V=m("Datepicker"),_=m("MoreInfoPopover"),M=m("CustomerOrders"),i=m("CustomerTransactions"),w=m("ConfirmModal");return r(),n("div",null,[t("div",Yt,[t("div",Gt,[l(S,{class:"w-16 mr-4",action:a.goBack},null,8,["action"]),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-40",shine:!0})):(r(),h(L,{key:1},{default:u(()=>[f(d(a.isCreating?"Add Customer":s.customer._attributes.name),1)]),_:1}))]),!a.isCreating&&!s.isLoadingCustomer&&!(a.mustCreate||a.mustSaveChanges)?(r(),n("div",Jt,[s.showForm?(r(),h(x,{key:0,action:a.stopShowingForm,class:"w-40",type:"light"},{default:u(()=>e[6]||(e[6]=[t("span",null,"Cancel",-1)])),_:1},8,["action"])):(r(),h(x,{key:1,action:()=>s.showForm=!0,class:"w-40",type:"light"},{default:u(()=>e[7]||(e[7]=[t("svg",{class:"w-4 h-4 mr-1",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m16.862 4.487 1.687-1.688a1.875 1.875 0 1 1 2.652 2.652L10.582 16.07a4.5 4.5 0 0 1-1.897 1.13L6 18l.8-2.685a4.5 4.5 0 0 1 1.13-1.897l8.932-8.931Zm0 0L19.5 7.125M18 14v4.75A2.25 2.25 0 0 1 15.75 21H5.25A2.25 2.25 0 0 1 3 18.75V8.25A2.25 2.25 0 0 1 5.25 6H10"})],-1),t("span",null,"Edit",-1)])),_:1},8,["action"]))])):c("",!0)]),s.showForm?(r(),n("form",Kt,[a.mustCreate||a.mustSaveChanges?(r(),h(D,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:u(()=>[t("div",Qt,[e[8]||(e[8]=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),t("span",null,d(a.isCreating?"Create your customer":"Please save your changes"),1)]),t("div",Xt,[a.isCreating?c("",!0):(r(),h(x,{key:0,action:a.stopShowingForm,class:"w-40",type:"light"},{default:u(()=>e[9]||(e[9]=[t("span",null,"Cancel",-1)])),_:1},8,["action"])),l(x,{action:a.isCreating?a.createCustomer:a.updateCustomer,loading:s.isSubmitting,class:"w-40"},{default:u(()=>[f(d(a.isCreating?"Create Customer":"Save Changes"),1)]),_:1},8,["action","loading"])])]),_:1})):c("",!0),t("div",$t,[t("div",es,[s.isLoadingCustomer||s.isSubmitting?(r(),h(T,{key:0,class:"rounded-lg"})):c("",!0),t("div",ts,[l(k,{label:"First Name",placeholder:"John",modelValue:s.form.firstName,"onUpdate:modelValue":e[0]||(e[0]=p=>s.form.firstName=p),labelPopoverTitle:"What Is This?",errorText:o.getFormError("firstName"),labelPopoverDescription:"Customer's first name e.g John"},null,8,["modelValue","errorText"]),l(k,{label:"Last Name",placeholder:"Doe",modelValue:s.form.lastName,"onUpdate:modelValue":e[1]||(e[1]=p=>s.form.lastName=p),labelPopoverTitle:"What Is This?",errorText:o.getFormError("lastName"),labelPopoverDescription:"Customer's last name e.g Doe"},null,8,["modelValue","errorText"]),l(k,{label:"Email",modelValue:s.form.email,"onUpdate:modelValue":e[2]||(e[2]=p=>s.form.email=p),placeholder:"johndoe@gmail.com",errorText:o.getFormError("email"),labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's email e.g johndoe@gmail.com"},null,8,["modelValue","errorText"]),l(P,{modelValue:s.form.mobileNumber,"onUpdate:modelValue":e[3]||(e[3]=p=>s.form.mobileNumber=p),labelPopoverTitle:"What Is This?",errorText:o.getFormError("mobileNumber"),labelPopoverDescription:"Customer's mobile number e.g +26772000001"},null,8,["modelValue","errorText"]),l(I,{rows:2,label:"Notes",modelValue:s.form.notes,"onUpdate:modelValue":e[4]||(e[4]=p=>s.form.notes=p),labelPopoverTitle:"What Is This?",errorText:o.getFormError("notes"),placeholder:"Very loyal customer",labelPopoverDescription:"Short notes about customer e.g Very loyal customer"},null,8,["modelValue","errorText"]),(r(),h(V,{key:s.form.birthday,modelValue:s.form.birthday,"onUpdate:modelValue":e[5]||(e[5]=p=>s.form.birthday=p),errorText:o.getFormError("birthday"),label:"Birthday",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Customer's birthday 🥳"},null,8,["modelValue","errorText"]))])])])])):(r(),n("div",ss,[t("div",os,[t("div",rs,[t("div",is,[e[11]||(e[11]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"})],-1)),t("div",ns,[e[10]||(e[10]=t("p",{class:"text-gray-500 text-sm"},"Orders",-1)),l(_,{title:"What Is This?",description:"This is the number of orders placed by the customer",placement:"top"})]),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-24",shine:!0})):(r(),n("p",as,d(s.customer.totalOrders),1))]),t("div",ls,[e[13]||(e[13]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 18.75a60.07 60.07 0 0 1 15.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 0 1 3 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 0 0-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 0 1-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 0 0 3 15h-.75M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm3 0h.008v.008H18V10.5Zm-12 0h.008v.008H6V10.5Z"})],-1)),t("div",ds,[e[12]||(e[12]=t("p",{class:"text-gray-500 text-sm"},"Total Spend",-1)),l(_,{title:"What Is This?",description:"This is the total amount spent by the customer on their orders",placement:"top"})]),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-24",shine:!0})):(r(),n("p",ms,d(s.customer.totalSpend.amountWithCurrency),1))]),t("div",cs,[e[15]||(e[15]=t("svg",{class:"w-8 h-8 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"})],-1)),t("div",us,[e[14]||(e[14]=t("p",{class:"text-gray-500 text-sm"},"Average Order Spend",-1)),l(_,{title:"What Is This?",description:"This is the average amount spent by the customer per order",placement:"top"})]),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-24",shine:!0})):(r(),n("p",hs,d(s.customer.totalAverageSpend.amountWithCurrency),1))]),s.isLoadingCustomer||s.customer.lastOrderAt||s.customer.notes?(r(),n("div",ps)):c("",!0),s.isLoadingCustomer||s.customer.lastOrderAt?(r(),n("div",gs,[e[16]||(e[16]=t("svg",{class:"w-6 h-6 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1)),e[17]||(e[17]=t("span",{class:"whitespace-nowrap text-gray-500 text-sm"},"Last order:",-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-24",shine:!0})):(r(),n(v,{key:1},[t("span",fs,d(o.formattedDatetime(s.customer.lastOrderAt)),1),l(_,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(s.customer.lastOrderAt),placement:"top"},null,8,["title"])],64))])):c("",!0),t("div",ys,[s.isLoadingCustomer?(r(),n(v,{key:0},[e[18]||(e[18]=t("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-24",shine:!0})):c("",!0)],64)):s.customer.notes?(r(),n(v,{key:1},[e[19]||(e[19]=t("svg",{class:"w-5 h-5 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18"})],-1)),t("div",null,[t("span",ws,d(s.customer.notes),1)])],64)):c("",!0)])])]),t("div",vs,[t("div",xs,[t("div",_s,[e[20]||(e[20]=t("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-32",shine:!0})):(r(),n("span",bs,d(s.customer._attributes.name),1))]),t("div",ks,[s.isLoadingCustomer||s.customer.mobileNumber?(r(),n("div",Cs,[e[21]||(e[21]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-32",shine:!0})):(r(),n("span",Ts,d(s.customer.mobileNumber.national),1))])):c("",!0),s.isLoadingCustomer||s.customer.email?(r(),n("div",Ss,[e[22]||(e[22]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-32",shine:!0})):(r(),n("span",Ls,d(s.customer.email),1))])):c("",!0),s.isLoadingCustomer||s.customer.birthday?(r(),n("div",Ds,[e[23]||(e[23]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6.75 2.994v2.25m10.5-2.25v2.25m-14.252 13.5V7.491a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v11.251m-18 0a2.25 2.25 0 0 0 2.25 2.25h13.5a2.25 2.25 0 0 0 2.25-2.25m-18 0v-7.5a2.25 2.25 0 0 1 2.25-2.25h13.5a2.25 2.25 0 0 1 2.25 2.25v7.5m-6.75-6h2.25m-9 2.25h4.5m.002-2.25h.005v.006H12v-.006Zm-.001 4.5h.006v.006h-.006v-.005Zm-2.25.001h.005v.006H9.75v-.006Zm-2.25 0h.005v.005h-.006v-.005Zm6.75-2.247h.005v.005h-.005v-.005Zm0 2.247h.006v.006h-.006v-.006Zm2.25-2.248h.006V15H16.5v-.005Z"})],-1)),s.isLoadingCustomer?(r(),h(g,{key:0,width:"w-32",shine:!0})):(r(),n(v,{key:1},[t("span",Ps,d(o.formattedDate(s.customer.birthday)),1),l(_,{title:"What Is This?",description:"This is the customers birthday 🥳",placement:"top"})],64))])):c("",!0),!s.isLoadingCustomer&&a.hasAddresses?(r(),n("div",Is)):c("",!0),s.isLoadingCustomer||a.hasAddresses?(r(),n(v,{key:4},[s.isLoadingCustomer?(r(),n("div",Vs,[e[24]||(e[24]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1)),l(g,{width:"w-32",shine:!0})])):(r(!0),n(v,{key:1},B(a.addresses,(p,ee)=>(r(),n("div",{key:ee,class:"flex items-center space-x-2 text-sm"},[e[25]||(e[25]=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"})],-1)),t("span",null,d(p._attributes.completeAddress),1)]))),128))],64)):c("",!0)])])]),t("div",Ms,[t("div",Bs,[l(M,{customer:s.customer,isLoadingCustomer:s.isLoadingCustomer,refreshCustomer:a.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])]),t("div",Os,[t("div",Ns,[l(i,{customer:s.customer,isLoadingCustomer:s.isLoadingCustomer,refreshCustomer:a.getCustomer},null,8,["customer","isLoadingCustomer","refreshCustomer"])])])])),s.customer?(r(),n("div",{key:2,class:F(["space-y-4 shadow-lg rounded-lg border p-4",s.isLoadingCustomer?"bg-gray-50":"border-red-300 bg-red-50"])},[t("p",null,[e[26]||(e[26]=f("Do you want to permanently delete ")),t("span",Es,d(s.form.name),1),e[27]||(e[27]=f("? Once this customer is deleted you will not be able to recover it."))]),t("div",As,[l(w,{approveText:"Delete Customer",approveAction:a.deleteCustomer,isLoading:s.isDeleting},{content:u(()=>[e[30]||(e[30]=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),t("p",Fs,[e[28]||(e[28]=f("Are you sure you want to permanently delete ")),t("span",Hs,d(s.form.name),1),e[29]||(e[29]=f("?"))])]),trigger:u(p=>[l(x,{action:p.showModal,loading:s.isDeleting,class:"w-40",type:"danger"},{default:u(()=>e[31]||(e[31]=[f(" Delete Customer ")])),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):c("",!0)])}const Mo=G(zt,[["render",js]]);export{Mo as default};
