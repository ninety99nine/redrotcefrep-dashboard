import{F as d}from"./FormMixin-D44Bj-el.js";import{U as h}from"./form-store-B_ZbhArT.js";import{a as u,c as s,b as r,n as g,i as m,d as p,w as f,T as _,t as a,r as y,o as t,e as L}from"./app-DEkFCb1u.js";import{s as x}from"./auth-repository-yDTpM9Oj.js";import{F as b}from"./FormErrorMessages-T64AgTW8.js";import{_ as w}from"./_plugin-vue_export-helper-DlAUqK2U.js";const v={mixins:[d,h],components:{FormErrorMessages:b},data(){return{countdown:5,errorMessage:null,isLoadingLogo:!0,countdownInterval:null,authState:u(),error:this.$route.query.error,logoUrl:this.$route.query.logo_url,provider:this.$route.query.provider,accessToken:this.$route.query.token,errorDescription:this.$route.query.error_description}},computed:{borderColor(){return this.errorMessage?"#e02523":{google:"#df4b39",linkedin:"#117bb8",facebook:"#3f5c9b"}[this.provider]}},methods:{onLogoLoaded(){this.isLoadingLogo=!1},startCountdown(){this.countdownInterval=setInterval(()=>{this.countdown>0?this.countdown-=1:(clearInterval(this.countdownInterval),this.$router.replace({name:"login"}))},1e3)},attemptSocialLogin(){x(this.accessToken).then(o=>{o.status==200&&this.$router.replace({name:"show-stores"})}).catch(o=>{this.formState.setServerFormErrors(o),this.hasErrors&&(this.errorMessage=this.formErrors[0])})}},created(){this.errorDescription||this.error?(this.errorMessage=this.errorDescription||this.error,this.startCountdown()):this.attemptSocialLogin()}},k={class:"flex min-h-screen flex-col justify-center items-center px-6 py-12 lg:px-8 bg-gray-200"},M={class:"relative inline-flex items-center justify-center w-28 h-28"},S=["src"],C=["src"],I={key:0,class:"mt-8"},q={class:"font-medium text-red-500 text-sm mb-4"},E={class:"text-gray-400 text-sm text-center"},F={key:1,class:"text-gray-400 text-center mt-8"};function U(o,n,B,D,e,i){const c=y("LineSkeleton");return t(),s("div",k,[r("div",M,[r("div",{class:g(["absolute inset-0 animate-spin rounded-full border-4 border-gray-300"]),style:m("border-top-color:"+i.borderColor+";")},null,4),p(_,{name:"fade-1",mode:"out-in"},{default:f(()=>[e.isLoadingLogo?(t(),L(c,{key:0,width:"w-20",height:"h-20",color:"bg-gray-200",class:"border border-gray-300"})):(t(),s("img",{key:1,src:e.logoUrl,alt:"Social Logo",class:"w-20 h-20 relative"},null,8,S))]),_:1})]),r("img",{src:e.logoUrl,onLoad:n[0]||(n[0]=(...l)=>i.onLogoLoaded&&i.onLogoLoaded(...l)),class:"hidden"},null,40,C),e.errorMessage?(t(),s("div",I,[r("p",q,a(e.errorMessage),1),r("p",E,a(e.countdown==0?"Redirecting...":`${"Redirecting in "+e.countdown}`),1)])):(t(),s("p",F,"Logging In"))])}const $=w(v,[["render",U]]);export{$ as default};
