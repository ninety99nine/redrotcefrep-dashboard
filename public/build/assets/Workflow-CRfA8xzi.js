import{c as W,i as te}from"./cloneDeep-BGE7Bmb-.js";import{A as D}from"./Alert-DEJps0rh.js";import{F as b}from"./FormMixin-D44Bj-el.js";import{r as i,o as l,e as k,w as f,c as w,F,k as C,t as x,b as r,d as m,n as T,s as oe,u as V,f as S,m as P,h as y}from"./app-DEkFCb1u.js";import{u as j}from"./store-store-CxinBL3L.js";import{T as H}from"./TextHeader-DRGBY_Ui.js";import{B as re}from"./BackButton-DMqpm81M.js";import{U as O}from"./UndoButton-6P096GJ8.js";import{u as c}from"./workflow-store-D5s1F-Ms.js";import{P as M}from"./PrimaryButton-Cwf__Lsv.js";import{L as se}from"./LineSkeleton-DFWRI7XC.js";import{B as le}from"./BackdropLoader-jo1Que9S.js";import{M as R}from"./MoreInfoPopover-CrxGv8yo.js";import{p as A,a as z,d as Z,g as q}from"./api-repository-CIJPUswr.js";import{F as G}from"./FormErrorMessages-T64AgTW8.js";import{U as E}from"./form-store-B_ZbhArT.js";import{S as U}from"./SelectInput-DXfLro8i.js";import{_ as v}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as X}from"./TextInput-CwB-G_mS.js";import{V as ie}from"./vue-draggable-next.esm-bundler-C7oHOHQm.js";import{P as ne}from"./Pill-CD_3pjy5.js";import{S as ae}from"./SpinningLoader-BnJGVf_7.js";import{B as we}from"./BulkMobileNumberInput-GLJbzw4B.js";import{T as me}from"./TextareaInput-CtY-WADI.js";import{E as de}from"./EmailInput-CYL8CYZj.js";import{C as B}from"./Checkbox-BOFyOk4h.js";import{N as Y}from"./NumberInput-DlCNpvmN.js";import{C as fe}from"./ConfirmModal-CKYpWGJT.js";import{T as ue}from"./ToogleSwitch-CtY-gb5u.js";/* empty css                                                                      */import"./ShineEffect-CWpUJr6E.js";import"./InputErrorMessage-lzTzq-uZ.js";import"./AddButton-CqVfIWO7.js";import"./BasicModal-DyuUDblK.js";import"./DeleteButton-BPGn2bRk.js";import"./MobileNumberInput-DB74IXOZ.js";import"./Button-CTlUNYLQ.js";const pe={mixins:[b,E],components:{SelectInput:U},data(){return{workflowState:c()}},watch:{"workflowForm.resource"(t){t&&this.triggerGroups.length>0&&(this.workflowState.workflowForm.trigger=this.triggerGroups[0].options[0])}},computed:{workflowForm(){return this.workflowState.workflowForm},triggerGroups(){return this.workflowForm.resource=="order"?[{name:"Status",options:["waiting","cancelled","completed","on its way","ready for pickup"]},{name:"Payment status",options:["paid","unpaid","partially paid","pending payment"]}]:this.workflowForm.resource=="inventory"?[{name:"Stock levels",options:["low stock"]}]:[]}}},ce=["label"],ke=["value"];function he(t,e,s,h,n,o){const d=i("SelectInput");return l(),k(d,{class:"w-60",modelValue:o.workflowForm.trigger,"onUpdate:modelValue":e[0]||(e[0]=a=>o.workflowForm.trigger=a),errorText:t.getFormError("trigger")},{default:f(()=>[(l(!0),w(F,null,C(o.triggerGroups,a=>(l(),w("optgroup",{key:a.name,label:a.name},[(l(!0),w(F,null,C(a.options,p=>(l(),w("option",{key:p,value:p},x(t.capitalize(p)),9,ke))),128))],8,ce))),128))]),_:1},8,["modelValue","errorText"])}const ge=v(pe,[["render",he]]),Se={mixins:[b,E],components:{SelectInput:U},data(){return{resources:["order","inventory"],workflowState:c()}},computed:{workflowForm(){return this.workflowState.workflowForm}}},xe=["value"];function be(t,e,s,h,n,o){const d=i("SelectInput");return l(),k(d,{class:"w-60",modelValue:o.workflowForm.resource,"onUpdate:modelValue":e[0]||(e[0]=a=>o.workflowForm.resource=a),errorText:t.getFormError("resource")},{default:f(()=>[(l(!0),w(F,null,C(n.resources,a=>(l(),w("option",{key:a,value:a},x(t.capitalize(a)),9,xe))),128))]),_:1},8,["modelValue","errorText"])}const ve=v(Se,[["render",be]]),Fe={mixins:[b,E],components:{TriggerSelectInput:ge,ResourceSelectInput:ve}},_e={class:"bg-gray-50 border rounded-lg shadow-sm p-4"},ye={class:"flex items-center space-x-4"};function We(t,e,s,h,n,o){const d=i("ResourceSelectInput"),a=i("TriggerSelectInput");return l(),w("div",_e,[e[1]||(e[1]=r("div",{class:"flex items-center space-x-2 mb-4"},[r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})]),r("h1",{class:"font-bold text-lg"},"When")],-1)),r("div",ye,[m(d),e[0]||(e[0]=r("span",null,"is",-1)),m(a)])])}const Te=v(Fe,[["render",We]]),Ce={mixins:[b],components:{TextInput:X},data(){return{workflowState:c()}},computed:{workflowForm(){return this.workflowState.workflowForm}}};function Ie(t,e,s,h,n,o){const d=i("TextInput");return l(),k(d,{label:"Name",modelValue:o.workflowForm.name,"onUpdate:modelValue":e[0]||(e[0]=a=>o.workflowForm.name=a),errorText:t.getFormError("name"),labelPopoverTitle:"What Is This?",placeholder:"Whatsapp waiting order to team",labelPopoverDescription:"The workflow name e.g Whatsapp waiting order to team"},null,8,["modelValue","errorText"])}const Ve=v(Ce,[["render",Ie]]),Ee={mixins:[b],components:{TextareaInput:me},props:{workflowStepForm:{type:Object}}};function Ue(t,e,s,h,n,o){const d=i("TextareaInput");return l(),k(d,{rows:2,placeholder:"Additional notes",labelPopoverTitle:"What Is This?",modelValue:s.workflowStepForm.settings.note,"onUpdate:modelValue":e[0]||(e[0]=a=>s.workflowStepForm.settings.note=a),errorText:t.getFormError("settingsNote"),labelPopoverDescription:"Addtional notes to include together with the message"},null,8,["modelValue","errorText"])}const Ne=v(Ee,[["render",Ue]]),Le={mixins:[b],components:{EmailInput:de},props:{workflowStepForm:{type:Object}}};function De(t,e,s,h,n,o){const d=i("EmailInput");return l(),k(d,{placeholder:"sales@example.com",modelValue:s.workflowStepForm.settings.email,"onUpdate:modelValue":e[0]||(e[0]=a=>s.workflowStepForm.settings.email=a),errorText:t.getFormError("settingsEmail")},null,8,["modelValue","errorText"])}const Me=v(Le,[["render",De]]),Ae={mixins:[b],components:{Checkbox:B,NumberInput:Y,SelectInput:U},props:{workflowStepForm:{type:Object}}},Be={class:"mt-0.5 mx-2"},Pe={value:"hour"},je={value:"day"};function He(t,e,s,h,n,o){const d=i("NumberInput"),a=i("SelectInput"),p=i("Checkbox");return l(),k(p,{size:"xs",modelValue:s.workflowStepForm.settings.addDelay,"onUpdate:modelValue":e[2]||(e[2]=g=>s.workflowStepForm.settings.addDelay=g),errorText:t.getFormError("settingsAddDelay")},{default:f(()=>[r("div",Be,[e[4]||(e[4]=r("p",{class:"font-bold text-sm mb-1"},"Add delay",-1)),e[5]||(e[5]=r("p",{class:"text-sm text-gray-500 max-w-96"},"Send message after a specified amount of time",-1)),r("div",{class:T([s.workflowStepForm.settings.addDelay?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[e[3]||(e[3]=r("span",{class:"text-sm"}," Send after ",-1)),m(d,{min:"1",placeholder:"1",class:"w-20 inline-block",modelValue:s.workflowStepForm.settings.delayTimeValue,"onUpdate:modelValue":e[0]||(e[0]=g=>s.workflowStepForm.settings.delayTimeValue=g)},null,8,["modelValue"]),m(a,{width:"w-24",class:"inline-block",modelValue:s.workflowStepForm.settings.delayTimeUnit,"onUpdate:modelValue":e[1]||(e[1]=g=>s.workflowStepForm.settings.delayTimeUnit=g)},{default:f(()=>[r("option",Pe,x(s.workflowStepForm.settings.delayTimeValue=="1"?"Hour":"Hours"),1),r("option",je,x(s.workflowStepForm.settings.delayTimeValue=="1"?"Day":"Days"),1)]),_:1},8,["modelValue"])],2)])]),_:1},8,["modelValue","errorText"])}const Oe=v(Ae,[["render",He]]),Re={mixins:[b],components:{Checkbox:B,NumberInput:Y,SelectInput:U},props:{workflowStepForm:{type:Object}}},ze={class:"mt-0.5 mx-2"},Ze={value:"hour"},qe={value:"day"};function Ge(t,e,s,h,n,o){const d=i("NumberInput"),a=i("SelectInput"),p=i("Checkbox");return l(),k(p,{size:"xs",modelValue:s.workflowStepForm.settings.autoCancel,"onUpdate:modelValue":e[2]||(e[2]=g=>s.workflowStepForm.settings.autoCancel=g),errorText:t.getFormError("settingsAutoCancel")},{default:f(()=>[r("div",ze,[e[4]||(e[4]=r("p",{class:"font-bold text-sm mb-1"},"Auto cancel if not paid",-1)),e[5]||(e[5]=r("p",{class:"text-sm text-gray-500 max-w-96"},"Automatically cancel the order if not paid after a specified amount of time",-1)),r("div",{class:T([s.workflowStepForm.settings.autoCancel?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[e[3]||(e[3]=r("span",{class:"text-sm"}," Cancel after ",-1)),m(d,{min:"1",placeholder:"1",class:"w-20 inline-block",modelValue:s.workflowStepForm.settings.cancelTimeValue,"onUpdate:modelValue":e[0]||(e[0]=g=>s.workflowStepForm.settings.cancelTimeValue=g)},null,8,["modelValue"]),m(a,{width:"w-24",class:"inline-block",modelValue:s.workflowStepForm.settings.cancelTimeUnit,"onUpdate:modelValue":e[1]||(e[1]=g=>s.workflowStepForm.settings.cancelTimeUnit=g)},{default:f(()=>[r("option",Ze,x(s.workflowStepForm.settings.cancelTimeValue=="1"?"Hour":"Hours"),1),r("option",qe,x(s.workflowStepForm.settings.cancelTimeValue=="1"?"Day":"Days"),1)]),_:1},8,["modelValue"])],2)])]),_:1},8,["modelValue","errorText"])}const Xe=v(Re,[["render",Ge]]),Ye={mixins:[b],components:{TextInput:X,Checkbox:B},props:{workflowStepForm:{type:Object}},data(){return{appName:oe.appName}}},Je={class:"w-full mt-0.5 mx-2"};function Ke(t,e,s,h,n,o){const d=i("TextInput"),a=i("Checkbox");return l(),k(a,{size:"xs",modelValue:s.workflowStepForm.settings.useReviewLink,"onUpdate:modelValue":e[1]||(e[1]=p=>s.workflowStepForm.settings.useReviewLink=p),errorText:t.getFormError("settingsUseReviewLink")},{default:f(()=>[r("div",Je,[e[3]||(e[3]=r("p",{class:"font-bold text-sm mb-1"},"Use review link",-1)),e[4]||(e[4]=r("p",{class:"text-sm text-gray-500 max-w-96"},"Provide a link that will be used to take reviews",-1)),r("div",{class:T([s.workflowStepForm.settings.useReviewLink?"h-10 mt-4":"h-0 mt-0","w-full transition-all duration-500 overflow-hidden"])},[m(d,{class:"w-full p-0.5",labelPopoverTitle:"What Is This?",modelValue:s.workflowStepForm.settings.reviewLink,"onUpdate:modelValue":e[0]||(e[0]=p=>s.workflowStepForm.settings.reviewLink=p),errorText:t.getFormError("settingsReviewLink"),placeholder:"https://paypal.me/baby-cakes",labelPopoverDescription:"The link that will be used to redirect customers to place a review. If not provided, "+n.appName+" will use its own review system"},{prepend:f(()=>e[2]||(e[2]=[r("div",{class:"py-1.5 px-2 rounded-l-md bg-gray-50 text-gray-500 border-r whitespace-nowrap"},[r("svg",{class:"w-5 h-5 mt-0.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])],-1)])),_:1},8,["modelValue","errorText","labelPopoverDescription"])],2)])]),_:1},8,["modelValue","errorText"])}const Qe=v(Ye,[["render",Ke]]),$e={mixins:[b,E],components:{Alert:D,TextHeader:H,UndoButton:O,SelectInput:U,SpinningLoader:ae,PrimaryButton:M,MoreInfoPopover:R,FormErrorMessages:G,BulkMobileNumberInput:we,NoteTextarea:Ne,EmailTextInput:Me,AddDelayCheckbox:Oe,AutoCancelCheckbox:Xe,ReviewLinkTextInput:Qe},props:{index:{type:Number},workflowStep:{type:[Object,null]}},emits:["onCreated","onDeleted"],data(){return{isDeleting:!1,isSubmitting:!1,workflowStepForm:{},apiState:V(),originalWorkflowStepForm:null,workflowState:c()}},watch:{mustSaveChanges(t){t?c().addUnsavedWorkflowStep(this.updateWorkflowStep):c().removeUnsavedWorkflowStep(this.updateWorkflowStep)},mustCreate(t){t?c().addUncreatedWorkflowStep(this.createWorkflowStep):c().removeUncreatedWorkflowStep(this.createWorkflowStep)},"workflowForm.trigger"(t){this.autoSelectExistingOptions()},"workflowStepForm.settings.action"(t){this.autoSelectExistingOptions()},"workflowStepForm.settings.recipient"(){this.autoSelectExistingOptions()}},computed:{workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},totalWorkflowSteps(){return this.workflowState.totalWorkflowSteps},actions(){return["waiting","cancelled","completed","on its way","ready for pickup","paid","unpaid","partially paid","pending payment","low stock"].includes(this.workflowForm.trigger)?["whatsapp","email","sms"]:[]},templates(){return["completed","paid"].includes(this.workflowForm.trigger)?["show status","request a review"]:["pending payment"].includes(this.workflowForm.trigger)?["show status","remind them to pay"]:[]},hasTemplates(){return this.templates.length>0},recipients(){return this.workflowForm.trigger=="low stock"?["team"]:["customer","team"]},remindThemToPay(){return this.workflowStepForm.settings.template=="remind them to pay"},requestAReview(){return this.workflowStepForm.settings.template=="request a review"},sendToCustomer(){return this.workflowStepForm.settings.recipient=="customer"},sendToTeam(){return this.workflowStepForm.settings.recipient=="team"},sendWhatsapp(){return this.workflowStepForm.settings.action=="whatsapp"},sendEmail(){return this.workflowStepForm.settings.action=="email"},sendSms(){return this.workflowStepForm.settings.action=="sms"},isCreating(){var t;return((t=this.workflowStep)==null?void 0:t.id)==null},isEditting(){var t;return((t=this.workflowStep)==null?void 0:t.id)!=null},mustSaveChanges(){return this.isEditting&&this.workflowStepFormHasChanged&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.workflowStepFormHasChanged&&!this.isSubmitting},workflowStepFormHasChanged(){var t=W(this.workflowStepForm),e=W(this.originalWorkflowStepForm);return!te(t,e)}},methods:{setFormFields(){this.isEditting?(this.workflowStepForm={settings:this.workflowStep.settings},this.workflowStepForm.settings.mobileNumbers&&(this.workflowStepForm.settings.mobileNumbers=this.workflowStepForm.settings.mobileNumbers.map(t=>t.international)),this.originalWorkflowStepForm=W(this.workflowStepForm)):this.workflowStepForm={settings:{notes:"",email:"",template:"",reviewLink:"",mobileNumbers:[],action:"whatsapp",recipient:"customer",useReviewLink:!1,addDelay:!1,delayTimeValue:"1",delayTimeUnit:"hour",autoCancel:!1,cancelTimeValue:"6",cancelTimeUnit:"hour"}}},reset(){this.isCreating?this.$emit("onDeleted",this.index):this.workflowStepForm=W(this.originalWorkflowStepForm)},autoSelectExistingOptions(){this.actions.includes(this.workflowStepForm.settings.action)||(this.actions.length>0?this.workflowStepForm.settings.action=this.actions[0]:this.workflowStepForm.settings.action=null),this.recipients.includes(this.workflowStepForm.settings.recipient)||(this.recipients.length>0?this.workflowStepForm.settings.recipient=this.recipients[0]:this.workflowStepForm.settings.recipient=null),this.templates.includes(this.workflowStepForm.settings.template)||(this.templates.length>0?this.workflowStepForm.settings.template=this.templates[0]:this.workflowStepForm.settings.template=null)},parseForm(){var t=W(this.workflowStepForm);return t.return=!0,this.isCreating&&(t.workflow_id=this.workflow.id),t},createMobileNumber(t,e,s){this.workflowStepForm.settings.mobileNumbers.push(t),s(),e()},updateMobileNumber(t,e,s,h){this.workflowStepForm.settings.mobileNumbers[e]=t,h(),s()},deleteMobileNumber(t,e,s){this.workflowStepForm.settings.mobileNumbers.splice(t,1),s(),e()},async createWorkflowStep(){try{this.formState.hideFormErrors(),this.isSubmitting=!0;const t=await A(V().apiHome._links.createWorkflowStep,this.parseForm());t.status===200&&(t.data.created?(this.$emit("onCreated",t.data.workflowStep,this.index),this.originalWorkflowStepForm=W(this.workflowStepForm)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)))}catch(t){this.formState.setServerFormErrors(t)}finally{this.isSubmitting=!1}},async updateWorkflowStep(){try{this.isSubmitting=!0;const t=await z(this.workflowStep._links.updateWorkflowStep,this.parseForm());t.status===200&&(t.data.updated||(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)),this.originalWorkflowStepForm=W(this.workflowStepForm))}catch(t){this.formState.setServerFormErrors(t)}finally{this.isSubmitting=!1}},deleteWorkflowStep(){if(this.isCreating){this.$emit("onDeleted",this.index),c().uncreatedWorkflowSteps.splice(c().uncreatedWorkflowSteps.indexOf(this.index),1);return}this.isDeleting=!0,Z(this.workflowStep._links.deleteWorkflowStep).then(t=>{t.status==200?t.data.deleted?(this.$emit("onDeleted",this.index),c().unsavedWorkflowSteps.splice(c().unsavedWorkflowSteps.indexOf(this.index),1)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)),this.isDeleting=!1}).catch(t=>{this.isDeleting=!1,this.formState.setServerFormErrors(t)})}},beforeUnmount(){this.workflowState.removeResetableWorkflowStep(),c().removeUncreatedWorkflowStep(this.createWorkflowStep)},created(){this.setFormFields(),this.mustCreate&&c().addUncreatedWorkflowStep(this.createWorkflowStep),c().addResetableWorkflowStep(this.reset)}},et={class:"relative"},tt={class:"grid grid-cols-2 gap-x-4"},ot={class:"col-span-1 flex justify-end items-center space-x-4"},rt={class:"flex items-center space-x-2"},st={class:"w-full flex items-center space-x-2"},lt={key:0,class:"w-6 h-6 flex-shrink-0",fill:"#44c152",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 308 308","xml:space":"preserve"},it={key:1,class:"w-6 h-6 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},nt={key:2,class:"w-6 h-6 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},at=["value"],wt={class:"col-span-1 flex justify-start items-center space-x-4"},mt=["value"],dt={key:0,class:"col-span-1 flex justify-end items-center space-x-4 mt-4"},ft=["value"],ut={class:"space-y-4 border-t border-dashed pt-4 mt-4"},pt={class:"flex items-center space-x-2 absolute top-1 right-0"};function ct(t,e,s,h,n,o){const d=i("SelectInput"),a=i("EmailTextInput"),p=i("BulkMobileNumberInput"),g=i("NoteTextarea"),_=i("ReviewLinkTextInput"),I=i("AddDelayCheckbox"),N=i("AutoCancelCheckbox"),L=i("SpinningLoader");return l(),w("div",null,[s.index!=0?(l(),w("div",{key:0,class:T([o.mustCreate?"border-gray-200":"border-blue-200","w-0 h-6 ml-8 border-l-2 border-dashed"])},null,2)):S("",!0),r("div",{class:T([o.mustCreate?"bg-gray-50 border-gray-200":"bg-blue-50/50 border-blue-200","border border-dashed rounded-lg shadow-sm p-4 relative"])},[r("div",et,[r("div",tt,[r("div",ot,[r("div",rt,[r("div",{class:T([o.mustCreate?"text-gray-400 border bg-gray-50 border-gray-300":"text-blue-400 border bg-blue-50 border-blue-300","w-8 h-8 rounded-full font-bold text-xs flex items-center justify-center"])},[r("span",null,x(s.index+1),1)],2)]),e[8]||(e[8]=r("span",{class:"text-sm"},"Send",-1)),r("div",st,[o.sendWhatsapp?(l(),w("svg",lt,e[5]||(e[5]=[r("g",{id:"XMLID_468_"},[r("path",{id:"XMLID_469_",d:"M227.904,176.981c-0.6-0.288-23.054-11.345-27.044-12.781c-1.629-0.585-3.374-1.156-5.23-1.156c-3.032,0-5.579,1.511-7.563,4.479c-2.243,3.334-9.033,11.271-11.131,13.642c-0.274,0.313-0.648,0.687-0.872,0.687c-0.201,0-3.676-1.431-4.728-1.888c-24.087-10.463-42.37-35.624-44.877-39.867c-0.358-0.61-0.373-0.887-0.376-0.887c0.088-0.323,0.898-1.135,1.316-1.554c1.223-1.21,2.548-2.805,3.83-4.348c0.607-0.731,1.215-1.463,1.812-2.153c1.86-2.164,2.688-3.844,3.648-5.79l0.503-1.011c2.344-4.657,0.342-8.587-0.305-9.856c-0.531-1.062-10.012-23.944-11.02-26.348c-2.424-5.801-5.627-8.502-10.078-8.502c-0.413,0,0,0-1.732,0.073c-2.109,0.089-13.594,1.601-18.672,4.802c-5.385,3.395-14.495,14.217-14.495,33.249c0,17.129,10.87,33.302,15.537,39.453c0.116,0.155,0.329,0.47,0.638,0.922c17.873,26.102,40.154,45.446,62.741,54.469c21.745,8.686,32.042,9.69,37.896,9.69c0.001,0,0.001,0,0.001,0c2.46,0,4.429-0.193,6.166-0.364l1.102-0.105c7.512-0.666,24.02-9.22,27.775-19.655c2.958-8.219,3.738-17.199,1.77-20.458C233.168,179.508,230.845,178.393,227.904,176.981z"}),r("path",{id:"XMLID_470_",d:"M156.734,0C73.318,0,5.454,67.354,5.454,150.143c0,26.777,7.166,52.988,20.741,75.928L0.212,302.716c-0.484,1.429-0.124,3.009,0.933,4.085C1.908,307.58,2.943,308,4,308c0.405,0,0.813-0.061,1.211-0.188l79.92-25.396c21.87,11.685,46.588,17.853,71.604,17.853C240.143,300.27,308,232.923,308,150.143C308,67.354,240.143,0,156.734,0zM156.734,268.994c-23.539,0-46.338-6.797-65.936-19.657c-0.659-0.433-1.424-0.655-2.194-0.655c-0.407,0-0.815,0.062-1.212,0.188l-40.035,12.726l12.924-38.129c0.418-1.234,0.209-2.595-0.561-3.647c-14.924-20.392-22.813-44.485-22.813-69.677c0-65.543,53.754-118.867,119.826-118.867c66.064,0,119.812,53.324,119.812,118.867C276.546,215.678,222.799,268.994,156.734,268.994z"})],-1)]))):o.sendSms?(l(),w("svg",it,e[6]||(e[6]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"},null,-1)]))):o.sendEmail?(l(),w("svg",nt,e[7]||(e[7]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"},null,-1)]))):S("",!0),m(d,{class:"w-full",modelValue:n.workflowStepForm.settings.action,"onUpdate:modelValue":e[0]||(e[0]=u=>n.workflowStepForm.settings.action=u),errorText:t.getFormError("settingsAction")},{default:f(()=>[(l(!0),w(F,null,C(o.actions,u=>(l(),w("option",{key:u,value:u},x(t.capitalize(u)),9,at))),128))]),_:1},8,["modelValue","errorText"])])]),r("div",wt,[e[9]||(e[9]=r("span",{class:"text-sm"},"to",-1)),m(d,{class:"w-60",modelValue:n.workflowStepForm.settings.recipient,"onUpdate:modelValue":e[1]||(e[1]=u=>n.workflowStepForm.settings.recipient=u),errorText:t.getFormError("settings.recipient")},{default:f(()=>[(l(!0),w(F,null,C(o.recipients,u=>(l(),w("option",{key:u,value:u},x(t.capitalize(u)),9,mt))),128))]),_:1},8,["modelValue","errorText"])]),o.sendToCustomer&&o.hasTemplates?(l(),w("div",dt,[e[10]||(e[10]=r("span",{class:"text-sm"},"to",-1)),m(d,{class:"w-60",modelValue:n.workflowStepForm.settings.template,"onUpdate:modelValue":e[2]||(e[2]=u=>n.workflowStepForm.settings.template=u),errorText:t.getFormError("settingsTemplate")},{default:f(()=>[(l(!0),w(F,null,C(o.templates,u=>(l(),w("option",{key:u,value:u},x(t.capitalize(u)),9,ft))),128))]),_:1},8,["modelValue","errorText"])])):S("",!0)]),r("div",ut,[o.sendToTeam?(l(),w(F,{key:0},[o.sendEmail?(l(),k(a,{key:0,workflowStepForm:n.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),o.sendWhatsapp||o.sendSms?(l(),k(p,{key:1,isSubmitting:!1,showWhatsappIcon:o.sendWhatsapp,createMobileNumber:o.createMobileNumber,updateMobileNumber:o.updateMobileNumber,deleteMobileNumber:o.deleteMobileNumber,mobileNumbers:n.workflowStepForm.settings.mobileNumbers},null,8,["showWhatsappIcon","createMobileNumber","updateMobileNumber","deleteMobileNumber","mobileNumbers"])):S("",!0)],64)):o.sendToCustomer?(l(),w(F,{key:1},[o.sendWhatsapp||o.sendEmail?(l(),k(g,{key:0,workflowStepForm:n.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),o.requestAReview?(l(),k(_,{key:1,workflowStepForm:n.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),o.remindThemToPay?(l(),w(F,{key:2},[m(I,{workflowStepForm:n.workflowStepForm},null,8,["workflowStepForm"]),m(N,{workflowStepForm:n.workflowStepForm},null,8,["workflowStepForm"])],64)):S("",!0)],64)):S("",!0)]),r("div",pt,[n.isDeleting?(l(),k(L,{key:0,type:"danger"},{default:f(()=>e[11]||(e[11]=[r("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):o.totalWorkflowSteps>1?(l(),w("svg",{key:1,onClick:e[3]||(e[3]=P((...u)=>o.deleteWorkflowStep&&o.deleteWorkflowStep(...u),["stop","prevent"])),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[12]||(e[12]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1)]))):S("",!0),(l(),w("svg",{onClick:e[4]||(e[4]=P(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-gray-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},e[13]||(e[13]=[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1)])))])])],2)])}const kt=v($e,[["render",ct]]),ht={mixins:[b,E],components:{Alert:D,draggable:ie,Pill:ne,WorkflowStep:kt},data(){return{maxWorkflowSteps:5,apiState:V(),isLoadingWorkflowSteps:!1,workflowState:c(),isUpdatingWorkflowArrangement:!1}},computed:{workflow(){return this.workflowState.workflow},isEditting(){return this.workflowState.isEditting},workflowSteps(){return this.workflowState.workflowSteps},hasWorkflowSteps(){return this.workflowState.hasWorkflowSteps},totalWorkflowSteps(){return this.workflowState.totalWorkflowSteps}},methods:{addWorkflowStep(){this.workflowState.workflowSteps.push({tempId:this.generateUniqueId()})},onCreated(t,e){this.workflowState.workflowSteps[e]=t},onDeleted(t){this.workflowState.workflowSteps.splice(t,1);const e=this.workflowState.uncreatedWorkflowSteps.length>0,s=this.workflowState.workflowSteps.filter(h=>h.id).length>0;this.isEditting&&!s&&e&&this.workflowState.createWorkflowSteps()},showWorkflowSteps(){this.isLoadingWorkflowSteps=!0,q(this.workflow._links.showWorkflowSteps).then(t=>{t.status==200&&(this.pagination=t.data,this.workflowState.workflowSteps=this.pagination.data),this.isLoadingWorkflowSteps=!1}).catch(t=>{this.isLoadingWorkflowSteps=!1,this.formState.setServerFormErrors(t)})},async updateWorkflowStepArrangement(t=!0){if(this.workflow==null)return;this.isUpdatingWorkflowArrangement=!0;const e={workflowId:this.workflow.id,workflowStepIds:this.workflowSteps.filter(s=>!s.tempId).map(s=>s.id)};if(e.workflowStepIds.length===0){this.isUpdatingWorkflowArrangement=!1;return}try{const s=await A(this.apiState.apiHome._links.updateWorkflowStepArrangement,e);s.status===200&&(s.data.updated?t&&this.notificationState.showSuccessNotification("Workflow arrangement updated"):(this.formState.setFormError("general",s.data.message),this.notificationState.showWarningNotification(s.data.message)))}catch(s){this.formState.setServerFormErrors(s)}finally{this.isUpdatingWorkflowArrangement=!1}}},created(){this.workflow&&this.showWorkflowSteps(),this.workflowState.updateWorkflowStepArrangement=this.updateWorkflowStepArrangement}},gt={key:0,class:"flex justify-center"},St={key:1,class:"flex justify-center mb-16"},xt={class:"flex items-center space-x-2"},bt={class:"font-bold"};function vt(t,e,s,h,n,o){const d=i("WorkflowStep"),a=i("draggable"),p=i("Pill"),g=i("Alert");return l(),w("div",null,[o.hasWorkflowSteps?(l(),w("div",gt,e[1]||(e[1]=[r("svg",{class:"w-6 h-6 text-blue-300 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25 12 21m0 0-3.75-3.75M12 21V3"})],-1)]))):S("",!0),m(a,{class:"mb-8",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:n.workflowState.workflowSteps,"onUpdate:modelValue":e[0]||(e[0]=_=>n.workflowState.workflowSteps=_),onChange:o.updateWorkflowStepArrangement},{default:f(()=>[(l(!0),w(F,null,C(o.workflowSteps,(_,I)=>(l(),k(d,{index:I,onOnCreated:o.onCreated,onOnDeleted:o.onDeleted,workflowStep:_,key:_.id??_.tempId},null,8,["index","onOnCreated","onOnDeleted","workflowStep"]))),128))]),_:1},8,["modelValue","onChange"]),o.totalWorkflowSteps<n.maxWorkflowSteps?(l(),w("div",St,[m(p,{type:"primary",showDot:!1,size:"px-8 py-2",clickable:!0,action:()=>o.addWorkflowStep(),text:o.hasWorkflowSteps?o.totalWorkflowSteps==n.maxWorkflowSteps-1?"+ Finally this":"+ Then this":"+ Do this"},null,8,["action","text"])])):S("",!0),o.totalWorkflowSteps==n.maxWorkflowSteps?(l(),k(g,{key:2,type:"info",class:"flex justify-between items-center mb-4"},{default:f(()=>[r("div",xt,[e[4]||(e[4]=r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})],-1)),r("span",null,[e[2]||(e[2]=y("You can only add up to ")),r("span",bt,x(n.maxWorkflowSteps)+" tasks",1),e[3]||(e[3]=y(" per workflow"))])])]),_:1})):S("",!0)])}const Ft=v(ht,[["render",vt]]),_t={mixins:[b],components:{ConfirmModal:fe,PrimaryButton:M},data(){return{isDeleting:!1,storeState:j(),workflowState:c()}},computed:{store(){return this.storeState.store},workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow}},methods:{deleteWorkflow(){this.isDeleting=!0,Z(this.workflow._links.deleteWorkflow).then(t=>{t.status==200?t.data.deleted?(this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),this.notificationState.showSuccessNotification("Workflow deleted")):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)),this.isDeleting=!1}).catch(t=>{this.isDeleting=!1,this.formState.setServerFormErrors(t)})}}},yt={class:"font-bold text-black"},Wt={class:"flex justify-end"},Tt={class:"mb-8"},Ct={class:"font-bold text-black"};function It(t,e,s,h,n,o){const d=i("PrimaryButton"),a=i("ConfirmModal");return o.workflow?(l(),w("div",{key:0,class:T(["space-y-4 shadow-lg rounded-lg border p-4",o.isLoadingWorkflow?"bg-gray-50":"border-red-300 bg-red-50"])},[r("p",null,[e[0]||(e[0]=y("Do you want to permanently delete ")),r("span",yt,x(o.workflowForm.name),1),e[1]||(e[1]=y("? Once this workflow is deleted you will not be able to recover it."))]),r("div",Wt,[m(a,{approveText:"Delete Workflow",approveAction:o.deleteWorkflow,isLoading:n.isDeleting},{content:f(()=>[e[4]||(e[4]=r("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),r("p",Tt,[e[2]||(e[2]=y("Are you sure you want to permanently delete ")),r("span",Ct,x(o.workflowForm.name),1),e[3]||(e[3]=y("?"))])]),trigger:f(p=>[m(d,{action:p.showModal,loading:n.isDeleting,class:"w-60",type:"danger"},{default:f(()=>e[5]||(e[5]=[y(" Delete Workflow ")])),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):S("",!0)}const Vt=v(_t,[["render",It]]),Et={mixins:[b],components:{ToogleSwitch:ue},data(){return{workflowState:c()}},computed:{workflowForm(){return this.workflowState.workflowForm}}};function Ut(t,e,s,h,n,o){const d=i("ToogleSwitch");return l(),k(d,{size:"md",modelValue:o.workflowForm.active,"onUpdate:modelValue":e[0]||(e[0]=a=>o.workflowForm.active=a),labelPopoverTitle:"What Is This?",errorText:t.getFormError("active"),labelPopoverDescription:"Turn on so that your workflow automates processes. Turn off so that your workflow does not automate processes"},{default:f(()=>e[1]||(e[1]=[y(" Active ")])),_:1},8,["modelValue","errorText"])}const Nt=v(Et,[["render",Ut]]),Lt={mixins:[b],components:{Alert:D,TextHeader:H,BackButton:re,UndoButton:O,PrimaryButton:M,LineSkeleton:se,BackdropLoader:le,MoreInfoPopover:R,FormErrorMessages:G,Trigger:Te,NameTextInput:Ve,WorkflowSteps:Ft,DeleteWorkflow:Vt,ActiveToggleSwitch:Nt},data(){return{apiState:V(),storeState:j(),workflowState:c()}},computed:{store(){return this.storeState.store},workflow(){return this.workflowState.workflow},isCreating(){return this.workflowState.isCreating},isEditting(){return this.workflowState.isEditting},mustCreate(){return this.workflowState.mustCreate},workflowForm(){return this.workflowState.workflowForm},isSubmitting(){return this.workflowState.isSubmitting},mustSaveChanges(){return this.workflowState.mustSaveChanges},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow},workflowFormHasName(){return this.workflowState.workflowFormHasName},workflowFormHasChanged(){return this.workflowState.workflowFormHasChanged},hasUnsavedWorkflowSteps(){return this.workflowState.hasUnsavedWorkflowSteps},hasUncreatedWorkflowSteps(){return this.workflowState.hasUncreatedWorkflowSteps}},methods:{goBack(){this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)})},parseForm(){var t=W(this.workflowForm);return t.return=!0,this.isCreating&&(t.store_id=this.store.id),t},getWorkflow(){this.workflowState.setIsLoadingWorkflow(!0);const t={};q(this.$route.params.workflow_href,t).then(e=>{e.status==200&&e.data.exists&&(this.workflowState.setWorkflow(e.data.workflow),this.workflowState.setWorkflowForm(e.data.workflow)),this.workflowState.setIsLoadingWorkflow(!1)}).catch(e=>{this.workflowState.setIsLoadingWorkflow(!1),this.formState.setServerFormErrors(e)})},submit:async function(){const t=this.mustCreate;this.workflowState.setIsSuccessful(!1);const e=this.mustSaveChanges;this.isEditting?await this.updateWorkflow():await this.createWorkflow(),this.workflowState.hasWorkflow&&(this.hasUnsavedWorkflowSteps?await this.workflowState.updateWorkflowSteps():await this.workflowState.createWorkflowSteps(),await this.workflowState.updateWorkflowStepArrangement(!1),t&&this.notificationState.showSuccessNotification("Workflow created"),e&&this.notificationState.showSuccessNotification("Workflow updated"),this.workflowState.hasWorkflowSteps&&this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),(t||e)&&this.workflowState.setIsSubmittingWorkflow(!1))},createWorkflow:async function(){if(this.formState.hideFormErrors(),this.workflowForm.name.trim()=="")this.formState.setFormError("name","Enter workflow name");else{if(!this.mustCreate)return;this.workflowState.setIsSubmittingWorkflow(!0);try{const t=await A(V().apiHome._links.createWorkflow,this.parseForm());t.status==200&&(t.data.created?(this.workflowState.setIsSuccessful(!0),this.workflowState.setWorkflowForm(this.workflowForm),this.workflowState.setWorkflow(t.data.workflow)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)))}catch(t){this.workflowState.setIsSubmittingWorkflow(!1),this.formState.setServerFormErrors(t)}}},updateWorkflow:async function(){if(this.formState.hideFormErrors(),this.workflowForm.name.trim()=="")this.formState.setFormError("name","Enter workflow name");else{if(!this.mustSaveChanges)return;this.workflowState.setIsSubmittingWorkflow(!0);try{const t=await z(this.workflow._links.updateWorkflow,this.parseForm());t.status==200&&(t.data.updated?(this.workflowState.setIsSuccessful(!0),this.workflowState.setWorkflowForm(this.workflowForm),this.workflowState.setWorkflow(t.data.workflow)):(this.formState.setFormError("general",t.data.message),this.notificationState.showWarningNotification(t.data.message)))}catch(t){this.workflowState.setIsSubmittingWorkflow(!1),this.formState.setServerFormErrors(t)}}}},beforeUnmount(){this.workflowState.beforeUnmount()},created(){this.workflowState.setWorkflowForm(),this.isEditting&&this.getWorkflow()}},Dt={class:"bg-white shadow-lg border p-8 rounded-lg relative"},Mt={class:"space-y-4",action:"#",method:"POST"},At={class:"flex justify-start items-center border-dashed py-6"},Bt={key:0,class:"flex items-center space-x-2"},Pt={class:"flex space-x-2"},jt={class:"flex items-center space-x-2"},Ht={class:"flex items-center space-x-2"};function Ot(t,e,s,h,n,o){const d=i("BackdropLoader"),a=i("BackButton"),p=i("LineSkeleton"),g=i("TextHeader"),_=i("MoreInfoPopover"),I=i("UndoButton"),N=i("PrimaryButton"),L=i("Alert"),u=i("FormErrorMessages"),J=i("ActiveToggleSwitch"),K=i("NameTextInput"),Q=i("Trigger"),$=i("WorkflowSteps"),ee=i("DeleteWorkflow");return l(),w("div",Dt,[o.isLoadingWorkflow||o.isSubmitting?(l(),k(d,{key:0,class:"rounded-lg"})):S("",!0),r("form",Mt,[r("div",At,[m(a,{class:"w-16 mr-4",action:o.goBack},null,8,["action"]),o.isLoadingWorkflow?(l(),w("div",Bt,[r("div",Pt,[m(p,{width:"w-40",shine:!0}),m(p,{width:"w-4",shine:!0})])])):(l(),w(F,{key:1},[m(g,null,{default:f(()=>[y(x(o.isCreating?"Add Workflow":o.workflowForm.name),1)]),_:1}),m(_,{class:"ml-2 mt-1",title:"What Is This?",description:"Workflows are automated processes that manage tasks like order alerts, payment links, and delivery updates for smooth operations and a seamless customer experience",placement:"top"})],64))]),r("div",{class:T([o.workflowFormHasName&&(o.mustSaveChanges||o.mustCreate||o.hasUnsavedWorkflowSteps||o.hasUncreatedWorkflowSteps)?"h-20 mb-8":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[m(L,{type:"warning",class:"flex justify-between items-center border border-dashed"},{default:f(()=>[r("div",jt,[e[0]||(e[0]=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1)),r("span",null,x(o.isEditting?"Please save your changes":"Create your workflow"),1)]),r("div",Ht,[m(I,{action:n.workflowState.reset,type:"light",size:"xs"},{default:f(()=>e[1]||(e[1]=[r("span",{class:"ml-1"},"Undo",-1)])),_:1},8,["action"]),m(N,{action:o.submit,loading:o.isSubmitting,type:"dark"},{default:f(()=>[r("span",null,x(o.isEditting?"Save Changes":"Create"),1)]),_:1},8,["action","loading"])])]),_:1})],2),m(u),m(J),m(K),m(Q),o.isLoadingWorkflow?S("",!0):(l(),k($,{key:0})),!o.workflowFormHasName&&(o.hasUnsavedWorkflowSteps||o.hasUncreatedWorkflowSteps)?(l(),k(L,{key:1,type:"warning",class:"flex justify-between items-center mb-4"},{default:f(()=>e[2]||(e[2]=[r("div",{class:"flex items-center space-x-2"},[r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})]),r("span",null,"Give your workflow a name")],-1)])),_:1})):S("",!0),m(N,{action:o.submit,disabled:o.isSubmitting||!(o.workflowFormHasName&&(o.mustSaveChanges||o.mustCreate||o.hasUnsavedWorkflowSteps||o.hasUncreatedWorkflowSteps)),type:"dark",class:"w-full"},{default:f(()=>[r("span",null,x(o.isEditting||o.hasUnsavedWorkflowSteps?"Save Changes":"Create"),1)]),_:1},8,["action","disabled"]),r("div",null,[m(ee,{class:"mt-16"})])])])}const To=v(Lt,[["render",Ot]]);export{To as default};
