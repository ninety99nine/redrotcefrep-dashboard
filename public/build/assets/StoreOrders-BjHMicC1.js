import{F as V}from"./FormMixin-CULzALzX.js";import{U as L}from"./UtilsMixin-CBwmyCNB.js";import{u as M}from"./store-store-D6KBR7nZ.js";import{T as W}from"./TextHeader-DSSmQ7LM.js";import{A as F}from"./AddButton-CsMQc9aT.js";import{B as R}from"./BasicTable-CB82VRf8.js";import{C as H}from"./Checkbox-C0FUqY2q.js";import{O as U,a as z}from"./OrderPaymentStatus-Dh-hk5Vb.js";import{C as G}from"./ConfirmModal-BGWNF6pf.js";import{S as j}from"./SpinningLoader-BEnaF0ac.js";import{P as Y}from"./PrimaryButton-H3KL-bqb.js";import{M as q}from"./MoreInfoPopover-DUIgEZ-J.js";import{g as J,d as K}from"./api-repository-bdlVH5Lr.js";import{T as Q}from"./ToogleSwitch-DXorOTdd.js";import{N as X}from"./NoDataPlaceholder-DUt2_bbH.js";import{O as Z}from"./OrderCollectionStatus-p3GUWBnq.js";import{c as a,b as e,d as i,w as c,F as b,f as m,e as _,r as p,o as n,h as u,k as v,t as d,m as w,n as $}from"./app-BoGXsv54.js";import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./form-store-CuTEKvPg.js";import"./cloneDeep-BSUglKOW.js";import"./SearchInput-oKDF-Tqv.js";import"./index-D19FfSVG.js";import"./TextInput-CYwxZsJZ.js";import"./InputErrorMessage-BzaNbvNM.js";import"./BadgeIndicator-DlVYZEkg.js";const te={mixins:[V,L],components:{TextHeader:W,AddButton:F,BasicTable:R,Checkbox:H,OrderStatus:U,ConfirmModal:G,SpinningLoader:j,PrimaryButton:Y,MoreInfoPopover:q,ToogleSwitch:Q,OrderPaymentStatus:z,NoDataPlaceholder:X,OrderCollectionStatus:Z},data(){return{orders:[],pagination:null,searchTerm:null,checkedRowIds:[],showEverything:!1,deletableOrder:null,isDeletingOrderIds:[],isLoadingOrders:!1,storeState:M()}},computed:{store(){return this.storeState.store},tableHeaders(){return this.showEverything?["","Name","Customer","Summary","status","Payment Status","Collection Status","Grand Total","Paid","Pending","Outstanding","Special Note","Created Date",""]:["","Name","Customer","Summary","status","Grand Total","Created Date",""]},hasSearchTerm(){return this.searchTerm!=null&&this.searchTerm.trim()!=""}},methods:{onView(o){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:o._links.showOrder}}).then(()=>{window.scrollTo(0,0)})},showDeleteConfirmationModal(o){this.deletableOrder=o,this.$nextTick(()=>{this.$refs.confirmDeleteButton.$el.click()})},isDeleting(o){return this.isDeletingOrderIds.findIndex(t=>t==o.id)!=-1},onAddOrder(){this.$router.push({name:"create-store-order",params:{store_href:this.store._links.showStore}})},paginate(o){this.getOrders(o)},search(o){this.searchTerm=o,this.getOrders()},getOrders(o=null){this.isLoadingOrders=!0;const t={association:"teamMember",_relationships:"cart"};this.hasSearchTerm&&(t.search=this.searchTerm),o=o??this.store._links.showStoreOrders,J(o,t).then(g=>{g.status==200&&(this.pagination=g.data,this.orders=this.pagination.data,this.checkedRowIds=this.orders.map(O=>!1)),this.isLoadingOrders=!1}).catch(g=>{this.isLoadingOrders=!1,this.setServerFormErrors(g)})},deleteOrder(){this.isDeletingOrderIds.push(this.deletableOrder.id),K(this.deletableOrder._links.deleteOrder).then(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(t=>t==this.deletableOrder.id,1)),o.status==200&&(o.data.deleted?(this.showSuccessfulNotification("Order deleted"),this.isDeletingOrderIds.length==0&&this.getOrders()):(this.setFormError("general",o.data.message),this.showUnsuccessfulNotification(o.data.message)))}).catch(o=>{this.isDeletingOrderIds.splice(this.isDeletingOrderIds.findIndex(t=>t==this.deletableOrder.id,1)),this.setServerFormErrors(o)})}},mounted(){},created(){this.getOrders()}},se={class:"flex justify-between items-center border-dashed py-6"},oe={class:"flex items-center"},re=["onClick"],ne={class:"whitespace-nowrap px-4 py-4"},ae={class:"flex space-x-1 items-center"},ie={class:"px-4 py-4"},le={class:"w-40"},de={class:"px-4 py-4"},pe={class:"w-60"},ce={class:"whitespace-nowrap px-4 py-4"},me={key:0,class:"whitespace-nowrap px-4 py-4"},ue={key:1,class:"whitespace-nowrap px-4 py-4"},he={class:"whitespace-nowrap px-4 py-4"},ge={class:"flex space-x-1 items-center"},ye={class:"font-bold"},fe={class:"text-black"},_e={class:"text-black"},we={class:"text-black"},be={class:"text-black"},xe={class:"font-bold"},ve={key:2,class:"whitespace-nowrap px-4 py-4"},Oe={class:"flex space-x-1 items-center"},ke={key:3,class:"whitespace-nowrap px-4 py-4"},Se={class:"flex space-x-1 items-center"},Ce={key:4,class:"whitespace-nowrap px-4 py-4"},Te={class:"flex space-x-1 items-center"},De={key:5,class:"whitespace-nowrap px-4 py-4"},Pe={class:"flex space-x-1 items-center"},Ie={key:1},Be={class:"whitespace-nowrap px-4 py-4"},Ae={class:"flex space-x-1 items-center"},Ne={class:"px-4 py-4 flex items-center space-x-4"},Ee=["onClick"],Ve=["onClick"],Le={key:1,class:"flex justify-between space-x-20 bg-white shadow-lg rounded-lg border p-20"},Me={class:"space-y-4"},We={class:"mb-8"},Fe={class:"font-bold text-black"};function Re(o,t,g,O,r,l){const k=p("TextHeader"),h=p("MoreInfoPopover"),S=p("ToogleSwitch"),x=p("AddButton"),C=p("Checkbox"),T=p("OrderStatus"),D=p("OrderPaymentStatus"),P=p("OrderCollectionStatus"),I=p("NoDataPlaceholder"),B=p("SpinningLoader"),A=p("BasicTable"),N=p("PrimaryButton"),E=p("ConfirmModal");return n(),a("div",null,[e("div",se,[e("div",oe,[i(k,null,{default:c(()=>t[2]||(t[2]=[e("span",{class:"mr-2"},"ðŸŽ",-1),u(" Orders")])),_:1}),i(h,{class:"ml-2 mt-1",title:"What Is This?",description:"Orders are requests placed by customers to purchase products or services from your store.",placement:"top"})]),(r.pagination??{}).total>0?(n(),a(b,{key:0},[i(S,{modelValue:r.showEverything,"onUpdate:modelValue":t[0]||(t[0]=s=>r.showEverything=s),size:"md",labelPopoverTitle:"What Is This?",labelPopoverDescription:"Turn on if you want to show more information about your orders"},{default:c(()=>t[3]||(t[3]=[u(" Show Everything ")])),_:1},8,["modelValue"]),i(x,{action:l.onAddOrder,class:"w-40"},{default:c(()=>t[4]||(t[4]=[e("span",{class:"ml-2"},"Add Order",-1)])),_:1},8,["action"])],64)):m("",!0)]),r.isLoadingOrders||(r.pagination??{}).total>0||l.hasSearchTerm?(n(),_(A,{key:0,pagination:r.pagination,isLoading:r.isLoadingOrders,onPaginate:l.paginate,onSearch:l.search,onRefresh:l.getOrders,totalHeaders:l.tableHeaders.length},{head:c(()=>[e("tr",null,[(n(!0),a(b,null,v(l.tableHeaders,(s,y)=>(n(),a("th",{key:y,scope:"col",class:"whitespace-nowrap px-4 py-3"},d(s),1))),128))])]),body:c(()=>[(n(!0),a(b,null,v(r.orders,(s,y)=>(n(),a("tr",{onClick:w(f=>l.onView(s),["stop"]),key:s.id,class:$(["group cursor-pointer border-b",r.checkedRowIds[y]?"bg-blue-100":"bg-white hover:bg-gray-50"])},[e("td",{onClick:t[1]||(t[1]=w(()=>{},["stop"])),class:"whitespace-nowrap pl-4"},[i(C,{size:"xs",modelValue:r.checkedRowIds[y],"onUpdate:modelValue":f=>r.checkedRowIds[y]=f},null,8,["modelValue","onUpdate:modelValue"])]),e("td",ne,[e("div",ae,[e("span",null,"#"+d(s._attributes.number),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:"#"+s._attributes.number,description:s.summary,placement:"top"},null,8,["title","description"])])]),e("td",ie,[e("div",le,[e("span",null,d(s._attributes.customerDisplayName),1)])]),e("td",de,[e("div",pe,[e("span",null,d(s.summary),1)])]),e("td",ce,[i(T,{order:s,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])]),r.showEverything?(n(),a("td",me,[i(D,{order:s,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):m("",!0),r.showEverything?(n(),a("td",ue,[i(P,{order:s,moreInfoPopoverClasses:"opacity-0 group-hover:opacity-100"},null,8,["order"])])):m("",!0),e("td",he,[e("div",ge,[e("span",ye,d(s.grandTotal.amountWithCurrency),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:"Cost Breakdown",placement:"top"},{description:c(()=>[t[9]||(t[9]=e("hr",null,null,-1)),e("p",null,[t[5]||(t[5]=u("Subtotal: ")),e("span",fe,d(s._relationships.cart.subTotal.amountWithCurrency),1)]),e("p",null,[t[6]||(t[6]=u("Sale Discount: ")),e("span",_e,d(s._relationships.cart.saleDiscountTotal.amountWithCurrency),1)]),e("p",null,[t[7]||(t[7]=u("Coupon Discount: ")),e("span",we,d(s._relationships.cart.couponDiscountTotal.amountWithCurrency),1)]),t[10]||(t[10]=e("hr",null,null,-1)),e("p",be,[t[8]||(t[8]=u("Grand Total: ")),e("span",xe,d(s.grandTotal.amountWithCurrency),1)])]),_:2},1024)])]),r.showEverything?(n(),a("td",ve,[e("div",Oe,[e("span",null,d(s.paidTotal.amountWithCurrency),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:"Paid: "+s.paidPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),r.showEverything?(n(),a("td",ke,[e("div",Se,[e("span",null,d(s.pendingTotal.amountWithCurrency),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:"Pending: "+s.pendingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),r.showEverything?(n(),a("td",Ce,[e("div",Te,[e("span",null,d(s.outstandingTotal.amountWithCurrency),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:"Outstanding: "+s.outstandingPercentage.valueSymbol,placement:"top"},null,8,["title"])])])):m("",!0),r.showEverything?(n(),a("td",De,[e("div",Pe,[s.specialNote?(n(),_(I,{key:0})):(n(),a("span",Ie,d(s.specialNote),1))])])):m("",!0),e("td",Be,[e("div",Ae,[e("span",null,d(o.formattedDatetime(s.createdAt)),1),i(h,{class:"opacity-0 group-hover:opacity-100",title:o.formattedRelativeDate(s.createdAt),placement:"top"},null,8,["title"])])]),e("td",Ne,[l.isDeleting(s)?m("",!0):(n(),a("a",{key:0,href:"#",onClick:w(f=>l.onView(s),["stop","prevent"]),class:"font-medium text-blue-600 dark:text-blue-500 hover:underline"},"View",8,Ee)),l.isDeleting(s)?(n(),_(B,{key:1,type:"danger"},{default:c(()=>t[11]||(t[11]=[e("span",{class:"text-xs ml-2"},"Deleting...",-1)])),_:1})):(n(),a("a",{key:2,href:"#",onClick:w(f=>l.showDeleteConfirmationModal(s),["stop","prevent"]),class:"font-medium text-red-600 dark:text-red-500 hover:underline"},"Delete",8,Ve))])],10,re))),128))]),_:1},8,["pagination","isLoading","onPaginate","onSearch","onRefresh","totalHeaders"])):(n(),a("div",Le,[e("div",Me,[t[13]||(t[13]=e("h1",{class:"text-2xl font-bold"},"Ready For Your First Sale?",-1)),t[14]||(t[14]=e("p",null,"Your orders will appear here once customers start shopping. Start promoting your store to attract buyers and generate sales. Promote your store on as many platforms as possible.",-1)),i(x,{action:l.onAddOrder,class:"w-40",size:"sm"},{default:c(()=>t[12]||(t[12]=[e("span",{class:"ml-2"},"Add Order",-1)])),_:1},8,["action"])]),t[15]||(t[15]=e("div",null,[e("span",{class:"text-8xl"},"ðŸŽ")],-1))])),r.deletableOrder?(n(),_(E,{key:2,approveText:"Delete Order",approveAction:l.deleteOrder,isLoading:l.isDeleting(r.deletableOrder)},{content:c(()=>[t[18]||(t[18]=e("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1)),e("p",We,[t[16]||(t[16]=u("Are you sure you want to permanently delete ")),e("span",Fe,d(r.deletableOrder.name),1),t[17]||(t[17]=u("?"))])]),trigger:c(s=>[i(N,{ref:"confirmDeleteButton",action:s.showModal,class:"hidden",type:"danger"},{default:c(()=>t[19]||(t[19]=[u(" Delete Order ")])),_:2},1032,["action"])]),_:1},8,["approveAction","isLoading"])):m("",!0)])}const mt=ee(te,[["render",Re]]);export{mt as default};
