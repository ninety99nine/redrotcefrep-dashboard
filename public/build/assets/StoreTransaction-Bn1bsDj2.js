import{c as C,i as G}from"./cloneDeep-BPaXu_lB.js";import{p as J,o as e,g as m,w as c,c as a,h as p,k as A,r as l,C as K,d as t,n as E,e as s,t as u,F as g,u as Q,s as X,i as y}from"./app--JSNtfaf.js";import{A as Y}from"./Alert-Dne4Vx9o.js";import{F as $}from"./FormMixin-qdO1rjuz.js";import{U as tt}from"./SpiningLoader-J1-nNIfa.js";import{u as M}from"./store-store-CBrBaDw4.js";import{T as et}from"./TextHeader-JUklgYF2.js";import{B as st}from"./BackButton-DgHn2ub0.js";import{P as x}from"./PrimaryButton-DMrsQBv9.js";import{_ as k}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as nt}from"./Countdown-CEJ_LQdZ.js";import{E as ot}from"./ExternalLink-BNca-cS4.js";import{C as at}from"./ConfirmModal-C68Ri80B.js";import{S as L,L as S}from"./LineSkeleton-BzppLtmW.js";import{R as F}from"./RoundSkeleton-BYQU84xX.js";import{B as it}from"./ButtonSkeleton-BMmLe9SD.js";import{M as D}from"./MoreInfoPopover-DQ5pfucY.js";import{B as I}from"./BadgeIndicator-C4cD2V52.js";import{g as j,p as rt,d as ct}from"./api-repository-4oAXcOw5.js";import{T as lt}from"./TransactionPaymentStatus-88gO3dgb.js";import"./StatusDot-JJuyzbj2.js";const dt={components:{PrimaryButton:x},props:{action:{type:Function},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"base",options:["xs","sm","base","lg"]},type:{type:String,default:"dark",options:["dark","success","light","primary","warning","danger"]},content:{type:String,default:""}},data(){return{showText:!1,copyTimeout:null}},methods:{copyToClipboard(){this.showText=!0,this.copyTimeout==null&&clearInterval(this.copyTimeout),this.copyTimeout=setTimeout(()=>{this.showText=!1,clearInterval(this.copyTimeout)},1e3),this.action&&this.action()}}},ht={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},mt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"},null,-1),ut=[mt],pt={key:1};function _t(n,h,d,v,i,o){const f=l("PrimaryButton"),r=K("clipboard");return J((e(),m(f,{action:o.copyToClipboard,disabled:d.disabled,loading:d.loading,size:d.size,type:d.type},{default:c(()=>[i.showText?p("",!0):(e(),a("svg",ht,ut)),i.showText?(e(),a("span",pt,"Copied!")):A(n.$slots,"default",{key:2})]),_:3},8,["action","disabled","loading","size","type"])),[[r,d.content]])}const ft=k(dt,[["render",_t]]),wt={components:{PrimaryButton:x},props:{action:{type:Function},disabled:{type:Boolean,default:!1},loading:{type:Boolean,default:!1},size:{type:String,default:"base",options:["xs","sm","base","lg"]},type:{type:String,default:"light",options:["dark","success","light","primary","warning","danger"]}},computed:{iconClass(){let n=["leading-none -mt-1"];return this.size=="base"||this.size=="lg"?n.push("w-6 h-6 mt-0.5"):(this.size=="sm",n.push("w-4 h-4 mt-0.5")),n}}},yt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M17.25 8.25 21 12m0 0-3.75 3.75M21 12H3"},null,-1),gt=[yt];function kt(n,h,d,v,i,o){const f=l("PrimaryButton");return e(),m(f,{action:d.action,disabled:d.disabled,loading:d.loading,size:d.size,type:d.type},{default:c(()=>[A(n.$slots,"default"),(e(),a("svg",{class:E(o.iconClass),xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},gt,2))]),_:3},8,["action","disabled","loading","size","type"])}const vt=k(wt,[["render",kt]]),xt={components:{ShineEffect:L,LineSkeleton:S,PrimaryButton:x,RoundSkeleton:F},props:{transaction:{type:Object},isLoadingTransaction:{type:Boolean}},data(){return{storeState:M()}},computed:{store(){return this.storeState.store},owner(){return((this.transaction||{})._relationships||{}).owner||null},transactionForOrder(){return((this.transaction||{}).ownerType||"").toLowerCase()=="order"},transactionForPricingPlan(){return((this.transaction||{}).ownerType||"").toLowerCase()=="pricing plan"}},methods:{onViewOrder(){this.$router.push({name:"show-store-order",params:{store_href:this.store._links.showStore,order_href:this.owner._links.showOrder}}).then(()=>{window.scrollTo(0,0)})}}},Tt={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4"},bt={class:"flex items-center space-x-2"},Ct={key:1,class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},Lt={key:0,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},St=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m21 7.5-9-5.25L3 7.5m18 0-9 5.25m9-5.25v9l-9 5.25M3 7.5l9 5.25M3 7.5v9l9 5.25m0-9v9"},null,-1),Bt=[St],Pt={key:1,class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Mt=t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 10.5V6a3.75 3.75 0 1 0-7.5 0v4.5m11.356-1.993 1.263 12c.07.665-.45 1.243-1.119 1.243H4.25a1.125 1.125 0 0 1-1.12-1.243l1.264-12A1.125 1.125 0 0 1 5.513 7.5h12.974c.576 0 1.059.435 1.119 1.007ZM8.625 10.5a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm7.5 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"},null,-1),Vt=[Mt],jt={key:3,class:"font-bold text-lg"},At={key:4,class:"font-bold text-lg"},Et={key:5,class:"font-bold text-lg"},Ft={key:0,class:"text-xs"},Dt={key:1,class:"flex justify-end"},It=t("span",null,"View Order",-1);function zt(n,h,d,v,i,o){const f=l("RoundSkeleton"),r=l("ShineEffect"),_=l("LineSkeleton"),T=l("PrimaryButton");return e(),a("div",Tt,[t("div",bt,[d.isLoadingTransaction?(e(),m(r,{key:0},{default:c(()=>[s(f,{size:"w-6 h-6"})]),_:1})):(e(),a("div",Ct,[o.transactionForOrder?(e(),a("svg",Lt,Bt)):(e(),a("svg",Pt,Vt))])),d.isLoadingTransaction?(e(),m(r,{key:2},{default:c(()=>[s(_,{width:"w-32"})]),_:1})):o.transactionForOrder?(e(),a("span",jt,"Order #"+u(o.owner._attributes.number),1)):o.transactionForPricingPlan?(e(),a("span",At,u(o.owner.name),1)):(e(),a("span",Et,"..."))]),o.transactionForPricingPlan?(e(),a("span",Ft,u(o.owner.description),1)):p("",!0),o.transactionForOrder?(e(),a("div",Dt,[s(T,{size:"xs",type:"primary",iconClass:"w-4 h-4",onClick:h[0]||(h[0]=w=>o.onViewOrder())},{default:c(()=>[It]),_:1})])):p("",!0)])}const Ht=k(xt,[["render",zt]]),Nt={components:{ShineEffect:L,LineSkeleton:S,PrimaryButton:x},props:{transaction:{type:Object},isLoadingTransaction:{type:Boolean}},data(){return{storeState:M()}},computed:{store(){return this.storeState.store},hasCustomer(){return this.transaction._relationships.customer!=null},customer(){return this.transaction._relationships.customer}},methods:{onViewCustomer(){this.$router.push({name:"show-store-customer",params:{store_href:this.store._links.showStore,customer_href:this.customer._links.showCustomer}}).then(()=>{window.scrollTo(0,0)})}}},Rt={class:"bg-white shadow-lg rounded-lg border space-y-3 p-4"},Ot={class:"flex items-center space-x-2"},Ut=t("div",{class:"p-1.5 bg-gray-100 rounded-full border border-gray-200"},[t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})])],-1),Zt={key:1,class:"font-bold"},qt={key:2,class:"font-bold text-lg"},Wt={class:"space-y-2"},Gt={key:0,class:"flex items-center space-x-2 text-sm"},Jt=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 6.75c0 8.284 6.716 15 15 15h2.25a2.25 2.25 0 0 0 2.25-2.25v-1.372c0-.516-.351-.966-.852-1.091l-4.423-1.106c-.44-.11-.902.055-1.173.417l-.97 1.293c-.282.376-.769.542-1.21.38a12.035 12.035 0 0 1-7.143-7.143c-.162-.441.004-.928.38-1.21l1.293-.97c.363-.271.527-.734.417-1.173L6.963 3.102a1.125 1.125 0 0 0-1.091-.852H4.5A2.25 2.25 0 0 0 2.25 4.5v2.25Z"})],-1),Kt={key:1,class:"font-bold"},Qt={key:1,class:"flex items-center space-x-2 text-sm"},Xt=t("svg",{class:"w-4 h-4 text-gray-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"})],-1),Yt={key:1,class:"font-bold"},$t={key:1,class:"text-xs"},te={key:0,class:"flex justify-end"},ee=t("span",null,"View Customer",-1);function se(n,h,d,v,i,o){const f=l("LineSkeleton"),r=l("ShineEffect"),_=l("PrimaryButton");return e(),a("div",Rt,[t("div",Ot,[Ut,d.isLoadingTransaction?(e(),m(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):o.hasCustomer?(e(),a("span",Zt,u(o.customer._attributes.name),1)):(e(),a("span",qt,"Customer"))]),t("div",Wt,[d.isLoadingTransaction||o.customer.mobileNumber||o.customer.email?(e(),a(g,{key:0},[d.isLoadingTransaction||o.customer.mobileNumber?(e(),a("div",Gt,[Jt,d.isLoadingTransaction?(e(),m(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):(e(),a("span",Kt,u(o.customer.mobileNumber.national),1))])):p("",!0),d.isLoadingTransaction||o.customer.email?(e(),a("div",Qt,[Xt,d.isLoadingTransaction?(e(),m(r,{key:0},{default:c(()=>[s(f,{width:"w-32"})]),_:1})):(e(),a("span",Yt,u(o.customer.email),1))])):p("",!0)],64)):(e(),a("span",$t,"No information"))]),!d.isLoadingTransaction&&o.hasCustomer?(e(),a("div",te,[s(_,{size:"xs",type:"primary",iconClass:"w-4 h-4",onClick:h[0]||(h[0]=T=>o.onViewCustomer())},{default:c(()=>[ee]),_:1})])):p("",!0)])}const ne=k(Nt,[["render",se]]),oe={components:{ShineEffect:L,LineSkeleton:S,MoreInfoPopover:D,BadgeIndicator:I},props:{transaction:{type:Object}}},ae={class:"flex space-x-1 items-center"};function ie(n,h,d,v,i,o){const f=l("BadgeIndicator"),r=l("MoreInfoPopover");return e(),a("div",ae,[s(f,{type:"danger",text:d.transaction.failureType,showDot:!1},null,8,["text"]),s(r,{description:d.transaction.failureReason,placement:"top"},null,8,["description"])])}const re=k(oe,[["render",ie]]),ce={mixins:[tt,$],components:{Alert:Y,TextHeader:et,BackButton:st,CopyButton:ft,Countdown:nt,ExternalLink:ot,ConfirmModal:at,ShineEffect:L,LineSkeleton:S,PrimaryButton:x,ProceedButton:vt,RoundSkeleton:F,ButtonSkeleton:it,MoreInfoPopover:D,BadgeIndicator:I,TransactionOwner:Ht,TransactionFailureType:re,TransactionCustomer:ne,TransactionPaymentStatus:lt},data(){return{form:{paymentMethodId:null,description:null,amount:null},transaction:null,isDeleting:!1,isSubmitting:!1,apiState:Q(),appName:X.appName,storeState:M(),isRenewingPaymentLink:!1}},watch:{"$route.params.transaction_href"(n,h){window.scrollTo(0,0),this.getTransaction()}},computed:{store(){return this.storeState.store},isPaid(){return((this.transaction||{})._attributes||{}).isPaid},isPendingPayment(){return((this.transaction||{})._attributes||{}).isPendingPayment},hasCustomer(){return this.customer!=null},hasTransaction(){return this.transaction!=null},customer(){return((this.transaction||{})._relationships||{}).customer},paymentMethod(){return((this.transaction||{})._relationships||{}).paymentMethod||null},requestedByUser(){return((this.transaction||{})._relationships||{}).requestedByUser||null},manuallyVerifiedByUser(){return((this.transaction||{})._relationships||{}).manuallyVerifiedByUser||null},isCreating(){return this.$route.name==="create-store-transaction"},isEditting(){return this.$route.name==="show-store-transaction"},formHasChanged(){var n=C(this.form),h=C(this.originalForm);return!G(n,h)},mustSaveChanges(){return this.isEditting&&this.formHasChanged&&!this.isLoadingTransaction&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.formHasChanged&&!this.isLoadingTransaction&&!this.isSubmitting}},methods:{goBack(){this.$router.replace({name:"show-store-transactions",params:{store_href:this.store._links.showStore}})},openPaymentLinkInNewTab(){window.open(this.transaction.metadata.dpoPaymentUrl,"_blank")},getTransaction(){this.isLoadingTransaction=!0;const n={_relationships:"customer,requestedByUser,manuallyVerifiedByUser,paymentMethod,owner"};j(this.$route.params.transaction_href,n).then(h=>{h.status==200&&(this.transaction=h.data.transaction),this.isLoadingTransaction=!1}).catch(h=>{this.isLoadingTransaction=!1,this.setServerFormErrors(h)})},renewTransactionPaymentLink(){this.isRenewingPaymentLink=!0,rt(this.transaction._links.renewTransactionPaymentLink).then(n=>{n.status==200&&(this.showSuccessfulNotification("Transaction renewed"),this.getTransaction()),this.isRenewingPaymentLink=!1}).catch(n=>{this.isRenewingPaymentLink=!1,this.setServerFormErrors(n)})},updateTransaction(){this.isSubmitting=!0;const n={};j(this.transaction._links.updateTransaction,n).then(h=>{h.status==200&&(this.originalForm=C(this.form),this.showSuccessfulNotification("Transaction updated")),this.isSubmitting=!1}).catch(h=>{this.isSubmitting=!1,this.setServerFormErrors(h)})},deleteTransaction(){this.isDeleting=!0,ct(this.transaction._links.deleteTransaction).then(n=>{n.status==200&&(n.data.deleted?(this.showSuccessfulNotification("Transaction deleted"),this.$router.push({name:"show-store-transactions",params:{store_href:this.store._links.showStore}}),window.scrollTo(0,0)):this.showUnsuccessfulNotification(n.data.message)),this.isDeleting=!1}).catch(n=>{this.isDeleting=!1,this.setServerFormErrors(n)})}},created(){this.originalForm=C(this.form),this.isEditting&&this.getTransaction()}},le={class:"flex justify-between items-center border-dashed py-6"},de={class:"flex justify-start"},he={key:0,class:"flex items-center space-x-2"},me=t("span",{class:"text-2xl font-bold tracking-tight text-gray-300 animate-pulse"},"Transaction #",-1),ue={key:1,class:"flex items-center"},pe={key:0,class:"flex space-x-1 items-center"},_e=t("span",null,"Created:",-1),fe={class:"font-bold"},we={class:"relative",action:"#",method:"POST"},ye={class:"flex items-center space-x-2"},ge=t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),ke={class:"grid grid-cols-12 gap-4 mb-8"},ve={class:"col-span-8"},xe={class:"bg-white shadow-lg rounded-lg border space-y-4 p-4 mb-4"},Te={class:"flex items-center space-x-8"},be={class:"flex items-center space-x-2"},Ce=t("span",{class:"text-xs"},"Status:",-1),Le={key:1,class:"flex items-center space-x-2"},Se=t("span",{class:"text-xs"},"Payment Method:",-1),Be={key:1,class:"flex space-x-1 items-center"},Pe={class:"text-xs font-bold"},Me={class:"w-full space-y-2"},Ve={key:1},je={key:0,class:"flex items-center space-x-2 border-b border-dashed pb-4 mb-4"},Ae=t("span",{class:"text-xs"},"Payment Method:",-1),Ee={class:"flex space-x-1 items-center"},Fe={class:"text-xs font-bold"},De={class:"flex items-center space-x-2 text-sm"},Ie=t("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 6v12m-3-2.818.879.659c1.171.879 3.07.879 4.242 0 1.172-.879 1.172-2.303 0-3.182C13.536 12.219 12.768 12 12 12c-.725 0-1.45-.22-2.003-.659-1.106-.879-1.106-2.303 0-3.182s2.9-.879 4.006 0l.415.33M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})],-1),ze={class:"flex items-center bg-white shadow-lg rounded-lg border space-y-4 p-4 mb-4"},He={class:"w-full space-y-4"},Ne={class:"flex items-end space-x-2"},Re={class:"text-4xl font-bold"},Oe={key:0,class:"text-2xl text-gray-400"},Ue={key:0,class:"flex items-center space-x-2 text-sm"},Ze=t("span",{class:"whitespace-nowrap"},"Date Paid: ",-1),qe={class:"flex items-center space-x-2"},We={class:"font-bold"},Ge={key:1,class:"flex items-center justify-between"},Je={key:1,class:"flex items-center space-x-2"},Ke=t("span",null,"Payment Link Expires In: ",-1),Qe=t("svg",{class:"w-4 h-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"})],-1),Xe=t("span",{class:"ml-1"},"Copy Payment Link",-1),Ye=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),$e=t("span",null,"Pay Now",-1),ts={key:1,class:"flex space-x-2"},es=t("span",{class:"ml-1"},"Copy Payment Link",-1),ss=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z"})],-1),ns=t("span",null,"Pay Now",-1),os={key:2,class:"flex justify-end"},as=t("svg",{class:"w-4 h-4 mr-2",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})],-1),is=t("span",null,"Renew Payment Link",-1),rs={key:0,class:"border rounded-full bg-gray-50"},cs=t("svg",{class:"w-20 h-20 text-green-500",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor"},[t("path",{"fill-rule":"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z","clip-rule":"evenodd"})],-1),ls=[cs],ds={class:"col-span-4 space-y-4"},hs={class:"flex flex-col justify-between bg-white shadow-lg rounded-lg border space-y-2 p-4"},ms={class:"flex items-center space-x-2 text-sm"},us=t("span",{class:"whitespace-nowrap"},"Requester: ",-1),ps={class:"font-bold"},_s={class:"flex items-center space-x-2 text-sm"},fs=t("span",{class:"whitespace-nowrap"},"Verifyer: ",-1),ws={key:0,class:"font-bold"},ys={key:1,class:"font-bold"},gs={class:"flex items-center space-x-2 text-sm"},ks=t("span",{class:"whitespace-nowrap"},"Verification Method: ",-1),vs={class:"flex items-center whitespace-pre"},xs=t("span",null,"Do you want to permanently delete",-1),Ts={key:1,class:"font-bold text-black"},bs=t("span",null,"? Once this transaction is deleted you will not be able to recover it.",-1),Cs={class:"flex justify-end"},Ls=t("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),Ss={class:"mb-8"},Bs={class:"font-bold text-black"};function Ps(n,h,d,v,i,o){const f=l("BackButton"),r=l("LineSkeleton"),_=l("ShineEffect"),T=l("TextHeader"),w=l("MoreInfoPopover"),b=l("PrimaryButton"),V=l("Alert"),z=l("TransactionPaymentStatus"),H=l("TransactionFailureType"),N=l("RoundSkeleton"),R=l("Countdown"),B=l("ButtonSkeleton"),O=l("CopyButton"),U=l("TransactionOwner"),Z=l("TransactionCustomer"),q=l("BadgeIndicator"),W=l("ConfirmModal");return e(),a("div",null,[t("div",le,[t("div",de,[s(f,{class:"w-16 mr-4",action:o.goBack},null,8,["action"]),n.isLoadingTransaction?(e(),a("div",he,[me,s(_,{class:"flex space-x-2"},{default:c(()=>[s(r,{width:"w-12 mt-2"}),s(r,{width:"w-4 mt-2"})]),_:1})])):(e(),a("div",ue,[s(T,null,{default:c(()=>[y(u(o.isCreating?"Add Transaction":"Transaction #"+i.transaction._attributes.number),1)]),_:1}),s(w,{class:"ml-2 mt-1",title:"What Is This?",description:"Transactions are detailed records of payments made by customers for purchasing products or services from your store.",placement:"top"})]))]),o.isEditting?(e(),a("div",pe,[n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-32"}),s(r,{width:"w-4"})]),_:1})):(e(),a(g,{key:1},[_e,t("span",fe,u(n.formattedDatetime(i.transaction.createdAt)),1),s(w,{title:n.formattedRelativeDate(i.transaction.createdAt),placement:"top"},null,8,["title"])],64))])):p("",!0)]),t("form",we,[o.mustCreate||o.mustSaveChanges?(e(),m(V,{key:0,type:"warning",class:"flex justify-between items-center mb-2"},{default:c(()=>[t("div",ye,[ge,t("span",null,u(o.isCreating?"Create your transaction":"Please save your changes"),1)]),s(b,{action:o.isCreating?n.createTransaction:o.updateTransaction,loading:i.isSubmitting},{default:c(()=>[y(u(o.isCreating?"Create Transaction":"Save Changes"),1)]),_:1},8,["action","loading"])]),_:1})):p("",!0),t("div",ke,[t("div",ve,[n.getFormError("general")?(e(),m(V,{key:0,type:"warning",class:"shadow mb-4"},{default:c(()=>[y(u(n.getFormError("general")),1)]),_:1})):p("",!0),t("div",xe,[t("div",Te,[t("div",be,[Ce,n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-24"}),s(r,{width:"w-4"})]),_:1})):(e(),m(z,{key:1,transaction:i.transaction},null,8,["transaction"]))]),o.hasTransaction&&i.transaction.failureReason?(e(),m(H,{key:0,transaction:i.transaction},null,8,["transaction"])):p("",!0),n.isLoadingTransaction||!i.transaction.failureReason?(e(),a("div",Le,[Se,n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-24"}),s(r,{width:"w-4"})]),_:1})):(e(),a("div",Be,[t("span",Pe,u(o.paymentMethod.name),1),s(w,{title:"What Is This?",description:"This is the payment method used for this transaction",placement:"top"})]))])):p("",!0)]),t("div",null,[n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2 w-full"},{default:c(()=>[s(N,{size:"w-8 h-8 flex-shrink-0"}),t("div",Me,[s(r,{width:"w-2/3"}),s(r,{width:"w-1/3"})])]),_:1})):(e(),a("div",Ve,[i.transaction.failureReason?(e(),a("div",je,[Ae,t("div",Ee,[t("span",Fe,u(o.paymentMethod.name),1),s(w,{title:"What Is This?",description:"This is the payment method used for this transaction",placement:"top"})])])):p("",!0),t("div",De,[Ie,t("span",null,u(i.transaction.description),1)])]))])]),t("div",ze,[t("div",He,[t("div",Ne,[n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-40 h-8"}),s(r,{width:"w-12 h-6"})]),_:1})):(e(),a(g,{key:1},[t("span",Re,u(i.transaction.amount.amountWithCurrency),1),i.transaction.percentage.value!=100?(e(),a("span",Oe,"("+u(i.transaction.percentage.valueSymbol)+")",1)):p("",!0)],64))]),o.isPaid?(e(),a("div",Ue,[Ze,t("span",qe,[t("span",We,u(n.formattedDatetime(i.transaction.updatedAt)),1),s(w,{title:n.formattedRelativeDate(i.transaction.updatedAt),placement:"top"},null,8,["title"])])])):p("",!0),n.isLoadingTransaction||i.transaction.metadata&&i.transaction.metadata.canPayUsingDpo?(e(),a("div",Ge,[t("div",null,[n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-40"}),s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a("div",Je,[Ke,s(R,{showMoreInfoPopover:!1,time:i.transaction.metadata.dpoPaymentUrlExpiresAt,textClass:"text-yellow-500 font-bold underline decoration-dashed underline-offset-4"},null,8,["time"]),s(w,{title:"This is the time left before the payment link expires",placement:"top"})]))]),n.isLoadingTransaction||i.transaction.metadata.canPayUsingDpo?(e(),a(g,{key:0},[n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex space-x-2"},{default:c(()=>[s(B,{size:"sm"},{default:c(()=>[Qe,Xe]),_:1}),s(B,{size:"sm"},{default:c(()=>[Ye,$e]),_:1})]),_:1})):(e(),a("div",ts,[s(O,{type:"light",size:"sm",content:i.transaction.metadata.dpoPaymentUrl},{default:c(()=>[es]),_:1},8,["content"]),s(b,{onClick:h[0]||(h[0]=P=>o.openPaymentLinkInNewTab()),type:"primary",size:"sm"},{default:c(()=>[ss,ns]),_:1})]))],64)):p("",!0)])):i.transaction.metadata&&i.transaction.metadata.dpoPaymentLinkHasExpired?(e(),a("div",os,[s(b,{onClick:h[1]||(h[1]=P=>o.renewTransactionPaymentLink()),type:"primary",size:"sm",loading:i.isRenewingPaymentLink},{default:c(()=>[as,is]),_:1},8,["loading"])])):p("",!0)]),o.isPaid?(e(),a("span",rs,ls)):p("",!0)])]),t("div",ds,[s(U,{transaction:i.transaction,isLoadingTransaction:n.isLoadingTransaction},null,8,["transaction","isLoadingTransaction"]),s(Z,{transaction:i.transaction,isLoadingTransaction:n.isLoadingTransaction},null,8,["transaction","isLoadingTransaction"]),t("div",hs,[t("div",ms,[us,n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a(g,{key:1},[t("span",ps,u(o.requestedByUser._attributes.name),1),s(w,{title:"What Is This?",description:"This is the person that requested this transaction",placement:"top"})],64))]),t("div",_s,[fs,n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-32"}),s(r,{width:"w-4"})]),_:1})):(e(),a(g,{key:1},[o.manuallyVerifiedByUser?(e(),a("span",ws,u(o.manuallyVerifiedByUser._attributes.name),1)):(e(),a("span",ys,u(i.appName),1)),s(w,{title:"What Is This?",description:o.manuallyVerifiedByUser?"This is the person that verified this transaction":"This is the application that verified this transaction",placement:"top"},null,8,["description"])],64))]),t("div",gs,[ks,n.isLoadingTransaction?(e(),m(_,{key:0,class:"flex items-center space-x-2"},{default:c(()=>[s(r,{width:"w-20"}),s(r,{width:"w-4"})]),_:1})):(e(),a(g,{key:1},[s(q,{type:i.transaction.verificationType.toLowerCase()=="automatic"?"success":"info",text:i.transaction.verificationType,showDot:!1},null,8,["type","text"]),s(w,{title:"What Is This?",description:"This indicates whether the transaction was verified manually by a person or automatically by the application",placement:"top"})],64))])])])]),i.transaction?(e(),a("div",{key:1,class:E(["space-y-4 shadow-lg rounded-lg border p-4",n.isLoadingTransaction?"bg-gray-50":"border-red-300 bg-red-50"])},[t("div",vs,[xs,n.isLoadingTransaction?(e(),m(_,{key:0},{default:c(()=>[s(r,{width:"w-20 mx-2"})]),_:1})):(e(),a("span",Ts," Transaction #"+u(i.transaction._attributes.number),1)),bs]),t("div",Cs,[o.isEditting&&n.isLoadingTransaction?(e(),m(B,{key:0},{default:c(()=>[y("Delete Transaction")]),_:1})):(e(),m(W,{key:1,approveText:"Delete Order",approveAction:o.deleteTransaction,isLoading:i.isDeleting},{content:c(()=>[Ls,t("p",Ss,[y("Are you sure you want to permanently delete "),t("span",Bs,"Transaction #"+u(i.transaction._attributes.number),1),y("?")])]),trigger:c(P=>[s(b,{onClick:P.showModal,loading:i.isDeleting,type:"danger"},{default:c(()=>[y(" Delete Transaction ")]),_:2},1032,["onClick","loading"])]),_:1},8,["approveAction","isLoading"]))])],2)):p("",!0)])])}const Xs=k(ce,[["render",Ps]]);export{Xs as default};
