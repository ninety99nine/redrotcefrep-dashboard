import{c as W,i as oe,u as H}from"./store-store-53JUHgLt.js";import{A as D}from"./Alert-BLAvGLA1.js";import{F as x}from"./FormMixin-BgiMcnBc.js";import{r as i,o as l,e as h,w as c,c as w,F as v,k as C,t as _,b as r,d as m,n as T,s as re,u as E,f as S,p as j,h as y}from"./app-D0p-ECFe.js";import{T as P}from"./TextHeader-CVudhav3.js";import{B as se}from"./BackButton-B5qH5Uw5.js";import{U as O}from"./UndoButton-CM05noH2.js";import{u as p}from"./workflow-store-qAGM4904.js";import{S as le}from"./ShineEffect-D7TUGluv.js";import{P as M}from"./PrimaryButton-DL2Xx4v6.js";import{L as ie}from"./LineSkeleton-ChTjItNl.js";import{B as ae}from"./BackdropLoader-jrSawbVP.js";import{M as R}from"./MoreInfoPopover-D2BmJvwS.js";import{p as A,a as z,d as Z,g as q}from"./api-repository-eCe_KSr2.js";import{F as G}from"./FormErrorMessages-B7oH5rwJ.js";import{U as V}from"./UtilsMixin-CbFS-0FV.js";import{S as U}from"./SelectInput-C-r_ZwSE.js";import{_ as b}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{T as X}from"./TextInput-orDVtuFB.js";import{V as ne}from"./vue-draggable-next.esm-bundler-qixNCGAK.js";import{B as we}from"./BadgeIndicator-B_jFJj6c.js";import{S as me}from"./SpinningLoader-DgFsswht.js";import{B as de}from"./BulkMobileNumberInput-DGOPTDxX.js";import{T as ce}from"./TextareaInput-Bll2pSQy.js";import{E as fe}from"./EmailInput-Bp_SOVPs.js";import{C as B}from"./Checkbox-lFUvp63D.js";import{N as $}from"./NumberInput-B4Pyi29U.js";import{C as ue}from"./ConfirmModal-CX9rIo-N.js";import{T as pe}from"./ToogleSwitch-CRfGJER4.js";import"./form-store-DZR6yWnT.js";import"./InputLabel-Bc3dE3T1.js";import"./InputErrorMessage-COw24VzK.js";import"./StatusDot-CbLvKGu6.js";import"./AddButton---aM3aVC.js";import"./BasicModal-DQw5sCx9.js";import"./DeleteButton-OSNVRNSA.js";import"./MobileNumberInput-B1FbyHqf.js";const he={mixins:[x,V],components:{SelectInput:U},data(){return{workflowState:p()}},watch:{"workflowForm.resource"(e){e&&this.triggerGroups.length>0&&(this.workflowState.workflowForm.trigger=this.triggerGroups[0].options[0])}},computed:{workflowForm(){return this.workflowState.workflowForm},triggerGroups(){return this.workflowForm.resource=="order"?[{name:"Status",options:["waiting","cancelled","completed","on its way","ready for pickup"]},{name:"Payment status",options:["paid","unpaid","partially paid","pending payment"]}]:this.workflowForm.resource=="inventory"?[{name:"Stock levels",options:["low stock"]}]:[]}}},ke=["label"],ge=["value"];function Se(e,o,s,k,a,t){const d=i("SelectInput");return l(),h(d,{class:"w-60",modelValue:t.workflowForm.trigger,"onUpdate:modelValue":o[0]||(o[0]=n=>t.workflowForm.trigger=n),errorText:e.getFormError("trigger")},{default:c(()=>[(l(!0),w(v,null,C(t.triggerGroups,n=>(l(),w("optgroup",{key:n.name,label:n.name},[(l(!0),w(v,null,C(n.options,u=>(l(),w("option",{key:u,value:u},_(e.capitalize(u)),9,ge))),128))],8,ke))),128))]),_:1},8,["modelValue","errorText"])}const _e=b(he,[["render",Se]]),xe={mixins:[x,V],components:{SelectInput:U},data(){return{resources:["order","inventory"],workflowState:p()}},computed:{workflowForm(){return this.workflowState.workflowForm}}},be=["value"];function ve(e,o,s,k,a,t){const d=i("SelectInput");return l(),h(d,{class:"w-60",modelValue:t.workflowForm.resource,"onUpdate:modelValue":o[0]||(o[0]=n=>t.workflowForm.resource=n),errorText:e.getFormError("resource")},{default:c(()=>[(l(!0),w(v,null,C(a.resources,n=>(l(),w("option",{key:n,value:n},_(e.capitalize(n)),9,be))),128))]),_:1},8,["modelValue","errorText"])}const Fe=b(xe,[["render",ve]]),ye={mixins:[x,V],components:{TriggerSelectInput:_e,ResourceSelectInput:Fe}},We={class:"bg-gray-50 border rounded-lg shadow-sm p-4"},Te=r("div",{class:"flex items-center space-x-2 mb-4"},[r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.48 3.499a.562.562 0 0 1 1.04 0l2.125 5.111a.563.563 0 0 0 .475.345l5.518.442c.499.04.701.663.321.988l-4.204 3.602a.563.563 0 0 0-.182.557l1.285 5.385a.562.562 0 0 1-.84.61l-4.725-2.885a.562.562 0 0 0-.586 0L6.982 20.54a.562.562 0 0 1-.84-.61l1.285-5.386a.562.562 0 0 0-.182-.557l-4.204-3.602a.562.562 0 0 1 .321-.988l5.518-.442a.563.563 0 0 0 .475-.345L11.48 3.5Z"})]),r("h1",{class:"font-bold text-lg"},"When")],-1),Ce={class:"flex items-center space-x-4"},Ie=r("span",null,"is",-1);function Ee(e,o,s,k,a,t){const d=i("ResourceSelectInput"),n=i("TriggerSelectInput");return l(),w("div",We,[Te,r("div",Ce,[m(d),Ie,m(n)])])}const Ve=b(ye,[["render",Ee]]),Ue={mixins:[x],components:{TextInput:X},data(){return{workflowState:p()}},computed:{workflowForm(){return this.workflowState.workflowForm}}};function Ne(e,o,s,k,a,t){const d=i("TextInput");return l(),h(d,{label:"Name",modelValue:t.workflowForm.name,"onUpdate:modelValue":o[0]||(o[0]=n=>t.workflowForm.name=n),errorText:e.getFormError("name"),labelPopoverTitle:"What Is This?",placeholder:"Whatsapp waiting order to team",labelPopoverDescription:"The workflow name e.g Whatsapp waiting order to team"},null,8,["modelValue","errorText"])}const Le=b(Ue,[["render",Ne]]),De={mixins:[x],components:{TextareaInput:ce},props:{workflowStepForm:{type:Object}}};function Me(e,o,s,k,a,t){const d=i("TextareaInput");return l(),h(d,{rows:2,placeholder:"Additional notes",labelPopoverTitle:"What Is This?",modelValue:s.workflowStepForm.settings.note,"onUpdate:modelValue":o[0]||(o[0]=n=>s.workflowStepForm.settings.note=n),errorText:e.getFormError("settingsNote"),labelPopoverDescription:"Addtional notes to include together with the message"},null,8,["modelValue","errorText"])}const Ae=b(De,[["render",Me]]),Be={mixins:[x],components:{EmailInput:fe},props:{workflowStepForm:{type:Object}}};function je(e,o,s,k,a,t){const d=i("EmailInput");return l(),h(d,{placeholder:"sales@example.com",modelValue:s.workflowStepForm.settings.email,"onUpdate:modelValue":o[0]||(o[0]=n=>s.workflowStepForm.settings.email=n),errorText:e.getFormError("settingsEmail")},null,8,["modelValue","errorText"])}const He=b(Be,[["render",je]]),Pe={mixins:[x],components:{Checkbox:B,NumberInput:$,SelectInput:U},props:{workflowStepForm:{type:Object}}},Oe={class:"mt-0.5 mx-2"},Re=r("p",{class:"font-bold text-sm mb-1"},"Add delay",-1),ze=r("p",{class:"text-sm text-gray-500 max-w-96"},"Send message after a specified amount of time",-1),Ze=r("span",{class:"text-sm"}," Send after ",-1),qe={value:"hour"},Ge={value:"day"};function Xe(e,o,s,k,a,t){const d=i("NumberInput"),n=i("SelectInput"),u=i("Checkbox");return l(),h(u,{size:"xs",modelValue:s.workflowStepForm.settings.addDelay,"onUpdate:modelValue":o[2]||(o[2]=g=>s.workflowStepForm.settings.addDelay=g),errorText:e.getFormError("settingsAddDelay")},{default:c(()=>[r("div",Oe,[Re,ze,r("div",{class:T([s.workflowStepForm.settings.addDelay?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[Ze,m(d,{min:"1",placeholder:"1",class:"w-20 inline-block",modelValue:s.workflowStepForm.settings.delayTimeValue,"onUpdate:modelValue":o[0]||(o[0]=g=>s.workflowStepForm.settings.delayTimeValue=g)},null,8,["modelValue"]),m(n,{width:"w-24",class:"inline-block",modelValue:s.workflowStepForm.settings.delayTimeUnit,"onUpdate:modelValue":o[1]||(o[1]=g=>s.workflowStepForm.settings.delayTimeUnit=g)},{default:c(()=>[r("option",qe,_(s.workflowStepForm.settings.delayTimeValue=="1"?"Hour":"Hours"),1),r("option",Ge,_(s.workflowStepForm.settings.delayTimeValue=="1"?"Day":"Days"),1)]),_:1},8,["modelValue"])],2)])]),_:1},8,["modelValue","errorText"])}const $e=b(Pe,[["render",Xe]]),Ye={mixins:[x],components:{Checkbox:B,NumberInput:$,SelectInput:U},props:{workflowStepForm:{type:Object}}},Je={class:"mt-0.5 mx-2"},Ke=r("p",{class:"font-bold text-sm mb-1"},"Auto cancel if not paid",-1),Qe=r("p",{class:"text-sm text-gray-500 max-w-96"},"Automatically cancel the order if not paid after a specified amount of time",-1),et=r("span",{class:"text-sm"}," Cancel after ",-1),tt={value:"hour"},ot={value:"day"};function rt(e,o,s,k,a,t){const d=i("NumberInput"),n=i("SelectInput"),u=i("Checkbox");return l(),h(u,{size:"xs",modelValue:s.workflowStepForm.settings.autoCancel,"onUpdate:modelValue":o[2]||(o[2]=g=>s.workflowStepForm.settings.autoCancel=g),errorText:e.getFormError("settingsAutoCancel")},{default:c(()=>[r("div",Je,[Ke,Qe,r("div",{class:T([s.workflowStepForm.settings.autoCancel?"h-10 mt-4":"h-0 mt-0","text-gray-500 space-x-2 transition-all duration-500 overflow-hidden"])},[et,m(d,{min:"1",placeholder:"1",class:"w-20 inline-block",modelValue:s.workflowStepForm.settings.cancelTimeValue,"onUpdate:modelValue":o[0]||(o[0]=g=>s.workflowStepForm.settings.cancelTimeValue=g)},null,8,["modelValue"]),m(n,{width:"w-24",class:"inline-block",modelValue:s.workflowStepForm.settings.cancelTimeUnit,"onUpdate:modelValue":o[1]||(o[1]=g=>s.workflowStepForm.settings.cancelTimeUnit=g)},{default:c(()=>[r("option",tt,_(s.workflowStepForm.settings.cancelTimeValue=="1"?"Hour":"Hours"),1),r("option",ot,_(s.workflowStepForm.settings.cancelTimeValue=="1"?"Day":"Days"),1)]),_:1},8,["modelValue"])],2)])]),_:1},8,["modelValue","errorText"])}const st=b(Ye,[["render",rt]]),lt={mixins:[x],components:{TextInput:X,Checkbox:B},props:{workflowStepForm:{type:Object}},data(){return{appName:re.appName}}},it={class:"w-full mt-0.5 mx-2"},at=r("p",{class:"font-bold text-sm mb-1"},"Use review link",-1),nt=r("p",{class:"text-sm text-gray-500 max-w-96"},"Provide a link that will be used to take reviews",-1),wt=r("div",{class:"py-1.5 px-2 rounded-l-md bg-gray-50 text-gray-500 border-r whitespace-nowrap"},[r("svg",{class:"w-5 h-5 mt-0.5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M13.19 8.688a4.5 4.5 0 0 1 1.242 7.244l-4.5 4.5a4.5 4.5 0 0 1-6.364-6.364l1.757-1.757m13.35-.622 1.757-1.757a4.5 4.5 0 0 0-6.364-6.364l-4.5 4.5a4.5 4.5 0 0 0 1.242 7.244"})])],-1);function mt(e,o,s,k,a,t){const d=i("TextInput"),n=i("Checkbox");return l(),h(n,{size:"xs",modelValue:s.workflowStepForm.settings.useReviewLink,"onUpdate:modelValue":o[1]||(o[1]=u=>s.workflowStepForm.settings.useReviewLink=u),errorText:e.getFormError("settingsUseReviewLink")},{default:c(()=>[r("div",it,[at,nt,r("div",{class:T([s.workflowStepForm.settings.useReviewLink?"h-10 mt-4":"h-0 mt-0","w-full transition-all duration-500 overflow-hidden"])},[m(d,{class:"w-full p-0.5",labelPopoverTitle:"What Is This?",modelValue:s.workflowStepForm.settings.reviewLink,"onUpdate:modelValue":o[0]||(o[0]=u=>s.workflowStepForm.settings.reviewLink=u),errorText:e.getFormError("settingsReviewLink"),placeholder:"https://paypal.me/baby-cakes",labelPopoverDescription:"The link that will be used to redirect customers to place a review. If not provided, "+a.appName+" will use its own review system"},{prepend:c(()=>[wt]),_:1},8,["modelValue","errorText","labelPopoverDescription"])],2)])]),_:1},8,["modelValue","errorText"])}const dt=b(lt,[["render",mt]]),ct={mixins:[x,V],components:{Alert:D,TextHeader:P,UndoButton:O,SelectInput:U,SpinningLoader:me,PrimaryButton:M,MoreInfoPopover:R,FormErrorMessages:G,BulkMobileNumberInput:de,NoteTextarea:Ae,EmailTextInput:He,AddDelayCheckbox:$e,AutoCancelCheckbox:st,ReviewLinkTextInput:dt},props:{index:{type:Number},workflowStep:{type:[Object,null]}},emits:["onCreated","onDeleted"],data(){return{isDeleting:!1,isSubmitting:!1,workflowStepForm:{},apiState:E(),originalWorkflowStepForm:null,workflowState:p()}},watch:{mustSaveChanges(e){e?p().addUnsavedWorkflowStep(this.updateWorkflowStep):p().removeUnsavedWorkflowStep(this.updateWorkflowStep)},mustCreate(e){e?p().addUncreatedWorkflowStep(this.createWorkflowStep):p().removeUncreatedWorkflowStep(this.createWorkflowStep)},"workflowForm.trigger"(e){this.autoSelectExistingOptions()},"workflowStepForm.settings.action"(e){this.autoSelectExistingOptions()},"workflowStepForm.settings.recipient"(){this.autoSelectExistingOptions()}},computed:{workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},totalWorkflowSteps(){return this.workflowState.totalWorkflowSteps},actions(){return["waiting","cancelled","completed","on its way","ready for pickup","paid","unpaid","partially paid","pending payment","low stock"].includes(this.workflowForm.trigger)?["whatsapp","email","sms"]:[]},templates(){return["completed","paid"].includes(this.workflowForm.trigger)?["show status","request a review"]:["pending payment"].includes(this.workflowForm.trigger)?["show status","remind them to pay"]:[]},hasTemplates(){return this.templates.length>0},recipients(){return this.workflowForm.trigger=="low stock"?["team"]:["customer","team"]},remindThemToPay(){return this.workflowStepForm.settings.template=="remind them to pay"},requestAReview(){return this.workflowStepForm.settings.template=="request a review"},sendToCustomer(){return this.workflowStepForm.settings.recipient=="customer"},sendToTeam(){return this.workflowStepForm.settings.recipient=="team"},sendWhatsapp(){return this.workflowStepForm.settings.action=="whatsapp"},sendEmail(){return this.workflowStepForm.settings.action=="email"},sendSms(){return this.workflowStepForm.settings.action=="sms"},isCreating(){var e;return((e=this.workflowStep)==null?void 0:e.id)==null},isEditting(){var e;return((e=this.workflowStep)==null?void 0:e.id)!=null},mustSaveChanges(){return this.isEditting&&this.workflowStepFormHasChanged&&!this.isSubmitting},mustCreate(){return this.isCreating&&this.workflowStepFormHasChanged&&!this.isSubmitting},workflowStepFormHasChanged(){var e=W(this.workflowStepForm),o=W(this.originalWorkflowStepForm);return!oe(e,o)}},methods:{setFormFields(){this.isEditting?(this.workflowStepForm={settings:this.workflowStep.settings},this.workflowStepForm.settings.mobileNumbers&&(this.workflowStepForm.settings.mobileNumbers=this.workflowStepForm.settings.mobileNumbers.map(e=>e.international)),this.originalWorkflowStepForm=W(this.workflowStepForm)):this.workflowStepForm={settings:{notes:"",email:"",template:"",reviewLink:"",mobileNumbers:[],action:"whatsapp",recipient:"customer",useReviewLink:!1,addDelay:!1,delayTimeValue:"1",delayTimeUnit:"hour",autoCancel:!1,cancelTimeValue:"6",cancelTimeUnit:"hour"}}},reset(){this.isCreating?this.$emit("onDeleted",this.index):this.workflowStepForm=W(this.originalWorkflowStepForm)},autoSelectExistingOptions(){this.actions.includes(this.workflowStepForm.settings.action)||(this.actions.length>0?this.workflowStepForm.settings.action=this.actions[0]:this.workflowStepForm.settings.action=null),this.recipients.includes(this.workflowStepForm.settings.recipient)||(this.recipients.length>0?this.workflowStepForm.settings.recipient=this.recipients[0]:this.workflowStepForm.settings.recipient=null),this.templates.includes(this.workflowStepForm.settings.template)||(this.templates.length>0?this.workflowStepForm.settings.template=this.templates[0]:this.workflowStepForm.settings.template=null)},parseForm(){var e=W(this.workflowStepForm);return e.return=!0,this.isCreating&&(e.workflow_id=this.workflow.id),e},createMobileNumber(e,o,s){this.workflowStepForm.settings.mobileNumbers.push(e),s(),o()},updateMobileNumber(e,o,s,k){this.workflowStepForm.settings.mobileNumbers[o]=e,k(),s()},deleteMobileNumber(e,o,s){this.workflowStepForm.settings.mobileNumbers.splice(e,1),s(),o()},async createWorkflowStep(){try{this.hideFormErrors(),this.isSubmitting=!0;const e=await A(E().apiHome._links.createWorkflowStep,this.parseForm());e.status===200&&(e.data.created?(this.$emit("onCreated",e.data.workflowStep,this.index),this.originalWorkflowStepForm=W(this.workflowStepForm)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)))}catch(e){this.setServerFormErrors(e)}finally{this.isSubmitting=!1}},async updateWorkflowStep(){try{this.isSubmitting=!0;const e=await z(this.workflowStep._links.updateWorkflowStep,this.parseForm());e.status===200&&(e.data.updated||(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)),this.originalWorkflowStepForm=W(this.workflowStepForm))}catch(e){this.setServerFormErrors(e)}finally{this.isSubmitting=!1}},deleteWorkflowStep(){if(this.isCreating){this.$emit("onDeleted",this.index),p().uncreatedWorkflowSteps.splice(p().uncreatedWorkflowSteps.indexOf(this.index),1);return}this.isDeleting=!0,Z(this.workflowStep._links.deleteWorkflowStep).then(e=>{e.status==200?e.data.deleted?(this.$emit("onDeleted",this.index),p().unsavedWorkflowSteps.splice(p().unsavedWorkflowSteps.indexOf(this.index),1)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)),this.isDeleting=!1}).catch(e=>{this.isDeleting=!1,this.setServerFormErrors(e)})}},beforeUnmount(){this.workflowState.removeResetableWorkflowStep(),p().removeUncreatedWorkflowStep(this.createWorkflowStep)},created(){this.setFormFields(),this.mustCreate&&p().addUncreatedWorkflowStep(this.createWorkflowStep),p().addResetableWorkflowStep(this.reset)}},ft={class:"relative"},ut={class:"grid grid-cols-2 gap-x-4"},pt={class:"col-span-1 flex justify-end items-center space-x-4"},ht={class:"flex items-center space-x-2"},kt=r("span",{class:"text-sm"},"Send",-1),gt={class:"w-full flex items-center space-x-2"},St={key:0,class:"w-6 h-6 flex-shrink-0",fill:"#44c152",version:"1.1",id:"Layer_1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 308 308","xml:space":"preserve"},_t=r("g",{id:"XMLID_468_"},[r("path",{id:"XMLID_469_",d:"M227.904,176.981c-0.6-0.288-23.054-11.345-27.044-12.781c-1.629-0.585-3.374-1.156-5.23-1.156c-3.032,0-5.579,1.511-7.563,4.479c-2.243,3.334-9.033,11.271-11.131,13.642c-0.274,0.313-0.648,0.687-0.872,0.687c-0.201,0-3.676-1.431-4.728-1.888c-24.087-10.463-42.37-35.624-44.877-39.867c-0.358-0.61-0.373-0.887-0.376-0.887c0.088-0.323,0.898-1.135,1.316-1.554c1.223-1.21,2.548-2.805,3.83-4.348c0.607-0.731,1.215-1.463,1.812-2.153c1.86-2.164,2.688-3.844,3.648-5.79l0.503-1.011c2.344-4.657,0.342-8.587-0.305-9.856c-0.531-1.062-10.012-23.944-11.02-26.348c-2.424-5.801-5.627-8.502-10.078-8.502c-0.413,0,0,0-1.732,0.073c-2.109,0.089-13.594,1.601-18.672,4.802c-5.385,3.395-14.495,14.217-14.495,33.249c0,17.129,10.87,33.302,15.537,39.453c0.116,0.155,0.329,0.47,0.638,0.922c17.873,26.102,40.154,45.446,62.741,54.469c21.745,8.686,32.042,9.69,37.896,9.69c0.001,0,0.001,0,0.001,0c2.46,0,4.429-0.193,6.166-0.364l1.102-0.105c7.512-0.666,24.02-9.22,27.775-19.655c2.958-8.219,3.738-17.199,1.77-20.458C233.168,179.508,230.845,178.393,227.904,176.981z"}),r("path",{id:"XMLID_470_",d:"M156.734,0C73.318,0,5.454,67.354,5.454,150.143c0,26.777,7.166,52.988,20.741,75.928L0.212,302.716c-0.484,1.429-0.124,3.009,0.933,4.085C1.908,307.58,2.943,308,4,308c0.405,0,0.813-0.061,1.211-0.188l79.92-25.396c21.87,11.685,46.588,17.853,71.604,17.853C240.143,300.27,308,232.923,308,150.143C308,67.354,240.143,0,156.734,0zM156.734,268.994c-23.539,0-46.338-6.797-65.936-19.657c-0.659-0.433-1.424-0.655-2.194-0.655c-0.407,0-0.815,0.062-1.212,0.188l-40.035,12.726l12.924-38.129c0.418-1.234,0.209-2.595-0.561-3.647c-14.924-20.392-22.813-44.485-22.813-69.677c0-65.543,53.754-118.867,119.826-118.867c66.064,0,119.812,53.324,119.812,118.867C276.546,215.678,222.799,268.994,156.734,268.994z"})],-1),xt=[_t],bt={key:1,class:"w-6 h-6 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},vt=r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.764 9.764 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.457-.133-.901-.467-1.226C3.93 16.178 3 14.189 3 12c0-4.556 4.03-8.25 9-8.25s9 3.694 9 8.25Z"},null,-1),Ft=[vt],yt={key:2,class:"w-6 h-6 text-gray-500 flex-shrink-0",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Wt=r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M21.75 6.75v10.5a2.25 2.25 0 0 1-2.25 2.25h-15a2.25 2.25 0 0 1-2.25-2.25V6.75m19.5 0A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25m19.5 0v.243a2.25 2.25 0 0 1-1.07 1.916l-7.5 4.615a2.25 2.25 0 0 1-2.36 0L3.32 8.91a2.25 2.25 0 0 1-1.07-1.916V6.75"},null,-1),Tt=[Wt],Ct=["value"],It={class:"col-span-1 flex justify-start items-center space-x-4"},Et=r("span",{class:"text-sm"},"to",-1),Vt=["value"],Ut={key:0,class:"col-span-1 flex justify-end items-center space-x-4 mt-4"},Nt=r("span",{class:"text-sm"},"to",-1),Lt=["value"],Dt={class:"space-y-4 border-t border-dashed pt-4 mt-4"},Mt={class:"flex items-center space-x-2 absolute top-1 right-0"},At=r("span",{class:"text-xs ml-2"},"Deleting...",-1),Bt=r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"},null,-1),jt=[Bt],Ht=r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M3.75 3.75v4.5m0-4.5h4.5m-4.5 0L9 9M3.75 20.25v-4.5m0 4.5h4.5m-4.5 0L9 15M20.25 3.75h-4.5m4.5 0v4.5m0-4.5L15 9m5.25 11.25h-4.5m4.5 0v-4.5m0 4.5L15 15"},null,-1),Pt=[Ht];function Ot(e,o,s,k,a,t){const d=i("SelectInput"),n=i("EmailTextInput"),u=i("BulkMobileNumberInput"),g=i("NoteTextarea"),F=i("ReviewLinkTextInput"),I=i("AddDelayCheckbox"),L=i("AutoCancelCheckbox"),N=i("SpinningLoader");return l(),w("div",null,[s.index!=0?(l(),w("div",{key:0,class:T([t.mustCreate?"border-gray-200":"border-blue-200","w-0 h-6 ml-8 border-l-2 border-dashed"])},null,2)):S("",!0),r("div",{class:T([t.mustCreate?"bg-gray-50 border-gray-200":"bg-blue-50/50 border-blue-200","border border-dashed rounded-lg shadow-sm p-4 relative"])},[r("div",ft,[r("div",ut,[r("div",pt,[r("div",ht,[r("div",{class:T([t.mustCreate?"text-gray-400 border bg-gray-50 border-gray-300":"text-blue-400 border bg-blue-50 border-blue-300","w-8 h-8 rounded-full font-bold text-xs flex items-center justify-center"])},[r("span",null,_(s.index+1),1)],2)]),kt,r("div",gt,[t.sendWhatsapp?(l(),w("svg",St,xt)):t.sendSms?(l(),w("svg",bt,Ft)):t.sendEmail?(l(),w("svg",yt,Tt)):S("",!0),m(d,{class:"w-full",modelValue:a.workflowStepForm.settings.action,"onUpdate:modelValue":o[0]||(o[0]=f=>a.workflowStepForm.settings.action=f),errorText:e.getFormError("settingsAction")},{default:c(()=>[(l(!0),w(v,null,C(t.actions,f=>(l(),w("option",{key:f,value:f},_(e.capitalize(f)),9,Ct))),128))]),_:1},8,["modelValue","errorText"])])]),r("div",It,[Et,m(d,{class:"w-60",modelValue:a.workflowStepForm.settings.recipient,"onUpdate:modelValue":o[1]||(o[1]=f=>a.workflowStepForm.settings.recipient=f),errorText:e.getFormError("settings.recipient")},{default:c(()=>[(l(!0),w(v,null,C(t.recipients,f=>(l(),w("option",{key:f,value:f},_(e.capitalize(f)),9,Vt))),128))]),_:1},8,["modelValue","errorText"])]),t.sendToCustomer&&t.hasTemplates?(l(),w("div",Ut,[Nt,m(d,{class:"w-60",modelValue:a.workflowStepForm.settings.template,"onUpdate:modelValue":o[2]||(o[2]=f=>a.workflowStepForm.settings.template=f),errorText:e.getFormError("settingsTemplate")},{default:c(()=>[(l(!0),w(v,null,C(t.templates,f=>(l(),w("option",{key:f,value:f},_(e.capitalize(f)),9,Lt))),128))]),_:1},8,["modelValue","errorText"])])):S("",!0)]),r("div",Dt,[t.sendToTeam?(l(),w(v,{key:0},[t.sendEmail?(l(),h(n,{key:0,workflowStepForm:a.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),t.sendWhatsapp||t.sendSms?(l(),h(u,{key:1,isSubmitting:!1,showWhatsappIcon:t.sendWhatsapp,createMobileNumber:t.createMobileNumber,updateMobileNumber:t.updateMobileNumber,deleteMobileNumber:t.deleteMobileNumber,mobileNumbers:a.workflowStepForm.settings.mobileNumbers},null,8,["showWhatsappIcon","createMobileNumber","updateMobileNumber","deleteMobileNumber","mobileNumbers"])):S("",!0)],64)):t.sendToCustomer?(l(),w(v,{key:1},[t.sendWhatsapp||t.sendEmail?(l(),h(g,{key:0,workflowStepForm:a.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),t.requestAReview?(l(),h(F,{key:1,workflowStepForm:a.workflowStepForm},null,8,["workflowStepForm"])):S("",!0),t.remindThemToPay?(l(),w(v,{key:2},[m(I,{workflowStepForm:a.workflowStepForm},null,8,["workflowStepForm"]),m(L,{workflowStepForm:a.workflowStepForm},null,8,["workflowStepForm"])],64)):S("",!0)],64)):S("",!0)]),r("div",Mt,[a.isDeleting?(l(),h(N,{key:0,type:"danger"},{default:c(()=>[At]),_:1})):t.totalWorkflowSteps>1?(l(),w("svg",{key:1,onClick:o[3]||(o[3]=j((...f)=>t.deleteWorkflowStep&&t.deleteWorkflowStep(...f),["stop","prevent"])),class:"w-4 h-4 cursor-pointer hover:text-red-500",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},jt)):S("",!0),(l(),w("svg",{onClick:o[4]||(o[4]=j(()=>{},["stop"])),class:"draggable-handle w-4 h-4 cursor-grab hover:text-gray-500 active:cursor-grabbing",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},Pt))])])],2)])}const Rt=b(ct,[["render",Ot]]),zt={mixins:[x,V],components:{Alert:D,draggable:ne,BadgeIndicator:we,WorkflowStep:Rt},data(){return{maxWorkflowSteps:5,apiState:E(),isLoadingWorkflowSteps:!1,workflowState:p(),isUpdatingWorkflowArrangement:!1}},computed:{workflow(){return this.workflowState.workflow},isEditting(){return this.workflowState.isEditting},workflowSteps(){return this.workflowState.workflowSteps},hasWorkflowSteps(){return this.workflowState.hasWorkflowSteps},totalWorkflowSteps(){return this.workflowState.totalWorkflowSteps}},methods:{addWorkflowStep(){this.workflowState.workflowSteps.push({tempId:this.generateUniqueId()})},onCreated(e,o){this.workflowState.workflowSteps[o]=e},onDeleted(e){this.workflowState.workflowSteps.splice(e,1);const o=this.workflowState.uncreatedWorkflowSteps.length>0,s=this.workflowState.workflowSteps.filter(k=>k.id).length>0;this.isEditting&&!s&&o&&this.workflowState.createWorkflowSteps()},showWorkflowSteps(){this.isLoadingWorkflowSteps=!0,q(this.workflow._links.showWorkflowSteps).then(e=>{e.status==200&&(this.pagination=e.data,this.workflowState.workflowSteps=this.pagination.data),this.isLoadingWorkflowSteps=!1}).catch(e=>{this.isLoadingWorkflowSteps=!1,this.setServerFormErrors(e)})},async updateWorkflowStepArrangement(e=!0){if(this.workflow==null)return;this.isUpdatingWorkflowArrangement=!0;const o={workflowId:this.workflow.id,workflowStepIds:this.workflowSteps.filter(s=>!s.tempId).map(s=>s.id)};if(o.workflowStepIds.length===0){this.isUpdatingWorkflowArrangement=!1;return}try{const s=await A(this.apiState.apiHome._links.updateWorkflowStepArrangement,o);s.status===200&&(s.data.updated?e&&this.showSuccessfulNotification("Workflow arrangement updated"):(this.setFormError("general",s.data.message),this.showUnsuccessfulNotification(s.data.message)))}catch(s){this.setServerFormErrors(s)}finally{this.isUpdatingWorkflowArrangement=!1}}},created(){this.workflow&&this.showWorkflowSteps(),this.workflowState.updateWorkflowStepArrangement=this.updateWorkflowStepArrangement}},Zt={key:0,class:"flex justify-center"},qt=r("svg",{class:"w-6 h-6 text-blue-300 mb-4",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15.75 17.25 12 21m0 0-3.75-3.75M12 21V3"})],-1),Gt=[qt],Xt={key:1,class:"flex justify-center mb-16"},$t={class:"flex items-center space-x-2"},Yt=r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"m11.25 11.25.041-.02a.75.75 0 0 1 1.063.852l-.708 2.836a.75.75 0 0 0 1.063.853l.041-.021M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9-3.75h.008v.008H12V8.25Z"})],-1),Jt={class:"font-bold"};function Kt(e,o,s,k,a,t){const d=i("WorkflowStep"),n=i("draggable"),u=i("BadgeIndicator"),g=i("Alert");return l(),w("div",null,[t.hasWorkflowSteps?(l(),w("div",Zt,Gt)):S("",!0),m(n,{class:"mb-8",handle:".draggable-handle","ghost-class":"bg-yellow-50",modelValue:a.workflowState.workflowSteps,"onUpdate:modelValue":o[0]||(o[0]=F=>a.workflowState.workflowSteps=F),onChange:t.updateWorkflowStepArrangement},{default:c(()=>[(l(!0),w(v,null,C(t.workflowSteps,(F,I)=>(l(),h(d,{index:I,onOnCreated:t.onCreated,onOnDeleted:t.onDeleted,workflowStep:F,key:F.id??F.tempId},null,8,["index","onOnCreated","onOnDeleted","workflowStep"]))),128))]),_:1},8,["modelValue","onChange"]),t.totalWorkflowSteps<a.maxWorkflowSteps?(l(),w("div",Xt,[m(u,{type:"primary",showDot:!1,size:"px-8 py-2",clickable:!0,action:()=>t.addWorkflowStep(),text:t.hasWorkflowSteps?t.totalWorkflowSteps==a.maxWorkflowSteps-1?"+ Finally this":"+ Then this":"+ Do this"},null,8,["action","text"])])):S("",!0),t.totalWorkflowSteps==a.maxWorkflowSteps?(l(),h(g,{key:2,type:"info",class:"flex justify-between items-center mb-4"},{default:c(()=>[r("div",$t,[Yt,r("span",null,[y("You can only add up to "),r("span",Jt,_(a.maxWorkflowSteps)+" tasks",1),y(" per workflow")])])]),_:1})):S("",!0)])}const Qt=b(zt,[["render",Kt]]),eo={mixins:[x],components:{ConfirmModal:ue,PrimaryButton:M},data(){return{isDeleting:!1,storeState:H(),workflowState:p()}},computed:{store(){return this.storeState.store},workflow(){return this.workflowState.workflow},workflowForm(){return this.workflowState.workflowForm},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow}},methods:{deleteWorkflow(){this.isDeleting=!0,Z(this.workflow._links.deleteWorkflow).then(e=>{e.status==200?e.data.deleted?(this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),this.showSuccessfulNotification("Workflow deleted")):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)),this.isDeleting=!1}).catch(e=>{this.isDeleting=!1,this.setServerFormErrors(e)})}}},to={class:"font-bold text-black"},oo={class:"flex justify-end"},ro=r("p",{class:"text-lg font-bold border-b border-dashed pb-4 mb-4"},"Confirm Delete",-1),so={class:"mb-8"},lo={class:"font-bold text-black"};function io(e,o,s,k,a,t){const d=i("PrimaryButton"),n=i("ConfirmModal");return t.workflow?(l(),w("div",{key:0,class:T(["space-y-4 shadow-lg rounded-lg border p-4",t.isLoadingWorkflow?"bg-gray-50":"border-red-300 bg-red-50"])},[r("p",null,[y("Do you want to permanently delete "),r("span",to,_(t.workflowForm.name),1),y("? Once this workflow is deleted you will not be able to recover it.")]),r("div",oo,[m(n,{approveText:"Delete Workflow",approveAction:t.deleteWorkflow,isLoading:a.isDeleting},{content:c(()=>[ro,r("p",so,[y("Are you sure you want to permanently delete "),r("span",lo,_(t.workflowForm.name),1),y("?")])]),trigger:c(u=>[m(d,{action:u.showModal,loading:a.isDeleting,class:"w-60",type:"danger"},{default:c(()=>[y(" Delete Workflow ")]),_:2},1032,["action","loading"])]),_:1},8,["approveAction","isLoading"])])],2)):S("",!0)}const ao=b(eo,[["render",io]]),no={mixins:[x],components:{ToogleSwitch:pe},data(){return{workflowState:p()}},computed:{workflowForm(){return this.workflowState.workflowForm}}};function wo(e,o,s,k,a,t){const d=i("ToogleSwitch");return l(),h(d,{size:"md",modelValue:t.workflowForm.active,"onUpdate:modelValue":o[0]||(o[0]=n=>t.workflowForm.active=n),labelPopoverTitle:"What Is This?",errorText:e.getFormError("active"),labelPopoverDescription:"Turn on so that your workflow automates processes. Turn off so that your workflow does not automate processes"},{default:c(()=>[y(" Active ")]),_:1},8,["modelValue","errorText"])}const mo=b(no,[["render",wo]]),co={mixins:[x],components:{Alert:D,TextHeader:P,BackButton:se,UndoButton:O,ShineEffect:le,PrimaryButton:M,LineSkeleton:ie,BackdropLoader:ae,MoreInfoPopover:R,FormErrorMessages:G,Trigger:Ve,NameTextInput:Le,WorkflowSteps:Qt,DeleteWorkflow:ao,ActiveToggleSwitch:mo},data(){return{apiState:E(),storeState:H(),workflowState:p()}},computed:{store(){return this.storeState.store},workflow(){return this.workflowState.workflow},isCreating(){return this.workflowState.isCreating},isEditting(){return this.workflowState.isEditting},mustCreate(){return this.workflowState.mustCreate},workflowForm(){return this.workflowState.workflowForm},isSubmitting(){return this.workflowState.isSubmitting},mustSaveChanges(){return this.workflowState.mustSaveChanges},isLoadingWorkflow(){return this.workflowState.isLoadingWorkflow},workflowFormHasName(){return this.workflowState.workflowFormHasName},workflowFormHasChanged(){return this.workflowState.workflowFormHasChanged},hasUnsavedWorkflowSteps(){return this.workflowState.hasUnsavedWorkflowSteps},hasUncreatedWorkflowSteps(){return this.workflowState.hasUncreatedWorkflowSteps}},methods:{goBack(){this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)})},parseForm(){var e=W(this.workflowForm);return e.return=!0,this.isCreating&&(e.store_id=this.store.id),e},getWorkflow(){this.workflowState.setIsLoadingWorkflow(!0);const e={};q(this.$route.params.workflow_href,e).then(o=>{o.status==200&&o.data.exists&&(this.workflowState.setWorkflow(o.data.workflow),this.workflowState.setWorkflowForm(o.data.workflow)),this.workflowState.setIsLoadingWorkflow(!1)}).catch(o=>{this.workflowState.setIsLoadingWorkflow(!1),this.setServerFormErrors(o)})},submit:async function(){const e=this.mustCreate;this.workflowState.setIsSuccessful(!1);const o=this.mustSaveChanges;this.isEditting?await this.updateWorkflow():await this.createWorkflow(),this.workflowState.hasWorkflow&&(this.hasUnsavedWorkflowSteps?await this.workflowState.updateWorkflowSteps():await this.workflowState.createWorkflowSteps(),await this.workflowState.updateWorkflowStepArrangement(!1),e&&this.showSuccessfulNotification("Workflow created"),o&&this.showSuccessfulNotification("Workflow updated"),this.workflowState.hasWorkflowSteps&&this.$router.push({name:"show-store-workflows",params:{store_href:this.store._links.showStore}}).then(()=>{window.scrollTo(0,0)}),(e||o)&&this.workflowState.setIsSubmittingWorkflow(!1))},createWorkflow:async function(){if(this.hideFormErrors(),this.workflowForm.name.trim()=="")this.setFormError("name","Enter workflow name");else{if(!this.mustCreate)return;this.workflowState.setIsSubmittingWorkflow(!0);try{const e=await A(E().apiHome._links.createWorkflow,this.parseForm());e.status==200&&(e.data.created?(this.workflowState.setIsSuccessful(!0),this.workflowState.setWorkflowForm(this.workflowForm),this.workflowState.setWorkflow(e.data.workflow)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)))}catch(e){this.workflowState.setIsSubmittingWorkflow(!1),this.setServerFormErrors(e)}}},updateWorkflow:async function(){if(this.hideFormErrors(),this.workflowForm.name.trim()=="")this.setFormError("name","Enter workflow name");else{if(!this.mustSaveChanges)return;this.workflowState.setIsSubmittingWorkflow(!0);try{const e=await z(this.workflow._links.updateWorkflow,this.parseForm());e.status==200&&(e.data.updated?(this.workflowState.setIsSuccessful(!0),this.workflowState.setWorkflowForm(this.workflowForm),this.workflowState.setWorkflow(e.data.workflow)):(this.setFormError("general",e.data.message),this.showUnsuccessfulNotification(e.data.message)))}catch(e){this.workflowState.setIsSubmittingWorkflow(!1),this.setServerFormErrors(e)}}}},beforeUnmount(){this.workflowState.beforeUnmount()},created(){this.workflowState.setWorkflowForm(),this.isEditting&&this.getWorkflow()}},fo={class:"bg-white shadow-lg border p-8 rounded-lg relative"},uo={class:"space-y-4",action:"#",method:"POST"},po={class:"flex justify-start items-center border-dashed py-6"},ho={key:0,class:"flex items-center space-x-2"},ko={class:"flex items-center space-x-2"},go=r("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})],-1),So={class:"flex items-center space-x-2"},_o=r("span",{class:"ml-1"},"Undo",-1),xo=r("div",{class:"flex items-center space-x-2"},[r("svg",{class:"w-6 h-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"})]),r("span",null,"Give your workflow a name")],-1);function bo(e,o,s,k,a,t){const d=i("BackdropLoader"),n=i("BackButton"),u=i("LineSkeleton"),g=i("ShineEffect"),F=i("TextHeader"),I=i("MoreInfoPopover"),L=i("UndoButton"),N=i("PrimaryButton"),f=i("Alert"),Y=i("FormErrorMessages"),J=i("ActiveToggleSwitch"),K=i("NameTextInput"),Q=i("Trigger"),ee=i("WorkflowSteps"),te=i("DeleteWorkflow");return l(),w("div",fo,[t.isLoadingWorkflow||t.isSubmitting?(l(),h(d,{key:0,class:"rounded-lg"})):S("",!0),r("form",uo,[r("div",po,[m(n,{class:"w-16 mr-4",action:t.goBack},null,8,["action"]),t.isLoadingWorkflow?(l(),w("div",ho,[m(g,{class:"flex space-x-2"},{default:c(()=>[m(u,{width:"w-40 mt-2"}),m(u,{width:"w-4 mt-2"})]),_:1})])):(l(),w(v,{key:1},[m(F,null,{default:c(()=>[y(_(t.isCreating?"Add Workflow":t.workflowForm.name),1)]),_:1}),m(I,{class:"ml-2 mt-1",title:"What Is This?",description:"Workflows are automated processes that manage tasks like order alerts, payment links, and delivery updates for smooth operations and a seamless customer experience",placement:"top"})],64))]),r("div",{class:T([t.workflowFormHasName&&(t.mustSaveChanges||t.mustCreate||t.hasUnsavedWorkflowSteps||t.hasUncreatedWorkflowSteps)?"h-20 mb-8":"h-0 mb-0 p-0","transition-all duration-500 overflow-hidden"])},[m(f,{type:"warning",class:"flex justify-between items-center border border-dashed"},{default:c(()=>[r("div",ko,[go,r("span",null,_(t.isEditting?"Please save your changes":"Create your workflow"),1)]),r("div",So,[m(L,{action:a.workflowState.reset,type:"light",size:"xs"},{default:c(()=>[_o]),_:1},8,["action"]),m(N,{action:t.submit,loading:t.isSubmitting,type:"dark"},{default:c(()=>[r("span",null,_(t.isEditting?"Save Changes":"Create"),1)]),_:1},8,["action","loading"])])]),_:1})],2),m(Y),m(J),m(K),m(Q),t.isLoadingWorkflow?S("",!0):(l(),h(ee,{key:0})),!t.workflowFormHasName&&(t.hasUnsavedWorkflowSteps||t.hasUncreatedWorkflowSteps)?(l(),h(f,{key:1,type:"warning",class:"flex justify-between items-center mb-4"},{default:c(()=>[xo]),_:1})):S("",!0),m(N,{action:t.submit,disabled:t.isSubmitting||!(t.workflowFormHasName&&(t.mustSaveChanges||t.mustCreate||t.hasUnsavedWorkflowSteps||t.hasUncreatedWorkflowSteps)),type:"dark",class:"w-full"},{default:c(()=>[r("span",null,_(t.isEditting||t.hasUnsavedWorkflowSteps?"Save Changes":"Create"),1)]),_:1},8,["action","disabled"]),r("div",null,[m(te,{class:"mt-16"})])])])}const ir=b(co,[["render",bo]]);export{ir as default};
